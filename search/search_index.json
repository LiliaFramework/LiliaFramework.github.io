{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Home","text":"<p>Lilia is an advanced roleplay gamemode framework for Garry's Mod. Inspired by Lillia, a character from League of Legends, Lilia aims to fulfill your dreams of creating immersive roleplay servers. With a focus on stability, rich features, and open-source flexibility, Lilia provides a platform for users to bring their visions to life easily and effectively.</p>"},{"location":"#server-owners","title":"Server Owners","text":"<p>If you're looking to get your Lilia server up and running as soon as possible, check out the Getting Started guide in the manual.</p>"},{"location":"#community","title":"Community","text":"<p>Questions? Want to show off your work? Maybe drop a new module release? Come join our community Discord server.</p>"},{"location":"#contributing","title":"Contributing","text":"<p>If you'd like to contribute code, you can visit the GitHub repository and make a pull request.</p>"},{"location":"#learning","title":"Learning","text":"<p>Getting started with developing using the Lilia framework requires an intermediate level of Garry's Mod Lua knowledge. You'll want to learn the basics before you start making a schema. The Garry's Mod Wiki is a good place to start.</p>"},{"location":"about/","title":"About Lilia","text":"<p>General information about the Lilia framework, its features, and compatibility.</p> Compatibility <p>Integration guides for popular Garry's Mod addons and frameworks.</p> Features <p>Essential features for server owners including permissions, sit rooms, and configuration.</p> Installation <p></p>"},{"location":"about/compatibility/","title":"Addon Compatibility","text":"<p>Information about addon integrations and compatibility features in Lilia.</p> Overview <p>Lilia is designed to be highly compatible with the most popular Garry's Mod addons. The framework includes built-in compatibility layers that ensure external systems (like admin mods, vehicle systems, and UI addons) work seamlessly with Lilia's core mechanics.</p> <p>These integrations typically handle rank synchronization, money conversion, permission checking, and UI conflict resolution automatically, allowing server owners to use their favorite workshop content without manual configuration.</p> DarkRP Features <ul> <li>Allows you to use almost all DarkRP addons directly with Lilia.</li> <li>Maintains compatibility with DarkRP money, jobs, and entities.</li> <li>Fixes common errors that usually happen when moving from DarkRP to a new framework.</li> </ul> Advanced Duplicator Features <ul> <li>Blocks players from spawning problematic or restricted dupes.</li> <li>Prevents gigantic props from crashing the server.</li> <li>Alerts admins if someone tries to use a malicious dupe.</li> </ul> Advanced Duplicator 2 Features <ul> <li>Stops players from spawning dupes that lag or crash the server.</li> <li>Respects your server's blacklist settings.</li> </ul> ArcCW Features <ul> <li>Hides the default ArcCW HUD so it doesn't clash with Lilia's interface.</li> <li>Configures weapon dropping and attachments to feel natural in RP.</li> <li>Automatically applies the best settings for server performance.</li> </ul> CAMI Features <ul> <li>Makes other admin addons recognize your Lilia staff ranks.</li> <li>Automatically syncs rank changes to your database.</li> <li>Prevents permission conflicts between different addons.</li> </ul> LVS Features <ul> <li>Stops you from accidentally hurting yourself with your own vehicle's weapons or collisions.</li> </ul> PAC3 Features <ul> <li>Ensures everyone sees each other's outfits correctly.</li> <li>Adds easy commands to fix or disable outfits if they cause lag.</li> <li>Prevents loading outfits from external websites for security.</li> <li>Automatically puts outfits on player ragdolls when they die.</li> </ul> PermaProps Features <ul> <li>Stops PermaProps from interfering with Lilia's own save system.</li> <li>Warns you if you try to save a prop that is already saved by Lilia.</li> </ul> Prone Mod Features <ul> <li>Automatically stands players up when they die or switch characters.</li> </ul> SAM Features <ul> <li>Allows you to use SAM commands while keeping Lilia's permission system.</li> <li>Syncs staff ranks perfectly between both systems.</li> <li>Adds useful features like blind/unblind commands and playtime tracking.</li> <li>Ensures admins can only ban/kick people lower than them.</li> </ul> SAdmin Features <ul> <li>Lets you use SAdmin's menu and commands with Lilia's ranks.</li> <li>Enforces all proper permission checks for kicking, banning, etc.</li> <li>Syncs usergroups automatically.</li> </ul> Simfphys Vehicles Features <ul> <li>Drivers take damage if they crash their car.</li> <li>Prevents people from sitting on top of cars (anti-abuse).</li> <li>Adds trunk storage support to vehicles.</li> <li>Allows you to restrict vehicle editing to admins only.</li> </ul> Sit Anywhere Features <ul> <li>Stops players from sitting on each other or on moving cars.</li> <li>Prevents players from using seats to glitch through walls.</li> </ul> ServerGuard Features <ul> <li>Links ServerGuard's ranks with Lilia's permission system.</li> <li>Allows ServerGuard commands to work seamlessly.</li> </ul> ULX Features <ul> <li>Lets you use ULX commands and menus with Lilia.</li> <li>Syncs all your admins and superadmins automatically.</li> <li>Ensures ULX respects Lilia's permission rules.</li> </ul> VCMod Features <ul> <li>When you buy a car or upgrade in VCMod, it takes money from your character.</li> <li>Ensures you can't buy things if you don't have the cash.</li> </ul> VJBase Features <ul> <li>Removes laggy or insecure features automatically.</li> <li>Prevents players from spawning game-breaking NPCs.</li> <li>Adjusts settings based on how many players are online to reduce lag.</li> </ul> Wiremod Features <ul> <li>Prevents regular players from uploading potentially dangerous E2 code.</li> <li>Restricts advanced features to Admins or Donators only.</li> <li>Ensures Wiremod respects Lilia's save/protection systems.</li> </ul>"},{"location":"about/features/","title":"Features","text":"<p>Discover the powerful tools and systems that make Lilia a leading roleplay framework.</p> Overview <p>Lilia is built with a focus on developer flexibility and player performance. It provides a robust suite of built-in systems that handle everything from character persistence to advanced UI interactions, allowing you to focus on creating unique roleplay experiences.</p> Character System Multi-Character Support <ul> <li>Multiple Characters Per PlayerPlayers can create and manage several different characters on the same server, each with their own unique identity, inventory, and progress</li> <li>Main Character SelectionPlayers can designate one character as their \"main\" for quick loading when joining the server</li> <li>Character SwitchingEasily switch between characters without leaving the server through an intuitive menu</li> <li>Character Limit ManagementServer owners can set how many characters each player is allowed to create</li> <li>Extra Character SlotsAdministrators can grant individual players bonus character slots beyond the standard limit</li> </ul> Character Information <ul> <li>Custom NamesEach character has their own unique name that other players will see</li> <li>Physical DescriptionCharacters can have detailed descriptions that others can read when examining them</li> <li>Model SelectionChoose from available player models to represent your character's appearance</li> <li>Faction AssignmentCharacters belong to specific factions (groups) that determine their role on the server</li> <li>Class SystemWithin factions, characters can have specialized classes with unique abilities or equipment</li> <li>Character AttributesTrack character stats like strength, endurance, or other custom attributes that affect gameplay</li> <li>Character FlagsSpecial permissions that unlock specific features, items, or abilities for individual characters</li> </ul> Character Recognition <ul> <li>Name Recognition SystemCharacters don't automatically know each other's names - they must introduce themselves first</li> <li>Unknown Names DisplayUnrecognized characters appear as generic descriptions (like \"Unknown Man\" or \"Unknown Woman\") until properly introduced</li> <li>Recognition ManagementPlayers can introduce themselves to others, building relationships naturally through roleplay</li> </ul> Character Persistence <ul> <li>Automatic SavingAll character data, including inventory, position, and stats, saves automatically</li> <li>Cross-Session ContinuityCharacters remember everything between play sessions</li> <li>Character HistoryTrack each character's actions, warnings, and administrative notes</li> </ul> Inventory &amp; Items Grid-Based Inventory <ul> <li>Visual Grid SystemInventory uses an intuitive grid layout where items take up physical space based on their size</li> <li>Drag and DropMove items around by clicking and dragging them to different slots</li> <li>Item RotationRotate items to fit them more efficiently in your inventory space</li> <li>Weight SystemItems have weight, and carrying too much will slow you down or prevent you from picking up more</li> <li>Inventory CapacityEach character has a limited amount of space, encouraging strategic item management</li> </ul> Container System <ul> <li>Bags and ContainersSpecial items like backpacks, suitcases, or bags that provide additional storage space</li> <li>Nested InventoriesOpen containers to access their own separate inventory grid</li> <li>Container VarietyDifferent containers offer different amounts of space and weight capacity</li> </ul> Item Interactions <ul> <li>Use ItemsClick items to use them - eat food, drink beverages, equip weapons, etc.</li> <li>Drop ItemsRemove items from your inventory and drop them on the ground for others to find</li> <li>Give ItemsTransfer items directly to other players through a trade interface</li> <li>Examine ItemsView detailed information about any item, including descriptions and properties</li> <li>Item CooldownsSome items have cooldown periods to prevent spam or abuse</li> </ul> Storage Entities <ul> <li>Persistent StoragePlace storage containers in the world that save their contents even when no one is nearby</li> <li>Password ProtectionLock storage containers with passwords to prevent unauthorized access</li> <li>Shared StorageMultiple players can access the same storage if they know the password</li> <li>Storage ManagementAdministrators can create, remove, and manage storage containers</li> </ul> Chat &amp; Communication Chat Channels <ul> <li>Local Chat (IC)Speak in-character to players near you - others far away won't see your messages</li> <li>Out-of-Character Chat (OOC)Talk to all players on the server about non-roleplay topics</li> <li>WhisperSend quiet messages that only very close players can see</li> <li>YellShout messages that can be heard from further away than normal speech</li> <li>Admin ChatPrivate channel for staff members to communicate without players seeing</li> <li>Event ChatSpecial channel for event coordinators to make server-wide announcements</li> <li>Local Event ChatEvent announcements that only affect players in a specific area</li> <li>Help ChatRequest assistance from staff members when you need support</li> </ul> Chat Features <ul> <li>Rich Text FormattingMessages can include colors, formatting, and special styling</li> <li>Command AutocompleteStart typing a command and the chatbox suggests completions</li> <li>Chat HistoryScroll back through previous messages to review conversations</li> <li>OOC CooldownPrevents spam by limiting how often players can use out-of-character chat</li> <li>OOC ToggleAdministrators can enable or disable OOC chat server-wide</li> <li>Chat RadiusConfigure how far different types of messages can be heard</li> </ul> Door System Door Ownership <ul> <li>Purchase DoorsBuy doors to claim ownership of buildings or rooms</li> <li>Door SellingSell owned doors back or transfer ownership to other players</li> <li>Shared OwnershipAdd multiple co-owners to a single door so they all have access</li> <li>Automatic UnlockingDoors automatically unlock for their owners when approached</li> </ul> Door Management <ul> <li>Door NamesGive custom names to doors to identify buildings or rooms</li> <li>Lock/UnlockManually lock or unlock doors you own</li> <li>Door PermissionsControl who can access your doors based on faction, class, or individual players</li> <li>Faction DoorsDesignate doors that only specific factions can purchase or access</li> <li>Class RestrictionsLimit door access to specific classes within a faction</li> </ul> Door Configuration (Admin) <ul> <li>Map ConfigurerIn-game tool to set up door properties without editing files</li> <li>Bulk Door SetupConfigure multiple doors at once for faster server setup</li> <li>Door Data PersistenceAll door settings save automatically and persist across map changes</li> </ul> Vendor &amp; Economy NPC Vendors <ul> <li>Interactive VendorsCreate non-player character (NPC) shopkeepers that buy and sell items</li> <li>Custom InventoriesEach vendor can have their own unique selection of items for sale</li> <li>Buy and SellVendors can be configured to only buy items, only sell items, or do both</li> <li>Stock LimitsSet maximum quantities for items - when they sell out, players must wait for restocks</li> <li>Stock RegenerationItems automatically restock over time based on configured intervals</li> <li>Dynamic PricingPrices can be adjusted per vendor and per item</li> </ul> Vendor Customization <ul> <li>Vendor MessagesSet custom greeting, farewell, and \"no trade\" messages for each vendor</li> <li>Faction RestrictionsMake vendors only trade with specific factions</li> <li>Class RestrictionsLimit vendor access to certain classes</li> <li>Vendor PresetsSave vendor configurations as templates to quickly create similar vendors</li> <li>Price ScalingAdjust how much vendors pay when buying items from players (percentage of item value)</li> </ul> Currency System <ul> <li>Money TrackingCharacters have their own money that persists between sessions</li> <li>Transaction LoggingAll purchases and sales are recorded for administrative review</li> <li>Currency DisplayMoney amounts are shown in a configurable format (dollars, credits, gold, etc.)</li> </ul> Factions &amp; Teams Faction System <ul> <li>Multiple FactionsCreate different groups like police, civilians, criminals, medical staff, etc.</li> <li>Faction WhitelistingRequire administrator approval before players can create characters in certain factions</li> <li>Faction ModelsEach faction has specific player models that characters must use</li> <li>Faction WeaponsFactions can have default weapons or equipment that characters spawn with</li> <li>Faction LimitsSet maximum numbers of players allowed in each faction at one time</li> </ul> Faction Management (Admin) <ul> <li>Whitelist ControlAdd or remove players from faction whitelists through an in-game interface</li> <li>Faction Members ListView all characters currently in each faction</li> <li>Dynamic Faction EditingModify faction properties without restarting the server</li> <li>Faction PermissionsConfigure what each faction can and cannot do</li> </ul> Class System <ul> <li>Faction ClassesSpecialized roles within factions (e.g., Police Officer, Detective, Chief)</li> <li>Class LimitsRestrict how many players can be a specific class at once</li> <li>Class EquipmentClasses can have unique starting items or weapons</li> <li>Class PermissionsGrant specific abilities or access based on class</li> <li>Class SwitchingPlayers can change classes if allowed by their faction's rules</li> </ul> Gameplay Mechanics Attributes System <ul> <li>Character StatsTrack attributes like strength, endurance, intelligence, or custom stats</li> <li>Attribute ProgressionAttributes can increase through gameplay actions or administrative grants</li> <li>Attribute EffectsStats affect gameplay - higher strength might let you carry more, better endurance means more stamina</li> <li>Attribute DisplayPlayers can view their current attribute levels and progress</li> <li>Attribute BoostingTemporary or permanent attribute boosts from items or events</li> </ul> Stamina System <ul> <li>Stamina BarVisual indicator showing current stamina level</li> <li>Stamina ConsumptionRunning, jumping, and other actions drain stamina</li> <li>Stamina RegenerationStamina automatically recovers when resting or walking</li> <li>Stamina EffectsRunning out of stamina slows movement and prevents sprinting</li> </ul> Spawn System <ul> <li>Spawn PointsDesignated locations where players appear when joining or respawning</li> <li>Faction SpawnsDifferent factions can have their own unique spawn locations</li> <li>Class SpawnsSpecific classes within factions can spawn at different locations</li> <li>Multiple Spawn PointsSet up several spawn points and players will randomly appear at one</li> <li>Spawn Management ToolAdministrators can place and remove spawn points in-game</li> </ul> Interaction System <ul> <li>Entity InteractionPress a key to interact with doors, vendors, storage, and other entities</li> <li>Player InteractionOpen a menu when looking at other players to see available actions</li> <li>Context-Sensitive OptionsDifferent entities show different interaction options based on what they are</li> <li>Interaction RadiusConfigure how close players need to be to interact with things</li> </ul> Third Person View <ul> <li>Toggle Third PersonPlayers can switch between first-person and third-person camera views</li> <li>Third Person ConfigurationServer owners can enable or disable third-person mode</li> <li>Camera CustomizationAdjust third-person camera distance and positioning</li> </ul> Protection &amp; Anti-Cheat Anti-Exploit Systems <ul> <li>Cheat DetectionAutomatically detects suspicious player behavior that might indicate cheating</li> <li>Alt Account DetectionIdentifies when players are using multiple accounts (alts) on the same server</li> <li>Exploit NotificationsStaff members receive alerts when potential cheating is detected</li> <li>Automatic LoggingAll suspicious activity is recorded for administrator review</li> </ul> Player Protection <ul> <li>Spawn ProtectionNew players or those who just respawned are temporarily protected from damage</li> <li>Anti-Prop KillPrevents players from using physics props to kill others unfairly</li> <li>Anti-Prop SurfStops players from exploiting physics to fly or move unrealistically</li> <li>World Entity ProtectionPrevents players from damaging or removing map entities without permission</li> </ul> User Interface Main Menu (F1) <ul> <li>Character TabView and manage your current character's information</li> <li>Inventory TabAccess your character's inventory and equipment</li> <li>Admin TabStaff-only section for administrative tools and controls</li> <li>Settings TabAdjust client-side options and preferences</li> </ul> Character Menu <ul> <li>Character SelectionView all your characters and switch between them</li> <li>Character CreationCreate new characters with customizable options</li> <li>Character DeletionRemove characters you no longer want</li> <li>Character InformationView detailed stats, attributes, and information about each character</li> </ul> Scoreboard <ul> <li>Player ListSee all players currently on the server</li> <li>Player InformationView character names, factions, and playtime</li> <li>Staff IndicatorsEasily identify which players are staff members</li> <li>Quick ActionsRight-click players for context-sensitive options (admin only)</li> </ul> Notifications <ul> <li>On-Screen NotificationsImportant messages appear as pop-ups on your screen</li> <li>Notification TypesDifferent colors and icons for different types of messages (info, warning, error, success)</li> <li>Notification HistoryReview recent notifications you might have missed</li> <li>Localized MessagesNotifications appear in the player's selected language</li> </ul> Sleek Modern Derma <p>Custom-themed Derma controls providing a consistent, sleek aesthetic across all menus, inventories, and admin tools.</p> Administration Tools Staff &amp; Player Management <ul> <li>Admin TabA centralized dashboard in the main menu for all administrative tasks</li> <li>Staff FactionA dedicated faction for on-duty staff with unique permissions and tools</li> <li>Online StaffView currently online staff members and their status</li> <li>PlayersA comprehensive player list with quick access to moderation actions</li> <li>Character ListBrowse and manage all player characters, including inventory and data</li> <li>Character EditingModify character names, descriptions, money, attributes, and inventory</li> <li>Flags ManagementAssign special character flags to grant access to specific features or items</li> <li>PK ManagerManage character permanent death (PK) status and history</li> <li>Faction ManagementManage faction whitelists and settings dynamically</li> </ul> Moderation &amp; Support <ul> <li>WarningsIssue and track persistent warnings to players for rule violations</li> <li>TicketsAn integrated support ticket system for handling player inquiries and reports</li> <li>SitRoomsCreate and manage isolated administrative areas for dealing with player reports</li> <li>Kick &amp; BanRemove players from the server temporarily or permanently</li> <li>Mute/GagPrevent players from using voice or text chat</li> <li>Jail SystemSend players to a jail area for timeout punishments</li> <li>Freeze/UnfreezeTemporarily prevent players from moving</li> <li>Blind/UnblindTemporarily blind players as a punishment</li> <li>God ModeMake players invincible to damage</li> <li>Cloak/UncloakMake players invisible or visible</li> <li>NoClipFly through walls for administrative purposes</li> <li>Teleportation ToolsBring players to you, go to players, or send players to locations</li> </ul> World &amp; Entity Tools <ul> <li>Item SpawnerSpawn any item for yourself or other players</li> <li>Entity ManagementDelete or modify entities in the world</li> <li>Admin StickA multi-purpose tool for staff to manage players, entities, and props efficiently</li> </ul> Customization &amp; Quality of Life Visual Customization <ul> <li>Color ThemesChange the UI color scheme to match your server's branding</li> <li>Custom FontsUse custom fonts for a unique visual identity</li> <li>Logo SupportAdd your server logo to menus and interfaces</li> <li>Theme PresetsChoose from pre-made color schemes or create your own</li> </ul> Keybind System <ul> <li>Custom KeybindsPlayers can rebind keys to their preferences</li> <li>Keybind CategoriesOrganized groups of related keybinds</li> <li>Keybind ConflictsAutomatic detection and warning of conflicting key assignments</li> <li>Default KeybindsSensible default key assignments that players can customize</li> </ul> Language Support <ul> <li>Multi-LanguageSupport for multiple languages throughout the entire framework</li> <li>Language SelectionPlayers choose their preferred language from available options</li> <li>Localized TextAll interface text, messages, and notifications can be translated</li> <li>Easy TranslationSimple system for adding new languages or updating translations</li> </ul> Options &amp; Settings <ul> <li>Client OptionsPlayers can customize their experience with various settings</li> <li>Performance OptionsAdjust visual quality and effects for better performance</li> <li>Accessibility OptionsSettings to improve usability for different needs</li> <li>Option PersistenceAll settings save and load automatically</li> </ul> Workshop Integration <ul> <li>Automatic DownloadsPlayers automatically download required content when joining</li> <li>Workshop CollectionsSupport for Steam Workshop content collections</li> <li>Content VerificationEnsures players have all necessary assets</li> <li>Download ProgressShows download status for required content</li> </ul>"},{"location":"about/installation/","title":"Installation","text":"<p>Step-by-step guide to setting up and configuring the Lilia framework for your Garry's Mod server.</p> Overview <p>Lilia is a modern roleplay framework designed for performance, modularity, and ease of use. Installing the framework involves setting up the core workshop content, choosing a schema, and configuring initial administrative access.</p> <p>This guide covers the standard setup process to get your server joinable and ready for customization.</p> 1. Install Lilia Core (Workshop) <p>Lilia's asset package must be subscribed to on the Steam Workshop for clients to download required materials and textures.</p> <ul> <li>Workshop ID: <code>3527535922</code></li> <li>Subscribe to Lilia on Workshop</li> </ul> 2. Install a Schema <p>Lilia requires a schema (a gamemode built on the framework) to operate. We recommend the Skeleton Schema for new projects.</p> <ol> <li>Download Skeleton Schema</li> <li>Extract the ZIP and place the <code>skeleton</code> folder into <code>garrysmod/gamemodes/</code>.</li> <li>Update your server startup command: <code>+gamemode skeleton</code></li> </ol> 3. Administrative Setup <p>Configure yourself as the owner to access in-game menus and configuration tools.</p> <p>Run the following in your server console:</p> <code>plysetgroup \"YOUR_STEAMID\" \"superadmin\"</code> <p>Lilia is also fully compatible with external admin mods like SAM, ULX, and ServerGuard.</p> 4. Next Steps <p>Once the basic setup is complete, you can begin populating your world:</p> <ul> <li>Create Factions to define player teams.</li> <li>Create Classes for sub-roles within factions.</li> <li>Generate Items using our automated tools.</li> <li>Explore Modules to add specific features.</li> </ul>"},{"location":"development/","title":"Development","text":"<p>Welcome to the development documentation associated with Lilia.</p> Libraries <p>Documentation for Lilia libraries.</p> Meta <p>Documentation for Lilia meta tables.</p> Hooks <p>Documentation for Lilia hooks.</p>"},{"location":"development/hooks/","title":"Hooks","text":"Client <p>This page documents the functions and methods in the meta table.</p> Server <p>This page documents the functions and methods in the meta table.</p> Shared <p>This page documents the functions and methods in the meta table.</p>"},{"location":"development/hooks/client/","title":"Client","text":"<p>This page documents the functions and methods in the meta table.</p> Overview  Client-side hooks in the Lilia framework handle UI, rendering, input, and other client-specific functionality; they can be used to customize the user experience and can be overridden or extended by addons and modules.  AddBarField(sectionName, fieldName, labelText, minFunc, maxFunc, valueFunc) Purpose <p>Register a dynamic bar entry to show in the character information panel (e.g., stamina or custom stats).</p> When Called <p>During character info build, before the F1 menu renders the bar sections.</p> Parameters <p>string sectionName Localized or raw section label to group the bar under.</p> <p>string fieldName Unique key for the bar entry.</p> <p>string labelText Text shown next to the bar.</p> <p>function minFunc Callback returning the minimum numeric value.</p> <p>function maxFunc Callback returning the maximum numeric value.</p> <p>function valueFunc Callback returning the current numeric value to display.</p> Example Usage <pre><code>  hook.Add(\"AddBarField\", \"ExampleAddBarField\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> AddSection(sectionName, color, priority, location) Purpose <p>Ensure a character information section exists and optionally override its styling and position.</p> When Called <p>When the F1 character info UI is initialized or refreshed.</p> Parameters <p>string sectionName Localized or raw name of the section (e.g., \u201cgeneralInfo\u201d).</p> <p>Color color Accent color used for the section header.</p> <p>number priority Sort order; lower numbers appear first.</p> <p>number location Column index in the character info layout.</p> Example Usage <pre><code>  hook.Add(\"AddSection\", \"ExampleAddSection\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> AddTextField(sectionName, fieldName, labelText, valueFunc) Purpose <p>Register a text field for the character information panel.</p> When Called <p>While building character info just before the F1 menu renders.</p> Parameters <p>string sectionName Target section to append the field to.</p> <p>string fieldName Unique identifier for the field.</p> <p>string labelText Caption displayed before the value.</p> <p>function valueFunc Callback that returns the string to render.</p> Example Usage <pre><code>  hook.Add(\"AddTextField\", \"ExampleAddTextField\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> AddToAdminStickHUD(client, target, information) Purpose <p>Add extra lines to the on-screen admin-stick HUD that appears while aiming with the admin stick.</p> When Called <p>Each HUDPaint tick when the admin stick is active and a target is valid.</p> Parameters <p>Player client Local player using the admin stick.</p> <p>Entity target Entity currently traced by the admin stick.</p> <p>table information Table of strings; insert new lines to show additional info.</p> Example Usage <pre><code>  hook.Add(\"AddToAdminStickHUD\", \"ExampleAddToAdminStickHUD\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> AdminPrivilegesUpdated() Purpose <p>React to privilege list updates pushed from the server (used by the admin stick UI).</p> When Called <p>After the server syncs admin privilege changes to the client.</p> Example Usage <pre><code>  hook.Add(\"AdminPrivilegesUpdated\", \"ExampleAdminPrivilegesUpdated\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> AdminStickAddModels(allModList, tgt) Purpose <p>Provide model and icon overrides for the admin stick spawn menu list.</p> When Called <p>When the admin stick UI collects available models and props to display.</p> Parameters <p>table allModList Table of model entries to be displayed; append or modify entries here.</p> <p>Entity tgt Entity currently targeted by the admin stick.</p> Example Usage <pre><code>  hook.Add(\"AdminStickAddModels\", \"ExampleAdminStickAddModels\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> CanDeleteChar(client, character) Purpose <p>Decide whether a client is allowed to delete a specific character.</p> When Called <p>When the delete character button is pressed in the character menu.</p> Parameters <p>Player client Player requesting the deletion.</p> <p>Character|table character Character object slated for deletion.</p> Returns <p>boolean false to block deletion; nil/true to allow.</p> Example Usage <pre><code>  hook.Add(\"CanDeleteChar\", \"ExampleCanDeleteChar\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> CanDisplayCharInfo(name) Purpose <p>Control whether the name above a character can be shown to the local player.</p> When Called <p>Before drawing a player\u2019s overhead information.</p> Parameters <p>string name The formatted name that would be displayed.</p> Returns <p>boolean false to hide the name; nil/true to show.</p> Example Usage <pre><code>  hook.Add(\"CanDisplayCharInfo\", \"ExampleCanDisplayCharInfo\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> CanOpenBagPanel(item) Purpose <p>Allow or block opening the bag inventory panel for a specific item.</p> When Called <p>When a bag or storage item icon is activated to open its contents.</p> Parameters <p>Item item The bag item whose inventory is being opened.</p> Returns <p>boolean false to prevent opening; nil/true to allow.</p> Example Usage <pre><code>  hook.Add(\"CanOpenBagPanel\", \"ExampleCanOpenBagPanel\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> CanPlayerOpenScoreboard(arg1) Purpose <p>Decide whether the scoreboard should open for the requesting client.</p> When Called <p>When the scoreboard key is pressed and before building the panel.</p> Parameters <p>Player arg1 Player attempting to open the scoreboard.</p> Returns <p>boolean false to block; nil/true to show.</p> Example Usage <pre><code>  hook.Add(\"CanPlayerOpenScoreboard\", \"ExampleCanPlayerOpenScoreboard\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> CanTakeEntity(client, targetEntity, itemUniqueID) Purpose <p>Determines if a player can take/convert an entity into an item.</p> When Called <p>Before attempting to convert an entity into an item using the take entity keybind.</p> Parameters <p>Player client The player attempting to take the entity.</p> <p>Entity targetEntity The entity being targeted for conversion.</p> <p>string itemUniqueID The unique ID of the item that would be created.</p> Returns <p>boolean False to prevent taking the entity; nil/true to allow.</p> Example Usage <pre><code>  hook.Add(\"CanTakeEntity\", \"RestrictEntityTaking\", function(client, targetEntity, itemUniqueID)\n      if targetEntity:IsPlayer() then return false end\n      return true\n  end)\n</code></pre> CanPlayerViewInventory() Purpose <p>Determine if the local player can open their inventory UI.</p> When Called <p>Before spawning any inventory window.</p> Returns <p>boolean false to stop the inventory from opening; nil/true to allow.</p> Example Usage <pre><code>  hook.Add(\"CanPlayerViewInventory\", \"ExampleCanPlayerViewInventory\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> CharListColumns(columns) Purpose <p>Add or adjust columns in the character list panel.</p> When Called <p>Right before the character selection table is rendered.</p> Parameters <p>table columns Table of column definitions; modify in place to add/remove columns.</p> Example Usage <pre><code>  hook.Add(\"CharListColumns\", \"ExampleCharListColumns\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> CharListEntry(entry, row) Purpose <p>Modify how each character entry renders in the character list.</p> When Called <p>For every row when the character list is constructed.</p> Parameters <p>table entry Data for the character (id, name, faction, etc.).</p> <p>Panel row The row panel being built.</p> Example Usage <pre><code>  hook.Add(\"CharListEntry\", \"ExampleCharListEntry\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> CharListLoaded(newCharList) Purpose <p>Seed character info sections and fields after the client receives the character list.</p> When Called <p>Once the client finishes downloading the character list from the server.</p> Parameters <p>table newCharList Array of character summaries.</p> Example Usage <pre><code>  hook.Add(\"CharListLoaded\", \"ExampleCharListLoaded\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> CharListUpdated(oldCharList, newCharList) Purpose <p>React to changes between the old and new character lists.</p> When Called <p>After the server sends an updated character list (e.g., after delete/create).</p> Parameters <p>table oldCharList Previous list snapshot.</p> <p>table newCharList Updated list snapshot.</p> Example Usage <pre><code>  hook.Add(\"CharListUpdated\", \"ExampleCharListUpdated\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> CharLoaded(character) Purpose <p>Handle local initialization once a character has fully loaded on the client.</p> When Called <p>After the server confirms the character load and sets netvars.</p> Parameters <p>Character|number character Character object or id that was loaded.</p> Example Usage <pre><code>  hook.Add(\"CharLoaded\", \"ExampleCharLoaded\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> CharMenuClosed() Purpose <p>Cleanup or state changes when the character menu is closed.</p> When Called <p>Right after the character menu panel is removed.</p> Example Usage <pre><code>  hook.Add(\"CharMenuClosed\", \"ExampleCharMenuClosed\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> CharMenuOpened(charMenu) Purpose <p>Perform setup each time the character menu is opened.</p> When Called <p>Immediately after constructing the character menu panel.</p> Parameters <p>Panel charMenu The created menu panel.</p> Example Usage <pre><code>  hook.Add(\"CharMenuOpened\", \"ExampleCharMenuOpened\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> CharRestored(character) Purpose <p>Handle client-side work after a character is restored from deletion.</p> When Called <p>When the server finishes restoring a deleted character.</p> Parameters <p>Character|number character The restored character object or id.</p> Example Usage <pre><code>  hook.Add(\"CharRestored\", \"ExampleCharRestored\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> ChatAddText(text) Purpose <p>Override how chat text is appended to the chat box.</p> When Called <p>Whenever chat text is about to be printed locally.</p> Parameters <p>any text First argument passed to chat.AddText.</p> Example Usage <pre><code>  hook.Add(\"ChatAddText\", \"ExampleChatAddText\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> ChatboxPanelCreated(arg1) Purpose <p>Adjust the chatbox panel right after it is created.</p> When Called <p>Once the chat UI instance is built client-side.</p> Parameters <p>Panel arg1 The chatbox panel instance.</p> Example Usage <pre><code>  hook.Add(\"ChatboxPanelCreated\", \"ExampleChatboxPanelCreated\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> ChatboxTextAdded(arg1) Purpose <p>Intercept a newly added chat line before it renders in the chatbox.</p> When Called <p>After chat text is parsed but before it is drawn in the panel.</p> Parameters <p>Panel arg1 Chat panel or message object being added.</p> Example Usage <pre><code>  hook.Add(\"ChatboxTextAdded\", \"ExampleChatboxTextAdded\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> ChooseCharacter(id) Purpose <p>Respond to character selection from the list.</p> When Called <p>When a user clicks the play button on a character slot.</p> Parameters <p>number id The selected character\u2019s id.</p> Example Usage <pre><code>  hook.Add(\"ChooseCharacter\", \"ExampleChooseCharacter\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> CommandRan(client, command, arg3, results) Purpose <p>React after a command finishes executing client-side.</p> When Called <p>Immediately after a console/chat command is processed on the client.</p> Parameters <p>Player client Player who ran the command.</p> <p>string command Command name.</p> <p>table|string arg3 Arguments or raw text passed.</p> <p>any results Return data from the command handler, if any.</p> Example Usage <pre><code>  hook.Add(\"CommandRan\", \"ExampleCommandRan\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> ConfigureCharacterCreationSteps(creationPanel) Purpose <p>Reorder or add steps to the character creation wizard.</p> When Called <p>When the creation UI is building its step list.</p> Parameters <p>Panel creationPanel The root creation panel containing step definitions.</p> Example Usage <pre><code>  hook.Add(\"ConfigureCharacterCreationSteps\", \"ExampleConfigureCharacterCreationSteps\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> CreateCharacter(data) Purpose <p>Validate or mutate character data immediately before it is submitted to the server.</p> When Called <p>When the user presses the final create/submit button.</p> Parameters <p>table data Character creation payload (name, model, faction, etc.).</p> Returns <p>boolean false to abort submission; nil/true to continue.</p> Example Usage <pre><code>  hook.Add(\"CreateCharacter\", \"ExampleCreateCharacter\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> CreateChatboxPanel() Purpose <p>Called when the chatbox panel needs to be created or recreated.</p> When Called <p>When the chatbox module initializes, when the chatbox panel is closed and needs to be reopened, or when certain chat-related events occur.</p> Example Usage <pre><code>  hook.Add(\"CreateChatboxPanel\", \"ExampleCreateChatboxPanel\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> CreateDefaultInventory(character) Purpose <p>Choose what inventory implementation to instantiate for a newly created character.</p> When Called <p>After the client finishes character creation but before the inventory is built.</p> Parameters <p>Character character The character being initialized.</p> Returns <p>string Inventory type id to create (e.g., \u201cGridInv\u201d).</p> Example Usage <pre><code>  hook.Add(\"CreateDefaultInventory\", \"ExampleCreateDefaultInventory\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> CreateInformationButtons(pages) Purpose <p>Populate the list of buttons for the Information tab in the F1 menu.</p> When Called <p>When the Information tab is created and ready to collect pages.</p> Parameters <p>table pages Table of page descriptors; insert entries with name/icon/build function.</p> Example Usage <pre><code>  hook.Add(\"CreateInformationButtons\", \"ExampleCreateInformationButtons\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> CreateInventoryPanel(inventory, parent) Purpose <p>Build the root panel used for displaying an inventory instance.</p> When Called <p>Each time an inventory needs a panel representation.</p> Parameters <p>Inventory inventory Inventory object to show.</p> <p>Panel parent Parent UI element the panel should attach to.</p> Returns <p>Panel The created inventory panel.</p> Example Usage <pre><code>  hook.Add(\"CreateInventoryPanel\", \"ExampleCreateInventoryPanel\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> CreateMenuButtons(tabs) Purpose <p>Register custom tabs for the F1 menu.</p> When Called <p>When the F1 menu initializes its tab definitions.</p> Parameters <p>table tabs Table of tab constructors keyed by tab id; add new entries to inject tabs.</p> Example Usage <pre><code>  hook.Add(\"CreateMenuButtons\", \"ExampleCreateMenuButtons\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> DeleteCharacter(id) Purpose <p>Handle client-side removal of a character slot.</p> When Called <p>After a deletion request succeeds.</p> Parameters <p>number id ID of the character that was removed.</p> Example Usage <pre><code>  hook.Add(\"DeleteCharacter\", \"ExampleDeleteCharacter\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> DermaSkinChanged(newSkin) Purpose <p>React when the active Derma skin changes client-side.</p> When Called <p>Immediately after the skin is switched.</p> Parameters <p>string newSkin Name of the newly applied skin.</p> Example Usage <pre><code>  hook.Add(\"DermaSkinChanged\", \"ExampleDermaSkinChanged\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> DisplayPlayerHUDInformation(client, hudInfos) Purpose <p>Inject custom HUD info boxes into the player HUD.</p> When Called <p>Every HUDPaint frame while the player is alive and has a character.</p> Parameters <p>Player client Local player.</p> <p>table hudInfos Array to be filled with info tables (text, position, styling).</p> Example Usage <pre><code>  hook.Add(\"DisplayPlayerHUDInformation\", \"ExampleDisplayPlayerHUDInformation\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> DoorDataReceived(door, syncData) Purpose <p>Handle incoming door synchronization data from the server.</p> When Called <p>When the server sends door ownership or data updates.</p> Parameters <p>Entity door Door entity being updated.</p> <p>table syncData Data payload containing door state/owners.</p> Example Usage <pre><code>  hook.Add(\"DoorDataReceived\", \"ExampleDoorDataReceived\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> DrawCharInfo(client, character, info) Purpose <p>Add custom lines to the character info overlay drawn above players.</p> When Called <p>Right before drawing info for a player (name/description).</p> Parameters <p>Player client Player whose info is being drawn.</p> <p>Character character Character belonging to the player.</p> <p>table info Array of `{text, color}` rows; append to extend display.</p> Example Usage <pre><code>  hook.Add(\"DrawCharInfo\", \"ExampleDrawCharInfo\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> DrawEntityInfo(e, a, pos) Purpose <p>Customize how entity information panels render in the world.</p> When Called <p>When an entity has been marked to display info and is being drawn.</p> Parameters <p>Entity e Target entity.</p> <p>number a Alpha value (0-255) for fade in/out.</p> <p>table|Vector pos Screen position for the info panel (optional).</p> Example Usage <pre><code>  hook.Add(\"DrawEntityInfo\", \"ExampleDrawEntityInfo\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> DrawItemEntityInfo(itemEntity, item, infoTable, alpha) Purpose <p>Adjust or add lines for dropped item entity info.</p> When Called <p>When hovering/aiming at a dropped item that is rendering its info.</p> Parameters <p>Entity itemEntity World entity representing the item.</p> <p>Item item Item table attached to the entity.</p> <p>table infoTable Lines describing the item; modify to add details.</p> <p>number alpha Current alpha used for drawing.</p> Example Usage <pre><code>  hook.Add(\"DrawItemEntityInfo\", \"ExampleDrawItemEntityInfo\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> DrawLiliaModelView(client, entity) Purpose <p>Draw extra elements in the character preview model (e.g., held weapon).</p> When Called <p>When the character model view panel paints.</p> Parameters <p>Player client Local player being previewed.</p> <p>Entity entity The model panel entity.</p> Example Usage <pre><code>  hook.Add(\"DrawLiliaModelView\", \"ExampleDrawLiliaModelView\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> DrawPlayerRagdoll(entity) Purpose <p>Draw attachments or cosmetics on a player\u2019s ragdoll entity.</p> When Called <p>During ragdoll RenderOverride when a player\u2019s corpse is rendered.</p> Parameters <p>Entity entity The ragdoll entity being drawn.</p> Example Usage <pre><code>  hook.Add(\"DrawPlayerRagdoll\", \"ExampleDrawPlayerRagdoll\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> F1MenuClosed() Purpose <p>React to the F1 menu closing.</p> When Called <p>Immediately after the F1 menu panel is removed.</p> Example Usage <pre><code>  hook.Add(\"F1MenuClosed\", \"ExampleF1MenuClosed\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> F1MenuOpened(f1MenuPanel) Purpose <p>Perform setup when the F1 menu opens.</p> When Called <p>Immediately after the F1 menu is created.</p> Parameters <p>Panel f1MenuPanel The opened menu panel.</p> Example Usage <pre><code>  hook.Add(\"F1MenuOpened\", \"ExampleF1MenuOpened\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> FilterCharModels(arg1) Purpose <p>Whitelist or blacklist models shown in the character creation model list.</p> When Called <p>While building the selectable model list for character creation.</p> Parameters <p>table arg1 Table of available model paths; mutate to filter.</p> Example Usage <pre><code>  hook.Add(\"FilterCharModels\", \"ExampleFilterCharModels\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> FilterDoorInfo(entity, doorData, doorInfo) Purpose <p>Adjust door information before it is shown on the HUD.</p> When Called <p>After door data is prepared for display but before drawing text.</p> Parameters <p>Entity entity The door being inspected.</p> <p>table doorData Raw door data (owners, title, etc.).</p> <p>table doorInfo Table of display lines; mutate to change output.</p> Example Usage <pre><code>  hook.Add(\"FilterDoorInfo\", \"ExampleFilterDoorInfo\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> GetAdjustedPartData(wearer, id) Purpose <p>Provide PAC part data overrides before parts attach to a player.</p> When Called <p>When a PAC part is requested for attachment.</p> Parameters <p>Player wearer Player the part will attach to.</p> <p>string id Identifier for the part/item.</p> Returns <p>table Adjusted part data; return nil to use cached defaults.</p> Example Usage <pre><code>  hook.Add(\"GetAdjustedPartData\", \"ExampleGetAdjustedPartData\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> GetCharacterCreateButtonTooltip(client, currentChars, maxChars) Purpose <p>Allows overriding the tooltip text for the character creation button.</p> When Called <p>When the character creation button tooltip is being determined in the main menu.</p> Parameters <p>Player client The player viewing the menu.</p> <p>number currentChars Number of characters the player currently has.</p> <p>number maxChars Maximum number of characters allowed.</p> Returns <p>string|nil Custom tooltip text, or nil to use default tooltip.</p> Example Usage <pre><code>  hook.Add(\"GetCharacterCreateButtonTooltip\", \"ExampleGetCharacterCreateButtonTooltip\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> GetCharacterDisconnectButtonTooltip(client) Purpose <p>Allows overriding the tooltip text for the character disconnect button.</p> When Called <p>When the character disconnect button tooltip is being determined in the main menu.</p> Parameters <p>Player client The player viewing the menu.</p> Returns <p>string|nil Custom tooltip text, or nil to use default tooltip.</p> Example Usage <pre><code>  hook.Add(\"GetCharacterDisconnectButtonTooltip\", \"ExampleGetCharacterDisconnectButtonTooltip\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> GetCharacterDiscordButtonTooltip(client, discordURL) Purpose <p>Allows overriding the tooltip text for the Discord button.</p> When Called <p>When the Discord button tooltip is being determined in the main menu.</p> Parameters <p>Player client The player viewing the menu.</p> <p>string discordURL The Discord server URL.</p> Returns <p>string|nil Custom tooltip text, or nil to use default tooltip.</p> Example Usage <pre><code>  hook.Add(\"GetCharacterDiscordButtonTooltip\", \"ExampleGetCharacterDiscordButtonTooltip\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> GetCharacterLoadButtonTooltip(client) Purpose <p>Allows overriding the tooltip text for the character load button.</p> When Called <p>When the character load button tooltip is being determined in the main menu.</p> Parameters <p>Player client The player viewing the menu.</p> Returns <p>string|nil Custom tooltip text, or nil to use default tooltip.</p> Example Usage <pre><code>  hook.Add(\"GetCharacterLoadButtonTooltip\", \"ExampleGetCharacterLoadButtonTooltip\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> GetCharacterLoadMainButtonTooltip(client) Purpose <p>Allows overriding the tooltip text for the main character load button.</p> When Called <p>When the main character load button tooltip is being determined in the main menu.</p> Parameters <p>Player client The player viewing the menu.</p> Returns <p>string|nil Custom tooltip text, or nil to use default tooltip.</p> Example Usage <pre><code>  hook.Add(\"GetCharacterLoadMainButtonTooltip\", \"ExampleGetCharacterLoadMainButtonTooltip\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> GetCharacterMountButtonTooltip(client) Purpose <p>Allows overriding the tooltip text for the character mount button.</p> When Called <p>When the character mount button tooltip is being determined in the main menu.</p> Parameters <p>Player client The player viewing the menu.</p> Returns <p>string|nil Custom tooltip text, or nil to use default tooltip.</p> Example Usage <pre><code>  hook.Add(\"GetCharacterMountButtonTooltip\", \"ExampleGetCharacterMountButtonTooltip\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> GetCharacterReturnButtonTooltip(client) Purpose <p>Allows overriding the tooltip text for the character return button.</p> When Called <p>When the character return button tooltip is being determined in the main menu.</p> Parameters <p>Player client The player viewing the menu.</p> Returns <p>string|nil Custom tooltip text, or nil to use default tooltip.</p> Example Usage <pre><code>  hook.Add(\"GetCharacterReturnButtonTooltip\", \"ExampleGetCharacterReturnButtonTooltip\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> GetCharacterStaffButtonTooltip(client, hasStaffChar) Purpose <p>Allows overriding the tooltip text for the staff character button.</p> When Called <p>When the staff character button tooltip is being determined in the main menu.</p> Parameters <p>Player client The player viewing the menu.</p> <p>boolean hasStaffChar Whether the player has a staff character.</p> Returns <p>string|nil Custom tooltip text, or nil to use default tooltip.</p> Example Usage <pre><code>  hook.Add(\"GetCharacterStaffButtonTooltip\", \"ExampleGetCharacterStaffButtonTooltip\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> GetCharacterWorkshopButtonTooltip(client, workshopURL) Purpose <p>Allows overriding the tooltip text for the workshop button.</p> When Called <p>When the workshop button tooltip is being determined in the main menu.</p> Parameters <p>Player client The player viewing the menu.</p> <p>string workshopURL The workshop URL.</p> Returns <p>string|nil Custom tooltip text, or nil to use default tooltip.</p> Example Usage <pre><code>  hook.Add(\"GetCharacterWorkshopButtonTooltip\", \"ExampleGetCharacterWorkshopButtonTooltip\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> GetAdminESPTarget(ent, client) Purpose <p>Choose the entity that admin ESP should highlight.</p> When Called <p>When the admin ESP overlay evaluates the current trace target.</p> Parameters <p>Entity ent Entity under the admin\u2019s crosshair.</p> <p>Player client Admin requesting the ESP target.</p> Returns <p>Entity|nil Replacement target entity, or nil to use the traced entity.</p> Example Usage <pre><code>  hook.Add(\"GetAdminESPTarget\", \"ExampleGetAdminESPTarget\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> GetAdminStickLists(tgt, lists) Purpose <p>Contribute additional tab lists for the admin stick menu.</p> When Called <p>While compiling list definitions for the admin stick UI.</p> Parameters <p>Entity tgt Current admin stick target.</p> <p>table lists Table of list definitions; append your own entries.</p> Example Usage <pre><code>  hook.Add(\"GetAdminStickLists\", \"ExampleGetAdminStickLists\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> GetDisplayedDescription(client, isHUD) Purpose <p>Override the description text shown for a player.</p> When Called <p>When building a player\u2019s info panel for HUD or menus.</p> Parameters <p>Player client Player being described.</p> <p>boolean isHUD True when drawing the 3D HUD info; false for menus.</p> Returns <p>string Description to display; return nil to use default.</p> Example Usage <pre><code>  hook.Add(\"GetDisplayedDescription\", \"ExampleGetDisplayedDescription\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> GetDoorInfo(entity, doorData, doorInfo) Purpose <p>Build or modify door info data before it is shown to players.</p> When Called <p>When a door is targeted and info lines are generated.</p> Parameters <p>Entity entity Door entity.</p> <p>table doorData Data about owners, titles, etc.</p> <p>table doorInfo Display lines; modify to add/remove fields.</p> Example Usage <pre><code>  hook.Add(\"GetDoorInfo\", \"ExampleGetDoorInfo\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> GetDoorInfoForAdminStick(target, extraInfo) Purpose <p>Supply extra admin-only door info shown in the admin stick UI.</p> When Called <p>When the admin stick inspects a door and builds its detail view.</p> Parameters <p>Entity target Door or entity being inspected.</p> <p>table extraInfo Table of strings to display; append data here.</p> Example Usage <pre><code>  hook.Add(\"GetDoorInfoForAdminStick\", \"ExampleGetDoorInfoForAdminStick\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> GetInjuredText(c) Purpose <p>Return the localized injury descriptor and color for a player.</p> When Called <p>When drawing player info overlays that show health status.</p> Parameters <p>Player c Target player.</p> Returns <p>table `{text, color}` describing injury level, or nil to skip.</p> Example Usage <pre><code>  hook.Add(\"GetInjuredText\", \"ExampleGetInjuredText\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> GetMainCharacterID() Purpose <p>Decide which character ID should be treated as the \u201cmain\u201d one for menus.</p> When Called <p>Before selecting or loading the default character in the main menu.</p> Returns <p>number Character ID to treat as primary, or nil for default logic.</p> Example Usage <pre><code>  hook.Add(\"GetMainCharacterID\", \"ExampleGetMainCharacterID\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> GetMainMenuPosition(character) Purpose <p>Provide camera position/angles for the 3D main menu scene.</p> When Called <p>Each time the main menu loads and needs a camera transform.</p> Parameters <p>Character character Character to base the position on.</p> Returns <p>Vector, Angle Position and angle to use; return nils to use defaults.</p> Example Usage <pre><code>  hook.Add(\"GetMainMenuPosition\", \"ExampleGetMainMenuPosition\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> InteractionMenuClosed() Purpose <p>Handle logic when the interaction menu (context quick menu) closes.</p> When Called <p>Right after the interaction menu panel is removed.</p> Example Usage <pre><code>  hook.Add(\"InteractionMenuClosed\", \"ExampleInteractionMenuClosed\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> InteractionMenuOpened(frame) Purpose <p>Set up the interaction menu when it is created.</p> When Called <p>Immediately after the interaction menu frame is instantiated.</p> Parameters <p>Panel frame The interaction menu frame.</p> Example Usage <pre><code>  hook.Add(\"InteractionMenuOpened\", \"ExampleInteractionMenuOpened\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> InterceptClickItemIcon(inventoryPanel, itemIcon, keyCode) Purpose <p>Intercept mouse/keyboard clicks on an inventory item icon.</p> When Called <p>Whenever an inventory icon receives an input event.</p> Parameters <p>Panel inventoryPanel Panel hosting the inventory grid.</p> <p>Panel itemIcon Icon that was clicked.</p> <p>number keyCode Mouse or keyboard code that triggered the event.</p> Returns <p>boolean true to consume the click and prevent default behavior.</p> Example Usage <pre><code>  hook.Add(\"InterceptClickItemIcon\", \"ExampleInterceptClickItemIcon\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> InventoryClosed(inventoryPanel, inventory) Purpose <p>React when an inventory window is closed.</p> When Called <p>Immediately after an inventory panel is removed.</p> Parameters <p>Panel inventoryPanel The panel that was closed.</p> <p>Inventory inventory Inventory instance tied to the panel.</p> Example Usage <pre><code>  hook.Add(\"InventoryClosed\", \"ExampleInventoryClosed\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> InventoryItemIconCreated(icon, item, inventoryPanel) Purpose <p>Customize an inventory item icon immediately after it is created.</p> When Called <p>When a new icon panel is spawned for an item.</p> Parameters <p>Panel icon Icon panel.</p> <p>Item item Item represented by the icon.</p> <p>Panel inventoryPanel Parent inventory panel.</p> Example Usage <pre><code>  hook.Add(\"InventoryItemIconCreated\", \"ExampleInventoryItemIconCreated\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> InventoryOpened(panel, inventory) Purpose <p>Handle logic after an inventory panel is opened.</p> When Called <p>When an inventory is displayed on screen.</p> Parameters <p>Panel panel Inventory panel.</p> <p>Inventory inventory Inventory instance.</p> Example Usage <pre><code>  hook.Add(\"InventoryOpened\", \"ExampleInventoryOpened\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> InventoryPanelCreated(panel, inventory, parent) Purpose <p>Customize the inventory panel when it is created.</p> When Called <p>Immediately after constructing a panel for an inventory.</p> Parameters <p>Panel panel The new inventory panel.</p> <p>Inventory inventory Inventory the panel represents.</p> <p>Panel parent Parent container.</p> Example Usage <pre><code>  hook.Add(\"InventoryPanelCreated\", \"ExampleInventoryPanelCreated\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> ItemDraggedOutOfInventory(client, item) Purpose <p>Handle dragging an item outside of an inventory grid.</p> When Called <p>When an item is released outside valid slots.</p> Parameters <p>Player client Local player performing the drag.</p> <p>Item item Item being dragged.</p> Example Usage <pre><code>  hook.Add(\"ItemDraggedOutOfInventory\", \"ExampleItemDraggedOutOfInventory\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> ItemPaintOver(itemIcon, itemTable, w, h) Purpose <p>Draw overlays on an item\u2019s icon (e.g., status markers).</p> When Called <p>During icon paint for each inventory slot.</p> Parameters <p>Panel itemIcon Icon panel being drawn.</p> <p>Item itemTable Item represented.</p> <p>number w Icon width.</p> <p>number h Icon height.</p> Example Usage <pre><code>  hook.Add(\"ItemPaintOver\", \"ExampleItemPaintOver\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> ItemShowEntityMenu(entity) Purpose <p>Show a context menu for a world item entity.</p> When Called <p>When the use key/menu key is pressed on a dropped item with actions.</p> Parameters <p>Entity entity Item entity in the world.</p> Example Usage <pre><code>  hook.Add(\"ItemShowEntityMenu\", \"ExampleItemShowEntityMenu\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> LoadCharInformation() Purpose <p>Seed the character information sections for the F1 menu.</p> When Called <p>When the character info is about to be populated.</p> Example Usage <pre><code>  hook.Add(\"LoadCharInformation\", \"ExampleLoadCharInformation\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> LoadMainCharacter() Purpose <p>Select and load the player\u2019s main character when the menu opens.</p> When Called <p>During main menu initialization if a saved main character exists.</p> Example Usage <pre><code>  hook.Add(\"LoadMainCharacter\", \"ExampleLoadMainCharacter\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> LoadMainMenuInformation(info, character) Purpose <p>Populate informational text and preview for the main menu character card.</p> When Called <p>When the main menu needs to show summary info for a character.</p> Parameters <p>table info Table to fill with display fields.</p> <p>Character character Character being previewed.</p> Example Usage <pre><code>  hook.Add(\"LoadMainMenuInformation\", \"ExampleLoadMainMenuInformation\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> ModifyScoreboardModel(arg1, ply) Purpose <p>Adjust the 3D model used in the scoreboard (pose, skin, etc.).</p> When Called <p>When a scoreboard slot builds its player model preview.</p> Parameters <p>Panel arg1 Model panel or data table for the slot.</p> <p>Player ply Player represented by the slot.</p> Example Usage <pre><code>  hook.Add(\"ModifyScoreboardModel\", \"ExampleModifyScoreboardModel\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> ModifyVoiceIndicatorText(client, voiceText, voiceType) Purpose <p>Override the string shown in the voice indicator HUD.</p> When Called <p>Each frame the local player is speaking.</p> Parameters <p>Player client Speaking player (local).</p> <p>string voiceText Default text to display.</p> <p>string voiceType Current voice range (\u201cwhispering\u201d, \u201ctalking\u201d, \u201cyelling\u201d).</p> Returns <p>string Replacement text; return nil to keep default.</p> Example Usage <pre><code>  hook.Add(\"ModifyVoiceIndicatorText\", \"ExampleModifyVoiceIndicatorText\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> DrawPlayerInfoBackground() Purpose <p>Draw the background panel behind player info overlays.</p> When Called <p>Just before drawing wrapped player info text in the HUD.</p> Returns <p>boolean Return false to suppress the default blurred background.</p> Example Usage <pre><code>  hook.Add(\"DrawPlayerInfoBackground\", \"ExampleDrawPlayerInfoBackground\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> OnAdminStickMenuClosed() Purpose <p>Handle state cleanup when the admin stick menu closes.</p> When Called <p>When the admin stick UI window is removed.</p> Example Usage <pre><code>  hook.Add(\"OnAdminStickMenuClosed\", \"ExampleOnAdminStickMenuClosed\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> OnChatReceived(client, chatType, text, anonymous) Purpose <p>React to chat messages received by the local client.</p> When Called <p>After a chat message is parsed and before it is displayed.</p> Parameters <p>Player client Sender of the message.</p> <p>string chatType Chat channel identifier.</p> <p>string text Message content.</p> <p>boolean anonymous Whether the message should hide the sender.</p> Example Usage <pre><code>  hook.Add(\"OnChatReceived\", \"ExampleOnChatReceived\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> OnCreateDualInventoryPanels(panel1, panel2, inventory1, inventory2) Purpose <p>Customize paired inventory panels when two inventories are shown side by side.</p> When Called <p>Right after both inventory panels are created (e.g., player + storage).</p> Parameters <p>Panel panel1 First inventory panel.</p> <p>Panel panel2 Second inventory panel.</p> <p>Inventory inventory1 Inventory bound to panel1.</p> <p>Inventory inventory2 Inventory bound to panel2.</p> Example Usage <pre><code>  hook.Add(\"OnCreateDualInventoryPanels\", \"ExampleOnCreateDualInventoryPanels\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> OnCreateItemInteractionMenu(itemIcon, menu, itemTable) Purpose <p>Augment the context menu shown when right-clicking an inventory item icon.</p> When Called <p>Immediately after the interaction menu for an item icon is built.</p> Parameters <p>Panel itemIcon The icon being interacted with.</p> <p>Panel menu The context menu object.</p> <p>Item itemTable Item associated with the icon.</p> Example Usage <pre><code>  hook.Add(\"OnCreateItemInteractionMenu\", \"ExampleOnCreateItemInteractionMenu\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> OnCreateStoragePanel(localInvPanel, storageInvPanel, storage) Purpose <p>Customize the dual-inventory storage panel layout.</p> When Called <p>After the local and storage inventory panels are created for a storage entity.</p> Parameters <p>Panel localInvPanel Panel showing the player inventory.</p> <p>Panel storageInvPanel Panel showing the storage inventory.</p> <p>Entity|table storage Storage object or entity.</p> Example Usage <pre><code>  hook.Add(\"OnCreateStoragePanel\", \"ExampleOnCreateStoragePanel\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> OnLocalVarSet(key, value) Purpose <p>React to a local networked variable being set.</p> When Called <p>Whenever a net var assigned to the local player changes.</p> Parameters <p>string key Variable name.</p> <p>any value New value.</p> Example Usage <pre><code>  hook.Add(\"OnLocalVarSet\", \"ExampleOnLocalVarSet\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> OnOpenVendorMenu(vendorPanel, vendor) Purpose <p>Populate the vendor UI when it opens.</p> When Called <p>After the vendor panel is created client-side.</p> Parameters <p>Panel vendorPanel Panel used to display vendor goods.</p> <p>Entity vendor Vendor entity interacted with.</p> Example Usage <pre><code>  hook.Add(\"OnOpenVendorMenu\", \"ExampleOnOpenVendorMenu\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> OnlineStaffDataReceived(staffData) Purpose <p>Handle the list of online staff received from the server.</p> When Called <p>When staff data is synchronized to the client.</p> Parameters <p>table staffData Array of staff entries (name, steamID, duty status).</p> Example Usage <pre><code>  hook.Add(\"OnlineStaffDataReceived\", \"ExampleOnlineStaffDataReceived\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> OpenAdminStickUI(tgt) Purpose <p>Open the admin stick interface for a target entity or player.</p> When Called <p>When the admin stick weapon requests to show its UI.</p> Parameters <p>Entity tgt Target entity/player selected by the admin stick.</p> Example Usage <pre><code>  hook.Add(\"OpenAdminStickUI\", \"ExampleOpenAdminStickUI\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> PaintItem(item) Purpose <p>Draw or tint an item icon before it is painted to the grid.</p> When Called <p>Prior to rendering each item icon surface.</p> Parameters <p>Item item Item being drawn.</p> Example Usage <pre><code>  hook.Add(\"PaintItem\", \"ExamplePaintItem\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> PopulateAdminStick(currentMenu, currentTarget, currentStores) Purpose <p>Add tabs and actions to the admin stick UI.</p> When Called <p>While constructing the admin stick menu for the current target.</p> Parameters <p>Panel currentMenu Root menu panel.</p> <p>Entity currentTarget Entity being acted upon.</p> <p>table currentStores Cached admin stick data (lists, categories).</p> Example Usage <pre><code>  hook.Add(\"PopulateAdminStick\", \"ExamplePopulateAdminStick\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> PopulateAdminTabs(pages) Purpose <p>Register admin tabs for the F1 administration menu.</p> When Called <p>When building the admin tab list.</p> Parameters <p>table pages Table to append tab definitions `{name, icon, build=function}`.</p> Example Usage <pre><code>  hook.Add(\"PopulateAdminTabs\", \"ExamplePopulateAdminTabs\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> PopulateConfigurationButtons(pages) Purpose <p>Add configuration buttons for the options/configuration tab.</p> When Called <p>When creating the configuration pages in the menu.</p> Parameters <p>table pages Collection of page descriptors to populate.</p> Example Usage <pre><code>  hook.Add(\"PopulateConfigurationButtons\", \"ExamplePopulateConfigurationButtons\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> PopulateFactionRosterOptions(list, members) Purpose <p>Add custom menu options to the faction roster table.</p> When Called <p>When the faction roster UI is being populated with member data.</p> Parameters <p>Panel list The liaTable panel that displays the roster. Use list:AddMenuOption() to add right-click menu options.</p> <p>table members Array of member data tables containing name, charID, steamID, and lastOnline fields.</p> Example Usage <pre><code>  hook.Add(\"PopulateFactionRosterOptions\", \"MyCustomRosterOptions\", function(list, members)\n      list:AddMenuOption(\"View Profile\", function(rowData)\n          if rowData and rowData.charID then\n              print(\"Viewing profile for character ID:\", rowData.charID)\n          end\n      end, \"icon16/user.png\")\n  end)\n</code></pre> PopulateInventoryItems(pnlContent, tree) Purpose <p>Populate the inventory items tree used in the admin menu.</p> When Called <p>When the inventory item browser is built.</p> Parameters <p>Panel pnlContent Content panel to fill.</p> <p>Panel tree Tree/list control to populate.</p> Example Usage <pre><code>  hook.Add(\"PopulateInventoryItems\", \"ExamplePopulateInventoryItems\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> PostDrawInventory(mainPanel, parentPanel) Purpose <p>Draw additional UI after the main inventory panels are painted.</p> When Called <p>After inventory drawing completes.</p> Parameters <p>Panel mainPanel Primary inventory panel.</p> <p>Panel parentPanel Parent container.</p> Example Usage <pre><code>  hook.Add(\"PostDrawInventory\", \"ExamplePostDrawInventory\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> PostLoadFonts(mainFont, mainFont) Purpose <p>Adjust fonts after they are loaded.</p> When Called <p>Immediately after main fonts are initialized.</p> Parameters <p>string mainFont Primary font name (duplicate parameter kept for API compatibility).</p> <p>string mainFont Alias of the same font name.</p> Example Usage <pre><code>  hook.Add(\"PostLoadFonts\", \"ExamplePostLoadFonts\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> DrawPhysgunBeam() Purpose <p>Decide whether to draw the physgun beam for the local player.</p> When Called <p>During physgun render.</p> Returns <p>boolean false to suppress the beam; nil/true to allow.</p> Example Usage <pre><code>  hook.Add(\"DrawPhysgunBeam\", \"ExampleDrawPhysgunBeam\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> RefreshFonts() Purpose <p>Recreate or refresh fonts when settings change.</p> When Called <p>After option changes that impact font sizes or faces.</p> Example Usage <pre><code>  hook.Add(\"RefreshFonts\", \"ExampleRefreshFonts\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> RegisterAdminStickSubcategories(categories) Purpose <p>Register admin stick subcategories used to group commands.</p> When Called <p>When assembling the category tree for the admin stick.</p> Parameters <p>table categories Table of category -&gt; subcategory mappings; modify in place.</p> Example Usage <pre><code>  hook.Add(\"RegisterAdminStickSubcategories\", \"ExampleRegisterAdminStickSubcategories\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> ResetCharacterPanel() Purpose <p>Reset the character panel to its initial state.</p> When Called <p>When the character menu needs to clear cached data/layout.</p> Example Usage <pre><code>  hook.Add(\"ResetCharacterPanel\", \"ExampleResetCharacterPanel\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> RunAdminSystemCommand(cmd, admin, victim, dur, reason) Purpose <p>Execute an admin-system command initiated from the UI.</p> When Called <p>When the admin stick or admin menu triggers a command.</p> Parameters <p>string cmd Command identifier.</p> <p>Player admin Admin issuing the command.</p> <p>Entity|Player victim Target of the command.</p> <p>number|string dur Duration parameter if applicable.</p> <p>string reason Optional reason text.</p> Example Usage <pre><code>  hook.Add(\"RunAdminSystemCommand\", \"ExampleRunAdminSystemCommand\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> ScoreboardClosed(scoreboardPanel) Purpose <p>Perform teardown when the scoreboard closes.</p> When Called <p>After the scoreboard panel is hidden or destroyed.</p> Parameters <p>Panel scoreboardPanel The scoreboard instance that was closed.</p> Example Usage <pre><code>  hook.Add(\"ScoreboardClosed\", \"ExampleScoreboardClosed\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> ScoreboardOpened(scoreboardPanel) Purpose <p>Initialize the scoreboard after it is created.</p> When Called <p>Right after the scoreboard panel is shown.</p> Parameters <p>Panel scoreboardPanel The scoreboard instance that opened.</p> Example Usage <pre><code>  hook.Add(\"ScoreboardOpened\", \"ExampleScoreboardOpened\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> ScoreboardRowCreated(slot, ply) Purpose <p>Customize a newly created scoreboard row.</p> When Called <p>When a player slot is added to the scoreboard.</p> Parameters <p>Panel slot Scoreboard row panel.</p> <p>Player ply Player represented by the row.</p> Example Usage <pre><code>  hook.Add(\"ScoreboardRowCreated\", \"ExampleScoreboardRowCreated\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> ScoreboardRowRemoved(scoreboardPanel, ply) Purpose <p>React when a scoreboard row is removed.</p> When Called <p>When a player leaves or is otherwise removed from the scoreboard.</p> Parameters <p>Panel scoreboardPanel Scoreboard instance.</p> <p>Player ply Player whose row was removed.</p> Example Usage <pre><code>  hook.Add(\"ScoreboardRowRemoved\", \"ExampleScoreboardRowRemoved\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> SetMainCharacter(charID) Purpose <p>Set the main character ID for future automatic selection.</p> When Called <p>When the player chooses a character to become their main.</p> Parameters <p>number charID Chosen character ID.</p> Example Usage <pre><code>  hook.Add(\"SetMainCharacter\", \"ExampleSetMainCharacter\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> SetupQuickMenu(quickMenuPanel) Purpose <p>Build the quick access menu when the context menu opens.</p> When Called <p>After the quick menu panel is created.</p> Parameters <p>Panel quickMenuPanel Panel that holds quick actions.</p> Example Usage <pre><code>  hook.Add(\"SetupQuickMenu\", \"ExampleSetupQuickMenu\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> ShouldAllowScoreboardOverride(client, var) Purpose <p>Decide if a player is permitted to override the scoreboard UI.</p> When Called <p>Before applying any scoreboard override logic.</p> Parameters <p>Player client Player requesting the override.</p> <p>any var Additional context or override data.</p> Returns <p>boolean false to deny override; nil/true to allow.</p> Example Usage <pre><code>  hook.Add(\"ShouldAllowScoreboardOverride\", \"ExampleShouldAllowScoreboardOverride\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> ShouldBarDraw(bar) Purpose <p>Determine whether a HUD bar should render.</p> When Called <p>When evaluating each registered bar before drawing.</p> Parameters <p>table bar Bar definition.</p> Returns <p>boolean false to hide the bar; nil/true to show.</p> Example Usage <pre><code>  hook.Add(\"ShouldBarDraw\", \"ExampleShouldBarDraw\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> ShouldDisableThirdperson(client) Purpose <p>Decide whether third-person mode should be forcibly disabled.</p> When Called <p>When the third-person toggle state changes.</p> Parameters <p>Player client Local player toggling third person.</p> Returns <p>boolean false to block third-person; nil/true to allow.</p> Example Usage <pre><code>  hook.Add(\"ShouldDisableThirdperson\", \"ExampleShouldDisableThirdperson\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> ShouldDrawAmmo(wpn) Purpose <p>Let modules veto drawing the ammo HUD for a weapon.</p> When Called <p>Each HUDPaint frame before ammo boxes render.</p> Parameters <p>Weapon wpn Active weapon.</p> Returns <p>boolean false to hide ammo; nil/true to show.</p> Example Usage <pre><code>  hook.Add(\"ShouldDrawAmmo\", \"ExampleShouldDrawAmmo\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> ShouldDrawEntityInfo(e) Purpose <p>Control whether an entity should display info when looked at.</p> When Called <p>When deciding if entity info overlays should be generated.</p> Parameters <p>Entity e Entity under consideration.</p> Returns <p>boolean false to prevent info; nil/true to allow.</p> Example Usage <pre><code>  hook.Add(\"ShouldDrawEntityInfo\", \"ExampleShouldDrawEntityInfo\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> ShouldDrawPlayerInfo(e) Purpose <p>Decide whether player-specific info should be drawn for a target.</p> When Called <p>Before rendering the player info panel above a player.</p> Parameters <p>Player e Player entity being drawn.</p> Returns <p>boolean false to hide info; nil/true to draw.</p> Example Usage <pre><code>  hook.Add(\"ShouldDrawPlayerInfo\", \"ExampleShouldDrawPlayerInfo\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> ShouldDrawWepSelect(client) Purpose <p>Decide if the custom weapon selector should draw for a player.</p> When Called <p>Each frame the selector evaluates visibility.</p> Parameters <p>Player client Local player.</p> Returns <p>boolean false to hide the selector; nil/true to allow.</p> Example Usage <pre><code>  hook.Add(\"ShouldDrawWepSelect\", \"ExampleShouldDrawWepSelect\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> ShouldHideBars() Purpose <p>Hide all HUD bars based on external conditions.</p> When Called <p>Before drawing any bars on the HUD.</p> Returns <p>boolean true to hide all bars; nil/false to render them.</p> Example Usage <pre><code>  hook.Add(\"ShouldHideBars\", \"ExampleShouldHideBars\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> ShouldMenuButtonShow(arg1) Purpose <p>Decide whether a button should appear in the menu bar.</p> When Called <p>When building quick menu buttons.</p> Parameters <p>table|string arg1 Button identifier or data.</p> Returns <p>boolean false to hide; nil/true to show.</p> Example Usage <pre><code>  hook.Add(\"ShouldMenuButtonShow\", \"ExampleShouldMenuButtonShow\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> ShouldRespawnScreenAppear() Purpose <p>Control whether the respawn screen should be displayed.</p> When Called <p>When the client dies and the respawn UI might show.</p> Returns <p>boolean false to suppress; nil/true to display.</p> Example Usage <pre><code>  hook.Add(\"ShouldRespawnScreenAppear\", \"ExampleShouldRespawnScreenAppear\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> ShouldShowCharVarInCreation(key) Purpose <p>Determine if a character variable should appear in the creation form.</p> When Called <p>While assembling the list of editable character variables.</p> Parameters <p>string key Character variable identifier.</p> Returns <p>boolean false to hide; nil/true to show.</p> Example Usage <pre><code>  hook.Add(\"ShouldShowCharVarInCreation\", \"ExampleShouldShowCharVarInCreation\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> ShouldShowClassOnScoreboard(clsData) Purpose <p>Decide whether to display a player\u2019s class on the scoreboard.</p> When Called <p>When rendering scoreboard rows that include class info.</p> Parameters <p>table clsData Class data table for the player.</p> Returns <p>boolean false to hide class; nil/true to show.</p> Example Usage <pre><code>  hook.Add(\"ShouldShowClassOnScoreboard\", \"ExampleShouldShowClassOnScoreboard\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> ShouldShowFactionOnScoreboard(ply) Purpose <p>Decide whether to display a player\u2019s faction on the scoreboard.</p> When Called <p>When rendering a scoreboard row.</p> Parameters <p>Player ply Player being displayed.</p> Returns <p>boolean false to hide faction; nil/true to show.</p> Example Usage <pre><code>  hook.Add(\"ShouldShowFactionOnScoreboard\", \"ExampleShouldShowFactionOnScoreboard\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> ShouldShowPlayerOnScoreboard(ply) Purpose <p>Decide whether a player should appear on the scoreboard at all.</p> When Called <p>Before adding a player row to the scoreboard.</p> Parameters <p>Player ply Player under consideration.</p> Returns <p>boolean false to omit the player; nil/true to include.</p> Example Usage <pre><code>  hook.Add(\"ShouldShowPlayerOnScoreboard\", \"ExampleShouldShowPlayerOnScoreboard\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> ShouldShowQuickMenu() Purpose <p>Control whether the quick menu should open when the context menu is toggled.</p> When Called <p>When the context menu is opened.</p> Returns <p>boolean false to prevent quick menu creation; nil/true to allow.</p> Example Usage <pre><code>  hook.Add(\"ShouldShowQuickMenu\", \"ExampleShouldShowQuickMenu\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> ShowPlayerOptions(target, options) Purpose <p>Populate the options menu for a specific player (e.g., mute, profile).</p> When Called <p>When opening a player interaction context menu.</p> Parameters <p>Player target Player the options apply to.</p> <p>table options Table of options to display; modify in place.</p> Example Usage <pre><code>  hook.Add(\"ShowPlayerOptions\", \"ExampleShowPlayerOptions\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> StorageOpen(storage, isCar) Purpose <p>Handle the client opening a storage entity inventory.</p> When Called <p>When storage access is approved and panels are about to show.</p> Parameters <p>Entity|table storage Storage entity or custom storage table.</p> <p>boolean isCar True if the storage is a vehicle trunk.</p> Example Usage <pre><code>  hook.Add(\"StorageOpen\", \"ExampleStorageOpen\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> StorageUnlockPrompt(entity) Purpose <p>Prompt the player to unlock a locked storage entity.</p> When Called <p>When the client interacts with a locked storage container.</p> Parameters <p>Entity entity Storage entity requiring an unlock prompt.</p> Example Usage <pre><code>  hook.Add(\"StorageUnlockPrompt\", \"ExampleStorageUnlockPrompt\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> ThirdPersonToggled(arg1) Purpose <p>React when the third-person toggle state changes.</p> When Called <p>After third-person mode is turned on or off.</p> Parameters <p>boolean arg1 New third-person enabled state.</p> Example Usage <pre><code>  hook.Add(\"ThirdPersonToggled\", \"ExampleThirdPersonToggled\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> TooltipInitialize(var, panel) Purpose <p>Initialize tooltip contents and sizing for Lilia tooltips.</p> When Called <p>When a tooltip panel is created.</p> Parameters <p>Panel var Tooltip panel.</p> <p>Panel panel Source panel that spawned the tooltip.</p> Example Usage <pre><code>  hook.Add(\"TooltipInitialize\", \"ExampleTooltipInitialize\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> TooltipLayout(var) Purpose <p>Control tooltip layout; return true to keep the custom layout.</p> When Called <p>Each frame the tooltip is laid out.</p> Parameters <p>Panel var Tooltip panel.</p> Returns <p>boolean true if a custom layout was applied.</p> Example Usage <pre><code>  hook.Add(\"TooltipLayout\", \"ExampleTooltipLayout\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> TooltipPaint(var, w, h) Purpose <p>Paint the custom tooltip background and contents.</p> When Called <p>When a tooltip panel is drawn.</p> Parameters <p>Panel var Tooltip panel.</p> <p>number w Width.</p> <p>number h Height.</p> Returns <p>boolean true if the tooltip was fully painted.</p> Example Usage <pre><code>  hook.Add(\"TooltipPaint\", \"ExampleTooltipPaint\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> VendorExited() Purpose <p>Handle logic when exiting a vendor menu.</p> When Called <p>After the vendor UI is closed.</p> Example Usage <pre><code>  hook.Add(\"VendorExited\", \"ExampleVendorExited\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> VendorOpened(vendor) Purpose <p>Perform setup when a vendor menu opens.</p> When Called <p>Immediately after opening the vendor UI.</p> Parameters <p>Entity|table vendor Vendor being accessed.</p> Example Usage <pre><code>  hook.Add(\"VendorOpened\", \"ExampleVendorOpened\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> VoiceToggled(enabled) Purpose <p>Respond to voice chat being toggled on or off.</p> When Called <p>When the client enables or disables in-game voice.</p> Parameters <p>boolean enabled New voice toggle state.</p> Example Usage <pre><code>  hook.Add(\"VoiceToggled\", \"ExampleVoiceToggled\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> WeaponCycleSound() Purpose <p>Play a custom sound when cycling weapons.</p> When Called <p>When the weapon selector changes selection.</p> Returns <p>string|nil Sound path to play; nil to use default.</p> Example Usage <pre><code>  hook.Add(\"WeaponCycleSound\", \"ExampleWeaponCycleSound\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> WeaponSelectSound() Purpose <p>Play a sound when confirming weapon selection.</p> When Called <p>When the weapon selector picks the highlighted weapon.</p> Returns <p>string|nil Sound path to play; nil for default.</p> Example Usage <pre><code>  hook.Add(\"WeaponSelectSound\", \"ExampleWeaponSelectSound\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> WebImageDownloaded(n, arg2) Purpose <p>Handle a downloaded web image asset.</p> When Called <p>After a remote image finishes downloading.</p> Parameters <p>string n Image identifier.</p> <p>string arg2 Local path or URL of the image.</p> Example Usage <pre><code>  hook.Add(\"WebImageDownloaded\", \"ExampleWebImageDownloaded\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> WebSoundDownloaded(name, path) Purpose <p>Handle a downloaded web sound asset.</p> When Called <p>After a remote sound file is fetched.</p> Parameters <p>string name Sound identifier.</p> <p>string path Local file path where the sound was saved.</p> Example Usage <pre><code>  hook.Add(\"WebSoundDownloaded\", \"ExampleWebSoundDownloaded\", function(...)\n      -- add custom client-side behavior\n  end)\n</code></pre> OnModelPanelSetup(self) Purpose <p>Called after a liaModelPanel has been initialized and its model has been set.</p> When Called <p>During the SetModel process of a liaModelPanel, after the entity is created and sequences are initialized.</p> Parameters <p>Panel self The liaModelPanel instance that was set up.</p> Example Usage <pre><code>  hook.Add(\"OnModelPanelSetup\", \"CustomizeModelPanel\", function(panel)\n      panel:SetFOV(45)\n  end)\n</code></pre>"},{"location":"development/hooks/server/","title":"Server","text":"<p>This page documents the functions and methods in the meta table.</p> Overview  Server-side hooks in the Lilia framework handle server-side logic, data persistence, permissions, character management, and other server-specific functionality. They follow the Garry's Mod hook system and can be overridden or extended by addons and modules.  AddWarning(charID, warned, warnedSteamID, timestamp, message, warner, warnerSteamID, severity) Purpose <p>Records a warning entry for a character and lets modules react to the new warning.</p> When Called <p>Fired whenever a warning is issued via admin commands, anti-cheat triggers, or net requests.</p> Parameters <p>number|string charID Character database identifier being warned.</p> <p>string warned Display name of the warned player.</p> <p>string warnedSteamID SteamID of the warned player.</p> <p>number timestamp Unix timestamp when the warning was created.</p> <p>string message Reason text for the warning.</p> <p>string warner Name of the admin or system issuing the warning.</p> <p>string warnerSteamID SteamID of the issuer.</p> <p>string severity Severity label such as Low/Medium/High.</p> Returns <p>string Final severity value chosen (if modified) or nil.</p> Example Usage <pre><code>  hook.Add(\"AddWarning\", \"LogWarning\", function(charID, warned, warnedSteamID, timestamp, message, warner, warnerSteamID, severity)\n      lia.log.add(warner, \"warningIssued\", warned, severity, message)\n  end)\n</code></pre> CollectDoorDataFields(extras) Purpose <p>Collect additional field definitions for door data.</p> When Called <p>When retrieving default door values and field definitions.</p> Parameters <p>table extras Table to populate with additional field definitions in the format {fieldName = {default = value, ...}}.</p> Example Usage <pre><code>  hook.Add(\"CollectDoorDataFields\", \"ExampleCollectDoorDataFields\", function(extras)\n      extras.customField = {default = false, type = \"boolean\"}\n  end)\n</code></pre> CanItemBeTransfered(item, inventory, VendorInventoryMeasure, client) Purpose <p>Determines if an item move is allowed before completing a transfer between inventories.</p> When Called <p>Checked whenever an item is about to be moved to another inventory (including vendors).</p> Parameters <p>Item item Item instance being transferred.</p> <p>Inventory inventory Destination inventory.</p> <p>boolean VendorInventoryMeasure True when the transfer originates from a vendor panel.</p> <p>Player client Player requesting the transfer.</p> Returns <p>boolean False to block the transfer; nil/true to allow.</p> Example Usage <pre><code>  hook.Add(\"CanItemBeTransfered\", \"LimitAmmoMoves\", function(item, inventory, isVendor, client)\n      if isVendor and item.isWeapon then return false end\n  end)\n</code></pre> CanPersistEntity(entity) Purpose <p>Decides if an entity should be recorded in the persistence system.</p> When Called <p>Invoked while scanning entities for persistence during map saves.</p> Parameters <p>Entity entity The world entity being evaluated.</p> Returns <p>boolean False to skip saving this entity; nil/true to include it.</p> Example Usage <pre><code>  hook.Add(\"CanPersistEntity\", \"IgnoreRagdolls\", function(ent)\n      if ent:IsRagdoll() then return false end\n  end)\n</code></pre> CanPlayerAccessDoor(client, door, access) Purpose <p>Lets modules override door access checks before built-in permissions are evaluated.</p> When Called <p>Queried whenever door access is validated in entity:checkDoorAccess.</p> Parameters <p>Player client Player requesting access.</p> <p>Entity door Door entity being checked.</p> <p>number access Required access level (e.g., DOOR_OWNER, DOOR_TENANT, DOOR_GUEST).</p> Returns <p>boolean True to grant access regardless of stored permissions; nil to fall back to defaults.</p> Example Usage <pre><code>  hook.Add(\"CanPlayerAccessDoor\", \"StaffOverrideDoor\", function(client, door)\n      if client:isStaffOnDuty() then return true end\n  end)\n</code></pre> CanPlayerAccessVendor(client, vendor) Purpose <p>Allows or denies a player opening/using a vendor entity.</p> When Called <p>Checked when a player attempts to access a vendor UI.</p> Parameters <p>Player client Player interacting with the vendor.</p> <p>Entity vendor Vendor entity being accessed.</p> Returns <p>boolean False to block interaction; true/nil to allow.</p> Example Usage <pre><code>  hook.Add(\"CanPlayerAccessVendor\", \"FactionLockVendors\", function(client, vendor)\n      if not vendor:isFactionAllowed(client:Team()) then return false end\n  end)\n</code></pre> CanPlayerDropItem(client, item) Purpose <p>Controls whether a player may drop a specific item from their inventory.</p> When Called <p>Triggered before an item drop is performed.</p> Parameters <p>Player client Player attempting to drop the item.</p> <p>Item item Item instance being dropped.</p> Returns <p>boolean False to block the drop; true/nil to permit.</p> Example Usage <pre><code>  hook.Add(\"CanPlayerDropItem\", \"NoQuestItemDrops\", function(client, item)\n      if item.isQuestItem then return false end\n  end)\n</code></pre> CanPlayerEarnSalary(client) Purpose <p>Checks whether a player is eligible to receive their periodic salary.</p> When Called <p>Evaluated each time salary is about to be granted.</p> Parameters <p>Player client Player due to receive salary.</p> Returns <p>boolean False to block salary payment; true/nil to allow.</p> Example Usage <pre><code>  hook.Add(\"CanPlayerEarnSalary\", \"JailedNoSalary\", function(client)\n      if client:isJailed() then return false end\n  end)\n</code></pre> CanPlayerEquipItem(client, item) Purpose <p>Decides if a player is allowed to equip a given item.</p> When Called <p>Checked before the equip logic for any item runs.</p> Parameters <p>Player client Player equipping the item.</p> <p>Item item Item instance being equipped.</p> Returns <p>boolean False to prevent equipping; true/nil to allow.</p> Example Usage <pre><code>  hook.Add(\"CanPlayerEquipItem\", \"RestrictHeavyArmor\", function(client, item)\n      if item.weight and item.weight &gt; 20 then return false end\n  end)\n</code></pre> CanPlayerHoldObject(client, entity) Purpose <p>Allows or blocks a player from picking up physics objects with their hands tool.</p> When Called <p>Checked before a player grabs an entity with lia_hands.</p> Parameters <p>Player client Player attempting to hold the object.</p> <p>Entity entity Target entity being picked up.</p> Returns <p>boolean False to prevent picking up; true/nil to allow.</p> Example Usage <pre><code>  hook.Add(\"CanPlayerHoldObject\", \"NoHoldingDoors\", function(client, ent)\n      if ent:isDoor() then return false end\n  end)\n</code></pre> CanPlayerInteractItem(client, action, item, data) Purpose <p>Lets modules validate or modify player item interactions (use, drop, split, etc.).</p> When Called <p>Fired before an inventory action runs on an item.</p> Parameters <p>Player client Player performing the action.</p> <p>string action Interaction verb such as \"drop\", \"combine\", or a custom action ID.</p> <p>Item item Item instance being interacted with.</p> <p>table data Extra data supplied by the action (position, merge target, etc.).</p> Returns <p>boolean, string False or false,reason to block; true/nil to allow.</p> Example Usage <pre><code>  hook.Add(\"CanPlayerInteractItem\", \"StopHotbarDrop\", function(client, action, item)\n      if action == \"drop\" and item.noDrop then return false, L(\"cannotDrop\") end\n  end)\n</code></pre> CanPlayerLock(client, door) Purpose <p>Decides if a player may lock a door or vehicle using provided access rights.</p> When Called <p>Evaluated before lock attempts are processed.</p> Parameters <p>Player client Player performing the lock.</p> <p>Entity door Door or vehicle entity targeted.</p> Returns <p>boolean False to prevent locking; true/nil to allow.</p> Example Usage <pre><code>  hook.Add(\"CanPlayerLock\", \"OnlyOwnersLock\", function(client, door)\n      if not door:checkDoorAccess(client, DOOR_OWNER) then return false end\n  end)\n</code></pre> CanPlayerSeeLogCategory(client, category) Purpose <p>Controls visibility of specific log categories to a player.</p> When Called <p>Checked before sending a log entry or opening the log viewer.</p> Parameters <p>Player client Player requesting or receiving logs.</p> <p>string category Category identifier of the log.</p> Returns <p>boolean False to hide the category; true/nil to show.</p> Example Usage <pre><code>  hook.Add(\"CanPlayerSeeLogCategory\", \"HideAdminLogs\", function(client, category)\n      if category == \"admin\" and not client:isStaffOnDuty() then return false end\n  end)\n</code></pre> CanPlayerSpawnStorage(client, entity, info) Purpose <p>Determines whether a player is permitted to spawn a storage entity.</p> When Called <p>Invoked when a storage deploy action is requested.</p> Parameters <p>Player client Player spawning the storage.</p> <p>Entity entity Storage entity class about to be created.</p> <p>table info Context info such as item data or position.</p> Returns <p>boolean False to block spawning; true/nil to allow.</p> Example Usage <pre><code>  hook.Add(\"CanPlayerSpawnStorage\", \"LimitStoragePerPlayer\", function(client, entity)\n      if client:GetCount(\"lia_storage\") &gt;= 2 then return false end\n  end)\n</code></pre> CanPlayerSwitchChar(client, currentCharacter, newCharacter) Purpose <p>Validates whether a player may switch from their current character to another.</p> When Called <p>Checked when a player initiates a character switch.</p> Parameters <p>Player client Player requesting the swap.</p> <p>Character currentCharacter Active character.</p> <p>Character newCharacter Target character to switch to.</p> Returns <p>boolean False to deny the swap; true/nil to allow.</p> Example Usage <pre><code>  hook.Add(\"CanPlayerSwitchChar\", \"BlockDuringCombat\", function(client)\n      if client:isInCombat() then return false end\n  end)\n</code></pre> CanPlayerTakeItem(client, item) Purpose <p>Checks if a player may take an item out of a container or ground entity.</p> When Called <p>Fired before item pickup/move from a world/container inventory.</p> Parameters <p>Player client Player attempting to take the item.</p> <p>Item item Item instance being taken.</p> Returns <p>boolean False to block taking; true/nil to allow.</p> Example Usage <pre><code>  hook.Add(\"CanPlayerTakeItem\", \"LockdownLooting\", function(client, item)\n      if lia.state.isLockdown() then return false end\n  end)\n</code></pre> CanPlayerTradeWithVendor(client, vendor, itemType, isSellingToVendor) Purpose <p>Approves or denies a vendor transaction before money/items exchange.</p> When Called <p>Invoked when a player tries to buy from or sell to a vendor.</p> Parameters <p>Player client Player trading with the vendor.</p> <p>Entity vendor Vendor entity.</p> <p>string itemType UniqueID of the item being traded.</p> <p>boolean isSellingToVendor True when the player sells an item to the vendor.</p> Returns <p>boolean, string, any False,reason to cancel; true/nil to allow. Optional third param for formatted message data.</p> Example Usage <pre><code>  hook.Add(\"CanPlayerTradeWithVendor\", \"RestrictRareItems\", function(client, vendor, itemType)\n      if lia.item.list[itemType].rarity == \"legendary\" and not client:isVIP() then\n          return false, L(\"vendorVIPOnly\")\n      end\n  end)\n</code></pre> CanPlayerUnequipItem(client, item) Purpose <p>Decides if a player may unequip an item currently worn/active.</p> When Called <p>Checked before unequip logic runs.</p> Parameters <p>Player client Player requesting to unequip.</p> <p>Item item Item being unequipped.</p> Returns <p>boolean False to block; true/nil to allow.</p> Example Usage <pre><code>  hook.Add(\"CanPlayerUnequipItem\", \"PreventCombatUnequip\", function(client, item)\n      if client:isInCombat() then return false end\n  end)\n</code></pre> CanPlayerUnlock(client, door) Purpose <p>Decides if a player can unlock a door or vehicle.</p> When Called <p>Evaluated before unlock attempts are processed.</p> Parameters <p>Player client Player performing the unlock.</p> <p>Entity door Door or vehicle entity targeted.</p> Returns <p>boolean False to block unlocking; true/nil to allow.</p> Example Usage <pre><code>  hook.Add(\"CanPlayerUnlock\", \"OnlyOwnersUnlock\", function(client, door)\n      if not door:checkDoorAccess(client, DOOR_OWNER) then return false end\n  end)\n</code></pre> CanPlayerUseChar(client, character) Purpose <p>Validates that a player can use/load a given character record.</p> When Called <p>Checked before spawning the character into the world.</p> Parameters <p>Player client Player requesting to use the character.</p> <p>Character character Character record being selected.</p> Returns <p>boolean False to prevent selection; true/nil to allow.</p> Example Usage <pre><code>  hook.Add(\"CanPlayerUseChar\", \"BanSpecificChar\", function(client, character)\n      if character:getData(\"locked\") then return false end\n  end)\n</code></pre> CanPlayerUseDoor(client, door) Purpose <p>Final gate before a player uses a door (open, interact).</p> When Called <p>Fired when a player attempts to use a door entity.</p> Parameters <p>Player client Player using the door.</p> <p>Entity door Door entity being used.</p> Returns <p>boolean False to deny use; true/nil to allow.</p> Example Usage <pre><code>  hook.Add(\"CanPlayerUseDoor\", \"LockdownUse\", function(client, door)\n      if lia.state.isLockdown() then return false end\n  end)\n</code></pre> CanSaveData(ent, inventory) Purpose <p>Decides if an entity's data should be included when saving persistent map state.</p> When Called <p>During persistence save routines.</p> Parameters <p>Entity ent Entity being evaluated for save.</p> <p>Inventory inventory Inventory attached to the entity (if any).</p> Returns <p>boolean False to skip saving; true/nil to save.</p> Example Usage <pre><code>  hook.Add(\"CanSaveData\", \"SkipTempProps\", function(ent)\n      if ent.tempSpawned then return false end\n  end)\n</code></pre> CreateSalaryTimers() Purpose <p>Called when salary timers need to be created or recreated.</p> When Called <p>During server initialization and when salary timers need to be reset.</p> Example Usage <pre><code>  hook.Add(\"CreateSalaryTimers\", \"ExampleCreateSalaryTimers\", function(...)\n      -- add custom server-side behavior\n  end)\n</code></pre> CharCleanUp(character) Purpose <p>Provides a cleanup hook when a character is fully removed from the server.</p> When Called <p>After character deletion/cleanup logic runs.</p> Parameters <p>Character character Character object being cleaned up.</p> Example Usage <pre><code>  hook.Add(\"CharCleanUp\", \"RemoveCharTimers\", function(character)\n      timer.Remove(\"char_timer_\" .. character:getID())\n  end)\n</code></pre> CharDeleted(client, character) Purpose <p>Notifies that a character has been removed from the database and game.</p> When Called <p>After a character is deleted by the player or admin.</p> Parameters <p>Player client Player who owned the character (may be nil if offline).</p> <p>Character character The character that was deleted.</p> Example Usage <pre><code>  hook.Add(\"CharDeleted\", \"LogDeletion\", function(client, character)\n      lia.log.add(client, \"charDeleted\", character:getName())\n  end)\n</code></pre> CharListExtraDetails(client, entry, stored) Purpose <p>Adds extra per-character info to the character selection list entry.</p> When Called <p>While building the char list shown to the client.</p> Parameters <p>Player client Player viewing the list.</p> <p>table entry Table of character info to be sent.</p> <p>table stored Raw character data from storage.</p> Returns <p>table Optionally return modified entry data.</p> Example Usage <pre><code>  hook.Add(\"CharListExtraDetails\", \"AddPlaytime\", function(client, entry, stored)\n      entry.playtime = stored.playtime or 0\n      return entry\n  end)\n</code></pre> CharPostSave(character) Purpose <p>Runs after a character has been saved to persistence.</p> When Called <p>Immediately after character data write completes.</p> Parameters <p>Character character Character that was saved.</p> Example Usage <pre><code>  hook.Add(\"CharPostSave\", \"QueueBackup\", function(character)\n      lia.backup.queue(character:getID())\n  end)\n</code></pre> CharPreSave(character) Purpose <p>Pre-save hook for characters to sync state into the database payload.</p> When Called <p>Right before character data is persisted.</p> Parameters <p>Character character Character about to be saved.</p> Example Usage <pre><code>  hook.Add(\"CharPreSave\", \"StoreTempAmmo\", function(character)\n      local client = character:getPlayer()\n      if IsValid(client) then character:setData(\"ammo\", client:GetAmmo()) end\n  end)\n</code></pre> CheckFactionLimitReached(faction, character, client) Purpose <p>Allows factions to enforce population limits before creation/join.</p> When Called <p>Checked when a player attempts to create or switch to a faction.</p> Parameters <p>table faction Faction definition table.</p> <p>Character character Character requesting the faction.</p> <p>Player client Player owning the character.</p> Returns <p>boolean False to block joining; true/nil to allow.</p> Example Usage <pre><code>  hook.Add(\"CheckFactionLimitReached\", \"CapCombine\", function(faction)\n      if faction.uniqueID == \"combine\" and faction:onlineCount() &gt;= 10 then return false end\n  end)\n</code></pre> DatabaseConnected() Purpose <p>Signals that the database connection is established and ready.</p> When Called <p>Once the SQL connection succeeds during initialization.</p> Example Usage <pre><code>  hook.Add(\"DatabaseConnected\", \"InitPlugins\", function()\n      lia.plugin.loadAll()\n  end)\n</code></pre> DiscordRelaySend(embed) Purpose <p>Allows modules to intercept and modify Discord relay embeds before sending.</p> When Called <p>Right before an embed is pushed to the Discord relay webhook.</p> Parameters <p>table embed Table describing the Discord embed payload.</p> Returns <p>table Optionally return a modified embed.</p> Example Usage <pre><code>  hook.Add(\"DiscordRelaySend\", \"AddFooter\", function(embed)\n      embed.footer = {text = \"Lilia Relay\"}\n      return embed\n  end)\n</code></pre> DiscordRelayUnavailable() Purpose <p>Notifies the game that the Discord relay feature became unavailable.</p> When Called <p>Triggered when the relay HTTP endpoint cannot be reached or is disabled.</p> Example Usage <pre><code>  hook.Add(\"DiscordRelayUnavailable\", \"AlertStaff\", function()\n      lia.log.add(nil, \"discordRelayDown\")\n  end)\n</code></pre> DiscordRelayed(embed) Purpose <p>Fired after a Discord relay message has been successfully sent.</p> When Called <p>Immediately after the relay HTTP request completes.</p> Parameters <p>table embed Embed table that was sent.</p> Example Usage <pre><code>  hook.Add(\"DiscordRelayed\", \"TrackRelayCount\", function(embed)\n      lia.metrics.bump(\"discordRelay\")\n  end)\n</code></pre> DoorEnabledToggled(client, door, newState) Purpose <p>Signals that a door's enabled/disabled state has been toggled.</p> When Called <p>After admin tools enable or disable door ownership/usage.</p> Parameters <p>Player client Player who toggled the state.</p> <p>Entity door Door entity affected.</p> <p>boolean newState True when enabled, false when disabled.</p> Example Usage <pre><code>  hook.Add(\"DoorEnabledToggled\", \"AnnounceToggle\", function(client, door, state)\n      lia.log.add(client, \"doorEnabledToggle\", tostring(state))\n  end)\n</code></pre> DoorHiddenToggled(client, entity, newState) Purpose <p>Signals that a door has been hidden or unhidden from ownership.</p> When Called <p>After the hidden flag is toggled for a door entity.</p> Parameters <p>Player client Player performing the change.</p> <p>Entity entity Door entity affected.</p> <p>boolean newState True when hidden, false when shown.</p> Example Usage <pre><code>  hook.Add(\"DoorHiddenToggled\", \"MirrorToClients\", function(_, door, state)\n      net.Start(\"liaDoorHidden\") net.WriteEntity(door) net.WriteBool(state) net.Broadcast()\n  end)\n</code></pre> DoorLockToggled(client, door, state) Purpose <p>Fired when a door lock state is toggled (locked/unlocked).</p> When Called <p>After lock/unlock succeeds via key or command.</p> Parameters <p>Player client Player who toggled the lock.</p> <p>Entity door Door entity.</p> <p>boolean state True if now locked.</p> Example Usage <pre><code>  hook.Add(\"DoorLockToggled\", \"SoundDoorLock\", function(_, door, state)\n      door:EmitSound(state and \"doors/door_latch3.wav\" or \"doors/door_latch1.wav\")\n  end)\n</code></pre> DoorOwnableToggled(client, door, newState) Purpose <p>Signals that a door has been marked ownable or unownable.</p> When Called <p>After toggling door ownership availability.</p> Parameters <p>Player client Player performing the toggle.</p> <p>Entity door Door entity affected.</p> <p>boolean newState True when ownable.</p> Example Usage <pre><code>  hook.Add(\"DoorOwnableToggled\", \"SyncOwnableState\", function(_, door, state)\n      net.Start(\"liaDoorOwnable\") net.WriteEntity(door) net.WriteBool(state) net.Broadcast()\n  end)\n</code></pre> DoorPriceSet(client, door, price) Purpose <p>Fired when a door purchase price is changed.</p> When Called <p>After a player sets a new door price via management tools.</p> Parameters <p>Player client Player setting the price.</p> <p>Entity door Door entity.</p> <p>number price New purchase price.</p> Example Usage <pre><code>  hook.Add(\"DoorPriceSet\", \"LogDoorPrice\", function(client, door, price)\n      lia.log.add(client, \"doorPriceSet\", price)\n  end)\n</code></pre> DoorTitleSet(client, door, name) Purpose <p>Fired when a door's title/name is changed.</p> When Called <p>After a player renames a door via the interface or command.</p> Parameters <p>Player client Player setting the title.</p> <p>Entity door Door entity.</p> <p>string name New door title.</p> Example Usage <pre><code>  hook.Add(\"DoorTitleSet\", \"SaveDoorTitle\", function(client, door, name)\n      door:setNetVar(\"doorTitle\", name)\n  end)\n</code></pre> FetchSpawns() Purpose <p>Requests the server spawn list; gives modules a chance to override or inject spawns.</p> When Called <p>When spawn points are being loaded or refreshed.</p> Returns <p>table Custom spawn data table or nil to use defaults.</p> Example Usage <pre><code>  hook.Add(\"FetchSpawns\", \"UseCustomSpawns\", function()\n      return lia.spawns.getCustom()\n  end)\n</code></pre> GetAllCaseClaims() Purpose <p>Returns a list of all active support tickets claimed by staff.</p> When Called <p>When the ticket system needs to display open claims.</p> Returns <p>table Array of ticket claim data.</p> Example Usage <pre><code>  hook.Add(\"GetAllCaseClaims\", \"MirrorTickets\", function()\n      return lia.ticket.getClaims()\n  end)\n</code></pre> GetBotModel(client, faction) Purpose <p>Provides the model to use for spawning a bot player given a faction.</p> When Called <p>During bot setup when choosing a model.</p> Parameters <p>Player client Bot player entity.</p> <p>table faction Faction data assigned to the bot.</p> Returns <p>string Model path to use for the bot.</p> Example Usage <pre><code>  hook.Add(\"GetBotModel\", \"RandomCitizenModel\", function(client, faction)\n      if faction.uniqueID == \"citizen\" then return \"models/Humans/Group01/male_07.mdl\" end\n  end)\n</code></pre> GetDamageScale(hitgroup, dmgInfo, damageScale) Purpose <p>Lets modules adjust the final damage scale applied to a hitgroup.</p> When Called <p>During ScalePlayerDamage after base scaling has been calculated.</p> Parameters <p>number hitgroup Hitgroup constant from the damage trace.</p> <p>CTakeDamageInfo dmgInfo Damage info object.</p> <p>number damageScale Current scale value about to be applied.</p> Returns <p>number New scale value to apply or nil to keep current.</p> Example Usage <pre><code>  hook.Add(\"GetDamageScale\", \"HelmetProtection\", function(hitgroup, dmgInfo, scale)\n      if hitgroup == HITGROUP_HEAD and dmgInfo:IsBulletDamage() then return scale * 0.5 end\n  end)\n</code></pre> GetDefaultInventoryType(character) Purpose <p>Specifies which inventory type to create for a character by default.</p> When Called <p>During character creation and bot setup before inventories are instanced.</p> Parameters <p>Character character Character being initialized (may be nil for bots).</p> Returns <p>string Inventory type ID (e.g., \"GridInv\").</p> Example Usage <pre><code>  hook.Add(\"GetDefaultInventoryType\", \"UseListInventory\", function(character)\n      return \"ListInv\"\n  end)\n</code></pre> GetEntitySaveData(ent) Purpose <p>Provides custom data to persist for an entity.</p> When Called <p>While serializing entities for persistence saves.</p> Parameters <p>Entity ent Entity being saved.</p> Returns <p>table Data table to store or nil for none.</p> Example Usage <pre><code>  hook.Add(\"GetEntitySaveData\", \"SaveHealth\", function(ent)\n      return {health = ent:Health()}\n  end)\n</code></pre> GetOOCDelay(speaker) Purpose <p>Allows modules to set or modify the OOC chat cooldown for a speaker.</p> When Called <p>Each time an OOC message is about to be sent.</p> Parameters <p>Player speaker Player sending the OOC message.</p> Returns <p>number Cooldown in seconds, or nil to use config default.</p> Example Usage <pre><code>  hook.Add(\"GetOOCDelay\", \"VIPShorterCooldown\", function(speaker)\n      if speaker:isVIP() then return 5 end\n  end)\n</code></pre> GetPlayTime(client) Purpose <p>Override or calculate a player's tracked playtime value.</p> When Called <p>When playtime is requested for display or logic.</p> Parameters <p>Player client Player whose playtime is queried.</p> Returns <p>number Seconds of playtime.</p> Example Usage <pre><code>  hook.Add(\"GetPlayTime\", \"CustomPlaytime\", function(client)\n      return client:getChar():getData(\"customPlaytime\", 0)\n  end)\n</code></pre> GetPlayerDeathSound(client, isFemale) Purpose <p>Supplies the death sound file to play for a player.</p> When Called <p>During PlayerDeath when death sounds are enabled.</p> Parameters <p>Player client Player who died.</p> <p>boolean isFemale Gender flag.</p> Returns <p>string Sound path to emit.</p> Example Usage <pre><code>  hook.Add(\"GetPlayerDeathSound\", \"FactionDeathSounds\", function(client)\n      if client:Team() == FACTION_CP then return \"npc/metropolice/pain1.wav\" end\n  end)\n</code></pre> GetPlayerPainSound(paintype, isFemale, client) Purpose <p>Provides the pain sound to play for a hurt entity.</p> When Called <p>During damage processing when selecting pain sounds.</p> Parameters <p>string paintype Pain type identifier (\"hurt\", etc.).</p> <p>boolean isFemale Gender flag.</p> <p>Entity client Entity that is hurt.</p> Returns <p>string Sound path to emit, or nil to use default.</p> Example Usage <pre><code>  hook.Add(\"GetPlayerPainSound\", \"RobotPain\", function(client, paintype)\n      if client:IsPlayer() and client:IsCombine() then return \"npc/combine_soldier/pain1.wav\" end\n  end)\n</code></pre> GetPlayerRespawnLocation(client, character) Purpose <p>Selects where a player should respawn after death.</p> When Called <p>During respawn processing to determine the spawn location.</p> Parameters <p>Player client Player respawning.</p> <p>Character character Character data of the player.</p> Returns <p>vector, angle Position and angle for the respawn; nil to use default.</p> Example Usage <pre><code>  hook.Add(\"GetPlayerRespawnLocation\", \"HospitalRespawn\", function(client)\n      return lia.spawns.getHospitalPos(), lia.spawns.getHospitalAng()\n  end)\n</code></pre> GetPlayerSpawnLocation(client, character) Purpose <p>Chooses the spawn location for a player when initially joining the server.</p> When Called <p>During first spawn/character load to position the player.</p> Parameters <p>Player client Player spawning.</p> <p>Character character Character data of the player.</p> Returns <p>vector, angle Position and angle; nil to use map spawns.</p> Example Usage <pre><code>  hook.Add(\"GetPlayerSpawnLocation\", \"FactionSpawns\", function(client, character)\n      return lia.spawns.getFactionSpawn(character:getFaction())\n  end)\n</code></pre> GetPrestigePayBonus(client, char, pay, faction, class) Purpose <p>Allows adjusting the salary amount using a prestige bonus.</p> When Called <p>Each time salary is calculated for a character.</p> Parameters <p>Player client Player receiving salary.</p> <p>Character char Character data.</p> <p>number pay Current salary amount.</p> <p>table faction Faction definition.</p> <p>table class Class definition (if any).</p> Returns <p>number Modified pay amount or nil to keep.</p> Example Usage <pre><code>  hook.Add(\"GetPrestigePayBonus\", \"PrestigeScaling\", function(client, char, pay)\n      return pay + (char:getData(\"prestigeLevel\", 0) * 50)\n  end)\n</code></pre> GetSalaryAmount(client, faction, class) Purpose <p>Provides the base salary amount for a player based on faction/class.</p> When Called <p>Whenever salary is being computed for payout.</p> Parameters <p>Player client Player receiving salary.</p> <p>table faction Faction definition.</p> <p>table class Class definition (may be nil).</p> Returns <p>number Salary amount.</p> Example Usage <pre><code>  hook.Add(\"GetSalaryAmount\", \"VIPSalary\", function(client, faction, class)\n      if client:isVIP() then return 500 end\n  end)\n</code></pre> GetTicketsByRequester(steamID) Purpose <p>Retrieves all ticket entries made by a specific requester SteamID.</p> When Called <p>During ticket queries filtered by requester.</p> Parameters <p>string steamID SteamID64 or SteamID of the requester.</p> Returns <p>table List of ticket rows.</p> Example Usage <pre><code>  hook.Add(\"GetTicketsByRequester\", \"MaskRequester\", function(steamID)\n      return lia.tickets.byRequester(steamID)\n  end)\n</code></pre> GetWarnings(charID) Purpose <p>Fetches all warnings stored for a character ID.</p> When Called <p>When viewing a character's warning history.</p> Parameters <p>number|string charID Character database identifier.</p> Returns <p>table Array of warning rows.</p> Example Usage <pre><code>  hook.Add(\"GetWarnings\", \"MirrorWarnings\", function(charID)\n      return lia.warn.get(charID)\n  end)\n</code></pre> GetWarningsByIssuer(steamID) Purpose <p>Retrieves warnings issued by a specific SteamID.</p> When Called <p>When filtering warnings by issuing admin.</p> Parameters <p>string steamID SteamID of the issuer.</p> Returns <p>table Array of warning rows.</p> Example Usage <pre><code>  hook.Add(\"GetWarningsByIssuer\", \"ListIssuerWarnings\", function(steamID)\n      return lia.warn.getByIssuer(steamID)\n  end)\n</code></pre> HandleItemTransferRequest(client, itemID, x, y, invID) Purpose <p>Handles the server-side logic when a client requests to move an item.</p> When Called <p>When the inventory UI sends a transfer request.</p> Parameters <p>Player client Player requesting the transfer.</p> <p>number|string itemID Item instance identifier.</p> <p>number x Target X slot.</p> <p>number y Target Y slot.</p> <p>number|string invID Destination inventory ID.</p> Example Usage <pre><code>  hook.Add(\"HandleItemTransferRequest\", \"LogTransfers\", function(client, itemID, x, y, invID)\n      lia.log.add(client, \"itemMove\", itemID, invID, x, y)\n  end)\n</code></pre> InventoryDeleted(instance) Purpose <p>Notifies that an inventory has been removed or destroyed.</p> When Called <p>After an inventory instance is deleted.</p> Parameters <p>Inventory instance Inventory object that was removed.</p> Example Usage <pre><code>  hook.Add(\"InventoryDeleted\", \"CleanupInvCache\", function(instance)\n      lia.inventory.cache[instance:getID()] = nil\n  end)\n</code></pre> ItemCombine(client, item, target) Purpose <p>Fired when a player combines an item with another (stacking or crafting).</p> When Called <p>After the combine action has been requested.</p> Parameters <p>Player client Player performing the combine.</p> <p>Item item Primary item.</p> <p>Item target Target item being combined into.</p> Returns <p>boolean False to block the combine; true/nil to allow.</p> Example Usage <pre><code>  hook.Add(\"ItemCombine\", \"BlockCertainCombines\", function(client, item, target)\n      if target.noCombine then return false end\n  end)\n</code></pre> ItemDeleted(instance) Purpose <p>Notifies that an item instance has been deleted from storage.</p> When Called <p>Immediately after an item is removed from persistence.</p> Parameters <p>Item instance Item instance that was deleted.</p> Example Usage <pre><code>  hook.Add(\"ItemDeleted\", \"LogItemDelete\", function(instance)\n      lia.log.add(nil, \"itemDeleted\", instance.uniqueID)\n  end)\n</code></pre> ItemFunctionCalled(item, method, client, entity, results) Purpose <p>Called whenever an item method is executed so modules can react or modify results.</p> When Called <p>After an item function such as OnUse or custom actions is invoked.</p> Parameters <p>Item item Item instance whose method was called.</p> <p>string method Name of the method invoked.</p> <p>Player client Player who triggered the call.</p> <p>Entity entity Entity representation if applicable.</p> <p>table results Return values from the method.</p> Example Usage <pre><code>  hook.Add(\"ItemFunctionCalled\", \"AuditItemUse\", function(item, method, client)\n      lia.log.add(client, \"itemFunction\", item.uniqueID, method)\n  end)\n</code></pre> ItemTransfered(context) Purpose <p>Fires after an item has been successfully transferred between inventories.</p> When Called <p>Right after a transfer completes.</p> Parameters <p>table context Transfer context containing client, item, from, and to inventories.</p> Example Usage <pre><code>  hook.Add(\"ItemTransfered\", \"NotifyTransfer\", function(context)\n      lia.log.add(context.client, \"itemTransferred\", context.item.uniqueID)\n  end)\n</code></pre> KeyLock(client, door, time) Purpose <p>Allows overriding the key lock timing or behavior when using key items.</p> When Called <p>When a player uses a key to lock a door for a set duration.</p> Parameters <p>Player client Player locking.</p> <p>Entity door Door entity.</p> <p>number time Duration of the lock action.</p> Example Usage <pre><code>  hook.Add(\"KeyLock\", \"InstantLock\", function(client, door)\n      door:Fire(\"lock\")\n      return false\n  end)\n</code></pre> KeyUnlock(client, door, time) Purpose <p>Allows overriding key-based unlock timing or behavior.</p> When Called <p>When a player uses a key to unlock a door for a duration.</p> Parameters <p>Player client Player unlocking.</p> <p>Entity door Door entity.</p> <p>number time Duration for unlock action.</p> Example Usage <pre><code>  hook.Add(\"KeyUnlock\", \"InstantUnlock\", function(client, door)\n      door:Fire(\"unlock\")\n      return false\n  end)\n</code></pre> KickedFromChar(characterID, isCurrentChar) Purpose <p>Fired when a character is kicked from the session and forced to select another.</p> When Called <p>After the character kick is processed.</p> Parameters <p>number characterID ID of the character kicked.</p> <p>boolean isCurrentChar True if it was the active character at time of kick.</p> Example Usage <pre><code>  hook.Add(\"KickedFromChar\", \"LogCharKick\", function(characterID, wasCurrent)\n      lia.log.add(nil, \"charKicked\", characterID, wasCurrent)\n  end)\n</code></pre> LiliaTablesLoaded() Purpose <p>Indicates that all Lilia database tables have been created/loaded.</p> When Called <p>After tables are created during startup.</p> Example Usage <pre><code>  hook.Add(\"LiliaTablesLoaded\", \"SeedDefaults\", function()\n      lia.seed.run()\n  end)\n</code></pre> LoadData() Purpose <p>Allows modules to inject data when the gamemode performs a data load.</p> When Called <p>During server startup after initial load begins.</p> Example Usage <pre><code>  hook.Add(\"LoadData\", \"LoadCustomData\", function()\n      lia.data.loadCustom()\n  end)\n</code></pre> ModifyCharacterModel(arg1, character) Purpose <p>Lets modules change the model chosen for a character before it is set.</p> When Called <p>During character creation or model updates.</p> Parameters <p>any arg1 Context value (varies by caller).</p> <p>Character character Character being modified.</p> Returns <p>string Model path override or nil to keep current.</p> Example Usage <pre><code>  hook.Add(\"ModifyCharacterModel\", \"ForceFactionModel\", function(_, character)\n      if character:getFaction() == FACTION_STAFF then return \"models/player/police_fem.mdl\" end\n  end)\n</code></pre> OnCharAttribBoosted(client, character, attribID, boostID, arg5) Purpose <p>Notifies when an attribute boost is applied to a character.</p> When Called <p>After lia.attrib has boosted an attribute.</p> Parameters <p>Player client Player whose character was boosted.</p> <p>Character character Character receiving the boost.</p> <p>string|number attribID Attribute identifier.</p> <p>string boostID Boost source identifier.</p> <p>any arg5 Additional data supplied by the boost.</p> Example Usage <pre><code>  hook.Add(\"OnCharAttribBoosted\", \"LogBoost\", function(client, character, attribID, boostID)\n      lia.log.add(client, \"attribBoosted\", attribID, boostID)\n  end)\n</code></pre> OnCharAttribUpdated(client, character, key, arg4) Purpose <p>Notifies that a character attribute value has been updated.</p> When Called <p>After attribute points are changed.</p> Parameters <p>Player client Player whose character changed.</p> <p>Character character Character object.</p> <p>string|number key Attribute identifier.</p> <p>any arg4 Old value.</p> Example Usage <pre><code>  hook.Add(\"OnCharAttribUpdated\", \"SyncAttrib\", function(client, character, key, oldValue)\n      lia.log.add(client, \"attribUpdated\", key, oldValue, character:getAttrib(key))\n  end)\n</code></pre> OnCharCreated(client, character, originalData) Purpose <p>Signals that a new character has been created.</p> When Called <p>Immediately after character creation succeeds.</p> Parameters <p>Player client Player who created the character.</p> <p>Character character New character object.</p> <p>table originalData Raw creation data submitted.</p> Example Usage <pre><code>  hook.Add(\"OnCharCreated\", \"WelcomeMessage\", function(client, character)\n      client:notifyLocalized(\"charCreated\", character:getName())\n  end)\n</code></pre> OnCharDelete(client, id) Purpose <p>Invoked just before a character is deleted from persistence.</p> When Called <p>Right before deletion is executed.</p> Parameters <p>Player client Player requesting deletion.</p> <p>number id Character ID to delete.</p> Example Usage <pre><code>  hook.Add(\"OnCharDelete\", \"BackupChar\", function(client, id)\n      lia.backup.character(id)\n  end)\n</code></pre> OnCharDisconnect(client, character) Purpose <p>Called when a player disconnects while owning a character.</p> When Called <p>Immediately after the player leaves the server.</p> Parameters <p>Player client Player who disconnected.</p> <p>Character character Character they had active.</p> Example Usage <pre><code>  hook.Add(\"OnCharDisconnect\", \"SaveOnLeave\", function(client, character)\n      character:save()\n  end)\n</code></pre> OnCharFlagsGiven(ply, character, addedFlags) Purpose <p>Notifies that flags have been granted to a character.</p> When Called <p>After permanent or session flags are added.</p> Parameters <p>Player ply Player whose character received flags.</p> <p>Character character Character instance.</p> <p>string addedFlags Flags added.</p> Example Usage <pre><code>  hook.Add(\"OnCharFlagsGiven\", \"LogFlagGrant\", function(ply, character, addedFlags)\n      lia.log.add(ply, \"flagsGiven\", addedFlags)\n  end)\n</code></pre> OnCharFlagsTaken(ply, character, removedFlags) Purpose <p>Notifies that flags have been removed from a character.</p> When Called <p>After flag removal occurs.</p> Parameters <p>Player ply Player whose character lost flags.</p> <p>Character character Character affected.</p> <p>string removedFlags Flags removed.</p> Example Usage <pre><code>  hook.Add(\"OnCharFlagsTaken\", \"LogFlagRemoval\", function(ply, character, removedFlags)\n      lia.log.add(ply, \"flagsTaken\", removedFlags)\n  end)\n</code></pre> OnCharKick(character, client) Purpose <p>Runs when a character is kicked out of the game or forced to menu.</p> When Called <p>After kicking logic completes.</p> Parameters <p>Character character Character that was kicked.</p> <p>Player client Player owning the character (may be nil).</p> Example Usage <pre><code>  hook.Add(\"OnCharKick\", \"LogCharKick\", function(character, client)\n      lia.log.add(client, \"charKicked\", character:getName())\n  end)\n</code></pre> OnCharNetVarChanged(character, key, oldVar, value) Purpose <p>Fired when a character networked variable changes.</p> When Called <p>Whenever character:setNetVar updates a value.</p> Parameters <p>Character character Character whose var changed.</p> <p>string key Net var key.</p> <p>any oldVar Previous value.</p> <p>any value New value.</p> Example Usage <pre><code>  hook.Add(\"OnCharNetVarChanged\", \"TrackWantedState\", function(character, key, old, value)\n      if key == \"wanted\" then lia.log.add(nil, \"wantedToggle\", character:getName(), value) end\n  end)\n</code></pre> OnCharPermakilled(character, time) Purpose <p>Reports that a character has been permanently killed.</p> When Called <p>After perma-kill logic marks the character as dead.</p> Parameters <p>Character character Character that was permakilled.</p> <p>number time Timestamp of the perma-kill.</p> Example Usage <pre><code>  hook.Add(\"OnCharPermakilled\", \"AnnouncePerma\", function(character)\n      lia.chat.send(nil, \"event\", L(\"permakilled\", character:getName()))\n  end)\n</code></pre> OnCharRecognized(client, arg2) Purpose <p>Notifies when a recognition check is performed between characters.</p> When Called <p>When determining if one character recognizes another.</p> Parameters <p>Player client Player performing the recognition.</p> <p>any arg2 Target data (player or character).</p> Returns <p>boolean True if recognized; nil/false otherwise.</p> Example Usage <pre><code>  hook.Add(\"OnCharRecognized\", \"AlwaysRecognizeTeam\", function(client, target)\n      if target:getFaction() == client:Team() then return true end\n  end)\n</code></pre> OnCharTradeVendor(client, vendor, item, isSellingToVendor, character, itemType, isFailed) Purpose <p>Fired after a player completes a vendor trade interaction.</p> When Called <p>After buy/sell attempt is processed, including failures.</p> Parameters <p>Player client Player trading.</p> <p>Entity vendor Vendor entity.</p> <p>Item item Item instance if available.</p> <p>boolean isSellingToVendor True if player sold to vendor.</p> <p>Character character Player character.</p> <p>string itemType Item uniqueID.</p> <p>boolean isFailed True if the trade failed.</p> Example Usage <pre><code>  hook.Add(\"OnCharTradeVendor\", \"TrackVendorTrade\", function(client, vendor, item, selling)\n      lia.log.add(client, selling and \"vendorSell\" or \"vendorBuy\", item and item.uniqueID or \"unknown\")\n  end)\n</code></pre> OnCheaterCaught(client) Purpose <p>Triggered when a player is flagged as a cheater by detection logic.</p> When Called <p>After anti-cheat routines identify suspicious behavior.</p> Parameters <p>Player client Player detected.</p> Example Usage <pre><code>  hook.Add(\"OnCheaterCaught\", \"AutoKickCheaters\", function(client)\n      client:Kick(\"Cheating detected\")\n  end)\n</code></pre> OnDataSet(key, value, gamemode, map) Purpose <p>Fires when lia.data.set writes a value so other modules can react.</p> When Called <p>Immediately after a data key is set.</p> Parameters <p>string key Data key.</p> <p>any value Value written.</p> <p>string gamemode Gamemode identifier (namespace).</p> <p>string map Map name associated with the data.</p> Example Usage <pre><code>  hook.Add(\"OnDataSet\", \"MirrorToCache\", function(key, value)\n      lia.cache.set(key, value)\n  end)\n</code></pre> OnDatabaseLoaded() Purpose <p>Indicates that the database has finished loading queued data.</p> When Called <p>After tables/data are loaded on startup.</p> Example Usage <pre><code>  hook.Add(\"OnDatabaseLoaded\", \"StartSalaryTimers\", function()\n      hook.Run(\"CreateSalaryTimers\")\n  end)\n</code></pre> OnDeathSoundPlayed(client, deathSound) Purpose <p>Notifies that a death sound has been played for a player.</p> When Called <p>After emitting the death sound in PlayerDeath.</p> Parameters <p>Player client Player who died.</p> <p>string deathSound Sound path played.</p> Example Usage <pre><code>  hook.Add(\"OnDeathSoundPlayed\", \"BroadcastDeathSound\", function(client, sound)\n      lia.log.add(client, \"deathSound\", sound)\n  end)\n</code></pre> OnEntityLoaded(ent, data) Purpose <p>Called when an entity is loaded from persistence with its saved data.</p> When Called <p>After entity creation during map load and persistence restore.</p> Parameters <p>Entity ent Entity loaded.</p> <p>table data Saved data applied.</p> Example Usage <pre><code>  hook.Add(\"OnEntityLoaded\", \"RestoreHealth\", function(ent, data)\n      if data.health then ent:SetHealth(data.health) end\n  end)\n</code></pre> OnEntityPersistUpdated(ent, data) Purpose <p>Notifies that persistent data for an entity has been updated.</p> When Called <p>After persistence storage for an entity is rewritten.</p> Parameters <p>Entity ent Entity whose data changed.</p> <p>table data New persistence data.</p> Example Usage <pre><code>  hook.Add(\"OnEntityPersistUpdated\", \"RefreshDataCache\", function(ent, data)\n      ent.cachedPersist = data\n  end)\n</code></pre> OnEntityPersisted(ent, entData) Purpose <p>Called when an entity is first persisted to storage.</p> When Called <p>At the moment entity data is captured for saving.</p> Parameters <p>Entity ent Entity being persisted.</p> <p>table entData Data collected for saving.</p> Example Usage <pre><code>  hook.Add(\"OnEntityPersisted\", \"AddOwnerData\", function(ent, data)\n      if ent:GetNWString(\"owner\") then data.owner = ent:GetNWString(\"owner\") end\n  end)\n</code></pre> OnItemSpawned(itemEntity) Purpose <p>Fired when an item entity spawns into the world.</p> When Called <p>After an item entity is created (drop or spawn).</p> Parameters <p>Entity itemEntity Item entity instance.</p> Example Usage <pre><code>  hook.Add(\"OnItemSpawned\", \"ApplyItemGlow\", function(itemEntity)\n      itemEntity:SetRenderFX(kRenderFxGlowShell)\n  end)\n</code></pre> OnLoadTables() Purpose <p>Signals that data tables for the gamemode have been loaded.</p> When Called <p>After loading tables during startup.</p> Example Usage <pre><code>  hook.Add(\"OnLoadTables\", \"InitVendors\", function()\n      lia.vendor.loadAll()\n  end)\n</code></pre> OnNPCTypeSet(client, npc, npcID, filteredData) Purpose <p>Allows overriding the NPC type assignment for an NPC entity.</p> When Called <p>When setting an NPC's type using management tools.</p> Parameters <p>Player client Player setting the type.</p> <p>Entity npc NPC entity.</p> <p>string npcID Target NPC type ID.</p> <p>table filteredData Data prepared for the NPC.</p> Example Usage <pre><code>  hook.Add(\"OnNPCTypeSet\", \"LogNPCType\", function(client, npc, npcID)\n      lia.log.add(client, \"npcTypeSet\", npcID)\n  end)\n</code></pre> OnOOCMessageSent(client, message) Purpose <p>Fired when an OOC chat message is sent to the server.</p> When Called <p>After an OOC message passes cooldown checks.</p> Parameters <p>Player client Speaker.</p> <p>string message Message text.</p> Example Usage <pre><code>  hook.Add(\"OnOOCMessageSent\", \"RelayToDiscord\", function(client, message)\n      lia.discord.send(\"OOC\", client:Name(), message)\n  end)\n</code></pre> OnPainSoundPlayed(entity, painSound) Purpose <p>Notifies that a pain sound has been played for an entity.</p> When Called <p>After a pain sound is emitted.</p> Parameters <p>Entity entity Entity that made the sound.</p> <p>string painSound Sound path.</p> Example Usage <pre><code>  hook.Add(\"OnPainSoundPlayed\", \"CountPainSounds\", function(entity, sound)\n      lia.metrics.bump(\"painSounds\")\n  end)\n</code></pre> OnPickupMoney(activator, moneyEntity) Purpose <p>Fired when a player picks up a money entity from the world.</p> When Called <p>After money is collected.</p> Parameters <p>Player activator Player who picked up the money.</p> <p>Entity moneyEntity Money entity removed.</p> Example Usage <pre><code>  hook.Add(\"OnPickupMoney\", \"LogMoneyPickup\", function(ply, moneyEnt)\n      lia.log.add(ply, \"moneyPickup\", moneyEnt:getAmount())\n  end)\n</code></pre> OnPlayerEnterSequence(client, sequenceName, callback, time, noFreeze) Purpose <p>Called when a player starts an animated sequence (e.g., sit or custom act).</p> When Called <p>When sequence playback is initiated through player sequences.</p> Parameters <p>Player client Player entering the sequence.</p> <p>string sequenceName Sequence identifier.</p> <p>function callback Function to call when sequence ends.</p> <p>number time Duration of the sequence.</p> <p>boolean noFreeze Whether player movement is frozen.</p> Example Usage <pre><code>  hook.Add(\"OnPlayerEnterSequence\", \"SequenceLog\", function(client, sequenceName)\n      lia.log.add(client, \"sequenceStart\", sequenceName)\n  end)\n</code></pre> OnPlayerInteractItem(client, action, item, result, data) Purpose <p>Runs after a player interacts with an item and receives a result.</p> When Called <p>After item interaction logic completes.</p> Parameters <p>Player client Player performing the action.</p> <p>string action Action identifier.</p> <p>Item item Item involved.</p> <p>boolean|string|table result Result of the action.</p> <p>table data Additional action data.</p> Example Usage <pre><code>  hook.Add(\"OnPlayerInteractItem\", \"NotifyUse\", function(client, action, item, result)\n      if result then client:notifyLocalized(\"itemAction\", action, item:getName()) end\n  end)\n</code></pre> OnPlayerJoinClass(target, arg2, oldClass) Purpose <p>Triggered when a player joins a class or team variant.</p> When Called <p>After the class change is applied.</p> Parameters <p>Player target Player who changed class.</p> <p>any arg2 New class data/index.</p> <p>any oldClass Previous class data/index.</p> Example Usage <pre><code>  hook.Add(\"OnPlayerJoinClass\", \"ClassLog\", function(client, newClass, oldClass)\n      lia.log.add(client, \"classJoined\", tostring(newClass))\n  end)\n</code></pre> OnPlayerLeaveSequence(client) Purpose <p>Fired when a player exits an animated sequence.</p> When Called <p>When the sequence finishes or is cancelled.</p> Parameters <p>Player client Player leaving the sequence.</p> Example Usage <pre><code>  hook.Add(\"OnPlayerLeaveSequence\", \"SequenceEndLog\", function(client)\n      lia.log.add(client, \"sequenceEnd\")\n  end)\n</code></pre> OnPlayerLostStackItem(itemTypeOrItem) Purpose <p>Notifies when a player loses a stackable item (stack count reaches zero).</p> When Called <p>After stack removal logic.</p> Parameters <p>string|Item itemTypeOrItem Item uniqueID or item instance removed.</p> Example Usage <pre><code>  hook.Add(\"OnPlayerLostStackItem\", \"RevokeBuff\", function(itemTypeOrItem)\n      if itemTypeOrItem == \"medkit\" then lia.buff.remove(\"healing\") end\n  end)\n</code></pre> OnPlayerObserve(client, state) Purpose <p>Notifies when a player toggles observer mode (freecam/third person).</p> When Called <p>When observation state changes via admin commands or mechanics.</p> Parameters <p>Player client Player entering or exiting observe.</p> <p>boolean state True when entering observe mode.</p> Example Usage <pre><code>  hook.Add(\"OnPlayerObserve\", \"HideHUD\", function(client, state)\n      client:setNetVar(\"hideHUD\", state)\n  end)\n</code></pre> OnPlayerSwitchClass(client, class, oldClass) Purpose <p>Notifies that a player switched to a different class.</p> When Called <p>After the class transition is applied.</p> Parameters <p>Player client Player switching class.</p> <p>table|number class New class identifier or data.</p> <p>table|number oldClass Previous class identifier or data.</p> Example Usage <pre><code>  hook.Add(\"OnPlayerSwitchClass\", \"RefreshLoadout\", function(client, class, oldClass)\n      lia.loadout.give(client)\n  end)\n</code></pre> OnRequestItemTransfer(inventoryPanel, itemID, targetInventoryID, x, y) Purpose <p>Allows modules to override item transfer requests before processing.</p> When Called <p>When an inventory panel asks to move an item to another inventory.</p> Parameters <p>Panel inventoryPanel UI panel requesting transfer.</p> <p>number|string itemID Item instance ID.</p> <p>number|string targetInventoryID Destination inventory.</p> <p>number x X slot.</p> <p>number y Y slot.</p> Example Usage <pre><code>  hook.Add(\"OnRequestItemTransfer\", \"BlockDuringTrade\", function(_, _, targetInv)\n      if lia.trade.isActive(targetInv) then return false end\n  end)\n</code></pre> OnSalaryAdjust(client) Purpose <p>Allows adjusting salary amount just before payment.</p> When Called <p>During salary payout calculation.</p> Parameters <p>Player client Player receiving pay.</p> Returns <p>number Modified salary value.</p> Example Usage <pre><code>  hook.Add(\"OnSalaryAdjust\", \"TaxSalary\", function(client)\n      return client:isTaxed() and -50 or 0\n  end)\n</code></pre> OnSalaryGiven(client, char, pay, faction, class) Purpose <p>Fired when salary is granted to a player.</p> When Called <p>After salary is deposited into the character.</p> Parameters <p>Player client Player receiving salary.</p> <p>Character char Character object.</p> <p>number pay Amount paid.</p> <p>table faction Faction data.</p> <p>table class Class data (if any).</p> Example Usage <pre><code>  hook.Add(\"OnSalaryGiven\", \"LogSalary\", function(client, char, pay)\n      lia.log.add(client, \"salaryGiven\", pay)\n  end)\n</code></pre> OnSetUsergroup(sid, new, source, ply) Purpose <p>Called when a player's usergroup is changed.</p> When Called <p>After a player's usergroup has been successfully changed.</p> Parameters <p>string sid Steam ID of the player whose usergroup changed.</p> <p>string new New usergroup name.</p> <p>string source Source of the change (e.g., \"Lilia\").</p> <p>Player ply Player entity whose usergroup changed.</p> Example Usage <pre><code>  hook.Add(\"OnSetUsergroup\", \"LogUsergroupChange\", function(sid, new, source, ply)\n      print(string.format(\"Usergroup changed for %s to %s by %s\", sid, new, source))\n  end)\n</code></pre> OnSavedItemLoaded(loadedItems) Purpose <p>Notifies that saved item instances have been loaded from storage.</p> When Called <p>After loading saved items on startup.</p> Parameters <p>table loadedItems Table of item instances.</p> Example Usage <pre><code>  hook.Add(\"OnSavedItemLoaded\", \"IndexCustomData\", function(loadedItems)\n      lia.items.buildCache(loadedItems)\n  end)\n</code></pre> OnServerLog(client, logType, logString, category) Purpose <p>Central logging hook for server log entries.</p> When Called <p>Whenever lia.log.add writes to the server log.</p> Parameters <p>Player client Player associated with the log (may be nil).</p> <p>string logType Log type identifier.</p> <p>string logString Formatted log message.</p> <p>string category Log category.</p> Example Usage <pre><code>  hook.Add(\"OnServerLog\", \"ForwardToDiscord\", function(client, logType, text, category)\n      lia.discord.send(category, logType, text)\n  end)\n</code></pre> OnTicketClaimed(client, requester, ticketMessage) Purpose <p>Fired when a staff member claims a support ticket.</p> When Called <p>After claim assignment succeeds.</p> Parameters <p>Player client Staff claiming the ticket.</p> <p>string requester SteamID of the requester.</p> <p>string ticketMessage Ticket text.</p> Example Usage <pre><code>  hook.Add(\"OnTicketClaimed\", \"AnnounceClaim\", function(client, requester)\n      client:notifyLocalized(\"ticketClaimed\", requester)\n  end)\n</code></pre> OnTicketClosed(client, requester, ticketMessage) Purpose <p>Fired when a support ticket is closed.</p> When Called <p>After the ticket is marked closed and responders notified.</p> Parameters <p>Player client Staff closing the ticket.</p> <p>string requester SteamID of the requester.</p> <p>string ticketMessage Original ticket text.</p> Example Usage <pre><code>  hook.Add(\"OnTicketClosed\", \"LogTicketClose\", function(client, requester)\n      lia.log.add(client, \"ticketClosed\", requester)\n  end)\n</code></pre> OnTicketCreated(noob, message) Purpose <p>Fired when a support ticket is created.</p> When Called <p>Right after a player submits a ticket.</p> Parameters <p>Player noob Player submitting the ticket.</p> <p>string message Ticket text.</p> Example Usage <pre><code>  hook.Add(\"OnTicketCreated\", \"NotifyStaff\", function(noob, message)\n      lia.staff.notifyAll(noob:Nick() .. \": \" .. message)\n  end)\n</code></pre> OnUsergroupPermissionsChanged(groupName, arg2) Purpose <p>Notifies that usergroup permissions have changed.</p> When Called <p>After a usergroup permission update occurs.</p> Parameters <p>string groupName Usergroup name.</p> <p>table arg2 New permission data.</p> Example Usage <pre><code>  hook.Add(\"OnUsergroupPermissionsChanged\", \"RefreshCachedPerms\", function(groupName)\n      lia.permissions.refresh(groupName)\n  end)\n</code></pre> OnVendorEdited(client, vendor, key) Purpose <p>Fired when a vendor entity is edited via the vendor interface.</p> When Called <p>After vendor key/value is changed.</p> Parameters <p>Player client Player editing.</p> <p>Entity vendor Vendor entity.</p> <p>string key Property key edited.</p> Example Usage <pre><code>  hook.Add(\"OnVendorEdited\", \"SyncVendorEdits\", function(client, vendor, key)\n      lia.vendor.sync(vendor)\n  end)\n</code></pre> OnVoiceTypeChanged(client) Purpose <p>Signals that a player's voice chat style has changed (whisper/talk/yell).</p> When Called <p>After a player updates their voice type.</p> Parameters <p>Player client Player whose voice type changed.</p> Example Usage <pre><code>  hook.Add(\"OnVoiceTypeChanged\", \"UpdateVoiceRadius\", function(client)\n      lia.voice.updateHearTables()\n  end)\n</code></pre> OptionReceived(arg1, key, value) Purpose <p>Called when a networked option value is received or changed.</p> When Called <p>When lia.option.set broadcasts an option that should network.</p> Parameters <p>Player arg1 optional Player who triggered the change (nil when server initiated).</p> <p>string key Option key.</p> <p>any value New value.</p> Example Usage <pre><code>  hook.Add(\"OptionReceived\", \"ApplyOption\", function(_, key, value)\n      if key == \"TalkRange\" then lia.config.set(\"TalkRange\", value) end\n  end)\n</code></pre> PlayerAccessVendor(client, vendor) Purpose <p>Checks if a player is permitted to access vendor management.</p> When Called <p>When a player attempts to open vendor edit controls.</p> Parameters <p>Player client Player requesting access.</p> <p>Entity vendor Vendor entity.</p> Returns <p>boolean False to block, true/nil to allow.</p> Example Usage <pre><code>  hook.Add(\"PlayerAccessVendor\", \"AdminOnlyVendorEdit\", function(client)\n      if not client:IsAdmin() then return false end\n  end)\n</code></pre> PlayerCheatDetected(client) Purpose <p>Triggered when cheat detection flags a player.</p> When Called <p>After the cheat system confirms suspicious behavior.</p> Parameters <p>Player client Player detected.</p> Example Usage <pre><code>  hook.Add(\"PlayerCheatDetected\", \"AutoBan\", function(client)\n      lia.bans.add(client:SteamID(), \"Cheat detected\", 0)\n  end)\n</code></pre> PlayerGagged(target, admin) Purpose <p>Fired when a player is gagged (voice chat disabled).</p> When Called <p>After gag state toggles to true.</p> Parameters <p>Player target Player gagged.</p> <p>Player admin Admin who issued the gag.</p> Example Usage <pre><code>  hook.Add(\"PlayerGagged\", \"LogGag\", function(target, admin)\n      lia.log.add(admin, \"playerGagged\", target:Name())\n  end)\n</code></pre> PlayerLiliaDataLoaded(client) Purpose <p>Notifies that Lilia player data has finished loading for a client.</p> When Called <p>After lia data, items, doors, and panels are synced to the client.</p> Parameters <p>Player client Player whose data is loaded.</p> Example Usage <pre><code>  hook.Add(\"PlayerLiliaDataLoaded\", \"SendWelcome\", function(client)\n      client:notifyLocalized(\"welcomeBack\")\n  end)\n</code></pre> PlayerLoadedChar(client, character, currentChar) Purpose <p>Fired after a player's character has been fully loaded.</p> When Called <p>Once character variables are applied and the player is spawned.</p> Parameters <p>Player client Player whose character loaded.</p> <p>Character character Active character.</p> <p>number currentChar Character ID index.</p> Example Usage <pre><code>  hook.Add(\"PlayerLoadedChar\", \"ApplyLoadout\", function(client, character)\n      lia.loadout.give(client)\n  end)\n</code></pre> PlayerMessageSend(speaker, chatType, text, anonymous, receivers) Purpose <p>Allows modifying chat text before it is sent to listeners.</p> When Called <p>During chat send for all chat types.</p> Parameters <p>Player speaker Player speaking.</p> <p>string chatType Chat class identifier.</p> <p>string text Raw message text.</p> <p>boolean anonymous Whether the message is anonymous.</p> <p>table receivers List of recipients (optional).</p> Returns <p>string Replacement message text, or nil to keep.</p> Example Usage <pre><code>  hook.Add(\"PlayerMessageSend\", \"CensorCurseWords\", function(_, _, text)\n      return text:gsub(\"badword\", \"****\")\n  end)\n</code></pre> PlayerModelChanged(client, value) Purpose <p>Triggered when a player's model changes.</p> When Called <p>After a new model is set on the player.</p> Parameters <p>Player client Player whose model changed.</p> <p>string value New model path.</p> Example Usage <pre><code>  hook.Add(\"PlayerModelChanged\", \"ReapplyBodygroups\", function(client)\n      lia.models.applyBodygroups(client)\n  end)\n</code></pre> PlayerMuted(target, admin) Purpose <p>Fired when a player is muted (text chat disabled).</p> When Called <p>After muting is applied.</p> Parameters <p>Player target Player muted.</p> <p>Player admin Admin who muted.</p> Example Usage <pre><code>  hook.Add(\"PlayerMuted\", \"LogMute\", function(target, admin)\n      lia.log.add(admin, \"playerMuted\", target:Name())\n  end)\n</code></pre> PlayerShouldPermaKill(client, inflictor, attacker) Purpose <p>Determines if a death should result in a permanent character kill.</p> When Called <p>During PlayerDeath when checking perma-kill conditions.</p> Parameters <p>Player client Player who died.</p> <p>Entity inflictor Entity inflicting damage.</p> <p>Entity attacker Attacker entity.</p> Returns <p>boolean True to perma-kill, false/nil to avoid.</p> Example Usage <pre><code>  hook.Add(\"PlayerShouldPermaKill\", \"HardcoreMode\", function(client)\n      return lia.config.get(\"HardcoreMode\", false)\n  end)\n</code></pre> PlayerSpawnPointSelected(client, pos, ang) Purpose <p>Allows overriding the spawn point chosen for a player.</p> When Called <p>When selecting a specific spawn point entity/position.</p> Parameters <p>Player client Player spawning.</p> <p>Vector pos Proposed position.</p> <p>Angle ang Proposed angle.</p> Returns <p>vector, angle Replacement spawn location or nil to keep.</p> Example Usage <pre><code>  hook.Add(\"PlayerSpawnPointSelected\", \"SpawnInZone\", function(client)\n      return lia.spawns.pickSafe(), Angle(0, 0, 0)\n  end)\n</code></pre> PlayerStaminaGained(client) Purpose <p>Notifies that stamina has been gained by a player.</p> When Called <p>After stamina increase is applied.</p> Parameters <p>Player client Player gaining stamina.</p> Example Usage <pre><code>  hook.Add(\"PlayerStaminaGained\", \"RewardRecovery\", function(client)\n      client:notifyLocalized(\"staminaRestored\")\n  end)\n</code></pre> PlayerStaminaLost(client) Purpose <p>Notifies that stamina has been reduced for a player.</p> When Called <p>After stamina drain is applied.</p> Parameters <p>Player client Player losing stamina.</p> Example Usage <pre><code>  hook.Add(\"PlayerStaminaLost\", \"WarnLowStamina\", function(client)\n      if client:getLocalVar(\"stm\", 100) &lt; 10 then client:notifyLocalized(\"lowStamina\") end\n  end)\n</code></pre> PlayerUngagged(target, admin) Purpose <p>Fired when a gag on a player is removed.</p> When Called <p>After gag state switches to false.</p> Parameters <p>Player target Player ungagged.</p> <p>Player admin Admin lifting the gag.</p> Example Usage <pre><code>  hook.Add(\"PlayerUngagged\", \"LogUngag\", function(target, admin)\n      lia.log.add(admin, \"playerUngagged\", target:Name())\n  end)\n</code></pre> PlayerUnmuted(target, admin) Purpose <p>Fired when a mute on a player is removed.</p> When Called <p>After muting state switches to false.</p> Parameters <p>Player target Player unmuted.</p> <p>Player admin Admin lifting the mute.</p> Example Usage <pre><code>  hook.Add(\"PlayerUnmuted\", \"LogUnmute\", function(target, admin)\n      lia.log.add(admin, \"playerUnmuted\", target:Name())\n  end)\n</code></pre> PlayerUseDoor(client, door) Purpose <p>Final permission check before a player uses a door entity.</p> When Called <p>When a use input is received on a door.</p> Parameters <p>Player client Player using the door.</p> <p>Entity door Door entity.</p> Returns <p>boolean False to block use; true/nil to allow.</p> Example Usage <pre><code>  hook.Add(\"PlayerUseDoor\", \"RaidLockdown\", function(client)\n      if lia.state.isRaid() then return false end\n  end)\n</code></pre> PostDoorDataLoad(ent, doorData) Purpose <p>Runs after door data has been loaded from persistence.</p> When Called <p>After door ownership/vars are applied on map load.</p> Parameters <p>Entity ent Door entity.</p> <p>table doorData Data restored for the door.</p> Example Usage <pre><code>  hook.Add(\"PostDoorDataLoad\", \"ApplyDoorSkin\", function(ent, data)\n      if data.skin then ent:SetSkin(data.skin) end\n  end)\n</code></pre> PostLoadData() Purpose <p>Called after all gamemode data loading is complete.</p> When Called <p>At the end of server initialization once stored data is in memory.</p> Example Usage <pre><code>  hook.Add(\"PostLoadData\", \"WarmCache\", function()\n      lia.cache.preload()\n  end)\n</code></pre> PostPlayerInitialSpawn(client) Purpose <p>Runs after the player's initial spawn setup finishes.</p> When Called <p>Right after PlayerInitialSpawn processing completes.</p> Parameters <p>Player client Newly spawned player.</p> Example Usage <pre><code>  hook.Add(\"PostPlayerInitialSpawn\", \"SendMOTD\", function(client)\n      lia.motd.send(client)\n  end)\n</code></pre> PostPlayerLoadedChar(client, character, currentChar) Purpose <p>Runs after a player's character and inventories have been loaded.</p> When Called <p>Immediately after PlayerLoadedChar finishes syncing.</p> Parameters <p>Player client Player.</p> <p>Character character Loaded character.</p> <p>number currentChar Character index.</p> Example Usage <pre><code>  hook.Add(\"PostPlayerLoadedChar\", \"GiveStarterItems\", function(client, character)\n      lia.items.giveStarter(character)\n  end)\n</code></pre> PostPlayerLoadout(client) Purpose <p>Fired after PlayerLoadout has finished giving items and weapons.</p> When Called <p>After the default loadout logic completes.</p> Parameters <p>Player client Player who spawned.</p> Example Usage <pre><code>  hook.Add(\"PostPlayerLoadout\", \"AddExtraGear\", function(client)\n      client:Give(\"weapon_crowbar\")\n  end)\n</code></pre> PostPlayerSay(client, message, chatType, anonymous) Purpose <p>Allows modules to modify chat behavior after PlayerSay builds recipients.</p> When Called <p>After chat data is prepared but before sending to clients.</p> Parameters <p>Player client Speaker.</p> <p>string message Message text.</p> <p>string chatType Chat class.</p> <p>boolean anonymous Whether the message is anonymous.</p> Returns <p>string, boolean Optionally return modified text and anonymity.</p> Example Usage <pre><code>  hook.Add(\"PostPlayerSay\", \"AddOOCPrefix\", function(client, message, chatType, anonymous)\n      if chatType == \"ooc\" then return \"[OOC] \" .. message, anonymous end\n  end)\n</code></pre> PostScaleDamage(hitgroup, dmgInfo, damageScale) Purpose <p>Fired after damage scaling is applied to a hitgroup.</p> When Called <p>At the end of ScalePlayerDamage.</p> Parameters <p>number hitgroup Hitgroup hit.</p> <p>CTakeDamageInfo dmgInfo Damage info object.</p> <p>number damageScale Scale that was applied.</p> Example Usage <pre><code>  hook.Add(\"PostScaleDamage\", \"TrackDamage\", function(hitgroup, dmgInfo, scale)\n      lia.metrics.bump(\"damage\", dmgInfo:GetDamage() * scale)\n  end)\n</code></pre> PreCharDelete(id) Purpose <p>Pre-deletion hook for characters to run cleanup logic.</p> When Called <p>Just before a character is removed from the database.</p> Parameters <p>number id Character ID to delete.</p> Example Usage <pre><code>  hook.Add(\"PreCharDelete\", \"ArchiveChar\", function(id)\n      lia.backup.character(id)\n  end)\n</code></pre> PreDoorDataSave(door, doorData) Purpose <p>Allows adding extra data before door data is saved to persistence.</p> When Called <p>During door save routines.</p> Parameters <p>Entity door Door entity.</p> <p>table doorData Data about to be saved.</p> Example Usage <pre><code>  hook.Add(\"PreDoorDataSave\", \"SaveDoorSkin\", function(door, data)\n      data.skin = door:GetSkin()\n  end)\n</code></pre> PrePlayerInteractItem(client, action, item) Purpose <p>Lets modules validate an item interaction before it runs.</p> When Called <p>Prior to executing an item action.</p> Parameters <p>Player client Player performing the action.</p> <p>string action Action identifier.</p> <p>Item item Item being interacted with.</p> Returns <p>boolean False to block; true/nil to allow.</p> Example Usage <pre><code>  hook.Add(\"PrePlayerInteractItem\", \"BlockWhileBusy\", function(client)\n      if client:isBusy() then return false end\n  end)\n</code></pre> PrePlayerLoadedChar(client, character, currentChar) Purpose <p>Runs before character data is fully loaded into a player.</p> When Called <p>Prior to PlayerLoadedChar logic.</p> Parameters <p>Player client Player about to load a character.</p> <p>Character character Character object.</p> <p>number currentChar Character index.</p> Example Usage <pre><code>  hook.Add(\"PrePlayerLoadedChar\", \"ResetRagdoll\", function(client)\n      client:removeRagdoll()\n  end)\n</code></pre> PreSalaryGive(client, char, pay, faction, class) Purpose <p>Allows modification of salary payout before it is given.</p> When Called <p>During salary calculation loop, before pay is issued.</p> Parameters <p>Player client Player due for salary.</p> <p>Character char Character.</p> <p>number pay Current calculated pay.</p> <p>table faction Faction data.</p> <p>table class Class data.</p> Returns <p>number Adjusted pay or nil to keep.</p> Example Usage <pre><code>  hook.Add(\"PreSalaryGive\", \"ApplyTax\", function(client, char, pay)\n      return pay * 0.9\n  end)\n</code></pre> PreScaleDamage(hitgroup, dmgInfo, damageScale) Purpose <p>Called before damage scaling is calculated.</p> When Called <p>At the start of ScalePlayerDamage.</p> Parameters <p>number hitgroup Hitgroup hit.</p> <p>CTakeDamageInfo dmgInfo Damage info object.</p> <p>number damageScale Starting scale value.</p> Example Usage <pre><code>  hook.Add(\"PreScaleDamage\", \"ArmorPiercing\", function(hitgroup, dmgInfo, scale)\n      if dmgInfo:IsExplosionDamage() then dmgInfo:ScaleDamage(scale * 1.2) end\n  end)\n</code></pre> RemoveWarning(charID, index) Purpose <p>Removes a warning entry for a character and informs listeners.</p> When Called <p>When an admin deletes a warning record.</p> Parameters <p>number|string charID Character database ID.</p> <p>number index Position of the warning in the list to remove.</p> Returns <p>deferred|table Deferred resolving to removed warning row or nil.</p> Example Usage <pre><code>  hook.Add(\"RemoveWarning\", \"MirrorWarningRemoval\", function(charID, index)\n      print(\"Warning removed\", charID, index)\n  end)\n</code></pre> SaveData() Purpose <p>Performs a full save of gamemode persistence (entities, data, etc.).</p> When Called <p>When persistence save is triggered manually or automatically.</p> Example Usage <pre><code>  hook.Add(\"SaveData\", \"ExtraSave\", function()\n      lia.custom.saveAll()\n  end)\n</code></pre> SendPopup(noob, message) Purpose <p>Displays a popup notification to a player with custom text.</p> When Called <p>Whenever the server wants to send a popup dialog.</p> Parameters <p>Player noob Player receiving the popup.</p> <p>string message Text to show.</p> Example Usage <pre><code>  hook.Add(\"SendPopup\", \"PopupExample\", function(client, message)\n      client:notifyLocalized(message)\n  end)\n</code></pre> SetupBotPlayer(client) Purpose <p>Builds and spawns a bot player with default character data.</p> When Called <p>When the server requests creation of a bot player.</p> Parameters <p>Player client Bot player entity.</p> Example Usage <pre><code>  hook.Add(\"SetupBotPlayer\", \"BotWelcome\", function(client)\n      print(\"Bot setup complete\", client)\n  end)\n</code></pre> SetupDatabase() Purpose <p>Sets up database tables, indexes, and initial schema.</p> When Called <p>During gamemode initialization after database connection is established.</p> Example Usage <pre><code>  hook.Add(\"SetupDatabase\", \"InitCustomTables\", function()\n      lia.db.query(\"CREATE TABLE IF NOT EXISTS custom(id INT)\")\n  end)\n</code></pre> SetupPlayerModel(modelEntity, character) Purpose <p>Configure a player model entity after it has been created.</p> When Called <p>When spawning a playable model entity for preview or vendors.</p> Parameters <p>Entity modelEntity The spawned model entity.</p> <p>Character character Character data used for appearance.</p> Example Usage <pre><code>  hook.Add(\"SetupPlayerModel\", \"ApplyCharSkin\", function(modelEntity, character)\n      modelEntity:SetSkin(character:getSkin() or 0)\n  end)\n</code></pre> ShouldDataBeSaved() Purpose <p>Determines if persistence data should be saved at this time.</p> When Called <p>Before performing a save cycle.</p> Returns <p>boolean False to skip saving; true/nil to proceed.</p> Example Usage <pre><code>  hook.Add(\"ShouldDataBeSaved\", \"OnlyDuringGrace\", function()\n      return not lia.state.isCombatPhase()\n  end)\n</code></pre> ShouldOverrideSalaryTimers() Purpose <p>Determines if the default salary timer creation should be overridden.</p> When Called <p>Before creating salary timers to allow custom salary systems.</p> Returns <p>boolean True to prevent default salary timer creation; false/nil to allow.</p> Example Usage <pre><code>  hook.Add(\"ShouldOverrideSalaryTimers\", \"CustomSalarySystem\", function()\n      return true -- Prevent default timers, handle salary elsewhere\n  end)\n</code></pre> ShouldDeleteSavedItems() Purpose <p>Decides whether saved item data should be deleted on map cleanup.</p> When Called <p>Before removing saved items.</p> Returns <p>boolean False to keep saved items; true/nil to delete.</p> Example Usage <pre><code>  hook.Add(\"ShouldDeleteSavedItems\", \"KeepForTesting\", function()\n      return false\n  end)\n</code></pre> ShouldSaveItem(itemTable, entity) Purpose <p>Decide if an item should be saved to the database when dropped on the map.</p> When Called <p>When an item entity is created and would normally be saved to the lia_saveditems table.</p> Parameters <p>Item itemTable Item instance being saved.</p> <p>Entity entity Item entity being saved.</p> Returns <p>boolean False to prevent saving; true/nil to allow saving.</p> Example Usage <pre><code>  hook.Add(\"ShouldSaveItem\", \"NoSaveExplosives\", function(itemTable, entity)\n      if itemTable.category == \"Explosives\" then return false end\n  end)\n</code></pre> ShouldPlayDeathSound(client, deathSound) Purpose <p>Decide if a death sound should play for a player.</p> When Called <p>Right before emitting the death sound.</p> Parameters <p>Player client Player who died.</p> <p>string deathSound Sound that would be played.</p> Returns <p>boolean False to suppress; true/nil to allow.</p> Example Usage <pre><code>  hook.Add(\"ShouldPlayDeathSound\", \"MuteStaff\", function(client)\n      if client:Team() == FACTION_STAFF then return false end\n  end)\n</code></pre> ShouldPlayPainSound(entity, painSound) Purpose <p>Decide if a pain sound should play for an entity.</p> When Called <p>When choosing whether to emit pain audio.</p> Parameters <p>Entity entity Entity that would play the sound.</p> <p>string painSound Sound path.</p> Returns <p>boolean False to suppress; true/nil to allow.</p> Example Usage <pre><code>  hook.Add(\"ShouldPlayPainSound\", \"MuteRobots\", function(entity)\n      if entity:IsPlayer() and entity:IsCombine() then return false end\n  end)\n</code></pre> ShouldSpawnClientRagdoll(client) Purpose <p>Controls whether a client ragdoll should be spawned on death.</p> When Called <p>During PlayerDeath ragdoll handling.</p> Parameters <p>Player client Player who died.</p> Returns <p>boolean False to prevent ragdoll; true/nil to allow.</p> Example Usage <pre><code>  hook.Add(\"ShouldSpawnClientRagdoll\", \"NoRagdollInVehicles\", function(client)\n      return not client:InVehicle()\n  end)\n</code></pre> StorageCanTransferItem(client, storage, item) Purpose <p>Validates whether an item can be transferred to/from storage inventories.</p> When Called <p>When an item move involving storage is requested.</p> Parameters <p>Player client Player performing the move.</p> <p>Entity|table storage Storage entity or inventory table.</p> <p>Item item Item being moved.</p> Returns <p>boolean False to block; true/nil to allow.</p> Example Usage <pre><code>  hook.Add(\"StorageCanTransferItem\", \"LimitWeapons\", function(client, storage, item)\n      if item.isWeapon then return false end\n  end)\n</code></pre> StorageEntityRemoved(storageEntity, inventory) Purpose <p>Fired when a storage entity is removed from the world.</p> When Called <p>On removal/deletion of the storage entity.</p> Parameters <p>Entity storageEntity Storage entity removed.</p> <p>Inventory inventory Inventory associated.</p> Example Usage <pre><code>  hook.Add(\"StorageEntityRemoved\", \"SaveStorage\", function(storageEntity, inventory)\n      lia.storage.saveInventory(inventory)\n  end)\n</code></pre> StorageInventorySet(entity, inventory, isCar) Purpose <p>Fired when a storage inventory is assigned to an entity.</p> When Called <p>After inventory is set on a storage entity.</p> Parameters <p>Entity entity Entity receiving the inventory.</p> <p>Inventory inventory Inventory assigned.</p> <p>boolean isCar True if the storage is a vehicle trunk.</p> Example Usage <pre><code>  hook.Add(\"StorageInventorySet\", \"TrackStorage\", function(ent, inv)\n      lia.log.add(nil, \"storageSet\", inv:getID())\n  end)\n</code></pre> StorageItemRemoved() Purpose <p>Notifies that an item was removed from a storage inventory.</p> When Called <p>After removal occurs.</p> Example Usage <pre><code>  hook.Add(\"StorageItemRemoved\", \"RecountStorage\", function()\n      lia.storage.updateCapacity()\n  end)\n</code></pre> StorageRestored(ent, inventory) Purpose <p>Fired when a storage inventory is restored from disk.</p> When Called <p>During storage load routines.</p> Parameters <p>Entity ent Storage entity.</p> <p>Inventory inventory Inventory object restored.</p> Example Usage <pre><code>  hook.Add(\"StorageRestored\", \"SyncRestoredStorage\", function(ent, inventory)\n      inventory:sync(ent)\n  end)\n</code></pre> StoreSpawns(spawns) Purpose <p>Persists the current spawn positions to storage.</p> When Called <p>When spawns are being saved.</p> Parameters <p>table spawns Spawn data to store.</p> Example Usage <pre><code>  hook.Add(\"StoreSpawns\", \"CustomSpawnStore\", function(spawns)\n      file.Write(\"lilia/spawns.json\", util.TableToJSON(spawns))\n  end)\n</code></pre> SyncCharList(client) Purpose <p>Syncs the character list data to a specific client.</p> When Called <p>When a player requests an updated character list.</p> Parameters <p>Player client Player receiving the list.</p> Example Usage <pre><code>  hook.Add(\"SyncCharList\", \"AddExtraFields\", function(client)\n      lia.char.sync(client)\n  end)\n</code></pre> TicketSystemClaim(client, requester, ticketMessage) Purpose <p>Allows custom validation when a player attempts to claim a support ticket.</p> When Called <p>When a claim request is made for a ticket.</p> Parameters <p>Player client Player claiming the ticket.</p> <p>Player|string requester Ticket requester or their SteamID.</p> <p>string ticketMessage Ticket description.</p> Returns <p>boolean False to block; true/nil to allow.</p> Example Usage <pre><code>  hook.Add(\"TicketSystemClaim\", \"AllowStaffOnlyClaims\", function(client)\n      if not client:isStaffOnDuty() then return false end\n  end)\n</code></pre> TicketSystemClose(client, requester, ticketMessage) Purpose <p>Allows custom validation when a player attempts to close a support ticket.</p> When Called <p>When a close request is made for a ticket.</p> Parameters <p>Player client Player closing the ticket.</p> <p>Player|string requester Ticket requester or SteamID.</p> <p>string ticketMessage Ticket description.</p> Returns <p>boolean False to block; true/nil to allow.</p> Example Usage <pre><code>  hook.Add(\"TicketSystemClose\", \"OnlyOwnerOrStaff\", function(client, requester)\n      if client ~= requester and not client:isStaffOnDuty() then return false end\n  end)\n</code></pre> ToggleLock(client, door, state) Purpose <p>Signals that a door lock state was toggled.</p> When Called <p>After a lock/unlock action completes.</p> Parameters <p>Player client Player toggling.</p> <p>Entity door Door entity.</p> <p>boolean state True if locked after toggle.</p> Example Usage <pre><code>  hook.Add(\"ToggleLock\", \"LogToggleLock\", function(client, door, state)\n      lia.log.add(client, \"toggleLock\", tostring(state))\n  end)\n</code></pre> UpdateEntityPersistence(vendor) Purpose <p>Writes updated persistence data for an entity (commonly vendors).</p> When Called <p>After data changes that must be persisted.</p> Parameters <p>Entity vendor Entity whose persistence should be updated.</p> Example Usage <pre><code>  hook.Add(\"UpdateEntityPersistence\", \"SaveVendorChanges\", function(vendor)\n      lia.entity.save(vendor)\n  end)\n</code></pre> VendorClassUpdated(vendor, id, allowed) Purpose <p>Fired when a vendor's class allow list changes.</p> When Called <p>After toggling a class for vendor access.</p> Parameters <p>Entity vendor Vendor entity.</p> <p>number|string id Class identifier.</p> <p>boolean allowed Whether the class is allowed.</p> Example Usage <pre><code>  hook.Add(\"VendorClassUpdated\", \"SyncVendorClassUpdate\", function(vendor)\n      lia.vendor.sync(vendor)\n  end)\n</code></pre> VendorEdited(liaVendorEnt, key) Purpose <p>General notification that a vendor property was edited.</p> When Called <p>Whenever vendor data is modified through the editor.</p> Parameters <p>Entity liaVendorEnt Vendor entity.</p> <p>string key Property key changed.</p> Example Usage <pre><code>  hook.Add(\"VendorEdited\", \"ResyncOnEdit\", function(vendor)\n      lia.vendor.sync(vendor)\n  end)\n</code></pre> VendorFactionBuyScaleUpdated(vendor, factionID, scale) Purpose <p>Notifies that a vendor's faction-specific buy multiplier was updated.</p> When Called <p>After setting faction buy scale.</p> Parameters <p>Entity vendor Vendor entity.</p> <p>number|string factionID Faction identifier.</p> <p>number scale New buy scale.</p> Example Usage <pre><code>  hook.Add(\"VendorFactionBuyScaleUpdated\", \"SyncFactionBuyScale\", function(vendor)\n      lia.vendor.sync(vendor)\n  end)\n</code></pre> VendorFactionSellScaleUpdated(vendor, factionID, scale) Purpose <p>Notifies that a vendor's faction-specific sell multiplier was updated.</p> When Called <p>After setting faction sell scale.</p> Parameters <p>Entity vendor Vendor entity.</p> <p>number|string factionID Faction identifier.</p> <p>number scale New sell scale.</p> Example Usage <pre><code>  hook.Add(\"VendorFactionSellScaleUpdated\", \"SyncFactionSellScale\", function(vendor)\n      lia.vendor.sync(vendor)\n  end)\n</code></pre> VendorFactionUpdated(vendor, id, allowed) Purpose <p>Fired when a vendor's faction allow/deny list is changed.</p> When Called <p>After toggling faction access.</p> Parameters <p>Entity vendor Vendor entity.</p> <p>number|string id Faction identifier.</p> <p>boolean allowed Whether the faction is allowed.</p> Example Usage <pre><code>  hook.Add(\"VendorFactionUpdated\", \"SyncFactionAccess\", function(vendor)\n      lia.vendor.sync(vendor)\n  end)\n</code></pre> VendorItemMaxStockUpdated(vendor, itemType, value) Purpose <p>Fired when the maximum stock for a vendor item is updated.</p> When Called <p>After editing item stock limits.</p> Parameters <p>Entity vendor Vendor entity.</p> <p>string itemType Item uniqueID.</p> <p>number value New max stock.</p> Example Usage <pre><code>  hook.Add(\"VendorItemMaxStockUpdated\", \"SyncMaxStockChange\", function(vendor)\n      lia.vendor.sync(vendor)\n  end)\n</code></pre> VendorItemModeUpdated(vendor, itemType, value) Purpose <p>Fired when a vendor item's trade mode changes (buy/sell/both).</p> When Called <p>After updating item mode.</p> Parameters <p>Entity vendor Vendor entity.</p> <p>string itemType Item uniqueID.</p> <p>number value Mode constant.</p> Example Usage <pre><code>  hook.Add(\"VendorItemModeUpdated\", \"SyncItemModeChange\", function(vendor)\n      lia.vendor.sync(vendor)\n  end)\n</code></pre> VendorItemPriceUpdated(vendor, itemType, value) Purpose <p>Fired when a vendor item's price is changed.</p> When Called <p>After setting a new price for an item.</p> Parameters <p>Entity vendor Vendor entity.</p> <p>string itemType Item uniqueID.</p> <p>number value New price.</p> Example Usage <pre><code>  hook.Add(\"VendorItemPriceUpdated\", \"SyncPriceChange\", function(vendor)\n      lia.vendor.sync(vendor)\n  end)\n</code></pre> VendorItemStockUpdated(vendor, itemType, value) Purpose <p>Fired when a vendor item's current stock value changes.</p> When Called <p>After stock is set manually.</p> Parameters <p>Entity vendor Vendor entity.</p> <p>string itemType Item uniqueID.</p> <p>number value New stock.</p> Example Usage <pre><code>  hook.Add(\"VendorItemStockUpdated\", \"SyncStockChange\", function(vendor)\n      lia.vendor.sync(vendor)\n  end)\n</code></pre> VendorMessagesUpdated(vendor) Purpose <p>Fired when vendor dialogue/messages are updated.</p> When Called <p>After editing vendor message strings.</p> Parameters <p>Entity vendor Vendor entity.</p> Example Usage <pre><code>  hook.Add(\"VendorMessagesUpdated\", \"SyncVendorMsgs\", function(vendor)\n      lia.vendor.sync(vendor)\n  end)\n</code></pre> VendorSynchronized(vendor) Purpose <p>Notifies that vendor data has been synchronized to clients.</p> When Called <p>After vendor network sync completes.</p> Parameters <p>Entity vendor Vendor entity.</p> Example Usage <pre><code>  hook.Add(\"VendorSynchronized\", \"AfterVendorSync\", function(vendor)\n      print(\"Vendor synced\", vendor)\n  end)\n</code></pre> VendorTradeEvent(client, vendor, itemType, isSellingToVendor) Purpose <p>Generic hook for vendor trade events (buying or selling).</p> When Called <p>After a vendor transaction completes.</p> Parameters <p>Player client Player trading.</p> <p>Entity vendor Vendor entity.</p> <p>string itemType Item uniqueID.</p> <p>boolean isSellingToVendor True if player sold to vendor.</p> Example Usage <pre><code>  hook.Add(\"VendorTradeEvent\", \"TrackTrade\", function(client, vendor, itemType, selling)\n      lia.log.add(client, selling and \"vendorSell\" or \"vendorBuy\", itemType)\n  end)\n</code></pre> WarningIssued(client, target, reason, severity, count, warnerSteamID, targetSteamID) Purpose <p>Fired when a warning is issued to a player.</p> When Called <p>Immediately after creating a warning record.</p> Parameters <p>Player client Admin issuing the warning.</p> <p>Player target Player receiving the warning.</p> <p>string reason Warning reason.</p> <p>string severity Severity level.</p> <p>number count Total warnings after issuance.</p> <p>string warnerSteamID Issuer SteamID.</p> <p>string targetSteamID Target SteamID.</p> Example Usage <pre><code>  hook.Add(\"WarningIssued\", \"RelayToDiscord\", function(client, target, reason, severity)\n      lia.discord.send(\"warnings\", client:Name(), reason .. \" (\" .. severity .. \")\")\n  end)\n</code></pre> WarningRemoved(client, targetClient, arg3, arg4, arg5, arg6) Purpose <p>Fired when a warning is removed from a player.</p> When Called <p>After the warning record is deleted.</p> Parameters <p>Player client Admin removing the warning.</p> <p>Player targetClient Player whose warning was removed.</p> <p>table arg3 Warning data table.</p> <p>any arg4 Additional context.</p> <p>any arg5 Additional context.</p> <p>any arg6 Additional context.</p> Example Usage <pre><code>  hook.Add(\"WarningRemoved\", \"NotifyRemoval\", function(client, targetClient, data)\n      targetClient:notifyLocalized(\"warningRemovedNotify\", client:Name())\n  end)\n</code></pre> OverrideVoiceHearingStatus(listener, speaker, baseCanHear) Purpose <p>Allows overriding whether a listener can hear a speaker's voice, overriding the default distance-based calculation.</p> When Called <p>During voice hearing calculations, after the base distance check is performed.</p> Parameters <p>Player listener Player who would be listening to the voice.</p> <p>Player speaker Player who is speaking.</p> <p>boolean baseCanHear The default hearing status based on distance and voice type (whisper/talk/yell ranges).</p> Returns <p>boolean|nil Return true to force the listener to hear the speaker, false to block hearing, or nil to use the default baseCanHear value.</p> Example Usage <pre><code>  hook.Add(\"OverrideVoiceHearingStatus\", \"BlockDTVoice\", function(listener, speaker, baseCanHear)\n      if speaker:getNetVar(\"dtScramblerEnabled\", false) and listener:Team() ~= FACTION_DT then\n          return false\n      end\n  end)\n</code></pre> OnCharFallover(client, entity, state) Purpose <p>Fired when a character falls over (gets ragdolled or gets up from ragdoll).</p> When Called <p>Immediately after a player is ragdolled (state = true) or gets up from ragdoll (state = false).</p> Parameters <p>Player client Player who fell over.</p> <p>Entity entity Ragdoll entity (when falling) or last ragdoll (when getting up).</p> <p>boolean state True if falling over, false if getting up.</p> Example Usage <pre><code>  hook.Add(\"OnCharFallover\", \"TrackRagdollState\", function(client, entity, state)\n      if state then\n          client:setNetVar(\"fallenOver\", true)\n      else\n          client:setNetVar(\"fallenOver\", nil)\n      end\n  end)\n</code></pre> OnDialogNPCTypeSet(client, npc) Purpose <p>Fired when an NPC's dialog type is set by an admin.</p> When Called <p>After an admin sets the NPC type through the admin menu or commands.</p> Parameters <p>Player client Admin who set the NPC type.</p> <p>Entity npc NPC entity that had its type set.</p> Example Usage <pre><code>  hook.Add(\"OnDialogNPCTypeSet\", \"LogNPCChanges\", function(client, npc)\n      lia.log.add(client, \"npcTypeSet\", npc.NPCName or \"Unknown\")\n  end)\n</code></pre> OnWeaponOverrideUpdated(className, key, value) Purpose <p>Fired when a weapon override is updated.</p> When Called <p>After a weapon property override is changed and synchronized.</p> Parameters <p>string className Weapon class name.</p> <p>string key Property name that was overridden.</p> <p>any value New value for the property.</p> Example Usage <pre><code>  hook.Add(\"OnWeaponOverrideUpdated\", \"LogWeaponChanges\", function(className, key, value)\n      lia.log.add(nil, \"weaponOverride\", className, key, tostring(value))\n  end)\n</code></pre> OnWeaponOverridesBulkSynced(overrides) Purpose <p>Fired when weapon overrides are bulk synchronized to clients.</p> When Called <p>After all weapon overrides are sent to a client during initialization.</p> Parameters <p>table overrides Table of all weapon overrides.</p> Example Usage <pre><code>  hook.Add(\"OnWeaponOverridesBulkSynced\", \"ProcessOverrides\", function(overrides)\n      PrintTable(overrides)\n  end)\n</code></pre> PlayerBodyGroupChanged(client, oldVar, value) Purpose <p>Fired when a character's bodygroups are changed.</p> When Called <p>After a character's bodygroups are updated and synchronized.</p> Parameters <p>Player client Player whose bodygroups changed.</p> <p>table oldVar Previous bodygroups table.</p> <p>table value New bodygroups table.</p> Example Usage <pre><code>  hook.Add(\"PlayerBodyGroupChanged\", \"LogBodyGroupChanges\", function(client, oldVar, value)\n      lia.log.add(client, \"bodyGroupChanged\", util.TableToJSON(oldVar), util.TableToJSON(value))\n  end)\n</code></pre> PostBotSetup(client, character, inventory) Purpose <p>Fired after a bot character is fully set up.</p> When Called <p>After a bot is created, given a character, inventory, and spawned.</p> Parameters <p>Player client Bot player entity.</p> <p>Character character Bot's character data.</p> <p>Inventory inventory Bot's inventory.</p> Example Usage <pre><code>  hook.Add(\"PostBotSetup\", \"ConfigureBot\", function(client, character, inventory)\n      client:SetHealth(100)\n      client:SetArmor(50)\n  end)\n</code></pre> ShouldEntityLoad(ent) Purpose <p>Determine if a persistent entity should be loaded on server start.</p> When Called <p>During server startup when loading persistent entities from saved data.</p> Parameters <p>Entity ent Entity data being considered for loading.</p> Returns <p>boolean Return false to prevent the entity from loading.</p> Example Usage <pre><code>  hook.Add(\"ShouldEntityLoad\", \"FilterEntities\", function(ent)\n      if ent.class == \"prop_physics\" and ent.model == \"models/error.mdl\" then\n          return false\n      end\n  end)\n</code></pre> ShouldEntitySave(ent) Purpose <p>Determine if a persistent entity should be saved to data.</p> When Called <p>During data save operations and when entities become persistent.</p> Parameters <p>Entity ent Entity being considered for saving.</p> Returns <p>boolean Return false to prevent the entity from being saved.</p> Example Usage <pre><code>  hook.Add(\"ShouldEntitySave\", \"ExcludeTempEntities\", function(ent)\n      if ent:GetClass() == \"prop_dynamic\" and ent:GetNWBool(\"temporary\") then\n          return false\n      end\n  end)\n</code></pre> ShouldSaveItem(itemTable, entity) Purpose <p>Determine if an item should be saved to the database.</p> When Called <p>When an item entity is being saved to persistent storage.</p> Parameters <p>Item itemTable Item table containing item data.</p> <p>Entity entity Item entity being saved.</p> Returns <p>boolean Return false to prevent the item from being saved.</p> Example Usage <pre><code>  hook.Add(\"ShouldSaveItem\", \"ExcludeTempItems\", function(itemTable, entity)\n      if itemTable.temp or itemTable.uniqueID:find(\"temp_\") then\n          return false\n      end\n  end)\n</code></pre>"},{"location":"development/hooks/shared/","title":"Shared","text":"<p>This page documents the functions and methods in the meta table.</p> Overview  Shared hooks in the Lilia framework handle functionality available on both client and server, typically for data synchronization, shared utilities, and cross-realm features. They follow the Garry's Mod hook system and can be overridden or extended by addons and modules.  AdjustCreationData(client, data, newData, originalData) Purpose <p>Let schemas modify validated character creation data before it is saved.</p> When Called <p>After creation data is sanitized and validated in `liaCharCreate`, before the final table is merged and written.</p> Parameters <p>Player client Player creating the character.</p> <p>table data Sanitized values for registered character variables.</p> <p>table newData Table you can populate with overrides that will be merged into `data`.</p> <p>table originalData Copy of the raw client payload prior to sanitation.</p> Example Usage <pre><code>  hook.Add(\"AdjustCreationData\", \"ForcePrefix\", function(client, data, newData)\n      if data.faction == FACTION_STAFF then newData.name = \"[STAFF] \" .. (newData.name or data.name) end\n  end)\n</code></pre> AdjustPACPartData(wearer, id, data) Purpose <p>Allow items or modules to tweak PAC3 part data before it is attached.</p> When Called <p>Client-side when PAC3 builds part data for an outfit id before `AttachPart` runs.</p> Parameters <p>Player wearer Entity that will wear the PAC part.</p> <p>string id Unique part identifier, usually an item uniqueID.</p> <p>table data PAC3 data table that can be edited.</p> Returns <p>table|nil Return a replacement data table, or nil to keep the modified `data`.</p> Example Usage <pre><code>  hook.Add(\"AdjustPACPartData\", \"TintPoliceVisors\", function(wearer, id, data)\n      if wearer:Team() == FACTION_POLICE and data.Material then data.Material = \"models/shiny\" end\n  end)\n</code></pre> AdjustStaminaOffset(client, offset) Purpose <p>Change the stamina delta applied on a tick.</p> When Called <p>Each stamina update before the offset is clamped and written to the player.</p> Parameters <p>Player client Player whose stamina is being processed.</p> <p>number offset Positive regen or negative drain calculated from movement.</p> Returns <p>number|nil Override for the stamina offset; nil keeps the existing value.</p> Example Usage <pre><code>  hook.Add(\"AdjustStaminaOffset\", \"HeavyArmorTax\", function(client, offset)\n      if client:GetNWBool(\"HeavyArmor\") then return offset - 1 end\n  end)\n</code></pre> AdvDupe_FinishPasting(tbl) Purpose <p>React when an Advanced Dupe 2 paste finishes under BetterDupe.</p> When Called <p>After AdvDupe2 completes the paste queue so compatibility state can be reset.</p> Parameters <p>table tbl Paste context provided by AdvDupe2 (first entry is the player).</p> Example Usage <pre><code>  hook.Add(\"AdvDupe_FinishPasting\", \"ClearTempState\", function(info)\n      local ply = info[1] and info[1].Player\n      if IsValid(ply) then ply.tempBetterDupe = nil end\n  end)\n</code></pre> AttachPart(client, id) Purpose <p>Notify when a PAC3 part is attached to a player.</p> When Called <p>Client-side after PAC3 part data is retrieved and before it is tracked locally.</p> Parameters <p>Player client Player receiving the PAC part.</p> <p>string id Identifier of the part or outfit.</p> Example Usage <pre><code>  hook.Add(\"AttachPart\", \"TrackPACAttachment\", function(client, id)\n      lia.log.add(client, \"pacAttach\", id)\n  end)\n</code></pre> BagInventoryReady(bagItem, inventory) Purpose <p>Respond when a bag item finishes creating or loading its child inventory.</p> When Called <p>After a bag instance allocates an inventory (on instancing or restore) and access rules are applied.</p> Parameters <p>Item bagItem The bag item that owns the inventory.</p> <p>Inventory inventory Child inventory created for the bag.</p> Example Usage <pre><code>  hook.Add(\"BagInventoryReady\", \"AutoLabelBag\", function(bagItem, inventory)\n      inventory:setData(\"bagName\", bagItem:getName())\n  end)\n</code></pre> BagInventoryRemoved(bagItem, inventory) Purpose <p>React when a bag's inventory is being removed.</p> When Called <p>Before a bag item deletes its child inventory (e.g., on item removal).</p> Parameters <p>Item bagItem Bag being removed.</p> <p>Inventory inventory Child inventory scheduled for deletion.</p> Example Usage <pre><code>  hook.Add(\"BagInventoryRemoved\", \"DropBagContents\", function(bagItem, inv)\n      for _, item in pairs(inv:getItems()) do item:transfer(nil, nil, nil, nil, true) end\n  end)\n</code></pre> CalcStaminaChange(client) Purpose <p>Calculate the stamina change for a player on a tick.</p> When Called <p>From the stamina timer in the attributes module every 0.25s and on client prediction.</p> Parameters <p>Player client Player being processed.</p> Returns <p>number Positive regen or negative drain applied to the player's stamina pool.</p> Example Usage <pre><code>  function MODULE:CalcStaminaChange(client)\n      local offset = self.BaseClass.CalcStaminaChange(self, client)\n      if client:IsAdmin() then offset = offset + 1 end\n      return offset\n  end\n</code></pre> CalcStaminaChange(client) Purpose <p>Calculate the stamina change for a player on a tick.</p> When Called <p>From the stamina timer in the attributes module every 0.25s and on client prediction.</p> Parameters <p>Player client Player being processed.</p> Returns <p>number Positive regen or negative drain applied to the player's stamina pool.</p> Example Usage <pre><code>  function MODULE:CalcStaminaChange(client)\n      local offset = self.BaseClass.CalcStaminaChange(self, client)\n      if client:IsAdmin() then offset = offset + 1 end\n      return offset\n  end\n</code></pre> CanCharBeTransfered(tChar, faction, arg3) Purpose <p>Decide whether a character can be transferred to a new faction or class.</p> When Called <p>Before character transfer commands/classes move a character to another faction/class.</p> Parameters <p>Character tChar Character being transferred.</p> <p>number|string faction Target faction or class identifier.</p> <p>number|string arg3 Current faction or class being left.</p> Returns <p>boolean, string|nil Return false and an optional reason to block the transfer.</p> Example Usage <pre><code>  hook.Add(\"CanCharBeTransfered\", \"PreventDuplicateFaction\", function(char, factionID)\n      if lia.faction.indices[factionID] and lia.faction.indices[factionID].oneCharOnly then\n          for _, other in pairs(lia.char.getAll()) do\n              if other.steamID == char.steamID and other:getFaction() == factionID then\n                  return false, L(\"charAlreadyInFaction\")\n              end\n          end\n      end\n  end)\n</code></pre> CanInviteToClass(client, target) Purpose <p>Control whether a player can invite another player into a class.</p> When Called <p>Before sending a class invite through the team management menu.</p> Parameters <p>Player client Player issuing the invite.</p> <p>Player target Player being invited.</p> Returns <p>boolean, string|nil Return false (optionally with reason) to block the invite.</p> Example Usage <pre><code>  hook.Add(\"CanInviteToClass\", \"RestrictByRank\", function(client, target)\n      if not client:IsAdmin() then return false, L(\"insufficientPermissions\") end\n  end)\n</code></pre> CanInviteToFaction(client, target) Purpose <p>Control whether a player can invite another player into their faction.</p> When Called <p>When a player tries to invite someone to join their faction in the team menu.</p> Parameters <p>Player client Player issuing the invite.</p> <p>Player target Player being invited.</p> Returns <p>boolean, string|nil Return false to deny the invitation with an optional message.</p> Example Usage <pre><code>  hook.Add(\"CanInviteToFaction\", \"BlockFullFaction\", function(client, target)\n      local faction = lia.faction.indices[client:Team()]\n      if faction and faction.memberLimit and faction.memberLimit &lt;= faction:countMembers() then\n          return false, L(\"limitFaction\")\n      end\n  end)\n</code></pre> CanOutfitChangeModel(item) Purpose <p>Decide whether an outfit item is allowed to change a player's model.</p> When Called <p>Before an outfit applies its model change during equip or removal.</p> Parameters <p>Item item Outfit attempting to change the player's model.</p> Returns <p>boolean Return false to prevent the outfit from changing the model.</p> Example Usage <pre><code>  hook.Add(\"CanOutfitChangeModel\", \"RestrictModelSwap\", function(item)\n      return not item.player:getNetVar(\"NoModelChange\", false)\n  end)\n</code></pre> CanPerformVendorEdit(client, vendor) Purpose <p>Determine if a player can edit a vendor's configuration.</p> When Called <p>When opening the vendor editor or applying vendor changes through the UI.</p> Parameters <p>Player client Player attempting to edit.</p> <p>Entity vendor Vendor entity being edited.</p> Returns <p>boolean, string|nil Return false to block edits with an optional reason.</p> Example Usage <pre><code>  hook.Add(\"CanPerformVendorEdit\", \"AdminOnlyVendors\", function(client, vendor)\n      if not client:IsAdmin() then return false, L(\"insufficientPermissions\") end\n  end)\n</code></pre> CanPickupMoney(activator, moneyEntity) Purpose <p>Allow or prevent a player from picking up a money entity.</p> When Called <p>When a player uses a `lia_money` entity to collect currency.</p> Parameters <p>Entity activator Entity attempting to pick up the money (usually a Player).</p> <p>Entity moneyEntity Money entity being collected.</p> Returns <p>boolean, string|nil Return false to block pickup with an optional message.</p> Example Usage <pre><code>  hook.Add(\"CanPickupMoney\", \"RespectWantedStatus\", function(client, money)\n      if client:getNetVar(\"isWanted\") then return false, L(\"cannotPickupWhileWanted\") end\n  end)\n</code></pre> CanPlayerChooseWeapon(weapon) Purpose <p>Filter which weapons appear as selectable in the weapon selector.</p> When Called <p>When building the client weapon selection UI before allowing a weapon choice.</p> Parameters <p>Weapon weapon Weapon entity being considered.</p> Returns <p>boolean Return false to hide or block selection of the weapon.</p> Example Usage <pre><code>  hook.Add(\"CanPlayerChooseWeapon\", \"HideUnsafeWeapons\", function(weapon)\n      if weapon:GetClass():find(\"admin\") then return false end\n  end)\n</code></pre> CanPlayerCreateChar(client, data) Purpose <p>Allow schemas to veto or validate a character creation attempt.</p> When Called <p>On the server when a player submits the creation form and before processing begins.</p> Parameters <p>Player client Player creating the character.</p> <p>table data Raw creation data received from the client.</p> Returns <p>boolean, string|nil Return false and an optional message to deny creation.</p> Example Usage <pre><code>  hook.Add(\"CanPlayerCreateChar\", \"LimitByPlaytime\", function(client)\n      if not client:playTimeGreaterThan(3600) then return false, L(\"needMorePlaytime\") end\n  end)\n</code></pre> CanPlayerJoinClass(client, class, info) Purpose <p>Decide if a player may join a given class.</p> When Called <p>Before assigning a class in the class library and character selection.</p> Parameters <p>Player client Player requesting the class.</p> <p>number class Target class index.</p> <p>table info Class data table for convenience.</p> Returns <p>boolean, string|nil Return false to block the class switch with an optional reason.</p> Example Usage <pre><code>  hook.Add(\"CanPlayerJoinClass\", \"WhitelistCheck\", function(client, class, info)\n      if info.requiresWhitelist and not client:getChar():getClasswhitelists()[class] then\n          return false, L(\"noWhitelist\")\n      end\n  end)\n</code></pre> CanPlayerKnock(arg1, arg2) Purpose <p>Control whether a player can knock on a door with their hands.</p> When Called <p>When the hands SWEP secondary attack is used on a door entity.</p> Parameters <p>Player arg1 Player attempting to knock.</p> <p>Entity arg2 Door entity being knocked on.</p> Returns <p>boolean Return false to prevent the knock action.</p> Example Usage <pre><code>  hook.Add(\"CanPlayerKnock\", \"BlockPoliceDoors\", function(client, door)\n      if door.isPoliceDoor then return false end\n  end)\n</code></pre> CanPlayerModifyConfig(client, key) Purpose <p>Gate whether a player can change a configuration variable.</p> When Called <p>Client- and server-side when a config edit is attempted through the admin tools or config UI.</p> Parameters <p>Player client Player attempting the change.</p> <p>string key Config key being modified.</p> Returns <p>boolean, string|nil Return false to deny the modification with an optional message.</p> Example Usage <pre><code>  hook.Add(\"CanPlayerModifyConfig\", \"SuperAdminOnly\", function(client)\n      if not client:IsSuperAdmin() then return false, L(\"insufficientPermissions\") end\n  end)\n</code></pre> CanPlayerRotateItem(client, item) Purpose <p>Determine if a player may rotate an item in an inventory grid.</p> When Called <p>When handling the client drag/drop rotate action for an item slot.</p> Parameters <p>Player client Player requesting the rotation.</p> <p>Item item Item instance being rotated.</p> Returns <p>boolean, string|nil Return false to block rotation with an optional error message.</p> Example Usage <pre><code>  hook.Add(\"CanPlayerRotateItem\", \"LockQuestItems\", function(client, item)\n      if item:getData(\"questLocked\") then return false, L(\"itemLocked\") end\n  end)\n</code></pre> CanPlayerThrowPunch(client) Purpose <p>Gate whether a player is allowed to throw a punch.</p> When Called <p>Before the hands SWEP starts a punch, after playtime and stamina checks.</p> Parameters <p>Player client Player attempting to punch.</p> Returns <p>boolean|string|nil Return false to stop the punch; optionally return a reason string.</p> Example Usage <pre><code>  hook.Add(\"CanPlayerThrowPunch\", \"DisallowTiedPlayers\", function(client)\n      if client:getNetVar(\"tied\") then return false, L(\"cannotWhileTied\") end\n  end)\n</code></pre> CanPlayerUseCommand(client, command) Purpose <p>Decide if a player can execute a specific console/chat command.</p> When Called <p>Each time a command is run through the command library before execution.</p> Parameters <p>Player client Player running the command.</p> <p>table command Command definition table.</p> Returns <p>boolean, string|nil Return false to block the command with an optional reason.</p> Example Usage <pre><code>  hook.Add(\"CanPlayerUseCommand\", \"RestrictNonStaff\", function(client, command)\n      if command.adminOnly and not client:IsAdmin() then return false, L(\"insufficientPermissions\") end\n  end)\n</code></pre> CanRunItemAction(tempItem, key) Purpose <p>Control whether an item action should be available.</p> When Called <p>While building item action menus both client-side (UI) and server-side (validation).</p> Parameters <p>Item tempItem Item being acted on.</p> <p>string key Action identifier (e.g., \"equip\", \"drop\").</p> Returns <p>boolean Return false to hide or block the action.</p> Example Usage <pre><code>  hook.Add(\"CanRunItemAction\", \"NoDropQuestItems\", function(item, action)\n      if action == \"drop\" and item:getData(\"questLocked\") then return false end\n  end)\n</code></pre> CharForceRecognized(ply, range) Purpose <p>Force a character to recognize others within a range.</p> When Called <p>When the recognition module sets recognition for every character around a player.</p> Parameters <p>Player ply Player whose character will recognize others.</p> <p>string|number range Range preset (\"whisper\", \"normal\", \"yell\") or numeric distance.</p> Example Usage <pre><code>  hook.Add(\"CharForceRecognized\", \"AlwaysRecognizeStaff\", function(ply)\n      if ply:IsAdmin() then ply:getChar():giveAllRecognition() end\n  end)\n</code></pre> CharHasFlags(client, flags) Purpose <p>Override how character flag checks are evaluated.</p> When Called <p>Whenever `playerMeta:hasFlags` is queried to determine character permissions.</p> Parameters <p>Player client Player whose character is being checked.</p> <p>string flags Flag string to test.</p> Returns <p>boolean Return true to force pass, false to force fail, or nil to defer to default logic.</p> Example Usage <pre><code>  hook.Add(\"CharHasFlags\", \"HonorVIP\", function(client, flags)\n      if client:IsUserGroup(\"vip\") and flags:find(\"V\") then return true end\n  end)\n</code></pre> ChatParsed(client, chatType, message, anonymous) Purpose <p>Modify chat metadata before it is dispatched.</p> When Called <p>After chat parsing but before the chat type and message are sent to recipients.</p> Parameters <p>Player client Speaker.</p> <p>string chatType Parsed chat command (ic, ooc, etc.).</p> <p>string message Original chat text.</p> <p>boolean anonymous Whether the message is anonymous.</p> Returns <p>string, string, boolean|nil Optionally return a replacement chatType, message, and anonymous flag.</p> Example Usage <pre><code>  hook.Add(\"ChatParsed\", \"AddOOCPrefix\", function(client, chatType, message, anonymous)\n      if chatType == \"ooc\" then return chatType, \"[GLOBAL] \" .. message, anonymous end\n  end)\n</code></pre> CommandAdded(command, data) Purpose <p>React when a new chat/console command is registered.</p> When Called <p>Immediately after a command is added to the command library.</p> Parameters <p>string command Command identifier.</p> <p>table data Command definition table.</p> Example Usage <pre><code>  hook.Add(\"CommandAdded\", \"LogCommands\", function(name, data)\n      print(\"Command registered:\", name, \"adminOnly:\", data.adminOnly)\n  end)\n</code></pre> ConfigChanged(key, value, oldValue, client) Purpose <p>Run logic after a configuration value changes.</p> When Called <p>When a config entry is updated via admin tools or code on the server.</p> Parameters <p>string key Config key that changed.</p> <p>any value New value.</p> <p>any oldValue Previous value.</p> <p>Player client optional Player who made the change, if any.</p> Example Usage <pre><code>  hook.Add(\"ConfigChanged\", \"BroadcastChange\", function(key, value, old, client)\n      if SERVER then lia.log.add(client, \"configChanged\", key, tostring(old), tostring(value)) end\n  end)\n</code></pre> DoModuleIncludes(path, MODULE) Purpose <p>Customize how module files are included.</p> When Called <p>During module loading in the modularity library for each include path.</p> Parameters <p>string path Path of the file being included.</p> <p>table MODULE Module table receiving the include.</p> Example Usage <pre><code>  hook.Add(\"DoModuleIncludes\", \"TrackModuleIncludes\", function(path, MODULE)\n      MODULE.loadedFiles = MODULE.loadedFiles or {}\n      table.insert(MODULE.loadedFiles, path)\n  end)\n</code></pre> ForceRecognizeRange(ply, range, fakeName) Purpose <p>Force a character to recognize everyone within a given chat range.</p> When Called <p>By recognition commands to mark nearby characters as recognized.</p> Parameters <p>Player ply Player whose recognition list is being updated.</p> <p>string|number range Range preset (\"whisper\", \"normal\", \"yell\") or numeric distance.</p> <p>string fakeName optional Optional fake name to record for recognition.</p> Example Usage <pre><code>  hook.Add(\"ForceRecognizeRange\", \"LogForcedRecognition\", function(ply, range)\n      lia.log.add(ply, \"charRecognizeRange\", tostring(range))\n  end)\n</code></pre> GetAttributeMax(client, id) Purpose <p>Override the maximum level a character can reach for a given attribute.</p> When Called <p>Whenever attribute caps are checked, such as when spending points or granting boosts.</p> Parameters <p>Player client Player whose attribute cap is being queried.</p> <p>string id Attribute identifier.</p> Returns <p>number|nil Maximum allowed level (defaults to infinity).</p> Example Usage <pre><code>  hook.Add(\"GetAttributeMax\", \"HardCapEndurance\", function(client, id)\n      if id == \"end\" then return 50 end\n  end)\n</code></pre> GetAttributeStartingMax(client, attribute) Purpose <p>Define the maximum starting value for an attribute during character creation.</p> When Called <p>While allocating starting attribute points to limit each stat.</p> Parameters <p>Player client Player creating the character.</p> <p>string attribute Attribute identifier.</p> Returns <p>number|nil Maximum value allowed at creation; nil falls back to default limits.</p> Example Usage <pre><code>  hook.Add(\"GetAttributeStartingMax\", \"LowStartForStrength\", function(client, attribute)\n      if attribute == \"str\" then return 5 end\n  end)\n</code></pre> GetCharMaxStamina(char) Purpose <p>Specify a character's maximum stamina pool.</p> When Called <p>Whenever stamina is clamped, restored, or initialized.</p> Parameters <p>Character char Character whose stamina cap is being read.</p> Returns <p>number|nil Max stamina value; defaults to `DefaultStamina` config when nil.</p> Example Usage <pre><code>  hook.Add(\"GetCharMaxStamina\", \"PerkBonus\", function(char)\n      if char:hasFlags(\"S\") then return lia.config.get(\"DefaultStamina\", 100) + 25 end\n  end)\n</code></pre> GetDefaultCharDesc(client, arg2, data) Purpose <p>Provide a default character description for a faction.</p> When Called <p>During creation validation and adjustment for the `desc` character variable.</p> Parameters <p>Player client Player creating the character.</p> <p>number arg2 Faction index being created.</p> <p>table data Creation payload.</p> Returns <p>string, boolean|nil Description text and a flag indicating whether to override the player's input.</p> Example Usage <pre><code>  hook.Add(\"GetDefaultCharDesc\", \"StaffDesc\", function(client, faction)\n      if faction == FACTION_STAFF then return L(\"staffCharacterDiscordSteamID\", \"n/a\", client:SteamID()), true end\n  end)\n</code></pre> GetDefaultCharName(client, faction, data) Purpose <p>Provide a default character name for a faction.</p> When Called <p>During creation validation and adjustment for the `name` character variable.</p> Parameters <p>Player client Player creating the character.</p> <p>number faction Target faction index.</p> <p>table data Creation payload.</p> Returns <p>string, boolean|nil Name text and a flag indicating whether to override the player's input.</p> Example Usage <pre><code>  hook.Add(\"GetDefaultCharName\", \"StaffTemplate\", function(client, faction, data)\n      if faction == FACTION_STAFF then return \"Staff - \" .. client:SteamName(), true end\n  end)\n</code></pre> GetDefaultInventorySize(client, char) Purpose <p>Override the default inventory dimensions a character starts with.</p> When Called <p>During inventory setup on character creation and load.</p> Parameters <p>Player client Player owning the character.</p> <p>Character char Character whose inventory size is being set.</p> Returns <p>number, number|nil Inventory width and height; nil values fall back to config defaults.</p> Example Usage <pre><code>  hook.Add(\"GetDefaultInventorySize\", \"LargeBagsForStaff\", function(client, char)\n      if client:IsAdmin() then return 8, 6 end\n  end)\n</code></pre> GetDisplayedName(client, chatType) Purpose <p>Decide what name is shown for a player in chat based on recognition.</p> When Called <p>Client-side when rendering chat messages to resolve a display name.</p> Parameters <p>Player client Speaker whose name is being displayed.</p> <p>string chatType Chat channel identifier.</p> Returns <p>string|nil Name to display; nil lets the default recognition logic run.</p> Example Usage <pre><code>  hook.Add(\"GetDisplayedName\", \"ShowAliasInWhisper\", function(client, chatType)\n      if chatType == \"w\" then return client:getChar():getData(\"alias\") end\n  end)\n</code></pre> GetHandsAttackSpeed(arg1, arg2) Purpose <p>Adjust the delay between punches for the hands SWEP.</p> When Called <p>Each time the fists are swung to determine the next attack delay.</p> Parameters <p>Player arg1 Player punching.</p> <p>number arg2 Default delay before the next punch.</p> Returns <p>number|nil Replacement delay; nil keeps the default.</p> Example Usage <pre><code>  hook.Add(\"GetHandsAttackSpeed\", \"FasterCombatDrugs\", function(client, defaultDelay)\n      if client:getNetVar(\"combatStim\") then return defaultDelay * 0.75 end\n  end)\n</code></pre> GetItemDropModel(itemTable, itemEntity) Purpose <p>Override the model used when an item spawns as a world entity.</p> When Called <p>When an item entity is created server-side to set its model.</p> Parameters <p>table itemTable Item definition table.</p> <p>Entity itemEntity Spawned item entity.</p> Returns <p>string|nil Model path to use; nil keeps the item's configured model.</p> Example Usage <pre><code>  hook.Add(\"GetItemDropModel\", \"IconicMoneyBag\", function(itemTable)\n      if itemTable.uniqueID == \"moneycase\" then return \"models/props_c17/briefcase001a.mdl\" end\n  end)\n</code></pre> GetMaxPlayerChar(client) Purpose <p>Override the maximum number of characters a player may create.</p> When Called <p>When rendering the character list and validating new character creation.</p> Parameters <p>Player client Player whose limit is being checked.</p> Returns <p>number|nil Maximum character slots; nil falls back to `MaxCharacters` config.</p> Example Usage <pre><code>  hook.Add(\"GetMaxPlayerChar\", \"VIPExtraSlot\", function(client)\n      if client:IsUserGroup(\"vip\") then return (lia.config.get(\"MaxCharacters\") or 5) + 1 end\n  end)\n</code></pre> GetMaxStartingAttributePoints(client, count) Purpose <p>Set the total attribute points available during character creation.</p> When Called <p>On the creation screen when allocating starting attributes.</p> Parameters <p>Player client Player creating the character.</p> <p>number count Default maximum points.</p> Returns <p>number|nil Maximum points allowed; nil keeps the default.</p> Example Usage <pre><code>  hook.Add(\"GetMaxStartingAttributePoints\", \"PerkBonusPoints\", function(client, count)\n      if client:IsAdmin() then return count + 5 end\n  end)\n</code></pre> GetModelGender(model) Purpose <p>Identify the gender classification for a player model.</p> When Called <p>When entity meta needs to know if a model is treated as female for voice/animations.</p> Parameters <p>string model Model path being inspected.</p> Returns <p>string|nil \"female\" to treat as female, or nil for default male handling.</p> Example Usage <pre><code>  hook.Add(\"GetModelGender\", \"CustomFemaleModels\", function(model)\n      if model:find(\"female_custom\") then return \"female\" end\n  end)\n</code></pre> GetMoneyModel(arg1) Purpose <p>Pick the world model used by a money entity based on its amount.</p> When Called <p>When a `lia_money` entity initializes and sets its model.</p> Parameters <p>number arg1 Amount of currency the entity holds.</p> Returns <p>string|nil Model path override; nil falls back to `MoneyModel` config.</p> Example Usage <pre><code>  hook.Add(\"GetMoneyModel\", \"HighValueCash\", function(amount)\n      if amount &gt;= 1000 then return \"models/props_lab/box01a.mdl\" end\n  end)\n</code></pre> GetNPCDialogOptions(arg1, arg2, arg3) Purpose <p>Supply additional dialog options for an NPC conversation.</p> When Called <p>When the client requests dialog options for an NPC and builds the menu.</p> Parameters <p>Player arg1 Player interacting with the NPC.</p> <p>Entity arg2 NPC being talked to.</p> <p>boolean arg3 Whether the NPC supports customization options.</p> Returns <p>table|nil Extra dialog options keyed by unique id; nil keeps defaults only.</p> Example Usage <pre><code>  hook.Add(\"GetNPCDialogOptions\", \"AddShopGreeting\", function(client, npc)\n      return {special = {name = \"Ask about wares\", callback = function() net.Start(\"npcShop\") net.SendToServer() end}}\n  end)\n</code></pre> GetPlayerPunchDamage(arg1, arg2, arg3) Purpose <p>Adjust fist damage output for a punch.</p> When Called <p>Just before a punch trace applies damage in the hands SWEP.</p> Parameters <p>Player arg1 Punching player.</p> <p>number arg2 Default damage.</p> <p>table arg3 Context table you may mutate (e.g., `context.damage`).</p> Returns <p>number|nil New damage value; nil uses `context.damage` or the original.</p> Example Usage <pre><code>  hook.Add(\"GetPlayerPunchDamage\", \"StrengthAffectsPunch\", function(client, damage, ctx)\n      local char = client:getChar()\n      if char then ctx.damage = ctx.damage + char:getAttrib(\"str\", 0) * 0.2 end\n  end)\n</code></pre> GetPlayerPunchRagdollTime(arg1, arg2) Purpose <p>Set how long a target is ragdolled when nonlethal punches knock them down.</p> When Called <p>When a punch would kill a player while lethality is disabled.</p> Parameters <p>Player arg1 Attacker.</p> <p>Entity arg2 Target player being knocked out.</p> Returns <p>number|nil Ragdoll duration in seconds; nil uses `PunchRagdollTime` config.</p> Example Usage <pre><code>  hook.Add(\"GetPlayerPunchRagdollTime\", \"ShorterKO\", function(client, target)\n      if target:IsAdmin() then return 5 end\n  end)\n</code></pre> GetPriceOverride(vendor, uniqueID, price, isSellingToVendor) Purpose <p>Override a vendor's buy/sell price for an item.</p> When Called <p>When a vendor calculates price for buying from or selling to a player.</p> Parameters <p>Entity vendor Vendor entity.</p> <p>string uniqueID Item unique ID being priced.</p> <p>number price Base price before modifiers.</p> <p>boolean isSellingToVendor True if the player is selling an item to the vendor.</p> Returns <p>number|nil Replacement price; nil keeps the existing calculation.</p> Example Usage <pre><code>  hook.Add(\"GetPriceOverride\", \"FactionDiscount\", function(vendor, uniqueID, price, selling)\n      if vendor.factionDiscount and not selling then return math.Round(price * vendor.factionDiscount) end\n  end)\n</code></pre> GetRagdollTime(client, time) Purpose <p>Set the ragdoll duration when a player is knocked out.</p> When Called <p>Whenever `playerMeta:setRagdolled` determines the ragdoll time.</p> Parameters <p>Player client Player being ragdolled.</p> <p>number time Proposed ragdoll time.</p> Returns <p>number|nil Replacement time; nil keeps the proposed duration.</p> Example Usage <pre><code>  hook.Add(\"GetRagdollTime\", \"ShorterStaffRagdoll\", function(client, time)\n      if client:IsAdmin() then return math.min(time, 5) end\n  end)\n</code></pre> GetVendorSaleScale(vendor) Purpose <p>Apply a global sale/markup scale to vendor transactions.</p> When Called <p>When vendors compute sale or purchase totals.</p> Parameters <p>Entity vendor Vendor entity performing the sale.</p> Returns <p>number|nil Multiplier applied to prices (e.g., 0.9 for 10% off); nil keeps vendor defaults.</p> Example Usage <pre><code>  hook.Add(\"GetVendorSaleScale\", \"HappyHour\", function(vendor)\n      if vendor:GetNWBool(\"happyHour\") then return 0.8 end\n  end)\n</code></pre> GetWeaponName(weapon) Purpose <p>Override the display name derived from a weapon when creating an item or showing UI.</p> When Called <p>When generating item data from a weapon or showing weapon names in selectors.</p> Parameters <p>Entity weapon Weapon entity whose name is being resolved.</p> Returns <p>string|nil Custom weapon name; nil falls back to print name.</p> Example Usage <pre><code>  hook.Add(\"GetWeaponName\", \"PrettySWEPNames\", function(weapon)\n      return language.GetPhrase(weapon:GetClass() .. \"_friendly\") or weapon:GetPrintName()\n  end)\n</code></pre> InitializeStorage(entity) Purpose <p>Initialize a storage entity's inventory rules or data.</p> When Called <p>After a storage entity is created or loaded and before player interaction.</p> Parameters <p>Entity entity Storage entity being prepared.</p> Example Usage <pre><code>  hook.Add(\"InitializeStorage\", \"SetTrunkOwner\", function(ent)\n      if ent:isVehicle() then ent:setNetVar(\"storageOwner\", ent:GetNWString(\"owner\")) end\n  end)\n</code></pre> InitializedConfig() Purpose <p>Signal that configuration definitions have been loaded client-side.</p> When Called <p>After the administration config UI finishes building available options.</p> Example Usage <pre><code>  hook.Add(\"InitializedConfig\", \"BuildConfigUI\", function()\n      lia.config.buildList()\n  end)\n</code></pre> InitializedItems() Purpose <p>Notify that all items have been registered.</p> When Called <p>After item scripts finish loading during initialization.</p> Example Usage <pre><code>  hook.Add(\"InitializedItems\", \"CacheItemIDs\", function()\n      lia.itemIDCache = table.GetKeys(lia.item.list)\n  end)\n</code></pre> InitializedKeybinds() Purpose <p>Signal that keybind definitions are loaded.</p> When Called <p>After keybinds are registered during initialization.</p> Example Usage <pre><code>  hook.Add(\"InitializedKeybinds\", \"RegisterCustomBind\", function()\n      lia.key.addBind(\"ToggleHUD\", KEY_F6, \"Toggle HUD\", function(client) hook.Run(\"ToggleHUD\") end)\n  end)\n</code></pre> InitializedModules() Purpose <p>Announce that all modules have finished loading.</p> When Called <p>After module include phase completes, including reloads.</p> Example Usage <pre><code>  hook.Add(\"InitializedModules\", \"WarmWorkshopCache\", function()\n      lia.workshop.cache = lia.workshop.gather()\n  end)\n</code></pre> InitializedOptions() Purpose <p>Notify that all options have been registered and loaded.</p> When Called <p>After the option library finishes loading saved values on the client.</p> Example Usage <pre><code>  hook.Add(\"InitializedOptions\", \"ApplyThemeOption\", function()\n      hook.Run(\"OnThemeChanged\", lia.option.get(\"Theme\", \"Teal\"), false)\n  end)\n</code></pre> InitializedSchema() Purpose <p>Fire once the schema finishes loading.</p> When Called <p>After schema initialization completes; useful for schema-level setup.</p> Example Usage <pre><code>  hook.Add(\"InitializedSchema\", \"SetupSchemaData\", function()\n      lia.schema.setupComplete = true\n  end)\n</code></pre> InventoryDataChanged(instance, key, oldValue, value) Purpose <p>React to inventory metadata changes.</p> When Called <p>When an inventory's data key is updated and replicated to clients.</p> Parameters <p>Inventory instance Inventory whose data changed.</p> <p>string key Data key.</p> <p>any oldValue Previous value.</p> <p>any value New value.</p> Example Usage <pre><code>  hook.Add(\"InventoryDataChanged\", \"UpdateBagLabel\", function(inv, key, old, new)\n      if key == \"bagName\" then inv:getOwner():notify(\"Bag renamed to \" .. tostring(new)) end\n  end)\n</code></pre> InventoryInitialized(instance) Purpose <p>Signal that an inventory has finished initializing on the client.</p> When Called <p>After an inventory is created or received over the network.</p> Parameters <p>Inventory instance Inventory that is ready.</p> Example Usage <pre><code>  hook.Add(\"InventoryInitialized\", \"ShowInventoryUI\", function(inv)\n      if inv:getOwner() == LocalPlayer() then lia.inventory.show(inv) end\n  end)\n</code></pre> InventoryItemAdded(inventory, item) Purpose <p>React when an item is added to an inventory.</p> When Called <p>After an item successfully enters an inventory, both server- and client-side.</p> Parameters <p>Inventory inventory Inventory receiving the item.</p> <p>Item item Item instance added.</p> Example Usage <pre><code>  hook.Add(\"InventoryItemAdded\", \"PlayPickupSound\", function(inv, item)\n      local owner = inv:getOwner()\n      if IsValid(owner) then owner:EmitSound(\"items/ammocrate_open.wav\", 60) end\n  end)\n</code></pre> InventoryItemRemoved(inventory, instance, preserveItem) Purpose <p>React when an item leaves an inventory.</p> When Called <p>After an item is removed from an inventory, optionally preserving the instance.</p> Parameters <p>Inventory inventory Inventory losing the item.</p> <p>Item instance Item removed.</p> <p>boolean preserveItem True if the item instance is kept alive (e.g., dropped) instead of deleted.</p> Example Usage <pre><code>  hook.Add(\"InventoryItemRemoved\", \"LogRemoval\", function(inv, item, preserve)\n      lia.log.add(inv:getOwner(), \"itemRemoved\", item.uniqueID, preserve and \"preserved\" or \"deleted\")\n  end)\n</code></pre> IsCharFakeRecognized(character, id) Purpose <p>Decide if a character is recognized under a fake name.</p> When Called <p>When checking recognition with fake names enabled.</p> Parameters <p>Character character Character performing the recognition check.</p> <p>number id Target character ID.</p> Returns <p>boolean Return true if recognized via fake name, false otherwise.</p> Example Usage <pre><code>  hook.Add(\"IsCharFakeRecognized\", \"AlwaysRecognizeSelf\", function(character, id)\n      if character.id == id then return true end\n  end)\n</code></pre> IsCharRecognized(a, arg2) Purpose <p>Override whether one character recognizes another.</p> When Called <p>Whenever recognition checks are performed for chat or display logic.</p> Parameters <p>Character a Character performing the check.</p> <p>number arg2 Target character ID.</p> Returns <p>boolean Return false to force unrecognized, true to force recognized, or nil to use default logic.</p> Example Usage <pre><code>  hook.Add(\"IsCharRecognized\", \"FactionAutoRecognize\", function(character, id)\n      local other = lia.char.getCharacter(id, character:getPlayer())\n      if other and other:getFaction() == character:getFaction() then return true end\n  end)\n</code></pre> IsRecognizedChatType(chatType) Purpose <p>Declare which chat types should hide names when unrecognized.</p> When Called <p>Client-side when choosing to display `[Unknown]` instead of a name.</p> Parameters <p>string chatType Chat channel identifier.</p> Returns <p>boolean Return true to treat the chat type as requiring recognition.</p> Example Usage <pre><code>  hook.Add(\"IsRecognizedChatType\", \"RecognizedEmote\", function(chatType)\n      if chatType == \"me\" then return true end\n  end)\n</code></pre> IsSuitableForTrunk(ent) Purpose <p>Check if an entity can host a storage trunk.</p> When Called <p>Before creating or opening storage tied to an entity (e.g., vehicles).</p> Parameters <p>Entity ent Entity being evaluated.</p> Returns <p>boolean Return false to disallow trunk storage on this entity.</p> Example Usage <pre><code>  hook.Add(\"IsSuitableForTrunk\", \"AllowSpecificVehicles\", function(vehicle)\n      if vehicle:isSimfphysCar() then return true end\n  end)\n</code></pre> ItemDataChanged(item, key, oldValue, newValue) Purpose <p>React when persistent data on an item changes.</p> When Called <p>When an item's data key is updated via networking and propagated to clients.</p> Parameters <p>Item item Item whose data changed.</p> <p>string key Data key.</p> <p>any oldValue Previous value.</p> <p>any newValue Updated value.</p> Example Usage <pre><code>  hook.Add(\"ItemDataChanged\", \"UpdateDurabilityUI\", function(item, key, old, new)\n      if key == \"durability\" then item:refreshPanels() end\n  end)\n</code></pre> ItemDefaultFunctions(arg1) Purpose <p>Inject or modify the default function set applied to every item.</p> When Called <p>During item registration when the base functions table is copied to a new item.</p> Parameters <p>table arg1 Functions table for the item being registered.</p> Example Usage <pre><code>  hook.Add(\"ItemDefaultFunctions\", \"AddInspect\", function(funcs)\n      funcs.Inspect = {\n          name = \"inspect\",\n          onRun = function(item) item.player:notify(item:getDesc()) end\n      }\n  end)\n</code></pre> ItemInitialized(item) Purpose <p>Notify that an item instance has been initialized client-side.</p> When Called <p>When item data is received over the network and the item is constructed.</p> Parameters <p>Item item Newly initialized item instance.</p> Example Usage <pre><code>  hook.Add(\"ItemInitialized\", \"PrimeItemPanels\", function(item)\n      if item.panel then item.panel:Refresh() end\n  end)\n</code></pre> ItemQuantityChanged(item, oldValue, quantity) Purpose <p>React when an item's quantity changes.</p> When Called <p>After quantity is updated and replicated to clients.</p> Parameters <p>Item item Item whose quantity changed.</p> <p>number oldValue Previous quantity.</p> <p>number quantity New quantity.</p> Example Usage <pre><code>  hook.Add(\"ItemQuantityChanged\", \"UpdateStackLabel\", function(item, old, new)\n      if item.panel then item.panel:SetStack(new) end\n  end)\n</code></pre> LiliaLoaded() Purpose <p>Signal that the Lilia client has finished loading.</p> When Called <p>After pre-load hooks complete on the client startup sequence.</p> Example Usage <pre><code>  hook.Add(\"LiliaLoaded\", \"OpenHUD\", function()\n      lia.hud.init()\n  end)\n</code></pre> NetVarChanged(client, key, oldValue, value) Purpose <p>Respond to networked variable changes on entities, players, or characters.</p> When Called <p>Whenever a netVar is updated via `setNetVar` on players, entities, or characters.</p> Parameters <p>Entity client Entity whose netVar changed (player or entity).</p> <p>string key NetVar key.</p> <p>any oldValue Previous value.</p> <p>any value New value.</p> Example Usage <pre><code>  hook.Add(\"NetVarChanged\", \"TrackStamina\", function(entity, key, old, new)\n      if key == \"stamina\" and entity:IsPlayer() then entity.lastStamina = new end\n  end)\n</code></pre> OnAdminSystemLoaded(arg1, arg2) Purpose <p>Signal that the admin system integration has loaded.</p> When Called <p>After administration modules finish initializing and privileges are available.</p> Parameters <p>table arg1 optional Admin integration data, if provided.</p> <p>table arg2 optional Additional metadata from the admin system.</p> Example Usage <pre><code>  hook.Add(\"OnAdminSystemLoaded\", \"RegisterCustomPrivileges\", function()\n      lia.admin.addPrivilege(\"spawnVehicles\", \"Spawn Vehicles\")\n  end)\n</code></pre> OnCharGetup(target, entity) Purpose <p>Notify when a ragdolled character finishes getting up.</p> When Called <p>After a get-up action completes and the ragdoll entity is removed.</p> Parameters <p>Player target Player whose character stood up.</p> <p>Entity entity Ragdoll entity that was removed.</p> Example Usage <pre><code>  hook.Add(\"OnCharGetup\", \"ClearRagdollState\", function(player, ragdoll)\n      player:setLocalVar(\"brth\", nil)\n  end)\n</code></pre> OnCharVarChanged(character, varName, oldVar, newVar) Purpose <p>React whenever a character variable changes.</p> When Called <p>After a char var setter updates a value and broadcasts it.</p> Parameters <p>Character character Character whose variable changed.</p> <p>string varName Variable key.</p> <p>any oldVar Previous value.</p> <p>any newVar New value.</p> Example Usage <pre><code>  hook.Add(\"OnCharVarChanged\", \"FlagChangeNotice\", function(char, key, old, new)\n      if key == \"flags\" then lia.log.add(char:getPlayer(), \"flagsChanged\", tostring(old), tostring(new)) end\n  end)\n</code></pre> OnConfigUpdated(key, oldValue, value) Purpose <p>React on the client when a config value updates.</p> When Called <p>Client-side after a config entry changes and is broadcast.</p> Parameters <p>string key Config key.</p> <p>any oldValue Previous value.</p> <p>any value New value.</p> Example Usage <pre><code>  hook.Add(\"OnConfigUpdated\", \"ReloadLanguage\", function(key, old, new)\n      if key == \"Language\" then lia.lang.clearCache() end\n  end)\n</code></pre> OnItemAdded(owner, item) Purpose <p>Handle server-side logic when an item is added to an inventory.</p> When Called <p>After an item successfully enters an inventory on the server.</p> Parameters <p>Player owner optional Owner player of the inventory, if applicable.</p> <p>Item item Item instance that was added.</p> Example Usage <pre><code>  hook.Add(\"OnItemAdded\", \"NotifyPickup\", function(owner, item)\n      if IsValid(owner) then owner:notifyLocalized(\"itemAdded\", item:getName()) end\n  end)\n</code></pre> OnItemCreated(itemTable, itemEntity) Purpose <p>React when an item entity is spawned into the world.</p> When Called <p>When `lia_item` entities are created for dropped or spawned items.</p> Parameters <p>table itemTable Static item definition.</p> <p>Entity itemEntity Spawned entity representing the item.</p> Example Usage <pre><code>  hook.Add(\"OnItemCreated\", \"EnableGlow\", function(itemTable, entity)\n      if itemTable.rare then entity:SetRenderFX(kRenderFxHologram) end\n  end)\n</code></pre> OnItemOverridden(item, overrides) Purpose <p>Inspect or modify item override data during registration.</p> When Called <p>When overrides are applied to an item definition at load time.</p> Parameters <p>table item Item definition being overridden.</p> <p>table overrides Table of override values.</p> Example Usage <pre><code>  hook.Add(\"OnItemOverridden\", \"EnsureCategory\", function(item, overrides)\n      if overrides.category == nil then overrides.category = \"misc\" end\n  end)\n</code></pre> OnItemRegistered(ITEM) Purpose <p>Run logic immediately after an item type is registered.</p> When Called <p>At the end of `lia.item.register` once the item table is stored.</p> Parameters <p>table ITEM Registered item definition.</p> Example Usage <pre><code>  hook.Add(\"OnItemRegistered\", \"CollectWeaponItems\", function(item)\n      if item.isWeapon then lia.weaponItems = lia.weaponItems or {} table.insert(lia.weaponItems, item.uniqueID) end\n  end)\n</code></pre> OnLocalizationLoaded() Purpose <p>Notify that localization files have finished loading.</p> When Called <p>After language files and cached phrases are loaded/cleared.</p> Example Usage <pre><code>  hook.Add(\"OnLocalizationLoaded\", \"RefreshLanguageDependentUI\", function()\n      if IsValid(lia.menu.panel) then lia.menu.panel:InvalidateLayout(true) end\n  end)\n</code></pre> OnPAC3PartTransfered(part) Purpose <p>Handle PAC3 parts being reassigned to a ragdoll.</p> When Called <p>When a player's PAC parts transfer to their ragdoll entity during rendering.</p> Parameters <p>Entity|table part PAC3 part being transferred.</p> Example Usage <pre><code>  hook.Add(\"OnPAC3PartTransfered\", \"DisableRagdollPAC\", function(part)\n      part:SetNoDraw(true)\n  end)\n</code></pre> OnPlayerPurchaseDoor(client, door, arg3) Purpose <p>React when a player purchases or sells a door.</p> When Called <p>During door buy/sell commands after payment/ownership changes are processed.</p> Parameters <p>Player client Player performing the transaction.</p> <p>Entity door Door entity involved.</p> <p>boolean arg3 True if selling/refunding, false if buying.</p> Example Usage <pre><code>  hook.Add(\"OnPlayerPurchaseDoor\", \"LogDoorSale\", function(client, door, selling)\n      lia.log.add(client, selling and \"doorSold\" or \"doorBought\", tostring(door))\n  end)\n</code></pre> OnPlayerDroppedItem(client, spawnedItem) Purpose <p>Called when a player drops an item from their inventory.</p> When Called <p>After an item has been successfully dropped from a player's inventory.</p> Parameters <p>Player client The player who dropped the item.</p> <p>Entity spawnedItem The spawned item entity that was created.</p> Example Usage <pre><code>  hook.Add(\"OnPlayerDroppedItem\", \"LogItemDrop\", function(client, spawnedItem)\n      print(client:Name() .. \" dropped an item\")\n  end)\n</code></pre> OnPlayerRotateItem(arg1, item, newRot) Purpose <p>Called when a player rotates an item in their inventory.</p> When Called <p>After an item has been successfully rotated in a player's inventory.</p> Parameters <p>Player arg1 The player who rotated the item.</p> <p>Item item The item that was rotated.</p> <p>number newRot The new rotation value.</p> Example Usage <pre><code>  hook.Add(\"OnPlayerRotateItem\", \"LogItemRotation\", function(client, item, newRot)\n      print(client:Name() .. \" rotated \" .. item:getName() .. \" to \" .. newRot)\n  end)\n</code></pre> OnPlayerTakeItem(client, item) Purpose <p>Called when a player takes an item into their inventory.</p> When Called <p>After an item has been successfully taken into a player's inventory.</p> Parameters <p>Player client The player who took the item.</p> <p>Item item The item that was taken.</p> Example Usage <pre><code>  hook.Add(\"OnPlayerTakeItem\", \"LogItemPickup\", function(client, item)\n      print(client:Name() .. \" took \" .. item:getName())\n  end)\n</code></pre> OnPrivilegeRegistered(arg1, arg2, arg3, arg4) Purpose <p>React when an admin privilege is registered.</p> When Called <p>When CAMI/compatibility layers add a new privilege.</p> Parameters <p>table arg1 CAMI privilege table or simplified privilege data.</p> <p>any arg2 Optional extra data from the source integration.</p> <p>any arg3 Optional extra data from the source integration.</p> <p>any arg4 Optional extra data from the source integration.</p> Example Usage <pre><code>  hook.Add(\"OnPrivilegeRegistered\", \"SyncPrivileges\", function(priv)\n      print(\"Privilege added:\", priv.Name or priv.name)\n  end)\n</code></pre> OnPrivilegeUnregistered(arg1, arg2) Purpose <p>React when an admin privilege is removed.</p> When Called <p>When CAMI/compatibility layers unregister a privilege.</p> Parameters <p>table arg1 Privilege data being removed.</p> <p>any arg2 Optional extra data.</p> Example Usage <pre><code>  hook.Add(\"OnPrivilegeUnregistered\", \"CleanupPrivilegeCache\", function(priv)\n      lia.admin.cache[priv.Name] = nil\n  end)\n</code></pre> OnThemeChanged(themeName, useTransition) Purpose <p>Notify clients that the active UI theme changed.</p> When Called <p>After a theme is applied or a transition completes.</p> Parameters <p>string themeName Name of the theme applied.</p> <p>boolean useTransition True if the theme is transitioning over time.</p> Example Usage <pre><code>  hook.Add(\"OnThemeChanged\", \"RefreshPanels\", function(name)\n      for _, panel in ipairs(vgui.GetWorldPanel():GetChildren()) do if panel.RefreshTheme then panel:RefreshTheme() end end\n  end)\n</code></pre> OnTransferred(target) Purpose <p>Respond after a character is transferred between factions or classes.</p> When Called <p>Immediately after transfer logic completes in team management.</p> Parameters <p>Player target Player whose character was transferred.</p> Example Usage <pre><code>  hook.Add(\"OnTransferred\", \"StripOldClassWeapons\", function(client)\n      client:StripWeapons()\n  end)\n</code></pre> OnUsergroupCreated(groupName, arg2) Purpose <p>React when a new usergroup is created in the admin system.</p> When Called <p>When an admin integration registers a new group.</p> Parameters <p>string groupName Name of the new group.</p> <p>any arg2 Optional extra data (e.g., privilege list).</p> Example Usage <pre><code>  hook.Add(\"OnUsergroupCreated\", \"CacheNewGroup\", function(name)\n      lia.admin.refreshGroupCache(name)\n  end)\n</code></pre> OnUsergroupRemoved(groupName) Purpose <p>React when a usergroup is removed.</p> When Called <p>When an admin integration deletes a group.</p> Parameters <p>string groupName Name of the removed group.</p> Example Usage <pre><code>  hook.Add(\"OnUsergroupRemoved\", \"PurgeRemovedGroup\", function(name)\n      lia.admin.groups[name] = nil\n  end)\n</code></pre> OnUsergroupRenamed(oldName, newName) Purpose <p>React when a usergroup is renamed.</p> When Called <p>After the admin system renames an existing group.</p> Parameters <p>string oldName Previous group name.</p> <p>string newName Updated group name.</p> Example Usage <pre><code>  hook.Add(\"OnUsergroupRenamed\", \"UpdateGroupCache\", function(oldName, newName)\n      lia.admin.groups[newName] = lia.admin.groups[oldName]\n      lia.admin.groups[oldName] = nil\n  end)\n</code></pre> OptionAdded(key, name, option) Purpose <p>Notify that a new option has been registered.</p> When Called <p>Immediately after `lia.option.add` stores an option.</p> Parameters <p>string key Option key.</p> <p>table name Stored option table (name is the localized display name).</p> <p>table option Option metadata table.</p> Example Usage <pre><code>  hook.Add(\"OptionAdded\", \"InvalidateQuickOptions\", function(key, opt)\n      if opt.isQuick or (opt.data and opt.data.isQuick) then lia.option.invalidateCache() end\n  end)\n</code></pre> OptionChanged(key, old, value) Purpose <p>Handle updates to option values.</p> When Called <p>After `lia.option.set` changes a value (client or server).</p> Parameters <p>string key Option key.</p> <p>any old Previous value.</p> <p>any value New value.</p> Example Usage <pre><code>  hook.Add(\"OptionChanged\", \"ApplyHUDScale\", function(key, old, new)\n      if key == \"HUDScale\" then lia.hud.setScale(new) end\n  end)\n</code></pre> OverrideFactionDesc(uniqueID, arg2) Purpose <p>Override the description shown for a faction.</p> When Called <p>During faction registration/loading while assembling faction data.</p> Parameters <p>string uniqueID Faction unique identifier.</p> <p>string arg2 Current description.</p> Returns <p>string|nil Replacement description; nil keeps the existing text.</p> Example Usage <pre><code>  hook.Add(\"OverrideFactionDesc\", \"CustomStaffDesc\", function(id, desc)\n      if id == \"staff\" then return \"Lilia staff team\" end\n  end)\n</code></pre> OverrideFactionModels(uniqueID, arg2) Purpose <p>Override the model list for a faction.</p> When Called <p>During faction registration/loading while choosing models.</p> Parameters <p>string uniqueID Faction identifier.</p> <p>table arg2 Default models table.</p> Returns <p>table|nil Replacement models table; nil keeps defaults.</p> Example Usage <pre><code>  hook.Add(\"OverrideFactionModels\", \"SwapCitizenModels\", function(id, models)\n      if id == \"citizen\" then return {\"models/player/alyx.mdl\"} end\n  end)\n</code></pre> OverrideFactionName(uniqueID, arg2) Purpose <p>Override the display name for a faction.</p> When Called <p>During faction registration/loading before teams are created.</p> Parameters <p>string uniqueID Faction identifier.</p> <p>string arg2 Default faction name.</p> Returns <p>string|nil Replacement name; nil keeps the default.</p> Example Usage <pre><code>  hook.Add(\"OverrideFactionName\", \"RenameCombine\", function(id, name)\n      if id == \"combine\" then return \"Civil Protection\" end\n  end)\n</code></pre> OverrideSpawnTime(ply, baseTime) Purpose <p>Adjust the respawn timer for a player.</p> When Called <p>When calculating respawn delay on client and server.</p> Parameters <p>Player ply Player that will respawn.</p> <p>number baseTime Base respawn time in seconds.</p> Returns <p>number|nil New respawn time; nil keeps the base value.</p> Example Usage <pre><code>  hook.Add(\"OverrideSpawnTime\", \"VIPFastRespawn\", function(ply, base)\n      if ply:IsUserGroup(\"vip\") then return math.max(base * 0.5, 1) end\n  end)\n</code></pre> PlayerThrowPunch(client) Purpose <p>Perform post-punch logic such as stamina consumption.</p> When Called <p>After a punch trace completes in the hands SWEP.</p> Parameters <p>Player client Player who just punched.</p> Example Usage <pre><code>  hook.Add(\"PlayerThrowPunch\", \"TrackPunches\", function(client)\n      client.punchesThrown = (client.punchesThrown or 0) + 1\n  end)\n</code></pre> PreLiliaLoaded() Purpose <p>Run right before the client finishes loading Lilia.</p> When Called <p>At the start of the client load sequence before `LiliaLoaded`.</p> Example Usage <pre><code>  hook.Add(\"PreLiliaLoaded\", \"SetupFonts\", function()\n      lia.util.createFont(\"liaBig\", 32)\n  end)\n</code></pre> RemovePart(client, id) Purpose <p>Notify when a PAC3 part should be removed from a player.</p> When Called <p>Client-side when a part id is marked for removal from a player.</p> Parameters <p>Player client Player losing the part.</p> <p>string id Identifier of the part to remove.</p> Example Usage <pre><code>  hook.Add(\"RemovePart\", \"ClearCachedPart\", function(client, id)\n      if client.liaPACParts then client.liaPACParts[id] = nil end\n  end)\n</code></pre> SetupBagInventoryAccessRules(inventory) Purpose <p>Apply standard access rules to a bag's child inventory.</p> When Called <p>Immediately after a bag inventory is created or loaded.</p> Parameters <p>Inventory inventory Bag inventory being configured.</p> Example Usage <pre><code>  hook.Add(\"SetupBagInventoryAccessRules\", \"CustomBagRule\", function(inventory)\n      inventory:addAccessRule(function(_, action) if action == \"transfer\" then return true end end, 2)\n  end)\n</code></pre> SetupPACDataFromItems() Purpose <p>Build PAC3 data from equipped items and push it to clients.</p> When Called <p>Shortly after PAC compatibility initializes to rebuild outfit data.</p> Example Usage <pre><code>  hook.Add(\"SetupPACDataFromItems\", \"AddCustomPAC\", function()\n      for _, client in player.Iterator() do client:syncParts() end\n  end)\n</code></pre> TryViewModel(entity) Purpose <p>Allows overriding the view model entity for PAC compatibility.</p> When Called <p>When determining the view model entity for PAC events.</p> Parameters <p>Entity entity The potential view model entity.</p> Returns <p>Entity The corrected view model entity, or the original if no correction needed.</p> Example Usage <pre><code>  hook.Add(\"TryViewModel\", \"PACViewModelFix\", function(entity)\n      if entity == pac.LocalPlayer:GetViewModel() then\n          return pac.LocalPlayer\n      end\n      return entity\n  end)\n</code></pre>"},{"location":"development/libraries/","title":"Libraries","text":"Administrator <p>Comprehensive user group and privilege management system for the Lilia framework.</p> Attributes <p>Character attribute management system for the Lilia framework.</p> Bars <p>Dynamic progress bar creation and management system for the Lilia framework.</p> Character <p>Comprehensive character creation, management, and persistence system for the Lilia framework.</p> Chatbox <p>Comprehensive chat system management with message routing and formatting for the Lilia framework.</p> Classes <p>Character class management and validation system for the Lilia framework.</p> Color <p>Comprehensive color and theme management system for the Lilia framework.</p> Commands <p>Comprehensive command registration, parsing, and execution system for the Lilia framework.</p> Configuration <p>Comprehensive user-configurable settings management system for the Lilia framework.</p> Currency <p>In-game currency formatting, display, and management system for the Lilia framework.</p> DarkRP <p>The DarkRP compatibility library provides essential functions for maintaining compatibility</p> Data <p>Data persistence, serialization, and management system for the Lilia framework.</p> Database <p>Comprehensive database management system with SQLite support for the Lilia framework.</p> Derma <p>Advanced UI rendering and interaction system for the Lilia framework.</p> Dialog <p>Comprehensive NPC dialog management system for the Lilia framework.</p> Doors <p>Door management system for the Lilia framework providing preset configuration,</p> Faction <p>Comprehensive faction (team) management and registration system for the Lilia framework.</p> Flags <p>Character permission and access control system for the Lilia framework.</p> Font <p>Comprehensive font management system for the Lilia framework.</p> Inventory <p>Comprehensive inventory system management with multiple storage types for the Lilia framework.</p> Item <p>Comprehensive item registration, instantiation, and management system for the Lilia framework.</p> Keybind <p>Keyboard binding registration, storage, and execution system for the Lilia framework.</p> Languages <p>Internationalization (i18n) and localization system for the Lilia framework.</p> Loader <p>Core initialization and module loading system for the Lilia framework.</p> Logger <p>Comprehensive logging and audit trail system for the Lilia framework.</p> Menu <p>Interactive 3D context menu system for world and entity interactions in the Lilia framework.</p> Modularity <p>Module loading, initialization, and lifecycle management system for the Lilia framework.</p> Network <p>Network communication and data streaming system for the Lilia framework.</p> Notice <p>Player notification and messaging system for the Lilia framework.</p> Option <p>User-configurable settings management system for the Lilia framework.</p> Player Interaction <p>Player-to-player and entity interaction management system for the Lilia framework.</p> Time <p>Time manipulation, formatting, and calculation system for the Lilia framework.</p> Utility <p>Common operations and helper functions for the Lilia framework.</p> Vendor <p>NPC vendor management system with editing and rarity support for the Lilia framework.</p> Web Image <p>Web-based image downloading, caching, and management system for the Lilia framework.</p> WebSound <p>Web-based audio content downloading, caching, and playback system for the Lilia framework.</p> Workshop <p>Steam Workshop addon downloading, mounting, and management system for the Lilia framework.</p>"},{"location":"development/libraries/administrator/","title":"Administrator","text":"<p>Comprehensive user group and privilege management system for the Lilia framework.</p> Overview  The administrator library provides comprehensive functionality for managing user groups, privileges, and administrative permissions in the Lilia framework. It handles the creation, modification, and deletion of user groups with inheritance-based privilege systems. The library operates on both server and client sides, with the server managing privilege storage and validation while the client provides user interface elements for administrative management. It includes integration with CAMI (Comprehensive Administration Management Interface) for compatibility with other administrative systems. The library ensures proper privilege inheritance, automatic privilege registration for tools and properties, and comprehensive logging of administrative actions. It supports both console-based and GUI-based administrative command execution with proper permission checking and validation.  Setting Superadmin: To set yourself as superadmin in the console, use: plysetgroup \"STEAMID\" superadmin The system has three default user groups with inheritance levels: user (level 1), admin (level 2), and superadmin (level 3). Superadmin automatically has all privileges and cannot be restricted by any permission checks.  lia.admin.applyPunishment(client, infraction, kick, ban, time, kickKey, banKey) Purpose <p>Applies kick or ban punishments to a player based on the provided parameters.</p> When Called <p>Called when an automated system or admin action needs to punish a player with a kick or ban.</p> Parameters <p>Player client The player to punish.</p> <p>string infraction Description of the infraction that caused the punishment.</p> <p>boolean kick Whether to kick the player.</p> <p>boolean ban Whether to ban the player.</p> <p>number time Ban duration in minutes (only used if ban is true).</p> <p>string kickKey Localization key for kick message (defaults to \"kickedForInfraction\").</p> <p>string banKey Localization key for ban message (defaults to \"bannedForInfraction\").</p> Example Usage <pre><code>  -- Kick a player for spamming\n  lia.admin.applyPunishment(player, \"Spamming in chat\", true, false, nil, nil, nil)\n  -- Ban a player for griefing for 24 hours\n  lia.admin.applyPunishment(player, \"Griefing\", false, true, 1440, nil, nil)\n  -- Both kick and ban with custom messages\n  lia.admin.applyPunishment(player, \"Hacking\", true, true, 10080, \"kickedForHacking\", \"bannedForHacking\")\n</code></pre> lia.admin.hasAccess(ply, privilege) Purpose <p>Checks if a player has access to a specific privilege based on their usergroup and privilege requirements.</p> When Called <p>Called when verifying if a player can perform an action that requires specific permissions.</p> Parameters <p>Player|string ply The player to check access for, or a usergroup string.</p> <p>string privilege The privilege ID to check access for (e.g., \"command_kick\", \"property_door\", \"tool_remover\").</p> Returns <p>boolean true if the player has access to the privilege, false otherwise.</p> Example Usage <pre><code>  -- Check if player can use kick command\n  if lia.admin.hasAccess(player, \"command_kick\") then\n      -- Allow kicking\n  end\n  -- Check if player has access to a tool\n  if lia.admin.hasAccess(player, \"tool_remover\") then\n      -- Give tool access\n  end\n  -- Check usergroup access directly\n  if lia.admin.hasAccess(\"admin\", \"command_ban\") then\n      -- Admin group has ban access\n  end\n</code></pre> lia.admin.save(noNetwork) Purpose <p>Saves administrator group configurations and privileges to the database.</p> When Called <p>Called when administrator settings are modified and need to be persisted, or when syncing with clients.</p> Parameters <p>boolean noNetwork If true, skips network synchronization with clients after saving.</p> Example Usage <pre><code>  -- Save admin groups without network sync\n  lia.admin.save(true)\n  -- Save and sync with all clients\n  lia.admin.save(false)\n  -- or simply:\n  lia.admin.save()\n</code></pre> lia.admin.registerPrivilege(priv, ID, Name, MinAccess, Category) Purpose <p>Registers a new privilege in the administrator system with specified access levels and categories.</p> When Called <p>Called when defining new administrative permissions that can be granted to user groups.</p> Parameters <p>table priv Privilege configuration table with the following fields:</p> <p>string ID Unique identifier for the privilege (required)</p> <p>string Name Display name for the privilege (optional, defaults to ID)</p> <p>string MinAccess Minimum usergroup required (\"user\", \"admin\", \"superadmin\")</p> <p>string Category Category for organizing privileges in menus</p> Example Usage <pre><code>  -- Register a custom admin command privilege\n  lia.admin.registerPrivilege({\n      ID = \"command_customban\",\n      Name = \"Custom Ban Command\",\n      MinAccess = \"admin\",\n      Category = \"staffCommands\"\n  })\n  -- Register a property privilege\n  lia.admin.registerPrivilege({\n      ID = \"property_teleport\",\n      Name = \"Teleport Property\",\n      MinAccess = \"admin\",\n      Category = \"staffPermissions\"\n  })\n</code></pre> lia.admin.unregisterPrivilege(id) Purpose <p>Removes a privilege from the administrator system and cleans up all associated data.</p> When Called <p>Called when a privilege is no longer needed or when cleaning up removed permissions.</p> Parameters <p>string id The privilege ID to unregister.</p> Example Usage <pre><code>  -- Unregister a custom privilege\n  lia.admin.unregisterPrivilege(\"command_customban\")\n  -- Clean up a tool privilege\n  lia.admin.unregisterPrivilege(\"tool_remover\")\n</code></pre> lia.admin.applyInheritance(groupName) Purpose <p>Applies privilege inheritance to a usergroup, copying permissions from parent groups and ensuring appropriate access levels.</p> When Called <p>Called when setting up or updating usergroup permissions to ensure inheritance rules are properly applied.</p> Parameters <p>string groupName The name of the usergroup to apply inheritance to.</p> Example Usage <pre><code>  -- Apply inheritance to a moderator group\n  lia.admin.applyInheritance(\"moderator\")\n  -- Apply inheritance after creating a new usergroup\n  lia.admin.applyInheritance(\"customadmin\")\n</code></pre> lia.admin.load() Purpose <p>Loads administrator group configurations from the database and initializes the admin system.</p> When Called <p>Called during server startup to restore saved administrator settings and permissions.</p> Example Usage <pre><code>  -- Load admin system (called automatically during server initialization)\n  lia.admin.load()\n</code></pre> lia.admin.createGroup(groupName, info) Purpose <p>Creates a new administrator usergroup with specified configuration and inheritance.</p> When Called <p>Called when setting up new administrator roles or permission levels in the system.</p> Parameters <p>string groupName The name of the usergroup to create.</p> <p>table info Optional configuration table for the group (privileges, inheritance, etc.).</p> Example Usage <pre><code>  -- Create a moderator group\n  lia.admin.createGroup(\"moderator\", {\n      _info = {\n          inheritance = \"user\",\n          types = {}\n      },\n      command_kick = true,\n      command_mute = true\n  })\n  -- Create a custom admin group\n  lia.admin.createGroup(\"customadmin\")\n</code></pre> lia.admin.removeGroup(groupName) Purpose <p>Removes an administrator usergroup from the system.</p> When Called <p>Called when cleaning up or removing unused administrator roles.</p> Parameters <p>string groupName The name of the usergroup to remove.</p> Example Usage <pre><code>  -- Remove a custom moderator group\n  lia.admin.removeGroup(\"moderator\")\n  -- Remove a custom admin group\n  lia.admin.removeGroup(\"customadmin\")\n</code></pre> lia.admin.renameGroup(oldName, newName) Purpose <p>Renames an existing administrator usergroup to a new name.</p> When Called <p>Called when reorganizing or rebranding administrator roles.</p> Parameters <p>string oldName The current name of the usergroup to rename.</p> <p>string newName The new name for the usergroup.</p> Example Usage <pre><code>  -- Rename moderator group to staff\n  lia.admin.renameGroup(\"moderator\", \"staff\")\n  -- Rename admin group to administrator\n  lia.admin.renameGroup(\"admin\", \"administrator\")\n</code></pre> lia.admin.notifyAdmin(notification) Purpose <p>Sends a notification to all administrators who have permission to see admin notifications.</p> When Called <p>Called when important administrative events need to be communicated to staff.</p> Parameters <p>string notification The notification message key to send.</p> Example Usage <pre><code>  -- Notify admins of a potential exploit\n  lia.admin.notifyAdmin(\"exploitDetected\")\n  -- Notify admins of a player report\n  lia.admin.notifyAdmin(\"playerReportReceived\")\n</code></pre> lia.admin.addPermission(groupName, permission, silent) Purpose <p>Grants a specific permission to an administrator usergroup.</p> When Called <p>Called when configuring permissions for administrator roles.</p> Parameters <p>string groupName The name of the usergroup to grant the permission to.</p> <p>string permission The permission ID to grant.</p> <p>boolean silent If true, skips network synchronization.</p> Example Usage <pre><code>  -- Grant kick permission to moderators\n  lia.admin.addPermission(\"moderator\", \"command_kick\", false)\n  -- Grant ban permission to admins silently\n  lia.admin.addPermission(\"admin\", \"command_ban\", true)\n</code></pre> lia.admin.removePermission(groupName, permission, silent) Purpose <p>Removes a specific permission from an administrator usergroup.</p> When Called <p>Called when revoking permissions from administrator roles.</p> Parameters <p>string groupName The name of the usergroup to remove the permission from.</p> <p>string permission The permission ID to remove.</p> <p>boolean silent If true, skips network synchronization.</p> Example Usage <pre><code>  -- Remove kick permission from moderators\n  lia.admin.removePermission(\"moderator\", \"command_kick\", false)\n  -- Remove ban permission from admins silently\n  lia.admin.removePermission(\"admin\", \"command_ban\", true)\n</code></pre> lia.admin.sync(c) Purpose <p>Synchronizes administrator privileges and usergroups with clients.</p> When Called <p>Called when administrator data changes and needs to be updated on clients, or when a player joins.</p> Parameters <p>Player c Optional specific client to sync with. If not provided, syncs with all clients in batches.</p> Example Usage <pre><code>  -- Sync admin data with all clients\n  lia.admin.sync()\n  -- Sync admin data with a specific player\n  lia.admin.sync(specificPlayer)\n</code></pre> lia.admin.hasChanges() Purpose <p>Checks if administrator privileges or groups have changed since the last sync.</p> When Called <p>Called to determine if a sync operation is needed.</p> Returns <p>boolean true if there are unsynced changes, false otherwise.</p> Example Usage <pre><code>  -- Check if admin data needs syncing\n  if lia.admin.hasChanges() then\n      lia.admin.sync()\n  end\n</code></pre> lia.admin.setPlayerUsergroup(ply, newGroup, source) Purpose <p>Sets the usergroup of a player entity.</p> When Called <p>Called when promoting, demoting, or changing a player's administrative role.</p> Parameters <p>Player ply The player to change the usergroup for.</p> <p>string newGroup The new usergroup name to assign.</p> <p>string source Optional source identifier for logging.</p> Example Usage <pre><code>  -- Promote player to admin\n  lia.admin.setPlayerUsergroup(player, \"admin\", \"promotion\")\n  -- Demote player to user\n  lia.admin.setPlayerUsergroup(player, \"user\", \"demotion\")\n</code></pre> lia.admin.setSteamIDUsergroup(steamId, newGroup, source) Purpose <p>Sets the usergroup of a player by their SteamID.</p> When Called <p>Called when changing a player's usergroup using their SteamID, useful for offline players.</p> Parameters <p>string steamId The SteamID of the player to change the usergroup for.</p> <p>string newGroup The new usergroup name to assign.</p> <p>string source Optional source identifier for logging.</p> Example Usage <pre><code>  -- Set offline player's usergroup to admin\n  lia.admin.setSteamIDUsergroup(\"STEAM_0:1:12345678\", \"admin\", \"promotion\")\n  -- Demote player by SteamID\n  lia.admin.setSteamIDUsergroup(\"STEAM_0:1:12345678\", \"user\", \"demotion\")\n</code></pre> lia.admin.serverExecCommand(cmd, victim, dur, reason, admin) Purpose <p>Executes administrative commands on players with proper permission checking and logging.</p> When Called <p>Called when an administrator uses commands like kick, ban, mute, gag, freeze, slay, bring, goto, etc.</p> Parameters <p>string cmd The command to execute (e.g., \"kick\", \"ban\", \"mute\", \"gag\", \"freeze\", \"slay\", \"bring\", \"goto\", \"return\", \"jail\", \"cloak\", \"god\", \"ignite\", \"strip\", \"respawn\", \"blind\").</p> <p>Player|string victim The target player entity or SteamID string.</p> <p>number|string dur Duration for commands that support time limits (ban, freeze, blind, ignite).</p> <p>string reason Reason for the action (used in kick, ban, etc.).</p> <p>Player admin The administrator executing the command.</p> Returns <p>boolean true if the command was executed successfully, false otherwise.</p> Example Usage <pre><code>  -- Kick a player for spamming\n  lia.admin.serverExecCommand(\"kick\", targetPlayer, nil, \"Spamming in chat\", adminPlayer)\n  -- Ban a player for 24 hours\n  lia.admin.serverExecCommand(\"ban\", targetPlayer, 1440, \"Griefing\", adminPlayer)\n  -- Mute a player\n  lia.admin.serverExecCommand(\"mute\", targetPlayer, nil, nil, adminPlayer)\n  -- Bring a player to admin's position\n  lia.admin.serverExecCommand(\"bring\", targetPlayer, nil, nil, adminPlayer)\n</code></pre> lia.admin.execCommand(cmd, victim, dur, reason) Purpose <p>Executes an administrative command using the client-side command system.</p> When Called <p>Called when running admin commands through console commands or automated systems.</p> Parameters <p>string cmd The command to execute (e.g., \"kick\", \"ban\", \"mute\", \"freeze\", etc.).</p> <p>Player|string victim The target player or identifier.</p> <p>number dur Duration for time-based commands.</p> <p>string reason Reason for the administrative action.</p> Returns <p>boolean true if the command was executed successfully, false otherwise.</p> Example Usage <pre><code>  -- Kick a player via console command\n  lia.admin.execCommand(\"kick\", targetPlayer, nil, \"Rule violation\")\n  -- Ban a player for 24 hours\n  lia.admin.execCommand(\"ban\", targetPlayer, 1440, \"Griefing\")\n</code></pre>"},{"location":"development/libraries/attribs/","title":"Attributes","text":"<p>Character attribute management system for the Lilia framework.</p> Overview  The attributes library provides functionality for managing character attributes in the Lilia framework. It handles loading attribute definitions from files, registering attributes in the system, and setting up attributes for characters during spawn. The library operates on both server and client sides, with the server managing attribute setup during character spawning and the client handling attribute-related UI elements. It includes automatic attribute loading from directories, localization support for attribute names and descriptions, and hooks for custom attribute behavior.  lia.attribs.loadFromDir(directory) Purpose <p>Discover and include attribute definitions from a directory.</p> When Called <p>During schema/gamemode startup to load all attribute files.</p> Parameters <p>string directory Path containing attribute Lua files.</p> Example Usage <pre><code>  -- Load default and custom attributes.\n  lia.attribs.loadFromDir(lia.plugin.getDir() .. \"/attribs\")\n  lia.attribs.loadFromDir(\"schema/attribs\")\n</code></pre> lia.attribs.register(uniqueID, data) Purpose <p>Register or update an attribute definition in the global list.</p> When Called <p>After loading an attribute file or when hot-reloading attributes.</p> Parameters <p>string uniqueID Attribute key.</p> <p>table data Fields like name, desc, OnSetup, setup, etc.</p> Returns <p>table The stored attribute table.</p> Example Usage <pre><code>  lia.attribs.register(\"strength\", {\n      name = \"Strength\",\n      desc = \"Improves melee damage and carry weight.\",\n      OnSetup = function(client, value)\n          client:SetJumpPower(160 + value * 0.5)\n      end\n  })\n</code></pre> lia.attribs.setup(client) Purpose <p>Run attribute setup logic for a character on the server.</p> When Called <p>On player spawn/character load to reapply attribute effects.</p> Parameters <p>Player client Player whose character attributes are being applied.</p> Example Usage <pre><code>  hook.Add(\"PlayerLoadedChar\", \"ApplyAttributeBonuses\", function(ply)\n      lia.attribs.setup(ply)\n  end)\n</code></pre>"},{"location":"development/libraries/bar/","title":"Bars","text":"<p>Dynamic progress bar creation and management system for the Lilia framework.</p> Overview  The bars library provides a comprehensive system for creating and managing dynamic progress bars in the Lilia framework. It handles the creation, rendering, and lifecycle management of various types of bars including health, armor, and custom progress indicators. The library operates primarily on the client side, providing smooth animated transitions between bar values and intelligent visibility management based on value changes and user preferences. It includes built-in health and armor bars, custom action progress displays, and a flexible system for adding custom bars with priority-based ordering. The library ensures consistent visual presentation across all bar types while providing hooks for customization and integration with other framework components.  lia.bar.get(identifier) Purpose <p>Retrieve a registered bar definition by its identifier.</p> When Called <p>Before updating/removing an existing bar or inspecting its state.</p> Parameters <p>string identifier optional Unique bar id supplied when added.</p> Returns <p>table|nil Stored bar data or nil if not found.</p> Example Usage <pre><code>  local staminaBar = lia.bar.get(\"stamina\")\n  if staminaBar then\n      print(\"Current priority:\", staminaBar.priority)\n  end\n</code></pre> lia.bar.add(getValue, color, priority, identifier) Purpose <p>Register a new dynamic bar with optional priority and identifier.</p> When Called <p>Client HUD setup or when creating temporary action/status bars.</p> Parameters <p>function getValue Returns current fraction (0-1) when called.</p> <p>Color color optional Bar color; random bright color if nil.</p> <p>number priority optional Lower draws earlier; defaults to append order.</p> <p>string identifier optional Unique id; replaces existing bar with same id.</p> Returns <p>number Priority used for the bar.</p> Example Usage <pre><code>  -- Add a stamina bar that fades after inactivity.\n  lia.bar.add(function()\n      local client = LocalPlayer()\n      local stamina = client:getLocalVar(\"stm\", 100)\n      return math.Clamp(stamina / 100, 0, 1)\n  end, Color(120, 200, 80), 2, \"stamina\")\n</code></pre> lia.bar.remove(identifier) Purpose <p>Remove a bar by its identifier.</p> When Called <p>After a timed action completes or when disabling a HUD element.</p> Parameters <p>string identifier Unique id passed during add.</p> Example Usage <pre><code>  timer.Simple(5, function() lia.bar.remove(\"stamina\") end)\n</code></pre> lia.bar.drawBar(pos, max, color) Purpose <p>Draw a single bar at a position with given fill and color.</p> When Called <p>Internally from drawAll or for custom bars in panels.</p> Parameters <p>number pos Current value.</p> <p>number max Maximum value.</p> <p>Color color Fill color.</p> Example Usage <pre><code>  -- Custom panel painting a download progress bar.\n  function PANEL:Paint(w, h)\n      lia.bar.drawBar(10, h - 24, w - 20, 16, self.progress, 1, Color(120, 180, 255))\n  end\n</code></pre> lia.bar.drawAction(text, duration) Purpose <p>Show a centered action bar with text and timed progress.</p> When Called <p>For timed actions like searching, hacking, or channeling abilities.</p> Parameters <p>string text Label to display.</p> <p>number duration Seconds to run before auto-removal.</p> Example Usage <pre><code>  hook.Add(\"OnStartSearch\", \"ShowSearchBar\", function(duration)\n      lia.bar.drawAction(L(\"searchingChar\"), duration)\n  end)\n</code></pre> lia.bar.drawAll() Purpose <p>Render all registered bars with smoothing, lifetimes, and ordering.</p> When Called <p>Each HUDPaintBackground (hooked at bottom of file).</p> Example Usage <pre><code>  -- Bars are drawn automatically via the HUDPaintBackground hook.\n  -- For custom derma panels, you could manually call lia.bar.drawAll().\n</code></pre>"},{"location":"development/libraries/char/","title":"Character","text":"<p>Comprehensive character creation, management, and persistence system for the Lilia framework.</p> Overview  The character library provides comprehensive functionality for managing player characters in the Lilia framework. It handles character creation, loading, saving, and management across both server and client sides. The library operates character data persistence, networking synchronization, and provides hooks for character variable changes. It includes functions for character validation, database operations, inventory management, and character lifecycle management. The library ensures proper character data integrity and provides a robust system for character-based gameplay mechanics including factions, attributes, money, and custom character variables.  lia.char.getCharacter(charID, client, callback) Purpose <p>Retrieve a character by ID from cache or request a load if missing.</p> When Called <p>Anytime code needs a character object by ID (selection, networking, admin tools).</p> Parameters <p>number charID Character database ID to fetch.</p> <p>Player client optional Owning player; only used server-side when loading.</p> <p>function callback optional Invoked with the character once available (server cached immediately, otherwise after load/network).</p> Returns <p>table|nil The character object if already cached; otherwise nil while loading.</p> Example Usage <pre><code>  lia.char.getCharacter(targetID, ply, function(char)\n      if char then\n          char:sync(ply)\n      end\n  end)\n</code></pre> lia.char.getAll() Purpose <p>Return a table of all players currently holding loaded characters.</p> When Called <p>For admin panels, diagnostics, or mass operations over active characters.</p> Returns <p>table Keyed by Player with values of their active character objects.</p> Example Usage <pre><code>  for ply, char in pairs(lia.char.getAll()) do\n      print(ply:Name(), char:getName())\n  end\n</code></pre> lia.char.isLoaded(charID) Purpose <p>Check if a character ID currently exists in the local cache.</p> When Called <p>Before loading or accessing a character to avoid duplicate work.</p> Parameters <p>number charID Character database ID to test.</p> Returns <p>boolean True if the character is cached, otherwise false.</p> Example Usage <pre><code>  if not lia.char.isLoaded(id) then\n      lia.char.getCharacter(id)\n  end\n</code></pre> lia.char.addCharacter(id, character) Purpose <p>Insert a character into the cache and resolve any pending requests.</p> When Called <p>After successfully loading or creating a character object.</p> Parameters <p>number id Character database ID.</p> <p>table character Character object to store.</p> Example Usage <pre><code>  lia.char.addCharacter(char:getID(), char)\n</code></pre> lia.char.removeCharacter(id) Purpose <p>Remove a character from the local cache.</p> When Called <p>After a character is deleted, unloaded, or no longer needed.</p> Parameters <p>number id Character database ID to remove.</p> Example Usage <pre><code>  lia.char.removeCharacter(charID)\n</code></pre> lia.char.new(data, id, client, steamID) Purpose <p>Construct a character object and populate its variables with provided data or defaults.</p> When Called <p>During character creation or when rebuilding a character from stored data.</p> Parameters <p>table data Raw character data keyed by variable name.</p> <p>number id optional Database ID; defaults to 0 when nil.</p> <p>Player client optional Owning player entity, if available.</p> <p>string steamID optional SteamID string used when no player entity is provided.</p> Returns <p>table New character object.</p> Example Usage <pre><code>  local char = lia.char.new(row, row.id, ply)\n</code></pre> lia.char.hookVar(varName, hookName, func) Purpose <p>Register a hook function that runs when a specific character variable changes.</p> When Called <p>When modules need to react to updates of a given character variable.</p> Parameters <p>string varName Character variable name.</p> <p>string hookName Unique identifier for the hook.</p> <p>function func Callback invoked with (character, oldValue, newValue).</p> Example Usage <pre><code>  lia.char.hookVar(\"money\", \"OnMoneyChanged\", function(char, old, new)\n      hook.Run(\"OnCharMoneyChanged\", char, old, new)\n  end)\n</code></pre> lia.char.registerVar(key, data) Purpose <p>Register a character variable and generate accessor/mutator helpers with optional networking.</p> When Called <p>During schema load to declare character fields such as name, money, or custom data.</p> Parameters <p>string key Variable identifier.</p> <p>table data Configuration table defining defaults, validation, networking, and callbacks.</p> Example Usage <pre><code>  lia.char.registerVar(\"title\", {\n      field = \"title\",\n      fieldType = \"string\",\n      default = \"\",\n  })\n</code></pre> lia.char.getCharData(charID, key) Purpose <p>Read character data key/value pairs stored in the chardata table.</p> When Called <p>When modules need arbitrary persisted data for a character, optionally scoped to a single key.</p> Parameters <p>number charID Character database ID to query.</p> <p>string key optional Optional specific data key to return.</p> Returns <p>table|any|nil Table of all key/value pairs, a single value when key is provided, or nil if not found/invalid.</p> Example Usage <pre><code>  local prestige = lia.char.getCharData(charID, \"prestige\")\n</code></pre> lia.char.getCharDataRaw(charID, key) Purpose <p>Retrieve raw character data from chardata without touching the cache.</p> When Called <p>When a direct database read is needed, bypassing any loaded character state.</p> Parameters <p>number charID Character database ID to query.</p> <p>string key optional Optional key for a single value; omit to fetch all.</p> Returns <p>any|table|false|nil Decoded value for the key, a table of all key/value pairs, false if a keyed lookup is missing, or nil on invalid input.</p> Example Usage <pre><code>  local allData = lia.char.getCharDataRaw(charID)\n</code></pre> lia.char.getOwnerByID(ID) Purpose <p>Find the player entity that owns a given character ID.</p> When Called <p>When needing to target or notify the current owner of a loaded character.</p> Parameters <p>number ID Character database ID.</p> Returns <p>Player|nil Player who currently has the character loaded, or nil if none.</p> Example Usage <pre><code>  local owner = lia.char.getOwnerByID(charID)\n</code></pre> lia.char.getBySteamID(steamID) Purpose <p>Get the active character of an online player by SteamID/SteamID64.</p> When Called <p>For lookups across connected players when only a Steam identifier is known.</p> Parameters <p>string steamID SteamID or SteamID64 string.</p> Returns <p>table|nil Character object if the player is online and has one loaded, else nil.</p> Example Usage <pre><code>  local char = lia.char.getBySteamID(targetSteamID)\n</code></pre> lia.char.getTeamColor(client) Purpose <p>Return the team/class color for a player, falling back to team color.</p> When Called <p>Whenever UI or drawing code needs a consistent color for the player's current class.</p> Parameters <p>Player client Player whose color is requested.</p> Returns <p>table Color table sourced from class definition or team color.</p> Example Usage <pre><code>  local color = lia.char.getTeamColor(ply)\n</code></pre> lia.char.create(data, callback) Purpose <p>Create a new character row, build its object, and initialize inventories.</p> When Called <p>During character creation after validation to persist and ready the new character.</p> Parameters <p>table data Prepared character data including steamID, faction, and name.</p> <p>function callback optional Invoked with the new character ID once creation finishes.</p> Example Usage <pre><code>  lia.char.create(payload, function(charID) print(\"created\", charID) end)\n</code></pre> lia.char.restore(client, callback, id) Purpose <p>Load all characters for a player (or a specific ID) into memory and inventory.</p> When Called <p>On player connect or when an admin requests to restore a specific character.</p> Parameters <p>Player client Player whose characters should be loaded.</p> <p>function callback optional Invoked with a list of loaded character IDs once complete.</p> <p>number id optional Optional single character ID to restrict the load.</p> Example Usage <pre><code>  lia.char.restore(ply, function(chars) print(\"loaded\", #chars) end)\n</code></pre> lia.char.cleanUpForPlayer(client) Purpose <p>Unload and save all characters cached for a player.</p> When Called <p>When a player disconnects or is cleaned up to free memory and inventories.</p> Parameters <p>Player client Player whose cached characters should be unloaded.</p> Example Usage <pre><code>  lia.char.cleanUpForPlayer(ply)\n</code></pre> lia.char.delete(id, client) Purpose <p>Delete a character, its data, and inventories, and notify affected players.</p> When Called <p>By admin or player actions that permanently remove a character.</p> Parameters <p>number id Character database ID to delete.</p> <p>Player client optional Player requesting deletion, if any.</p> Example Usage <pre><code>  lia.char.delete(charID, ply)\n</code></pre> lia.char.getCharBanned(charID) Purpose <p>Check the ban state of a character in the database.</p> When Called <p>Before allowing a character to load or when displaying ban info.</p> Parameters <p>number charID Character database ID.</p> Returns <p>number|nil Ban flag/value (0 if not banned), or nil on invalid input.</p> Example Usage <pre><code>  if lia.char.getCharBanned(id) ~= 0 then return end\n</code></pre> lia.char.setCharDatabase(charID, field, value) Purpose <p>Write a character variable to the database and update any loaded instance.</p> When Called <p>Whenever persistent character fields or custom data need to be changed.</p> Parameters <p>number charID Character database ID.</p> <p>string field Character var or custom data key.</p> <p>any value Value to store; nil removes custom data entries.</p> Returns <p>boolean True on success, false on immediate failure.</p> Example Usage <pre><code>  lia.char.setCharDatabase(charID, \"money\", newAmount)\n</code></pre> lia.char.unloadCharacter(charID) Purpose <p>Save and unload a character from memory, clearing associated data vars.</p> When Called <p>When a character is no longer active or needs to be freed from cache.</p> Parameters <p>number charID Character database ID to unload.</p> Returns <p>boolean True if a character was unloaded, false if none was loaded.</p> Example Usage <pre><code>  lia.char.unloadCharacter(charID)\n</code></pre> lia.char.unloadUnusedCharacters(client, activeCharID) Purpose <p>Unload all cached characters for a player except the currently active one.</p> When Called <p>After character switches to reduce memory and inventory usage.</p> Parameters <p>Player client Player whose cached characters should be reduced.</p> <p>number activeCharID Character ID to keep loaded.</p> Returns <p>number Count of characters that were unloaded.</p> Example Usage <pre><code>  lia.char.unloadUnusedCharacters(ply, newCharID)\n</code></pre> lia.char.loadSingleCharacter(charID, client, callback) Purpose <p>Load a single character from the database, building inventories and caching it.</p> When Called <p>When a specific character is selected, restored, or fetched server-side.</p> Parameters <p>number charID Character database ID to load.</p> <p>Player client optional Owning player, used for permission checks and inventory linking.</p> <p>function callback optional Invoked with the loaded character or nil on failure.</p> Example Usage <pre><code>  lia.char.loadSingleCharacter(id, ply, function(char) if char then char:sync(ply) end end)\n</code></pre>"},{"location":"development/libraries/chat/","title":"Chatbox","text":"<p>Comprehensive chat system management with message routing and formatting for the Lilia framework.</p> Overview  The chatbox library provides comprehensive functionality for managing chat systems in the Lilia framework. It handles registration of different chat types (IC, OOC, whisper, etc.), message parsing and routing, distance-based hearing mechanics, and chat formatting. The library operates on both server and client sides, with the server managing message distribution and validation, while the client handles parsing and display formatting. It includes support for anonymous messaging, custom prefixes, radius-based communication, and integration with the command system for chat-based commands.  lia.chat.timestamp(ooc) Purpose <p>Prepend a timestamp to chat messages based on option settings.</p> When Called <p>During chat display formatting (client) to show the time.</p> Parameters <p>boolean ooc Whether the chat is OOC (affects spacing).</p> Returns <p>string Timestamp text or empty string.</p> Example Usage <pre><code>  chat.AddText(lia.chat.timestamp(false), Color(255,255,255), message)\n</code></pre> lia.chat.register(chatType, data) Purpose <p>Register a chat class (IC/OOC/whisper/custom) with prefixes and rules.</p> When Called <p>On initialization to add new chat types and bind aliases/commands.</p> Parameters <p>string chatType</p> <p>table data Fields: prefix, radius/onCanHear, onCanSay, format, color, arguments, etc.</p> Example Usage <pre><code>  lia.chat.register(\"yell\", {\n      prefix = {\"/y\", \"/yell\"},\n      radius = 600,\n      format = \"chatYellFormat\",\n      arguments = {{name = \"message\", type = \"string\"}},\n      onChatAdd = function(speaker, text) chat.AddText(Color(255,200,120), \"[Y] \", speaker:Name(), \": \", text) end\n  })\n</code></pre> lia.chat.parse(client, message, noSend) Purpose <p>Parse a raw chat message to determine chat type, strip prefixes, and send.</p> When Called <p>On client (local send) and server (routing) before dispatching chat.</p> Parameters <p>Player client</p> <p>string message</p> <p>boolean noSend optional If true, do not forward to recipients (client-side parsing only).</p> Returns <p>string, string, boolean chatType, message, anonymous</p> Example Usage <pre><code>  -- client\n  lia.chat.parse(LocalPlayer(), \"/y Hello there!\")\n  -- server hook\n  hook.Add(\"PlayerSay\", \"LiliaChatParse\", function(ply, txt)\n      if lia.chat.parse(ply, txt) then return \"\" end\n  end)\n</code></pre> lia.chat.send(speaker, chatType, text, anonymous, receivers) Purpose <p>Send a chat message to eligible listeners, honoring canHear/canSay rules.</p> When Called <p>Server-side after parsing chat or programmatic chat generation.</p> Parameters <p>Player speaker</p> <p>string chatType</p> <p>string text</p> <p>boolean anonymous</p> <p>table receivers optional Optional explicit receiver list.</p> Example Usage <pre><code>  lia.chat.send(ply, \"ic\", \"Hello world\", false)\n</code></pre>"},{"location":"development/libraries/class/","title":"Classes","text":"<p>Character class management and validation system for the Lilia framework.</p> Overview  The classes library provides comprehensive functionality for managing character classes in the Lilia framework. It handles registration, validation, and management of player classes within factions. The library operates on both server and client sides, allowing for dynamic class creation, whitelist management, and player class assignment validation. It includes functionality for loading classes from directories, checking class availability, retrieving class information, and managing class limits. The library ensures proper faction validation and provides hooks for custom class behavior and restrictions.  lia.class.register(uniqueID, data) Purpose <p>Registers or updates a class definition within the global class list.</p> When Called <p>Invoked during schema initialization or dynamic class creation to ensure a class entry exists before use.</p> Parameters <p>string uniqueID Unique identifier for the class; must be consistent across loads.</p> <p>table data Class metadata such as name, desc, faction, limit, OnCanBe, etc.</p> Returns <p>table The registered class table with applied defaults.</p> Example Usage <pre><code>  lia.class.register(\"soldier\", {\n      name = \"Soldier\",\n      faction = FACTION_MILITARY,\n      limit = 4\n  })\n</code></pre> lia.class.loadFromDir(directory) Purpose <p>Loads and registers all class definitions from a directory.</p> When Called <p>Used during schema loading to automatically include class files in a folder following the naming convention.</p> Parameters <p>string directory Path to the directory containing class Lua files.</p> Example Usage <pre><code>  lia.class.loadFromDir(\"lilia/gamemode/classes\")\n</code></pre> lia.class.canBe(client, class) Purpose <p>Determines whether a client can join a specific class.</p> When Called <p>Checked before class selection to enforce faction, limits, whitelist, and custom restrictions.</p> Parameters <p>Player client Player attempting to join the class.</p> <p>number|string class Class index or unique identifier.</p> Returns <p>boolean|string False and a reason string on failure; otherwise returns the class's isDefault value.</p> Example Usage <pre><code>  local ok, reason = lia.class.canBe(ply, CLASS_CITIZEN)\n  if ok then\n      -- proceed with class change\n  end\n</code></pre> lia.class.get(identifier) Purpose <p>Retrieves a class table by index or unique identifier.</p> When Called <p>Used whenever class metadata is needed given a known identifier.</p> Parameters <p>number|string identifier Class list index or unique identifier.</p> Returns <p>table|nil The class table if found; otherwise nil.</p> Example Usage <pre><code>  local classData = lia.class.get(\"soldier\")\n</code></pre> lia.class.getPlayers(class) Purpose <p>Collects all players currently assigned to the given class.</p> When Called <p>Used when enforcing limits or displaying membership lists.</p> Parameters <p>number|string class Class list index or unique identifier.</p> Returns <p>table Array of player entities in the class.</p> Example Usage <pre><code>  for _, ply in ipairs(lia.class.getPlayers(\"soldier\")) do\n      -- notify class members\n  end\n</code></pre> lia.class.getPlayerCount(class) Purpose <p>Counts how many players are in the specified class.</p> When Called <p>Used to check class limits or display class population.</p> Parameters <p>number|string class Class list index or unique identifier.</p> Returns <p>number Current number of players in the class.</p> Example Usage <pre><code>  local count = lia.class.getPlayerCount(CLASS_ENGINEER)\n</code></pre> lia.class.retrieveClass(class) Purpose <p>Finds the class index by matching uniqueID or display name.</p> When Called <p>Used to resolve user input to a class entry before further lookups.</p> Parameters <p>string class Text to match against class uniqueID or name.</p> Returns <p>number|nil The class index if a match is found; otherwise nil.</p> Example Usage <pre><code>  local idx = lia.class.retrieveClass(\"Engineer\")\n</code></pre> lia.class.hasWhitelist(class) Purpose <p>Checks whether a class uses whitelist access.</p> When Called <p>Queried before allowing class selection or displaying class info.</p> Parameters <p>number|string class Class list index or unique identifier.</p> Returns <p>boolean True if the class is whitelisted and not default; otherwise false.</p> Example Usage <pre><code>  if lia.class.hasWhitelist(CLASS_PILOT) then\n      -- restrict to whitelisted players\n  end\n</code></pre> lia.class.retrieveJoinable(client) Purpose <p>Returns a list of classes the provided client is allowed to join.</p> When Called <p>Used to build class selection menus and enforce availability.</p> Parameters <p>Player client optional Target player; defaults to LocalPlayer on the client.</p> Returns <p>table Array of class tables the client can currently join.</p> Example Usage <pre><code>  local options = lia.class.retrieveJoinable(ply)\n</code></pre>"},{"location":"development/libraries/color/","title":"Color","text":"<p>Comprehensive color and theme management system for the Lilia framework.</p> Overview  The color library provides comprehensive functionality for managing colors and themes in the Lilia framework. It handles color registration, theme management, color manipulation, and smooth theme transitions. The library operates primarily on the client side, with theme registration available on both server and client. It includes predefined color names, theme switching capabilities, color adjustment functions, and smooth animated transitions between themes. The library ensures consistent color usage across the entire gamemode interface and provides tools for creating custom themes and color schemes.  lia.color.register(name, color) Purpose <p>Register a named color so string-based Color() calls can resolve it.</p> When Called <p>During client initialization or when adding palette entries at runtime.</p> Parameters <p>string name Identifier stored in lowercase.</p> <p>table|Color color Table or Color with r, g, b, a fields.</p> Example Usage <pre><code>  lia.color.register(\"warning\", Color(255, 140, 0))\n  local c = Color(\"warning\")\n</code></pre> lia.color.adjust(color, aOffset) Purpose <p>Apply additive offsets to a color to quickly tint or shade it.</p> When Called <p>While building UI states (hover/pressed) or computing theme variants.</p> Parameters <p>Color color Base color.</p> <p>number aOffset optional Optional alpha offset; defaults to 0.</p> Returns <p>Color Adjusted color.</p> Example Usage <pre><code>  local base = lia.color.getMainColor()\n  button:SetTextColor(lia.color.adjust(base, -40, -20, -60))\n</code></pre> lia.color.darken(color, factor) Purpose <p>Darken a color by a fractional factor.</p> When Called <p>Deriving hover/pressed backgrounds from a base accent color.</p> Parameters <p>Color color Base color to darken.</p> <p>number factor optional Amount between 0-1; defaults to 0.1 and is clamped.</p> Returns <p>Color Darkened color.</p> Example Usage <pre><code>  local accent = lia.color.getMainColor()\n  local pressed = lia.color.darken(accent, 0.2)\n</code></pre> lia.color.getCurrentTheme() Purpose <p>Get the active theme id from config in lowercase.</p> When Called <p>Before looking up theme tables or theme-specific assets.</p> Returns <p>string Lowercased theme id (default \"teal\").</p> Example Usage <pre><code>  if lia.color.getCurrentTheme() == \"dark\" then\n      panel:SetDarkMode(true)\n  end\n</code></pre> lia.color.getCurrentThemeName() Purpose <p>Get the display name of the currently selected theme.</p> When Called <p>Showing UI labels or logs about the active theme.</p> Returns <p>string Theme name from config with original casing.</p> Example Usage <pre><code>  chat.AddText(Color(180, 220, 255), \"Theme: \", lia.color.getCurrentThemeName())\n</code></pre> lia.color.getMainColor() Purpose <p>Fetch the main color from the current theme with sensible fallbacks.</p> When Called <p>Setting accent colors for buttons, bars, and highlights.</p> Returns <p>Color Main theme color, falling back to the default theme or teal.</p> Example Usage <pre><code>  local accent = lia.color.getMainColor()\n  button:SetTextColor(accent)\n</code></pre> lia.color.applyTheme(themeName, useTransition) Purpose <p>Apply a theme immediately or begin a smooth transition toward it, falling back to Teal/default palettes and firing OnThemeChanged after updates.</p> When Called <p>On config changes, theme selection menus, or client startup.</p> Parameters <p>string themeName optional Target theme id; defaults to the current config value.</p> <p>boolean useTransition optional If true, blends colors over time instead of swapping instantly.</p> Example Usage <pre><code>  concommand.Add(\"lia_theme_preview\", function(_, _, args)\n      lia.color.applyTheme(args[1] or \"Teal\", true)\n  end)\n</code></pre> lia.color.isTransitionActive() Purpose <p>Check whether a theme transition is currently blending.</p> When Called <p>To avoid overlapping transitions or to gate UI animations.</p> Returns <p>boolean True if a transition is active, otherwise false.</p> Example Usage <pre><code>  if lia.color.isTransitionActive() then return end\n  lia.color.applyTheme(\"Dark\", true)\n</code></pre> lia.color.testThemeTransition(themeName) Purpose <p>Convenience wrapper to start a theme transition immediately.</p> When Called <p>From theme preview buttons to animate a swap.</p> Parameters <p>string themeName Target theme id.</p> Example Usage <pre><code>  vgui.Create(\"DButton\").DoClick = function()\n      lia.color.testThemeTransition(\"Red\")\n  end\n</code></pre> lia.color.startThemeTransition(name) Purpose <p>Begin blending from the current palette toward a target theme, falling back to Teal when missing and finishing by firing OnThemeChanged once applied.</p> When Called <p>Inside applyTheme when transitions are enabled or via previews.</p> Parameters <p>string name Theme id to blend toward.</p> Example Usage <pre><code>  lia.color.transition.speed = 1.5\n  lia.color.startThemeTransition(\"Ice\")\n</code></pre> lia.color.isColor(v) Purpose <p>Determine whether a value resembles a Color table.</p> When Called <p>While blending themes to decide how to lerp entries.</p> Parameters <p>any v Value to test.</p> Returns <p>boolean True when v has numeric r, g, b, a fields.</p> Example Usage <pre><code>  if lia.color.isColor(entry) then\n      panel:SetTextColor(entry)\n  end\n</code></pre> lia.color.calculateNegativeColor(mainColor) Purpose <p>Build a readable contrasting color (alpha 255) based on a main color.</p> When Called <p>Choosing text or negative colors for overlays and highlights.</p> Parameters <p>Color mainColor optional Defaults to the current theme main color when nil.</p> Returns <p>Color Contrasting color tuned for readability.</p> Example Usage <pre><code>  local negative = lia.color.calculateNegativeColor()\n  frame:SetTextColor(negative)\n</code></pre> lia.color.returnMainAdjustedColors() Purpose <p>Derive a suite of adjusted colors from the main theme color, including brightness-aware text and a calculated negative color.</p> When Called <p>Building consistent palettes for backgrounds, accents, and text.</p> Returns <p>table Contains background, sidebar, accent, text, hover, border, highlight, negative.</p> Example Usage <pre><code>  local palette = lia.color.returnMainAdjustedColors()\n  panel:SetBGColor(palette.background)\n  panel:SetTextColor(palette.text)\n</code></pre> lia.color.lerp(frac, col1, col2) Purpose <p>FrameTime-scaled color lerp helper.</p> When Called <p>Theme transitions or animated highlights needing smooth color changes.</p> Parameters <p>number frac Multiplier applied to FrameTime for lerp speed.</p> <p>Color col1 Source color; defaults to white when nil.</p> <p>Color col2 Target color; defaults to white when nil.</p> Returns <p>Color Interpolated color.</p> Example Usage <pre><code>  local blink = lia.color.lerp(6, Color(255, 0, 0), Color(255, 255, 255))\n  panel:SetBorderColor(blink)\n</code></pre> lia.color.registerTheme(name, themeData) Purpose <p>Register a theme table by name for later selection.</p> When Called <p>During initialization to expose custom palettes.</p> Parameters <p>string name Theme name/id; stored in lowercase.</p> <p>table themeData Map of color keys to Color values or arrays.</p> Example Usage <pre><code>  lia.color.registerTheme(\"MyStudio\", {\n      maincolor = Color(120, 200, 255),\n      background = Color(20, 24, 32),\n      text = Color(230, 240, 255)\n  })\n</code></pre> lia.color.getAllThemes() Purpose <p>Return a sorted list of available theme ids.</p> When Called <p>To populate config dropdowns or theme selection menus.</p> Returns <p>table Sorted array of theme ids.</p> Example Usage <pre><code>  local options = {}\n  for _, id in ipairs(lia.color.getAllThemes()) do\n      options[#options + 1] = id\n  end\n</code></pre>"},{"location":"development/libraries/command/","title":"Commands","text":"<p>Comprehensive command registration, parsing, and execution system for the Lilia framework.</p> Overview  The commands library provides comprehensive functionality for managing and executing commands in the Lilia framework. It handles command registration, argument parsing, access control, privilege management, and command execution across both server and client sides. The library supports complex argument types including players, booleans, strings, and tables, with automatic syntax generation and validation. It integrates with the administrator system for privilege-based access control and provides user interface elements for command discovery and argument prompting. The library ensures secure command execution with proper permission checks and logging capabilities.  lia.command.buildSyntaxFromArguments(args) Purpose <p>Generate a human-readable syntax string from a list of argument definitions.</p> When Called <p>During command registration to populate data.syntax for menus and help text.</p> Parameters <p>table args Array of argument tables {name=, type=, optional=}.</p> Returns <p>string Concatenated syntax tokens describing the command arguments.</p> Example Usage <pre><code>  local syntax = lia.command.buildSyntaxFromArguments({\n      {name = \"target\", type = \"player\"},\n      {name = \"amount\", type = \"number\", optional = true}\n  })\n  -- \"[player target] [string amount optional]\"\n</code></pre> lia.command.add(command, data) Purpose <p>Register a command and normalize its metadata, syntax, privileges, aliases, and callbacks.</p> When Called <p>During schema or module initialization to expose new chat/console commands.</p> Parameters <p>string command Unique command key.</p> <p>table data Command definition (arguments, desc, privilege, superAdminOnly, adminOnly, alias, onRun, onCheckAccess, etc.).</p> Example Usage <pre><code>  lia.command.add(\"bring\", {\n      desc = \"Bring a player to you.\",\n      adminOnly = true,\n      arguments = {\n          {name = \"target\", type = \"player\"}\n      },\n      onRun = function(client, args)\n          local target = lia.command.findPlayer(args[1])\n          if IsValid(target) then target:SetPos(client:GetPos() + client:GetForward() * 50) end\n      end\n  })\n</code></pre> lia.command.hasAccess(client, command, data) Purpose <p>Determine whether a client may run a command based on privileges, hooks, faction/class access, and custom checks.</p> When Called <p>Before executing a command or showing it in help menus.</p> Parameters <p>Player client Player requesting access.</p> <p>string command Command name to check.</p> <p>table data optional Command definition; looked up from lia.command.list when nil.</p> Returns <p>boolean, string allowed result and privilege name for UI/feedback.</p> Example Usage <pre><code>  local canUse, priv = lia.command.hasAccess(ply, \"bring\")\n  if not canUse then ply:notifyErrorLocalized(\"noPerm\") end\n</code></pre> lia.command.extractArgs(text) Purpose <p>Split a raw command string into arguments while preserving quoted segments.</p> When Called <p>When parsing chat-entered commands before validation or prompting.</p> Parameters <p>string text Raw command text excluding the leading slash.</p> Returns <p>table Array of parsed arguments.</p> Example Usage <pre><code>  local args = lia.command.extractArgs(\"'John Doe' 250\")\n  -- {\"John Doe\", \"250\"}\n</code></pre> lia.command.run(client, command, arguments) Purpose <p>Execute a registered command for a given client with arguments and emit post-run hooks.</p> When Called <p>After parsing chat input or console invocation server-side.</p> Parameters <p>Player client optional Player that issued the command (nil when run from server console).</p> <p>string command Command key to execute.</p> <p>table arguments optional Parsed command arguments.</p> Example Usage <pre><code>  lia.command.run(ply, \"bring\", {targetSteamID})\n</code></pre> lia.command.parse(client, text, realCommand, arguments, Pre, Pre) Purpose <p>Parse chat text into a command invocation, prompt for missing args, and dispatch authorized commands.</p> When Called <p>On the server when a player sends chat starting with '/' or when manually dispatching a command.</p> Parameters <p>Player client Player whose chat is being parsed.</p> <p>string text Full chat text.</p> <p>string realCommand optional Command key when bypassing parsing (used by net/message dispatch).</p> <p>table arguments optional Pre-parsed arguments; when nil they are derived from text.</p> <p>unknown Pre parsed arguments; when nil they are derived from text.</p> <p>unknown Pre parsed arguments; when nil they are derived from text.</p> Returns <p>boolean true if the text was handled as a command.</p> Example Usage <pre><code>  hook.Add(\"PlayerSay\", \"liaChatCommands\", function(ply, text)\n      if lia.command.parse(ply, text) then return \"\" end\n  end)\n</code></pre> lia.command.openArgumentPrompt(cmdKey, missing, prefix) Purpose <p>Display a clientside UI prompt for missing command arguments and send the completed command back through chat.</p> When Called <p>After the server requests argument completion via the liaCmdArgPrompt net message.</p> Parameters <p>string cmdKey Command key being completed.</p> <p>table missing Names of missing arguments.</p> <p>table prefix optional Prefilled argument values.</p> Example Usage <pre><code>  lia.command.openArgumentPrompt(\"pm\", {\"target\", \"message\"}, {\"steamid\"})\n</code></pre> lia.command.send(command) Purpose <p>Send a command invocation to the server via net as a clientside helper.</p> When Called <p>From UI elements or client logic instead of issuing chat/console commands directly.</p> Parameters <p>string command Command key to invoke.</p> Example Usage <pre><code>  lia.command.send(\"respawn\", LocalPlayer():SteamID())\n</code></pre>"},{"location":"development/libraries/config/","title":"Configuration","text":"<p>Comprehensive user-configurable settings management system for the Lilia framework.</p> Overview  The configuration library provides comprehensive functionality for managing user-configurable settings in the Lilia framework. It handles the creation, storage, retrieval, and persistence of various types of options including boolean toggles, numeric sliders, color pickers, text inputs, and dropdown selections. The library operates on both client and server sides, with automatic persistence to JSON files and optional networking capabilities for server-side options. It includes a complete user interface system for displaying and modifying options through the configuration menu, with support for categories, visibility conditions, and real-time updates. The library ensures that all user preferences are maintained across sessions and provides hooks for modules to react to option changes.  lia.config.add(key, name, value, callback, data) Purpose <p>Register a config entry with defaults, UI metadata, and optional callback.</p> When Called <p>During schema/module initialization to expose server-stored configuration.</p> Parameters <p>string key Unique identifier for the config entry.</p> <p>string name Display text or localization key for UI.</p> <p>any value Default value; type inferred when data.type is omitted.</p> <p>function callback optional Invoked server-side as callback(oldValue, newValue) after set().</p> <p>table data Fields such as type, desc, category, options/optionsFunc, noNetworking, etc.</p> Example Usage <pre><code>  lia.config.add(\"MaxThirdPersonDistance\", \"maxThirdPersonDistance\", 100, function(old, new)\n      lia.option.set(\"thirdPersonDistance\", math.min(lia.option.get(\"thirdPersonDistance\", new), new))\n  end, {category = \"Lilia\", type = \"Int\", min = 10, max = 200})\n</code></pre> lia.config.getOptions(key) Purpose <p>Resolve a config entry's selectable options, static list or generated.</p> When Called <p>Before rendering dropdown-type configs or validating submitted values.</p> Parameters <p>string key Config key to resolve options for.</p> Returns <p>table Options array or key/value table; empty when unavailable.</p> Example Usage <pre><code>  local opts = lia.config.getOptions(\"Theme\")\n</code></pre> lia.config.setDefault(key, value) Purpose <p>Override the default value for an already registered config entry.</p> When Called <p>During migrations, schema overrides, or backward-compatibility fixes.</p> Parameters <p>string key Config key to override.</p> <p>any value New default value.</p> Example Usage <pre><code>  lia.config.setDefault(\"StartingMoney\", 300)\n</code></pre> lia.config.forceSet(key, value, noSave) Purpose <p>Force-set a config value and fire update hooks without networking.</p> When Called <p>Runtime adjustments (admin tools/commands) or hot reload scenarios.</p> Parameters <p>string key Config key to change.</p> <p>any value Value to assign.</p> <p>boolean noSave optional When true, skip persisting to disk.</p> Example Usage <pre><code>  lia.config.forceSet(\"MaxCharacters\", 10, false)\n</code></pre> lia.config.set(key, value) Purpose <p>Set a config value, fire update hooks, run server callbacks, network to clients, and persist.</p> When Called <p>Through admin tools/commands or internal code updating configuration.</p> Parameters <p>string key Config key to change.</p> <p>any value Value to assign and broadcast.</p> Example Usage <pre><code>  lia.config.set(\"RunSpeed\", 420)\n</code></pre> lia.config.get(key, default) Purpose <p>Retrieve a config value with fallback to its stored default or a provided default.</p> When Called <p>Anywhere configuration influences gameplay or UI logic.</p> Parameters <p>string key Config key to read.</p> <p>any default Optional fallback when no stored value or default exists.</p> Returns <p>any Stored value, default value, or supplied fallback.</p> Example Usage <pre><code>  local walkSpeed = lia.config.get(\"WalkSpeed\", 200)\n</code></pre> lia.config.load() Purpose <p>Load config values from JSON files (server) or request them from the server (client).</p> When Called <p>On initialization to hydrate lia.config.stored from JSON file storage.</p> Example Usage <pre><code>  hook.Add(\"Initialize\", \"LoadLiliaConfig\", lia.config.load)\n</code></pre> lia.config.getChangedValues(includeDefaults) Purpose <p>Collect config entries whose values differ from last synced values or their defaults.</p> When Called <p>Prior to sending incremental config updates to clients.</p> Parameters <p>boolean includeDefaults optional When true, compare against defaults instead of last synced values.</p> Returns <p>table key \u2192 value for configs that changed.</p> Example Usage <pre><code>  local changed = lia.config.getChangedValues()\n  if next(changed) then lia.config.send() end\n</code></pre> lia.config.hasChanges() Purpose <p>Check whether any config values differ from the last synced snapshot.</p> When Called <p>To determine if a resync to clients is required.</p> Returns <p>boolean True when at least one config value has changed.</p> Example Usage <pre><code>  if lia.config.hasChanges() then lia.config.send() end\n</code></pre> lia.config.send(client) Purpose <p>Send config values to one player (full payload) or broadcast only changed values.</p> When Called <p>After config changes or when a player joins the server.</p> Parameters <p>Player client optional Target player for full sync; nil broadcasts only changed values.</p> Example Usage <pre><code>  hook.Add(\"PlayerInitialSpawn\", \"SyncConfig\", function(ply) lia.config.send(ply) end)\n  lia.config.send() -- broadcast diffs\n</code></pre> lia.config.save() Purpose <p>Persist all config values to JSON files.</p> When Called <p>After changes, on shutdown, or during scheduled saves.</p> Example Usage <pre><code>  lia.config.save()\n</code></pre> lia.config.reset() Purpose <p>Reset all config values to defaults, then save and sync to clients.</p> When Called <p>During admin resets or troubleshooting.</p> Example Usage <pre><code>  lia.config.reset()\n</code></pre>"},{"location":"development/libraries/currency/","title":"Currency","text":"<p>In-game currency formatting, display, and management system for the Lilia framework.</p> Overview  The currency library provides comprehensive functionality for managing in-game currency within the Lilia framework. It handles currency formatting, display, and physical money entity spawning. The library operates on both server and client sides, with the server handling money entity creation and spawning, while the client handles currency display formatting. It includes localization support for currency names and symbols, ensuring proper pluralization and formatting based on amount values. The library integrates with the configuration system to allow customizable currency symbols and names.  lia.currency.get(amount) Purpose <p>Format a numeric amount into a localized currency string with the configured symbol and singular/plural name.</p> When Called <p>Whenever a currency amount needs to be shown to players or logged (UI, chat, logs, tooltips).</p> Parameters <p>number amount Raw amount to format; must be a number.</p> Returns <p>string Formatted amount with symbol prefix and the singular or plural currency name.</p> Example Usage <pre><code>  chat.AddText(L(\"youReceivedMoney\", lia.currency.get(250)))\n  lia.log.add(client, \"moneyPickedUp\", 250)\n</code></pre> lia.currency.spawn(pos, amount, angle) Purpose <p>Spawn a physical money entity at a world position and assign it an amount.</p> When Called <p>Server-side when creating droppable currency (player drops, rewards, refunds, scripted events).</p> Parameters <p>Vector pos World position to spawn the money entity; required.</p> <p>number amount Currency amount to store on the entity; must be non-negative.</p> <p>Angle angle optional Optional spawn angles; defaults to `angle_zero` when omitted.</p> Returns <p>Entity|nil Created `lia_money` entity, or nil if input is invalid or entity creation fails.</p> Example Usage <pre><code>  hook.Add(\"OnNPCKilled\", \"DropBountyCash\", function(npc, attacker)\n      if not IsValid(attacker) or not attacker:IsPlayer() then return end\n      local money = lia.currency.spawn(npc:GetPos() + Vector(0, 0, 10), math.random(50, 150))\n      if IsValid(money) then\n          money:SetVelocity(VectorRand() * 80)\n      end\n  end)\n</code></pre>"},{"location":"development/libraries/darkrp/","title":"DarkRP","text":"<p>The DarkRP compatibility library provides essential functions for maintaining compatibility</p> lia.darkrp.isEmpty(position, entitiesToIgnore) Purpose <p>Determine whether a position is free of solid contents, players, NPCs, or props.</p> When Called <p>Before spawning DarkRP-style shipments or entities to ensure the destination is clear.</p> Parameters <p>Vector position World position to test.</p> <p>table entitiesToIgnore optional Optional list of entities that should be excluded from the collision check.</p> Returns <p>boolean true when the spot contains no blocking contents or entities; otherwise false.</p> Example Usage <pre><code>  local spawnPos = ent:GetPos() + Vector(0, 0, 16)\n  if lia.darkrp.isEmpty(spawnPos) then\n      lia.darkrp.createEntity(\"Ammo Crate\", {ent = \"item_ammo_crate\", model = \"models/Items/ammocrate_smg1.mdl\"})\n  end\n</code></pre> lia.darkrp.findEmptyPos(startPos, entitiesToIgnore, maxDistance, searchStep, checkArea) Purpose <p>Locate the nearest empty position around a starting point within a search radius.</p> When Called <p>Selecting safe fallback positions for DarkRP-style shipments or NPC spawns.</p> Parameters <p>Vector startPos Origin position to test first.</p> <p>table entitiesToIgnore optional Optional list of entities to ignore while searching.</p> <p>number maxDistance Maximum distance to search away from the origin.</p> <p>number searchStep Increment used when expanding the search radius.</p> <p>Vector checkArea Additional offset tested to ensure enough clearance (for hull height, etc.).</p> Returns <p>Vector First empty position discovered; if none found, returns startPos.</p> Example Usage <pre><code>  local spawnPos = lia.darkrp.findEmptyPos(requestPos, nil, 256, 16, Vector(0, 0, 32))\n  npc:SetPos(spawnPos)\n</code></pre> lia.darkrp.notify(client, notifyType, duration, message) Purpose <p>Provide a DarkRP-compatible wrapper for Lilia's localized notify system.</p> When Called <p>From DarkRP addons or compatibility code that expects DarkRP.notify to exist.</p> Parameters <p>Player client Recipient of the notification.</p> <p>number notifyType Unused legacy parameter kept for API parity.</p> <p>number duration Unused legacy parameter kept for API parity.</p> <p>string message Localization key or message to pass to Lilia's notifier.</p> Example Usage <pre><code>  lia.darkrp.notify(ply, NOTIFY_GENERIC, 4, \"You received a paycheck.\")\n</code></pre> lia.darkrp.textWrap(text, fontName, maxLineWidth) Purpose <p>Wrap long text to a maximum line width based on the active surface font metrics.</p> When Called <p>Preparing DarkRP-compatible messages for HUD or chat rendering without overflow.</p> Parameters <p>string text Message to wrap.</p> <p>string fontName Name of the font to measure.</p> <p>number maxLineWidth Maximum pixel width allowed per line before inserting a newline.</p> Returns <p>string Wrapped text with newline characters inserted.</p> Example Usage <pre><code>  local wrapped = lia.darkrp.textWrap(\"A very long notice message...\", \"DermaDefault\", 240)\n  chat.AddText(color_white, wrapped)\n</code></pre> lia.darkrp.formatMoney(amount) Purpose <p>Format a currency amount using Lilia's currency system while matching DarkRP's API.</p> When Called <p>Anywhere DarkRP.formatMoney is expected by compatibility layers or addons.</p> Parameters <p>number amount Currency amount to format.</p> Returns <p>string Localized and formatted currency string.</p> Example Usage <pre><code>  local paycheck = DarkRP.formatMoney(500)\n  chat.AddText(L(\"paydayReceived\", paycheck))\n</code></pre> lia.darkrp.createEntity(name, data) Purpose <p>Register a DarkRP entity definition as a Lilia item for compatibility.</p> When Called <p>While converting DarkRP shipments or entities into Lilia items at load time.</p> Parameters <p>string name Display name for the item.</p> <p>table data Supported fields: cmd, ent, model, desc, price, category.</p> Example Usage <pre><code>  lia.darkrp.createEntity(\"Ammo Crate\", {\n      ent = \"item_ammo_crate\",\n      model = \"models/Items/ammocrate_smg1.mdl\",\n      price = 750,\n      category = \"Supplies\"\n  })\n</code></pre> lia.darkrp.createCategory() Purpose <p>Provide an API stub for DarkRP category creation.</p> When Called <p>Invoked by DarkRP.createCategory during addon initialization; intentionally no-op.</p> Example Usage <pre><code>  -- API parity only; this function performs no actions.\n  lia.darkrp.createCategory()\n</code></pre>"},{"location":"development/libraries/data/","title":"Data","text":"<p>Data persistence, serialization, and management system for the Lilia framework.</p> Overview  The data library provides comprehensive functionality for data persistence, serialization, and management within the Lilia framework. It handles encoding and decoding of complex data types including vectors, angles, colors, and nested tables for database storage. The library manages both general data storage with gamemode and map-specific scoping, as well as entity persistence for maintaining spawned entities across server restarts. It includes automatic serialization/deserialization, database integration, and caching mechanisms to ensure efficient data access and storage operations.  lia.data.encodetable(value) Purpose <p>Encode vectors/angles/colors/tables into JSON-safe structures.</p> When Called <p>Before persisting data to DB or file storage.</p> Parameters <p>any value</p> Returns <p>any Encoded representation.</p> Example Usage <pre><code>  local payload = lia.data.encodetable({\n      pos = Vector(0, 0, 64),\n      ang = Angle(0, 90, 0),\n      tint = Color(255, 0, 0)\n  })\n</code></pre> lia.data.decode(value) Purpose <p>Decode nested structures into native types (Vector/Angle/Color).</p> When Called <p>After reading serialized data from DB/file.</p> Parameters <p>any value</p> Returns <p>any Decoded value with deep conversion.</p> Example Usage <pre><code>  local decoded = lia.data.decode(storedJsonTable)\n  local pos = decoded.spawnPos\n</code></pre> lia.data.serialize(value) Purpose <p>Serialize a value into JSON, pre-encoding special types.</p> When Called <p>Before writing data blobs into DB columns.</p> Parameters <p>any value</p> Returns <p>string JSON string.</p> Example Usage <pre><code>  local json = lia.data.serialize({pos = Vector(1,2,3)})\n  lia.db.updateSomewhere(json)\n</code></pre> lia.data.deserialize(raw) Purpose <p>Deserialize JSON/pon or raw tables back into native types.</p> When Called <p>After fetching data rows from DB.</p> Parameters <p>string|table|any raw</p> Returns <p>any</p> Example Usage <pre><code>  local row = lia.db.select(...):get()\n  local data = lia.data.deserialize(row.data)\n</code></pre> lia.data.decodeVector(raw) Purpose <p>Decode a vector from various string/table encodings.</p> When Called <p>While rebuilding persistent entities or map data.</p> Parameters <p>any raw</p> Returns <p>Vector|any</p> Example Usage <pre><code>  local pos = lia.data.decodeVector(row.pos)\n  if isvector(pos) then ent:SetPos(pos) end\n</code></pre> lia.data.decodeAngle(raw) Purpose <p>Decode an angle from string/table encodings.</p> When Called <p>During persistence loading or data deserialization.</p> Parameters <p>any raw</p> Returns <p>Angle|any</p> Example Usage <pre><code>  local ang = lia.data.decodeAngle(row.angles)\n  if isangle(ang) then ent:SetAngles(ang) end\n</code></pre> lia.data.set(key, value, global, ignoreMap) Purpose <p>Persist a key/value pair scoped to gamemode/map (or global).</p> When Called <p>To save configuration/state data into the DB.</p> Parameters <p>string key</p> <p>any value</p> <p>boolean global optional</p> <p>boolean ignoreMap optional</p> Returns <p>string Path prefix used for file save fallback.</p> Example Usage <pre><code>  lia.data.set(\"event.active\", true, false, false)\n</code></pre> lia.data.delete(key, global, ignoreMap) Purpose <p>Delete a stored key (and row if empty) from DB cache.</p> When Called <p>To remove saved state/config entries.</p> Parameters <p>string key</p> <p>boolean global optional</p> <p>boolean ignoreMap optional</p> Returns <p>boolean</p> Example Usage <pre><code>  lia.data.delete(\"event.active\")\n</code></pre> lia.data.loadTables() Purpose <p>Load stored data rows for global, gamemode, and map scopes.</p> When Called <p>On database ready to hydrate lia.data.stored cache.</p> Example Usage <pre><code>  hook.Add(\"DatabaseConnected\", \"LoadLiliaData\", lia.data.loadTables)\n</code></pre> lia.data.loadPersistence() Purpose <p>Ensure persistence table has required columns; add if missing.</p> When Called <p>Before saving/loading persistent entities.</p> Returns <p>promise</p> Example Usage <pre><code>  lia.data.loadPersistence():next(function() print(\"Persistence columns ready\") end)\n</code></pre> lia.data.savePersistence(entities) Purpose <p>Save persistent entities to the database (with dynamic columns).</p> When Called <p>On PersistenceSave hook/timer with collected entities.</p> Parameters <p>table entities Array of entity data tables.</p> Returns <p>promise|nil</p> Example Usage <pre><code>  hook.Run(\"PersistenceSave\", collectedEntities)\n</code></pre> lia.data.loadPersistenceData(callback) Purpose <p>Load persistent entities from DB, decode fields, and cache them.</p> When Called <p>On server start or when manually reloading persistence.</p> Parameters <p>function callback optional Invoked with entities table once loaded.</p> Returns <p>promise</p> Example Usage <pre><code>  lia.data.loadPersistenceData(function(entities)\n      for _, entData in ipairs(entities) do\n          -- spawn logic here\n      end\n  end)\n</code></pre> lia.data.get(key, default) Purpose <p>Fetch a stored key from cache, deserializing strings on demand.</p> When Called <p>Anywhere stored data is read after loadTables.</p> Parameters <p>string key</p> <p>any default</p> Returns <p>any</p> Example Usage <pre><code>  local eventData = lia.data.get(\"event.settings\", {})\n</code></pre> lia.data.getPersistence() Purpose <p>Return the cached list of persistent entities (last loaded/saved).</p> When Called <p>For admin tools or debug displays.</p> Returns <p>table</p> Example Usage <pre><code>  PrintTable(lia.data.getPersistence())\n</code></pre> lia.data.addEquivalencyMap(map1, map2) Purpose <p>Register an equivalency between two map names (bidirectional).</p> When Called <p>To share data/persistence across multiple map aliases.</p> Parameters <p>string map1</p> <p>string map2</p> Example Usage <pre><code>  lia.data.addEquivalencyMap(\"rp_downtown_v1\", \"rp_downtown_v2\")\n</code></pre> lia.data.getEquivalencyMap(map) Purpose <p>Resolve a map name to its equivalency (if registered).</p> When Called <p>Before saving/loading data keyed by map name.</p> Parameters <p>string map</p> Returns <p>string</p> Example Usage <pre><code>  local canonical = lia.data.getEquivalencyMap(game.GetMap())\n</code></pre>"},{"location":"development/libraries/db/","title":"Database","text":"<p>Comprehensive database management system with SQLite support for the Lilia framework.</p> Overview  The database library provides comprehensive database management functionality for the Lilia framework. It handles all database operations including connection management, table creation and modification, data insertion, updates, queries, and schema management. The library supports SQLite as the primary database engine with extensible module support for other database systems. It includes advanced features such as prepared statements, transactions, bulk operations, data type conversion, and database snapshots for backup and restore operations. The library ensures data persistence across server restarts and provides robust error handling with deferred promise-based operations for asynchronous database queries. It manages core gamemode tables for players, characters, inventories, items, configuration, logs, and administrative data while supporting dynamic schema modifications.  lia.db.connect(callback, reconnect) Purpose <p>Establishes a connection to the database using the configured database module and initializes the query system.</p> When Called <p>Called during gamemode initialization to set up the database connection, or when reconnecting to the database.</p> Parameters <p>function callback Optional callback function to execute when the connection is established.</p> <p>boolean reconnect Optional flag to force reconnection even if already connected.</p> Example Usage <pre><code>  lia.db.connect(function()\n      print(\"Database connected successfully!\")\n  end)\n</code></pre> lia.db.wipeTables(callback) Purpose <p>Completely removes all Lilia-related database tables from the database.</p> When Called <p>Called when performing a complete data wipe/reset of the gamemode's database.</p> Parameters <p>function callback Optional callback function to execute when all tables have been wiped.</p> Example Usage <pre><code>  lia.db.wipeTables(function()\n      print(\"All Lilia tables have been wiped!\")\n  end)\n</code></pre> lia.db.loadTables() Purpose <p>Creates all core Lilia database tables if they don't exist, including tables for players, characters, inventories, items, configuration, logs, and administrative data.</p> When Called <p>Called during gamemode initialization to set up the database schema and prepare the database for use.</p> Example Usage <pre><code>  lia.db.loadTables()\n</code></pre> lia.db.waitForTablesToLoad() Purpose <p>Returns a deferred promise that resolves when all database tables have finished loading.</p> When Called <p>Called when code needs to wait for database tables to be fully initialized before proceeding with database operations.</p> Returns <p>Deferred A promise that resolves when tables are loaded.</p> Example Usage <pre><code>  lia.db.waitForTablesToLoad():next(function()\n      -- Database tables are now ready\n      lia.db.select(\"*\", \"characters\"):next(function(results)\n          print(\"Characters loaded:\", #results)\n      end)\n  end)\n</code></pre> lia.db.convertDataType(value, noEscape) Purpose <p>Converts Lua data types to SQL-compatible string formats for database queries.</p> When Called <p>Automatically called when building SQL queries to ensure proper data type conversion.</p> Parameters <p>any value The value to convert (string, number, boolean, table, nil).</p> <p>boolean noEscape Optional flag to skip SQL escaping for strings and tables.</p> Returns <p>string The converted value as a SQL-compatible string.</p> Example Usage <pre><code>  local sqlValue = lia.db.convertDataType(\"John's Name\")\n  -- Returns: \"'John''s Name'\" (properly escaped)\n  local sqlValue2 = lia.db.convertDataType({health = 100})\n  -- Returns: \"'{\\\"health\\\":100}'\" (JSON encoded and escaped)\n</code></pre> lia.db.insertTable(value, callback, dbTable) Purpose <p>Inserts a new row into the specified database table with the provided data.</p> When Called <p>Called when adding new records to database tables such as characters, items, or player data.</p> Parameters <p>table value Table containing column-value pairs to insert.</p> <p>function callback Optional callback function called with (results, lastID) when the query completes.</p> <p>string dbTable Optional table name (defaults to \"characters\" if not specified).</p> Returns <p>Deferred A promise that resolves with {results = results, lastID = lastID}.</p> Example Usage <pre><code>  lia.db.insertTable({\n      steamID = \"STEAM_0:1:12345678\",\n      name = \"John Doe\",\n      money = \"1000\"\n  }, function(results, lastID)\n      print(\"Character created with ID:\", lastID)\n  end, \"characters\"):next(function(result)\n      print(\"Insert completed, last ID:\", result.lastID)\n  end)\n</code></pre> lia.db.updateTable(value, callback, dbTable, condition) Purpose <p>Updates existing rows in the specified database table with the provided data.</p> When Called <p>Called when modifying existing records in database tables such as updating character data or player information.</p> Parameters <p>table value Table containing column-value pairs to update.</p> <p>function callback Optional callback function called with (results, lastID) when the query completes.</p> <p>string dbTable Optional table name without \"lia_\" prefix (defaults to \"characters\" if not specified).</p> <p>table|string condition Optional WHERE condition to specify which rows to update.</p> Returns <p>Deferred A promise that resolves with {results = results, lastID = lastID}.</p> Example Usage <pre><code>  -- Update character money\n  lia.db.updateTable({\n      money = \"500\"\n  }, nil, \"characters\", {id = 123}):next(function()\n      print(\"Character money updated\")\n  end)\n  -- Update with string condition\n  lia.db.updateTable({\n      lastJoin = os.date(\"%Y-%m-%d %H:%M:%S\")\n  }, nil, \"players\", \"steamID = 'STEAM_0:1:12345678'\")\n</code></pre> lia.db.select(fields, dbTable, condition, limit) Purpose <p>Selects data from the specified database table with optional conditions and limits.</p> When Called <p>Called when retrieving data from database tables such as fetching character information or player data.</p> Parameters <p>string|table fields Fields to select - either \"*\" for all fields, a string field name, or table of field names.</p> <p>string dbTable Table name without \"lia_\" prefix (defaults to \"characters\" if not specified).</p> <p>table|string condition Optional WHERE condition to filter results.</p> <p>number limit Optional LIMIT clause to restrict number of results.</p> Returns <p>Deferred A promise that resolves with {results = results, lastID = lastID}.</p> Example Usage <pre><code>  -- Select all characters\n  lia.db.select(\"*\", \"characters\"):next(function(result)\n      print(\"Found\", #result.results, \"characters\")\n  end)\n  -- Select specific fields with condition\n  lia.db.select({\"name\", \"money\"}, \"characters\", {steamID = \"STEAM_0:1:12345678\"}):next(function(result)\n      for _, char in ipairs(result.results) do\n          print(char.name, \"has\", char.money, \"money\")\n      end\n  end)\n  -- Select with limit\n  lia.db.select(\"name\", \"characters\", nil, 5):next(function(result)\n      print(\"First 5 characters:\")\n      for _, char in ipairs(result.results) do\n          print(\"-\", char.name)\n      end\n  end)\n</code></pre> lia.db.selectWithCondition(fields, dbTable, conditions, limit, orderBy) Purpose <p>Selects data from the specified database table with complex conditions and optional ordering.</p> When Called <p>Called when needing advanced query conditions with operator support and ordering.</p> Parameters <p>string|table fields Fields to select - either \"*\" for all fields, a string field name, or table of field names.</p> <p>string dbTable Table name without \"lia_\" prefix.</p> <p>table|string conditions WHERE conditions - can be a string or table with field-operator-value structures.</p> <p>number limit Optional LIMIT clause to restrict number of results.</p> <p>string orderBy Optional ORDER BY clause for sorting results.</p> Returns <p>Deferred A promise that resolves with {results = results, lastID = lastID}.</p> Example Usage <pre><code>  -- Select with complex conditions and ordering\n  lia.db.selectWithCondition(\"*\", \"characters\", {\n      money = {operator = \"&gt;\", value = 1000},\n      faction = \"citizen\"\n  }, 10, \"name ASC\"):next(function(result)\n      print(\"Found\", #result.results, \"rich citizens\")\n  end)\n</code></pre> lia.db.count(dbTable, condition) Purpose <p>Counts the number of rows in the specified database table that match the given condition.</p> When Called <p>Called when needing to determine how many records exist in a table, such as counting characters or items.</p> Parameters <p>string dbTable Table name without \"lia_\" prefix.</p> <p>table|string condition Optional WHERE condition to filter which rows to count.</p> Returns <p>Deferred A promise that resolves with the count as a number.</p> Example Usage <pre><code>  -- Count all characters\n  lia.db.count(\"characters\"):next(function(count)\n      print(\"Total characters:\", count)\n  end)\n  -- Count characters for a specific player\n  lia.db.count(\"characters\", {steamID = \"STEAM_0:1:12345678\"}):next(function(count)\n      print(\"Player has\", count, \"characters\")\n  end)\n</code></pre> lia.db.addDatabaseFields() Purpose <p>Dynamically adds missing database fields to the characters table based on character variable definitions.</p> When Called <p>Called during database initialization to ensure all character variables have corresponding database columns.</p> Example Usage <pre><code>  lia.db.addDatabaseFields()\n</code></pre> lia.db.exists(dbTable, condition) Purpose <p>Checks if any records exist in the specified table that match the given condition.</p> When Called <p>Called to verify the existence of records before performing operations.</p> Parameters <p>string dbTable Table name without \"lia_\" prefix.</p> <p>table|string condition WHERE condition to check for record existence.</p> Returns <p>Deferred A promise that resolves to true if records exist, false otherwise.</p> Example Usage <pre><code>  lia.db.exists(\"characters\", {steamID = \"STEAM_0:1:12345678\"}):next(function(exists)\n      if exists then\n          print(\"Player has characters\")\n      else\n          print(\"Player has no characters\")\n      end\n  end)\n</code></pre> lia.db.selectOne(fields, dbTable, condition) Purpose <p>Selects a single row from the specified database table that matches the given condition.</p> When Called <p>Called when retrieving a specific record from database tables, such as finding a character by ID.</p> Parameters <p>string|table fields Fields to select - either \"*\" for all fields, a string field name, or table of field names.</p> <p>string dbTable Table name without \"lia_\" prefix.</p> <p>table|string condition Optional WHERE condition to filter results.</p> Returns <p>Deferred A promise that resolves with the first matching row as a table, or nil if no rows found.</p> Example Usage <pre><code>  -- Get character by ID\n  lia.db.selectOne(\"*\", \"characters\", {id = 123}):next(function(character)\n      if character then\n          print(\"Found character:\", character.name)\n      else\n          print(\"Character not found\")\n      end\n  end)\n  -- Get player data by SteamID\n  lia.db.selectOne({\"name\", \"money\"}, \"players\", {steamID = \"STEAM_0:1:12345678\"}):next(function(player)\n      if player then\n          print(player.name, \"has\", player.money, \"money\")\n      end\n  end)\n</code></pre> lia.db.bulkInsert(dbTable, rows) Purpose <p>Inserts multiple rows into the specified database table in a single query for improved performance.</p> When Called <p>Called when inserting large amounts of data at once, such as bulk importing items or characters.</p> Parameters <p>string dbTable Table name without \"lia_\" prefix.</p> <p>table rows Array of row data tables, where each table contains column-value pairs.</p> Returns <p>Deferred A promise that resolves when the bulk insert completes.</p> Example Usage <pre><code>  local items = {\n      {uniqueID = \"item1\", invID = 1, quantity = 5},\n      {uniqueID = \"item2\", invID = 1, quantity = 3},\n      {uniqueID = \"item3\", invID = 2, quantity = 1}\n  }\n  lia.db.bulkInsert(\"items\", items):next(function()\n      print(\"Bulk insert completed\")\n  end)\n</code></pre> lia.db.bulkUpsert(dbTable, rows) Purpose <p>Performs bulk insert or replace operations on multiple rows in a single query.</p> When Called <p>Called when bulk updating/inserting data where existing records should be replaced.</p> Parameters <p>string dbTable Table name without \"lia_\" prefix.</p> <p>table rows Array of row data tables to insert or replace.</p> Returns <p>Deferred A promise that resolves when the bulk upsert completes.</p> Example Usage <pre><code>  local data = {\n      {id = 1, name = \"Item 1\", value = 100},\n      {id = 2, name = \"Item 2\", value = 200}\n  }\n  lia.db.bulkUpsert(\"custom_items\", data):next(function()\n      print(\"Bulk upsert completed\")\n  end)\n</code></pre> lia.db.insertOrIgnore(value, dbTable) Purpose <p>Inserts a new row into the database table, but ignores the operation if a conflict occurs (such as duplicate keys).</p> When Called <p>Called when inserting data that might already exist, where duplicates should be silently ignored.</p> Parameters <p>table value Table containing column-value pairs to insert.</p> <p>string dbTable Optional table name without \"lia_\" prefix (defaults to \"characters\").</p> Returns <p>Deferred A promise that resolves with {results = results, lastID = lastID}.</p> Example Usage <pre><code>  lia.db.insertOrIgnore({\n      steamID = \"STEAM_0:1:12345678\",\n      name = \"Player Name\"\n  }, \"players\"):next(function(result)\n      print(\"Player record inserted or already exists\")\n  end)\n</code></pre> lia.db.tableExists(tbl) Purpose <p>Checks if a database table with the specified name exists.</p> When Called <p>Called before performing operations on tables to verify they exist, or when checking schema state.</p> Parameters <p>string tbl The table name to check for existence.</p> Returns <p>Deferred A promise that resolves to true if the table exists, false otherwise.</p> Example Usage <pre><code>  lia.db.tableExists(\"lia_characters\"):next(function(exists)\n      if exists then\n          print(\"Characters table exists\")\n      else\n          print(\"Characters table does not exist\")\n      end\n  end)\n</code></pre> lia.db.fieldExists(tbl, field) Purpose <p>Checks if a column/field with the specified name exists in the given database table.</p> When Called <p>Called before accessing table columns to verify they exist, or when checking schema modifications.</p> Parameters <p>string tbl The table name to check (should include \"lia_\" prefix).</p> <p>string field The field/column name to check for existence.</p> Returns <p>Deferred A promise that resolves to true if the field exists, false otherwise.</p> Example Usage <pre><code>  lia.db.fieldExists(\"lia_characters\", \"custom_field\"):next(function(exists)\n      if exists then\n          print(\"Custom field exists\")\n      else\n          print(\"Custom field does not exist\")\n      end\n  end)\n</code></pre> lia.db.getTables() Purpose <p>Retrieves a list of all Lilia database tables (tables starting with \"lia_\").</p> When Called <p>Called when needing to enumerate all database tables, such as for maintenance operations or schema inspection.</p> Returns <p>Deferred A promise that resolves with an array of table names.</p> Example Usage <pre><code>  lia.db.getTables():next(function(tables)\n      print(\"Lilia tables:\")\n      for _, tableName in ipairs(tables) do\n          print(\"-\", tableName)\n      end\n  end)\n</code></pre> lia.db.transaction(queries) Purpose <p>Executes multiple database queries as an atomic transaction - either all queries succeed or all are rolled back.</p> When Called <p>Called when performing multiple related database operations that must be atomic, such as transferring items between inventories.</p> Parameters <p>table queries Array of SQL query strings to execute in sequence.</p> Returns <p>Deferred A promise that resolves when the transaction completes successfully, or rejects if any query fails.</p> Example Usage <pre><code>  local queries = {\n      \"UPDATE lia_characters SET money = money - 100 WHERE id = 1\",\n      \"UPDATE lia_characters SET money = money + 100 WHERE id = 2\",\n      \"INSERT INTO lia_logs (message) VALUES ('Money transfer completed')\"\n  }\n  lia.db.transaction(queries):next(function()\n      print(\"Transaction completed successfully\")\n  end):catch(function(err)\n      print(\"Transaction failed:\", err)\n  end)\n</code></pre> lia.db.escapeIdentifier(id) Purpose <p>Escapes SQL identifiers (table and column names) by wrapping them in backticks and escaping any backticks within.</p> When Called <p>Automatically called when building SQL queries to safely handle identifiers that might contain special characters.</p> Parameters <p>string id The identifier (table name, column name, etc.) to escape.</p> Returns <p>string The escaped identifier wrapped in backticks.</p> Example Usage <pre><code>  local escaped = lia.db.escapeIdentifier(\"user_name\")\n  -- Returns: \"`user_name`\"\n  local escaped2 = lia.db.escapeIdentifier(\"table`with`ticks\")\n  -- Returns: \"`table``with``ticks`\"\n</code></pre> lia.db.upsert(value, dbTable) Purpose <p>Inserts a new row into the database table, or replaces the existing row if it already exists (SQLite UPSERT operation).</p> When Called <p>Called when you want to ensure a record exists with specific data, regardless of whether it was previously created.</p> Parameters <p>table value Table containing column-value pairs to insert or update.</p> <p>string dbTable Optional table name without \"lia_\" prefix (defaults to \"characters\" if not specified).</p> Returns <p>Deferred A promise that resolves with {results = results, lastID = lastID}.</p> Example Usage <pre><code>  -- Ensure a character exists with this data\n  lia.db.upsert({\n      id = 123,\n      steamID = \"STEAM_0:1:12345678\",\n      name = \"John Doe\",\n      money = \"1000\"\n  }, \"characters\"):next(function(result)\n      print(\"Character upserted, last ID:\", result.lastID)\n  end)\n</code></pre> lia.db.delete(dbTable, condition) Purpose <p>Deletes rows from the specified database table that match the given condition.</p> When Called <p>Called when removing records from database tables, such as deleting characters or cleaning up old data.</p> Parameters <p>string dbTable Table name without \"lia_\" prefix (defaults to \"character\" if not specified).</p> <p>table|string condition WHERE condition to specify which rows to delete.</p> Returns <p>Deferred A promise that resolves with {results = results, lastID = lastID}.</p> Example Usage <pre><code>  -- Delete a specific character\n  lia.db.delete(\"characters\", {id = 123}):next(function()\n      print(\"Character deleted\")\n  end)\n  -- Delete all characters for a player\n  lia.db.delete(\"characters\", {steamID = \"STEAM_0:1:12345678\"}):next(function()\n      print(\"All player characters deleted\")\n  end)\n</code></pre> lia.db.createTable(dbName, primaryKey, schema) Purpose <p>Creates a new database table with the specified schema definition.</p> When Called <p>Called when creating custom tables for modules or extending the database schema.</p> Parameters <p>string dbName Table name without \"lia_\" prefix.</p> <p>string primaryKey Optional name of the primary key column.</p> <p>table schema Array of column definitions with name, type, not_null, and default properties.</p> Returns <p>Deferred A promise that resolves to true when the table is created.</p> Example Usage <pre><code>  local schema = {\n      {name = \"id\", type = \"integer\", not_null = true},\n      {name = \"name\", type = \"string\", not_null = true},\n      {name = \"value\", type = \"integer\", default = 0}\n  }\n  lia.db.createTable(\"custom_data\", \"id\", schema):next(function()\n      print(\"Custom table created\")\n  end)\n</code></pre> lia.db.createColumn(tableName, columnName, columnType, defaultValue) Purpose <p>Adds a new column to an existing database table.</p> When Called <p>Called when extending database schema by adding new fields to existing tables.</p> Parameters <p>string tableName Table name without \"lia_\" prefix.</p> <p>string columnName Name of the new column to add.</p> <p>string columnType SQL data type for the column (e.g., \"VARCHAR(255)\", \"INTEGER\", \"TEXT\").</p> <p>any defaultValue Optional default value for the new column.</p> Returns <p>Deferred A promise that resolves to true if column was added, false if it already exists.</p> Example Usage <pre><code>  lia.db.createColumn(\"characters\", \"custom_field\", \"VARCHAR(100)\", \"default_value\"):next(function(success)\n      if success then\n          print(\"Column added successfully\")\n      else\n          print(\"Column already exists\")\n      end\n  end)\n</code></pre> lia.db.removeTable(tableName) Purpose <p>Removes a database table from the database.</p> When Called <p>Called when cleaning up or removing custom tables from the database schema.</p> Parameters <p>string tableName Table name without \"lia_\" prefix.</p> Returns <p>Deferred A promise that resolves to true if table was removed, false if it doesn't exist.</p> Example Usage <pre><code>  lia.db.removeTable(\"custom_data\"):next(function(success)\n      if success then\n          print(\"Table removed successfully\")\n      else\n          print(\"Table does not exist\")\n      end\n  end)\n</code></pre> lia.db.removeColumn(tableName, columnName) Purpose <p>Removes a column from an existing database table by recreating the table without the specified column.</p> When Called <p>Called when removing fields from database tables during schema cleanup or refactoring.</p> Parameters <p>string tableName Table name without \"lia_\" prefix.</p> <p>string columnName Name of the column to remove.</p> Returns <p>Deferred A promise that resolves to true if column was removed, false if table/column doesn't exist.</p> Example Usage <pre><code>  lia.db.removeColumn(\"characters\", \"old_field\"):next(function(success)\n      if success then\n          print(\"Column removed successfully\")\n      else\n          print(\"Column or table does not exist\")\n      end\n  end)\n</code></pre> lia.db.getCharacterTable(callback) Purpose <p>Retrieves the column information/schema for the characters table.</p> When Called <p>Called when needing to inspect the structure of the characters table for schema operations.</p> Parameters <p>function callback Function to call with the array of column names.</p> Example Usage <pre><code>  lia.db.getCharacterTable(function(columns)\n      print(\"Character table columns:\")\n      for _, column in ipairs(columns) do\n          print(\"-\", column)\n      end\n  end)\n</code></pre> lia.db.createSnapshot(tableName) Purpose <p>Creates a backup snapshot of all data in the specified table and saves it to a JSON file.</p> When Called <p>Called for backup purposes before major data operations or schema changes.</p> Parameters <p>string tableName Table name without \"lia_\" prefix.</p> Returns <p>Deferred A promise that resolves with snapshot info {file = filename, path = filepath, records = count}.</p> Example Usage <pre><code>  lia.db.createSnapshot(\"characters\"):next(function(snapshot)\n      print(\"Snapshot created:\", snapshot.file, \"with\", snapshot.records, \"records\")\n  end)\n</code></pre> lia.db.loadSnapshot(fileName) Purpose <p>Loads data from a snapshot file and restores it to the corresponding database table.</p> When Called <p>Called to restore database tables from backup snapshots.</p> Parameters <p>string fileName Name of the snapshot file to load.</p> Returns <p>Deferred A promise that resolves with restore info {table = tableName, records = count, timestamp = timestamp}.</p> Example Usage <pre><code>  lia.db.loadSnapshot(\"snapshot_characters_1640995200.json\"):next(function(result)\n      print(\"Restored\", result.records, \"records to\", result.table)\n  end)\n</code></pre>"},{"location":"development/libraries/derma/","title":"Derma","text":"<p>Advanced UI rendering and interaction system for the Lilia framework.</p> Overview  The derma library provides comprehensive UI rendering and interaction functionality for the Lilia framework. It handles advanced drawing operations including rounded rectangles, circles, shadows, blur effects, and gradients using custom shaders. The library offers a fluent API for creating complex UI elements with smooth animations, color pickers, player selectors, and various input dialogs. It includes utility functions for text rendering with shadows and outlines, entity text display, and menu positioning. The library operates primarily on the client side and provides both low-level drawing functions and high-level UI components for creating modern, visually appealing interfaces.  lia.derma.dermaMenu() Purpose <p>Opens a fresh `liaDermaMenu` at the current cursor position and tracks it in `lia.gui.menuDermaMenu`.</p> When Called <p>Use when you need a standard context menu for interaction options and want any previous one closed first.</p> Returns <p>Panel The newly created `liaDermaMenu` panel.</p> Example Usage <pre><code>  local menu = lia.derma.dermaMenu()\n  menu:AddOption(\"Say hi\", function() chat.AddText(\"hi\") end)\n  menu:Open()\n</code></pre> lia.derma.optionsMenu(rawOptions, config) Purpose <p>Builds and shows the configurable options/interaction menu, filtering and categorising provided options before rendering buttons.</p> When Called <p>Use when presenting interaction, action, or custom options to the player, optionally tied to a targeted entity and network message.</p> Parameters <p>table rawOptions Option definitions keyed by id or stored in an array; entries can include `type`, `range`, `target`, `shouldShow`, `callback`, and `onSelect`.</p> <p>table config Optional settings such as `mode` (\"interaction\", \"action\", or \"custom\"), `entity`, `netMsg`, `preFiltered`, `registryKey`, sizing fields, and behaviour toggles like `closeOnSelect`.</p> Returns <p>Panel|nil The created frame when options are available; otherwise nil.</p> Example Usage <pre><code>  lia.derma.optionsMenu({\n      greet = {type = \"action\", callback = function(client) chat.AddText(client, \" waves\") end}\n  }, {mode = \"action\"})\n</code></pre> lia.derma.interactionTooltip(rawOptions, config, mode, entity, title, closeKey, netMsg, preFiltered, emitHooks, registryKey, autoCloseDelay) Purpose <p>Creates and displays a tooltip-style interaction menu similar to magic/item tooltips, with enhanced visual effects and modern styling.</p> When Called <p>Automatically called when opening player interaction (TAB) or personal actions (G) menus to provide a polished tooltip interface.</p> Parameters <p>table rawOptions Raw interaction/action options data from playerinteract system.</p> <p>table config Configuration options including:</p> <p>string mode \"interaction\", \"action\", or \"custom\"</p> <p>Entity entity Target entity for interactions</p> <p>string title Menu title override</p> <p>number closeKey Key code to close menu</p> <p>string netMsg Network message for server communication</p> <p>boolean preFiltered Whether options are already filtered</p> <p>boolean emitHooks Whether to trigger interaction hooks</p> <p>string registryKey Key for GUI registry</p> <p>number autoCloseDelay Auto-close timeout in seconds</p> Returns <p>Panel|nil The created tooltip panel, or nil if no valid options.</p> Example Usage <pre><code>  -- Automatically called by lia.playerinteract.openMenu()\n  -- Can also be called directly:\n  local tooltip = lia.derma.interactionTooltip(interactions, {\n      mode = \"interaction\",\n      title = \"Player Interactions\",\n      entity = targetPlayer\n  })\n</code></pre> lia.derma.requestColorPicker(func, colorStandard) Purpose <p>Displays a modal color picker window that lets the user pick a hue and saturation/value, then returns the chosen color.</p> When Called <p>Use when you need the player to choose a color for a UI element or configuration field.</p> Parameters <p>function func Callback invoked with the selected Color when the user confirms.</p> <p>Color colorStandard Optional starting color; defaults to white.</p> Example Usage <pre><code>  lia.derma.requestColorPicker(function(col) print(\"Picked\", col) end, Color(0, 200, 255))\n</code></pre> lia.derma.radialMenu(options) Purpose <p>Spawns a radial selection menu using `liaRadialPanel` and stores the reference on `lia.gui.menu_radial`.</p> When Called <p>Use for quick circular option pickers, such as pie-menu interactions.</p> Parameters <p>table options Table passed directly to `liaRadialPanel:Init`, defining each radial entry.</p> Returns <p>Panel The created `liaRadialPanel` instance.</p> Example Usage <pre><code>  lia.derma.radialMenu({{label = \"Yes\", callback = function() print(\"yes\") end}})\n</code></pre> lia.derma.requestPlayerSelector(doClick) Purpose <p>Opens a player selector window listing all connected players and runs a callback when one is chosen.</p> When Called <p>Use when an action needs the user to target a specific player from the current server list.</p> Parameters <p>function doClick Called with the selected player entity after the user clicks a card.</p> Returns <p>Panel The created selector frame stored on `lia.gui.menuPlayerSelector`.</p> Example Usage <pre><code>  lia.derma.requestPlayerSelector(function(pl) chat.AddText(\"Selected \", pl:Name()) end)\n</code></pre> lia.derma.draw(radius, x, y, w, h, col, flags) Purpose <p>Draws a rounded rectangle using the shader-based derma pipeline with the same radius on every corner.</p> When Called <p>Use when rendering a simple rounded box with optional shape or blur flags.</p> Parameters <p>number radius Corner radius to apply to all corners.</p> <p>number x X position of the box.</p> <p>number y Y position of the box.</p> <p>number w Width of the box.</p> <p>number h Height of the box.</p> <p>Color col optional Fill color; defaults to solid white if omitted.</p> <p>number flags optional Optional bitmask using `lia.derma` flag constants (shape, blur, corner suppression).</p> Example Usage <pre><code>  lia.derma.draw(8, 10, 10, 140, 48, Color(30, 30, 30, 220))\n</code></pre> lia.derma.drawOutlined(radius, x, y, w, h, col, thickness, flags) Purpose <p>Draws only the outline of a rounded rectangle with configurable thickness.</p> When Called <p>Use when you need a stroked rounded box while leaving the interior transparent.</p> Parameters <p>number radius Corner radius for all corners.</p> <p>number x X position of the outline.</p> <p>number y Y position of the outline.</p> <p>number w Width of the outline box.</p> <p>number h Height of the outline box.</p> <p>Color col optional Outline color; defaults to white when nil.</p> <p>number thickness optional Outline thickness in pixels; defaults to 1.</p> <p>number flags optional Optional bitmask using `lia.derma` flags.</p> Example Usage <pre><code>  lia.derma.drawOutlined(10, 20, 20, 180, 60, lia.color.theme.text, 2)\n</code></pre> lia.derma.drawTexture(radius, x, y, w, h, col, texture, flags) Purpose <p>Draws a rounded rectangle filled with the provided texture.</p> When Called <p>Use when you need a textured rounded box instead of a solid color.</p> Parameters <p>number radius Corner radius for all corners.</p> <p>number x X position.</p> <p>number y Y position.</p> <p>number w Width.</p> <p>number h Height.</p> <p>Color col optional Modulation color for the texture; defaults to white.</p> <p>ITexture texture Texture handle to apply to the rectangle.</p> <p>number flags optional Optional bitmask using `lia.derma` flags.</p> Example Usage <pre><code>  local tex = Material(\"vgui/gradient-u\"):GetTexture(\"$basetexture\")\n  lia.derma.drawTexture(6, 50, 50, 128, 64, color_white, tex)\n</code></pre> lia.derma.drawMaterial(radius, x, y, w, h, col, mat, flags) Purpose <p>Convenience wrapper that draws a rounded rectangle using the base texture from a material.</p> When Called <p>Use when you have an `IMaterial` and want its base texture applied to a rounded box.</p> Parameters <p>number radius Corner radius for all corners.</p> <p>number x X position.</p> <p>number y Y position.</p> <p>number w Width.</p> <p>number h Height.</p> <p>Color col optional Color modulation for the material.</p> <p>IMaterial mat Material whose base texture will be drawn.</p> <p>number flags optional Optional bitmask using `lia.derma` flags.</p> Example Usage <pre><code>  lia.derma.drawMaterial(6, 80, 80, 100, 40, color_white, Material(\"vgui/gradient-d\"))\n</code></pre> lia.derma.drawCircle(x, y, radius, col, flags) Purpose <p>Draws a filled circle using the rounded rectangle shader configured for circular output.</p> When Called <p>Use when you need a smooth circle without manually handling radii or shapes.</p> Parameters <p>number x Center X position.</p> <p>number y Center Y position.</p> <p>number radius Circle diameter; internally halved for corner radii.</p> <p>Color col optional Fill color; defaults to white.</p> <p>number flags optional Optional bitmask using `lia.derma` flags.</p> Example Usage <pre><code>  lia.derma.drawCircle(100, 100, 48, Color(200, 80, 80, 255))\n</code></pre> lia.derma.drawCircleOutlined(x, y, radius, col, thickness, flags) Purpose <p>Draws only the outline of a circle with configurable thickness.</p> When Called <p>Use for circular strokes such as selection rings or markers.</p> Parameters <p>number x Center X position.</p> <p>number y Center Y position.</p> <p>number radius Circle diameter.</p> <p>Color col optional Outline color.</p> <p>number thickness optional Outline thickness; defaults to 1.</p> <p>number flags optional Optional bitmask using `lia.derma` flags.</p> Example Usage <pre><code>  lia.derma.drawCircleOutlined(200, 120, 40, lia.color.theme.accent, 2)\n</code></pre> lia.derma.drawCircleTexture(x, y, radius, col, texture, flags) Purpose <p>Draws a textured circle using a supplied texture handle.</p> When Called <p>Use when you want a circular render that uses a specific texture rather than a solid color.</p> Parameters <p>number x Center X position.</p> <p>number y Center Y position.</p> <p>number radius Circle diameter.</p> <p>Color col optional Color modulation for the texture.</p> <p>ITexture texture Texture handle to apply.</p> <p>number flags optional Optional bitmask using `lia.derma` flags.</p> Example Usage <pre><code>  lia.derma.drawCircleTexture(64, 64, 32, color_white, Material(\"icon16/star.png\"):GetTexture(\"$basetexture\"))\n</code></pre> lia.derma.drawCircleMaterial(x, y, radius, col, mat, flags) Purpose <p>Draws a textured circle using the base texture from an `IMaterial`.</p> When Called <p>Use when you have a material and need to render its base texture within a circular mask.</p> Parameters <p>number x Center X position.</p> <p>number y Center Y position.</p> <p>number radius Circle diameter.</p> <p>Color col optional Color modulation for the material.</p> <p>IMaterial mat Material whose base texture will be drawn.</p> <p>number flags optional Optional bitmask using `lia.derma` flags.</p> Example Usage <pre><code>  lia.derma.drawCircleMaterial(48, 48, 28, color_white, Material(\"vgui/gradient-l\"))\n</code></pre> lia.derma.drawBlur(x, y, w, h, flags, tl, Top, Top, tr, Top, Top, bl, Bottom, Bottom, br, Bottom, Bottom, thickness) Purpose <p>Renders a blurred rounded shape using the blur shader while respecting per-corner radii and optional outline thickness.</p> When Called <p>Use to blur a rectangular region (or other supported shapes) without drawing a solid fill.</p> Parameters <p>number x X position of the blurred region.</p> <p>number y Y position of the blurred region.</p> <p>number w Width of the blurred region.</p> <p>number h Height of the blurred region.</p> <p>number flags optional Bitmask using `lia.derma` flags to control shape, blur, and disabled corners.</p> <p>number tl optional Top-left radius override.</p> <p>unknown Top left radius override.</p> <p>unknown Top left radius override.</p> <p>number tr optional Top-right radius override.</p> <p>unknown Top right radius override.</p> <p>unknown Top right radius override.</p> <p>number bl optional Bottom-left radius override.</p> <p>unknown Bottom left radius override.</p> <p>unknown Bottom left radius override.</p> <p>number br optional Bottom-right radius override.</p> <p>unknown Bottom right radius override.</p> <p>unknown Bottom right radius override.</p> <p>number thickness optional Optional outline thickness for partial arcs.</p> Example Usage <pre><code>  lia.derma.drawBlur(0, 0, 220, 80, lia.derma.BLUR, 12, 12, 12, 12)\n</code></pre> lia.derma.drawShadowsEx(x, y, w, h, col, flags, tl, Top, Top, tr, Top, Top, bl, Bottom, Bottom, br, Bottom, Bottom, spread, intensity, thickness) Purpose <p>Draws a configurable drop shadow behind a rounded shape, optionally using blur and manual color control.</p> When Called <p>Use when you want a soft shadow around a shape with fine control over radii, spread, intensity, and flags.</p> Parameters <p>number x X position of the shape casting the shadow.</p> <p>number y Y position of the shape casting the shadow.</p> <p>number w Width of the shape.</p> <p>number h Height of the shape.</p> <p>Color|boolean col optional Shadow color; pass `false` to skip color modulation.</p> <p>number flags optional Bitmask using `lia.derma` flags (shape, blur, corner suppression).</p> <p>number tl optional Top-left radius override.</p> <p>unknown Top left radius override.</p> <p>unknown Top left radius override.</p> <p>number tr optional Top-right radius override.</p> <p>unknown Top right radius override.</p> <p>unknown Top right radius override.</p> <p>number bl optional Bottom-left radius override.</p> <p>unknown Bottom left radius override.</p> <p>unknown Bottom left radius override.</p> <p>number br optional Bottom-right radius override.</p> <p>unknown Bottom right radius override.</p> <p>unknown Bottom right radius override.</p> <p>number spread optional Pixel spread of the shadow; defaults to 30.</p> <p>number intensity optional Shadow alpha scaling; defaults to `spread * 1.2`.</p> <p>number thickness optional Optional outline thickness when rendering arcs.</p> Example Usage <pre><code>  lia.derma.drawShadowsEx(40, 40, 200, 80, Color(0, 0, 0, 180), nil, 12, 12, 12, 12, 26, 32)\n</code></pre> lia.derma.drawShadows(radius, x, y, w, h, col, spread, intensity, flags) Purpose <p>Convenience wrapper to draw a drop shadow with the same radius on every corner.</p> When Called <p>Use when you need a uniform-radius shadow without manually specifying each corner.</p> Parameters <p>number radius Radius applied to all corners.</p> <p>number x X position.</p> <p>number y Y position.</p> <p>number w Width.</p> <p>number h Height.</p> <p>Color col optional Shadow color.</p> <p>number spread optional Pixel spread of the shadow.</p> <p>number intensity optional Shadow alpha scaling.</p> <p>number flags optional Optional bitmask using `lia.derma` flags.</p> Example Usage <pre><code>  lia.derma.drawShadows(10, 60, 60, 180, 70, Color(0, 0, 0, 150))\n</code></pre> lia.derma.drawShadowsOutlined(radius, x, y, w, h, col, thickness, spread, intensity, flags) Purpose <p>Convenience wrapper that draws only the shadow outline for a uniform-radius shape.</p> When Called <p>Use when you need a stroked shadow ring around a rounded box.</p> Parameters <p>number radius Radius applied to all corners.</p> <p>number x X position.</p> <p>number y Y position.</p> <p>number w Width.</p> <p>number h Height.</p> <p>Color col optional Shadow color.</p> <p>number thickness optional Outline thickness for the shadow.</p> <p>number spread optional Pixel spread of the shadow.</p> <p>number intensity optional Shadow alpha scaling.</p> <p>number flags optional Optional bitmask using `lia.derma` flags.</p> Example Usage <pre><code>  lia.derma.drawShadowsOutlined(12, 40, 40, 160, 60, Color(0, 0, 0, 180), 2)\n</code></pre> lia.derma.rect(x, y, w, h) Purpose <p>Starts a chainable rectangle draw builder using the derma shader helpers.</p> When Called <p>Use when you want to configure a rectangle (radius, color, outline, blur, etc.) through a fluent API before drawing.</p> Parameters <p>number x X position of the rectangle.</p> <p>number y Y position of the rectangle.</p> <p>number w Width of the rectangle.</p> <p>number h Height of the rectangle.</p> Returns <p>table Chainable rectangle builder supporting methods like `:Rad`, `:Color`, `:Outline`, and `:Draw`.</p> Example Usage <pre><code>  lia.derma.rect(12, 12, 220, 80):Rad(10):Color(Color(40, 40, 40, 220)):Shadow():Draw()\n</code></pre> lia.derma.circle(x, y, r) Purpose <p>Starts a chainable circle draw builder using the derma shader helpers.</p> When Called <p>Use when you want to configure a circle (color, outline, blur, etc.) before drawing it.</p> Parameters <p>number x Center X position.</p> <p>number y Center Y position.</p> <p>number r Circle diameter.</p> Returns <p>table Chainable circle builder supporting methods like `:Color`, `:Outline`, `:Shadow`, and `:Draw`.</p> Example Usage <pre><code>  lia.derma.circle(100, 100, 50):Color(lia.color.theme.accent):Outline(2):Draw()\n</code></pre> lia.derma.setFlag(flags, flag, bool) Purpose <p>Sets or clears a specific drawing flag on a bitmask using a flag value or named constant.</p> When Called <p>Use when toggling derma drawing flags such as shapes or corner suppression.</p> Parameters <p>number flags Current flag bitmask.</p> <p>number|string flag Flag value or key in `lia.derma` (e.g., \"BLUR\").</p> <p>boolean bool Whether to enable (`true`) or disable (`false`) the flag.</p> Returns <p>number Updated flag bitmask.</p> Example Usage <pre><code>  flags = lia.derma.setFlag(flags, \"BLUR\", true)\n</code></pre> lia.derma.setDefaultShape(shape) Purpose <p>Updates the default shape flag used by the draw helpers (rectangles and circles) when no explicit flag is provided.</p> When Called <p>Use to globally change the base rounding style (e.g., figma, iOS, circle) for subsequent draw calls.</p> Parameters <p>number shape Shape flag constant such as `lia.derma.SHAPE_FIGMA`; defaults to `SHAPE_FIGMA` when nil.</p> Example Usage <pre><code>  lia.derma.setDefaultShape(lia.derma.SHAPE_IOS)\n</code></pre> lia.derma.shadowText(text, font, x, y, colortext, colorshadow, dist, xalign, yalign) Purpose <p>Draws text with a single offset shadow before the main text for lightweight legibility.</p> When Called <p>Use when you need a subtle shadow behind text without a full outline.</p> Parameters <p>string text Text to draw.</p> <p>string font Font name.</p> <p>number x X position.</p> <p>number y Y position.</p> <p>Color colortext Foreground text color.</p> <p>Color colorshadow Shadow color.</p> <p>number dist Pixel offset for both X and Y shadow directions.</p> <p>number xalign Horizontal alignment (`TEXT_ALIGN_*`).</p> <p>number yalign Vertical alignment (`TEXT_ALIGN_*`).</p> Example Usage <pre><code>  lia.derma.shadowText(\"Hello\", \"LiliaFont.18\", 200, 100, color_white, Color(0, 0, 0, 180), 1, TEXT_ALIGN_CENTER, TEXT_ALIGN_CENTER)\n</code></pre> lia.derma.drawTextOutlined(text, font, x, y, colour, xalign, outlinewidth, outlinecolour) Purpose <p>Draws text with a configurable outline by repeatedly rendering offset copies around the glyphs.</p> When Called <p>Use when you need high-contrast text that stays legible on varied backgrounds.</p> Parameters <p>string text Text to draw.</p> <p>string font Font name.</p> <p>number x X position.</p> <p>number y Y position.</p> <p>Color colour Main text color.</p> <p>number xalign Horizontal alignment (`TEXT_ALIGN_*`).</p> <p>number outlinewidth Total outline thickness in pixels.</p> <p>Color outlinecolour Color applied to the outline renders.</p> Returns <p>number The value returned by `draw.DrawText` for the final text render.</p> Example Usage <pre><code>  lia.derma.drawTextOutlined(\"Warning\", \"LiliaFont.16\", 50, 50, color_white, TEXT_ALIGN_LEFT, 2, Color(0, 0, 0, 200))\n</code></pre> lia.derma.drawTip(x, y, w, h, text, font, textCol, outlineCol) Purpose <p>Draws a speech-bubble style tooltip with a triangular pointer and centered label.</p> When Called <p>Use for lightweight tooltip rendering when you need a callout pointing to a position.</p> Parameters <p>number x Left position of the bubble.</p> <p>number y Top position of the bubble.</p> <p>number w Bubble width.</p> <p>number h Bubble height including pointer.</p> <p>string text Text to display inside the bubble.</p> <p>string font Font used for the text.</p> <p>Color textCol Color of the label text.</p> <p>Color outlineCol Color used to draw the bubble outline/fill.</p> Example Usage <pre><code>  lia.derma.drawTip(300, 200, 160, 60, \"Hint\", \"LiliaFont.16\", color_white, Color(20, 20, 20, 220))\n</code></pre> lia.derma.drawText(text, x, y, color, alignX, alignY, font, alpha) Purpose <p>Draws text with a subtle shadow using `draw.TextShadow`, defaulting to common derma font and colors.</p> When Called <p>Use when rendering HUD/UI text that benefits from a small shadow for readability.</p> Parameters <p>string text Text to render.</p> <p>number x X position.</p> <p>number y Y position.</p> <p>Color color optional Text color; defaults to white.</p> <p>number alignX optional Horizontal alignment (`TEXT_ALIGN_*`), defaults to left.</p> <p>number alignY optional Vertical alignment (`TEXT_ALIGN_*`), defaults to top.</p> <p>string font optional Font name; defaults to `LiliaFont.16`.</p> <p>number alpha optional Shadow alpha override; defaults to 57.5% of text alpha.</p> Returns <p>number Width returned by `draw.TextShadow`.</p> Example Usage <pre><code>  lia.derma.drawText(\"Objective updated\", 20, 20, lia.color.theme.text, TEXT_ALIGN_LEFT, TEXT_ALIGN_TOP)\n</code></pre> lia.derma.drawBoxWithText(text, x, y, options) Purpose <p>Renders a configurable blurred box with optional border and draws one or more text lines inside it.</p> When Called <p>Use for notification overlays, labels, or caption boxes that need automatic sizing and padding.</p> Parameters <p>string|table text Single string or table of lines to display.</p> <p>number x Reference X coordinate.</p> <p>number y Reference Y coordinate.</p> <p>table options optional Customisation table supporting `font`, `textColor`, `backgroundColor`, `borderColor`, `borderRadius`, `borderThickness`, `padding`, `blur`, `textAlignX`, `textAlignY`, `autoSize`, `width`, `height`, and `lineSpacing`.</p> Returns <p>number, number The final box width and height.</p> Example Usage <pre><code>  local w, h = lia.derma.drawBoxWithText(\"Saved\", ScrW() * 0.5, 120, {textAlignX = TEXT_ALIGN_CENTER})\n</code></pre> lia.derma.drawSurfaceTexture(material, color, x, y, w, h) Purpose <p>Draws a textured rectangle using either a supplied material or a material path.</p> When Called <p>Use when you need to render a texture/material directly without rounded corners.</p> Parameters <p>IMaterial|string material Material instance or path to the material.</p> <p>Color color optional Color modulation for the draw; defaults to white.</p> <p>number x X position.</p> <p>number y Y position.</p> <p>number w Width.</p> <p>number h Height.</p> Example Usage <pre><code>  lia.derma.drawSurfaceTexture(\"vgui/gradient-l\", color_white, 10, 10, 64, 64)\n</code></pre> lia.derma.skinFunc(name, panel) Purpose <p>Calls a named skin function on the panel's active skin (or the default skin) with the provided arguments.</p> When Called <p>Use to defer drawing or layout to the current Derma skin implementation.</p> Parameters <p>string name Skin function name to invoke.</p> <p>Panel panel optional Target panel whose skin should be used; falls back to the default skin.</p> Returns <p>any Whatever the skin function returns, or nil if unavailable.</p> Example Usage <pre><code>  lia.derma.skinFunc(\"PaintButton\", someButton, w, h)\n</code></pre> lia.derma.approachExp(current, target, speed, dt) Purpose <p>Smoothly moves a value toward a target using an exponential approach based on delta time.</p> When Called <p>Use for UI animations or interpolations that should ease toward a target without overshoot.</p> Parameters <p>number current Current value.</p> <p>number target Desired target value.</p> <p>number speed Exponential speed factor.</p> <p>number dt Frame delta time.</p> Returns <p>number The updated value after applying the exponential approach.</p> Example Usage <pre><code>  scale = lia.derma.approachExp(scale, 1, 4, FrameTime())\n</code></pre> lia.derma.easeOutCubic(t) Purpose <p>Returns a cubic ease-out interpolation for values between 0 and 1.</p> When Called <p>Use for easing animations that should start quickly and slow toward the end.</p> Parameters <p>number t Normalized time between 0 and 1.</p> Returns <p>number Eased value.</p> Example Usage <pre><code>  local eased = lia.derma.easeOutCubic(progress)\n</code></pre> lia.derma.easeInOutCubic(t) Purpose <p>Returns a cubic ease-in/ease-out interpolation for values between 0 and 1.</p> When Called <p>Use when you want acceleration at the start and deceleration at the end of an animation.</p> Parameters <p>number t Normalized time between 0 and 1.</p> Returns <p>number Eased value.</p> Example Usage <pre><code>  local eased = lia.derma.easeInOutCubic(progress)\n</code></pre> lia.derma.animateAppearance(panel, targetWidth, targetHeight, duration, alphaDuration, callback, scaleFactor) Purpose <p>Animates a panel from a scaled, transparent state to a target size/position with exponential easing and optional callback.</p> When Called <p>Use to show panels with a smooth pop-in animation that scales and fades into place.</p> Parameters <p>Panel panel Panel to animate.</p> <p>number targetWidth Final width.</p> <p>number targetHeight Final height.</p> <p>number duration optional Time in seconds for the size/position animation; defaults to 0.18s.</p> <p>number alphaDuration optional Time in seconds for the fade animation; defaults to the duration.</p> <p>function callback optional Called once the animation finishes.</p> <p>number scaleFactor optional Starting scale factor relative to the final size; defaults to 0.8.</p> Example Usage <pre><code>  local pnl = vgui.Create(\"DPanel\")\n  pnl:SetPos(100, 100)\n  lia.derma.animateAppearance(pnl, 300, 200, 0.2, nil, function() pnl:SetMouseInputEnabled(true) end)\n</code></pre> lia.derma.clampMenuPosition(panel) Purpose <p>Repositions a panel so it remains within the visible screen area with a small padding.</p> When Called <p>Use after moving or resizing a popup to prevent it from clipping off-screen.</p> Parameters <p>Panel panel Panel to clamp.</p> Example Usage <pre><code>  lia.derma.clampMenuPosition(myPanel)\n</code></pre> lia.derma.drawGradient(x, y, w, h, direction, colorShadow, radius, flags) Purpose <p>Draws a rectangular gradient using common VGUI gradient materials and optional rounding.</p> When Called <p>Use when you need a directional gradient fill without creating custom materials.</p> Parameters <p>number x X position.</p> <p>number y Y position.</p> <p>number w Width.</p> <p>number h Height.</p> <p>number direction Gradient index (1 = up, 2 = down, 3 = left, 4 = right).</p> <p>Color colorShadow Color modulation for the gradient texture.</p> <p>number radius optional Corner radius; defaults to 0.</p> <p>number flags optional Optional bitmask using `lia.derma` flags.</p> Example Usage <pre><code>  lia.derma.drawGradient(0, 0, 200, 40, 2, Color(0, 0, 0, 180), 6)\n</code></pre> lia.derma.wrapText(text, width, font) Purpose <p>Splits text into lines that fit within a maximum width using the specified font.</p> When Called <p>Use before rendering multi-line text to avoid manual word wrapping.</p> Parameters <p>string text Text to wrap.</p> <p>number width Maximum line width in pixels.</p> <p>string font optional Font to measure with; defaults to `LiliaFont.16`.</p> Returns <p>table, number A table of wrapped lines and the widest measured width.</p> Example Usage <pre><code>  local lines, maxW = lia.derma.wrapText(\"Hello world\", 180, \"LiliaFont.16\")\n</code></pre> lia.derma.drawBlur(panel, amount, passes, alpha) Purpose <p>Applies a screen-space blur behind the given panel by repeatedly sampling the blur material.</p> When Called <p>Use when you want a translucent blurred background behind a Derma panel.</p> Parameters <p>Panel panel Panel whose bounds define the blur area.</p> <p>number amount optional Blur strength multiplier; defaults to 5.</p> <p>number passes optional Number of blur passes; defaults to 0.2 steps up to 1.</p> <p>number alpha optional Alpha applied to the blur draw; defaults to 255.</p> Example Usage <pre><code>  lia.derma.drawBlur(myPanel, 4, 1, 200)\n</code></pre> lia.derma.drawBlackBlur(panel, amount, passes, alpha, darkAlpha) Purpose <p>Draws a blur behind a panel and overlays a dark tint to emphasize foreground elements.</p> When Called <p>Use for modal backdrops or to dim the UI behind dialogs.</p> Parameters <p>Panel panel Panel whose bounds define the blur and tint area.</p> <p>number amount optional Blur strength; defaults to 6.</p> <p>number passes optional Number of blur passes; defaults to 5.</p> <p>number alpha optional Alpha applied to the blur draw; defaults to 255.</p> <p>number darkAlpha optional Alpha of the dark overlay; defaults to 220.</p> Example Usage <pre><code>  lia.derma.drawBlackBlur(myPanel, 8, 4, 255, 180)\n</code></pre> lia.derma.drawBlurAt(x, y, w, h, amount, passes, alpha) Purpose <p>Applies a blur effect to a specific screen-space rectangle defined by coordinates and size.</p> When Called <p>Use to blur a custom area of the screen that is not tied to a panel.</p> Parameters <p>number x X position of the blur rectangle.</p> <p>number y Y position of the blur rectangle.</p> <p>number w Width of the blur rectangle.</p> <p>number h Height of the blur rectangle.</p> <p>number amount optional Blur strength; defaults to 5.</p> <p>number passes optional Number of blur passes; defaults to 0.2 steps up to 1.</p> <p>number alpha optional Alpha applied to the blur draw; defaults to 255.</p> Example Usage <pre><code>  lia.derma.drawBlurAt(100, 100, 200, 120, 6, 1, 180)\n</code></pre> lia.derma.requestArguments(title, argTypes, onSubmit, defaults) Purpose <p>Builds a dynamic argument entry form with typed controls and validates input before submission.</p> When Called <p>Use when a command or action requires the player to supply multiple typed arguments.</p> Parameters <p>string title optional Title text key; defaults to `\"enterArguments\"`.</p> <p>table argTypes Ordered list or map describing fields; entries can be `\"string\"`, `\"boolean\"`, `\"number\"/\"int\"`, `\"table\"` (dropdown), or `\"player\"`, optionally with data and default values.</p> <p>function onSubmit optional Callback receiving `(true, resultsTable)` on submit or `(false)` on cancel.</p> <p>table defaults optional Default values keyed by field name.</p> Example Usage <pre><code>  lia.derma.createTableUI(\"Players\", {\n      {name = \"name\", field = \"name\"},\n      {name = \"steamid\", field = \"steamid\"}\n  }, playerRows)\n</code></pre> lia.derma.createTableUI(title, columns, data, options, charID) Purpose <p>Builds a full-screen table UI with optional context actions, populating rows from provided data and column definitions.</p> When Called <p>Use when you need to display tabular data (e.g., admin lists) with right-click options and copy support.</p> Parameters <p>string title optional Title text key; defaults to localized table list title.</p> <p>table columns Array of column definitions `{name = , field = , width = }`. <p>table data Array of row tables keyed by column fields.</p> <p>table options optional Optional array of context menu option tables with `name`, `net`, and optional `ExtraFields`.</p> <p>number charID optional Character identifier forwarded to network options.</p> Returns <p>Panel, Panel The created frame and the underlying `DListView`.</p> Example Usage <pre><code>  lia.derma.createTableUI(\"Players\", {\n      {name = \"name\", field = \"name\"},\n      {name = \"steamid\", field = \"steamid\"}\n  }, playerRows)\n</code></pre> lia.derma.openOptionsMenu(title, options) Purpose <p>Opens a compact options window from either a keyed table or an array of `{name, callback}` entries.</p> When Called <p>Use for lightweight choice prompts where each option triggers a callback and then closes the window.</p> Parameters <p>string title optional Localized title text key; defaults to `\"options\"`.</p> <p>table options Either an array of option tables `{name=, callback=}` or a map of `name -&gt; callback`. Returns <p>Panel The created options frame.</p> Example Usage <pre><code>  lia.derma.openOptionsMenu(\"Actions\", {\n      {name = \"Heal\", callback = function() net.Start(\"Heal\") net.SendToServer() end}\n  })\n</code></pre> lia.derma.drawEntText(ent, text, posY, alphaOverride) Purpose <p>Draws floating text above an entity with distance-based fade and easing, caching per-entity scales.</p> When Called <p>Use to display labels or names above entities that appear when nearby.</p> Parameters <p>Entity ent Target entity to label.</p> <p>string text Text to display.</p> <p>number posY optional Vertical offset for the text; defaults to 0.</p> <p>number alphaOverride optional Optional alpha multiplier or raw alpha value.</p> Example Usage <pre><code>  hook.Add(\"PostDrawTranslucentRenderables\", \"DrawNames\", function()\n      for _, ent in ipairs(ents.FindByClass(\"npc_*\")) do\n          lia.derma.drawEntText(ent, ent:GetClass(), 0)\n      end\n  end)\n</code></pre> lia.derma.requestDropdown(title, options, callback, defaultValue) Purpose <p>Shows a modal dropdown prompt and returns the selected entry through a callback.</p> When Called <p>Use when you need the player to choose a single option from a list with optional default selection.</p> Parameters <p>string title optional Title text key; defaults to `\"selectOption\"`.</p> <p>table options Array of options, either strings or `{text, data}` tables.</p> <p>function callback optional Invoked with `selectedText` and optional `selectedData`, or `false` if cancelled.</p> <p>any|table defaultValue optional Optional default selection value or `{text, data}` pair.</p> Returns <p>Panel The created dropdown frame.</p> Example Usage <pre><code>  lia.derma.requestDropdown(\"Choose color\", {\"Red\", \"Green\", \"Blue\"}, function(choice) print(\"Picked\", choice) end)\n</code></pre> lia.derma.requestString(title, description, callback, defaultValue, Pre, Pre, maxLength) Purpose <p>Prompts the user for a single line of text with an optional description and default value.</p> When Called <p>Use for simple text input such as renaming or entering custom values.</p> Parameters <p>string title optional Title text key; defaults to `\"enterText\"`.</p> <p>string description optional Helper text displayed above the entry field.</p> <p>function callback optional Invoked with the entered string, or `false` when cancelled.</p> <p>any defaultValue optional Pre-filled value for the input field.</p> <p>unknown Pre filled value for the input field.</p> <p>unknown Pre filled value for the input field.</p> <p>number maxLength optional Optional character limit.</p> Returns <p>Panel The created input frame.</p> Example Usage <pre><code>  lia.derma.requestString(\"Rename\", \"Enter a new name:\", function(val) if val then print(\"New name\", val) end end, \"Default\")\n</code></pre> lia.derma.requestOptions(title, options, callback, defaults) Purpose <p>Presents multiple selectable options, supporting dropdowns and checkboxes, and returns the chosen set.</p> When Called <p>Use for multi-field configuration prompts where each option can be a boolean or a list of choices.</p> Parameters <p>string title optional Title text key; defaults to `\"selectOptions\"`.</p> <p>table options Array where each entry is either a value or `{display, data}` table; tables create dropdowns, values create checkboxes.</p> <p>function callback optional Invoked with a table of selected values or `false` when cancelled.</p> <p>table defaults optional Default selections; for dropdowns this can map option names to selected values.</p> Returns <p>Panel The created options frame.</p> Example Usage <pre><code>  lia.derma.requestOptions(\"Permissions\", {{\"Rank\", {\"User\", \"Admin\"}}, \"CanKick\"}, function(result) PrintTable(result) end)\n</code></pre> lia.derma.requestBinaryQuestion(title, question, callback, yesText, noText) Purpose <p>Displays a yes/no style modal dialog with customizable labels and forwards the response.</p> When Called <p>Use when you need explicit confirmation from the player before executing an action.</p> Parameters <p>string title optional Title text key; defaults to `\"question\"`.</p> <p>string question optional Prompt text; defaults to `\"areYouSure\"`.</p> <p>function callback optional Invoked with `true` for yes, `false` for no.</p> <p>string yesText optional Custom text for the affirmative button; defaults to `\"yes\"`.</p> <p>string noText optional Custom text for the negative button; defaults to `\"no\"`.</p> Returns <p>Panel The created dialog frame.</p> Example Usage <pre><code>  lia.derma.requestBinaryQuestion(\"Confirm\", \"Delete item?\", function(ok) if ok then print(\"Deleted\") end end)\n</code></pre> lia.derma.requestButtons(title, buttons, callback, description) Purpose <p>Creates a dialog with a list of custom buttons and optional description, forwarding clicks to provided callbacks.</p> When Called <p>Use for multi-action prompts where each button can perform custom logic and optionally prevent auto-close by returning false.</p> Parameters <p>string title optional Title text key; defaults to `\"selectOption\"`.</p> <p>table buttons Array of button definitions; each can be a string or a table with `text`, `callback`, and optional `icon`.</p> <p>function callback optional Fallback invoked with `(index, buttonText)` when a button lacks its own callback; returning false keeps the dialog open.</p> <p>string description optional Optional descriptive text shown above the buttons.</p> Returns <p>Panel, table The created frame and a table of created button panels.</p> Example Usage <pre><code>  lia.derma.requestButtons(\"Choose action\", {\"Heal\", \"Damage\"}, function(_, text) print(\"Pressed\", text) end, \"Pick an effect:\")\n</code></pre> lia.derma.requestPopupQuestion(question, buttons) Purpose <p>Shows a small popup question with custom buttons, closing automatically unless a button callback prevents it.</p> When Called <p>Use for quick confirmation prompts that need more than a binary choice.</p> Parameters <p>string question optional Prompt text; defaults to `\"areYouSure\"`.</p> <p>table buttons Array of button definitions; each can be a string or `{text, callback}` table.</p> Returns <p>Panel The created popup frame.</p> Example Usage <pre><code>  lia.derma.requestPopupQuestion(\"Teleport where?\", {{\"City\", function() net.Start(\"tp_city\") net.SendToServer() end}, \"Cancel\"})\n</code></pre>"},{"location":"development/libraries/dialog/","title":"Dialog","text":"<p>Comprehensive NPC dialog management system for the Lilia framework.</p> Overview  The dialog library provides comprehensive functionality for managing NPC conversations and dialog systems in the Lilia framework. It handles NPC registration, conversation filtering, client synchronization, and provides both server-side data management and client-side UI interactions. The library supports complex conversation trees with conditional options, server-only callbacks, and dynamic NPC customization. It includes automatic data sanitization, conversation filtering based on player permissions, and seamless integration with the framework's networking system. The library ensures secure and efficient dialog handling across both server and client realms.  lia.dialog.isTableEqual(tbl1, tbl2, checked) Purpose <p>Performs a deep comparison of two tables to detect changes, avoiding infinite loops from circular references.</p> When Called <p>Before syncing dialog data to clients to prevent unnecessary network traffic.</p> Parameters <p>table tbl1 First table to compare.</p> <p>table tbl2 Second table to compare.</p> <p>table checked optional Internal table used to track visited references and prevent cycles.</p> Returns <p>boolean True if tables are identical, false otherwise.</p> Example Usage <pre><code>  if not lia.dialog.isTableEqual(oldData, newData) then\n      lia.dialog.syncDialogs()\n  end\n</code></pre> lia.dialog.registerConfiguration(uniqueID, data) Purpose <p>Registers or updates an NPC configuration entry for customization panels.</p> When Called <p>During gamemode initialization to define available NPC configuration options.</p> Parameters <p>string uniqueID Unique identifier for the configuration.</p> <p>table data Configuration data containing fields like name, order, shouldShow, onOpen, onApply, etc.</p> Returns <p>table The stored configuration table.</p> Example Usage <pre><code>  lia.dialog.registerConfiguration(\"shop_inventory\", {\n      name = \"Shop Inventory\",\n      order = 5,\n      shouldShow = function(ply) return ply:IsAdmin() end,\n      onOpen = function(npc) OpenShopConfig(npc) end\n  })\n</code></pre> lia.dialog.getConfiguration(uniqueID) Purpose <p>Retrieves a registered configuration entry by its unique identifier.</p> When Called <p>When accessing configuration menus or checking configuration availability.</p> Parameters <p>string uniqueID The unique identifier of the configuration to retrieve.</p> Returns <p>table|nil The configuration table if found, nil otherwise.</p> Example Usage <pre><code>  local cfg = lia.dialog.getConfiguration(\"appearance\")\n  if cfg and cfg.shouldShow(LocalPlayer()) then\n      cfg.onOpen(npc)\n  end\n</code></pre> lia.dialog.getNPCData(npcID) Purpose <p>Retrieves sanitized NPC dialog data by unique identifier.</p> When Called <p>Server-side when preparing dialog data for clients or internal operations.</p> Parameters <p>string npcID The unique identifier of the NPC dialog.</p> Returns <p>table|nil Sanitized NPC dialog data, or nil if not found.</p> Example Usage <pre><code>  local npcData = lia.dialog.getNPCData(\"tutorial_guide\")\n  if npcData then PrintTable(npcData) end\n</code></pre> lia.dialog.getOriginalNPCData(npcID) Purpose <p>Returns the original unsanitized NPC dialog definition including server-only callbacks.</p> When Called <p>Server-side when re-filtering conversation options per-player or rebuilding client payloads.</p> Parameters <p>string npcID The unique identifier of the NPC dialog.</p> Returns <p>table|nil Original NPC dialog data, or nil if not found.</p> Example Usage <pre><code>  local raw = lia.dialog.getOriginalNPCData(\"tutorial_guide\")\n  if raw and raw.Conversation then\n      -- inspect server-only callbacks before sanitizing\n  end\n</code></pre> lia.dialog.syncToClients(client) Purpose <p>Sends sanitized dialog data to a specific client or all connected players.</p> When Called <p>After dialog registration, changes, or on-demand admin refreshes.</p> Parameters <p>Player client optional Specific player to sync to, or nil to broadcast to all players.</p> Example Usage <pre><code>  concommand.Add(\"lia_dialog_resync\", function(admin)\n      if IsValid(admin) and admin:IsAdmin() then\n          lia.dialog.syncToClients()\n          admin:notifyLocalized(\"dialogResynced\")\n      end\n  end)\n</code></pre> lia.dialog.syncDialogs() Purpose <p>Broadcasts all dialog data to all connected clients.</p> When Called <p>After bulk changes, during scheduled refreshes, or maintenance operations.</p> Example Usage <pre><code>  timer.Create(\"ResyncDialogsHourly\", 3600, 0, lia.dialog.syncDialogs)\n</code></pre> lia.dialog.registerNPC(uniqueID, data, shouldSync) Purpose <p>Registers an NPC dialog definition and optionally synchronizes changes to clients.</p> When Called <p>During gamemode initialization or when hot-loading NPC dialog data.</p> Parameters <p>string uniqueID Unique identifier for the NPC dialog.</p> <p>table data Complete NPC dialog definition including Conversation, PrintName, Greeting, etc.</p> <p>boolean shouldSync optional Whether to sync changes to clients immediately (defaults to true).</p> Returns <p>boolean True if successfully registered, false otherwise.</p> Example Usage <pre><code>  lia.dialog.registerNPC(\"quests_barkeep\", {\n      PrintName = \"Barkeep\",\n      Greeting = \"What'll it be?\",\n      Conversation = {\n          [\"Got any work?\"] = {\n              Response = \"A few rats in the cellar. Interested?\",\n              options = {\n                  [\"I'm in.\"] = {serverOnly = true, Callback = function(client) StartQuest(client, \"cellar_rats\") end},\n                  [\"No thanks.\"] = {Response = \"Suit yourself.\"}\n              }\n          }\n      }\n  })\n</code></pre> lia.dialog.openDialog(client, npc, npcID) Purpose <p>Opens an NPC dialog for a player, filtering conversation options based on player permissions.</p> When Called <p>When a player interacts with an NPC entity.</p> Parameters <p>Player client The player to open the dialog for.</p> <p>Entity npc The NPC entity being interacted with.</p> <p>string npcID The unique identifier of the NPC dialog type.</p> Example Usage <pre><code>  hook.Add(\"PlayerUse\", \"HandleDialogNPCs\", function(ply, ent)\n      if ent:GetClass() == \"lia_npc\" then\n          lia.dialog.openDialog(ply, ent, ent.uniqueID or \"tutorial_guide\")\n          return false\n      end\n  end)\n</code></pre> lia.dialog.getNPCData(npcID) Purpose <p>Retrieves sanitized NPC dialog data on the client.</p> When Called <p>When client UI needs to render or access dialog information.</p> Parameters <p>string npcID The unique identifier of the NPC dialog.</p> Returns <p>table|nil Sanitized NPC dialog data, or nil if not found.</p> Example Usage <pre><code>  local data = lia.dialog.getNPCData(\"tutorial_guide\")\n  if data then print(\"Greeting:\", data.Greeting) end\n</code></pre> lia.dialog.submitConfiguration(configID, npc, payload) Purpose <p>Sends NPC customization data to the server for processing.</p> When Called <p>When submitting changes from NPC customization UI.</p> Parameters <p>string configID The configuration identifier.</p> <p>Entity npc The NPC entity being customized.</p> <p>table payload The customization data payload.</p> Example Usage <pre><code>  lia.dialog.submitConfiguration(\"appearance\", npc, {model = \"models/barney.mdl\"})\n</code></pre> lia.dialog.openCustomizationUI(npc, configID) Purpose <p>Opens a comprehensive UI for customizing NPC appearance, animations, and dialog types.</p> When Called <p>From properties menu or configuration picker interfaces.</p> Parameters <p>Entity npc The NPC entity to customize.</p> <p>string configID optional Configuration identifier, defaults to \"appearance\".</p> Example Usage <pre><code>  properties.Add(\"CustomNPCConfig\", {\n      Filter = function(_, ent) return ent:GetClass() == \"lia_npc\" end,\n      Action = function(_, ent) lia.dialog.openCustomizationUI(ent, \"appearance\") end\n  })\n</code></pre> lia.dialog.getAvailableConfigurations(ply, npc, npcID) Purpose <p>Returns available NPC configurations for a player, sorted by order and name.</p> When Called <p>Before displaying configuration picker UI to filter accessible options.</p> Parameters <p>Player ply The player to check permissions for.</p> <p>Entity npc optional The NPC entity being configured.</p> <p>string npcID optional The NPC's unique identifier.</p> Returns <p>table Array of accessible configuration tables.</p> Example Usage <pre><code>  local configs = lia.dialog.getAvailableConfigurations(LocalPlayer(), npc, npc.uniqueID)\n  for _, cfg in ipairs(configs) do print(\"Config:\", cfg.id) end\n</code></pre> lia.dialog.openConfigurationPicker(npc, npcID) Purpose <p>Opens the NPC configuration picker UI, prioritizing appearance configuration.</p> When Called <p>When a player selects \"Configure NPC\" from the properties menu.</p> Parameters <p>Entity npc The NPC entity to configure.</p> <p>string npcID optional The NPC's unique identifier.</p> Example Usage <pre><code>  lia.dialog.openConfigurationPicker(ent, ent.uniqueID)\n</code></pre>"},{"location":"development/libraries/doors/","title":"Doors","text":"<p>Door management system for the Lilia framework providing preset configuration,</p> Overview  The doors library provides comprehensive door management functionality including preset configuration, database schema verification, and data cleanup operations. It handles door data persistence, loading door configurations from presets, and maintaining database integrity. The library manages door ownership, access permissions, faction and class restrictions, and provides utilities for door data validation and corruption cleanup. It operates primarily on the server side and integrates with the database system to persist door configurations across server restarts. The library also handles door locking/unlocking mechanics and provides hooks for custom door behavior integration.  lia.doors.getDoorDefaultValues() Purpose <p>Retrieve door default values merged with any extra fields provided by modules.</p> When Called <p>Anywhere door defaults are needed (initialization, schema checks, load/save).</p> Returns <p>table defaults Map of field -&gt; default value including extra fields. table extras Map of extra field definitions collected via the CollectDoorDataFields hook.</p> lia.doors.setCachedData(door, data) Purpose <p>Store door data overrides in memory and sync to clients, omitting defaults.</p> When Called <p>After editing door settings (price, access, flags) server-side.</p> Parameters <p>Entity door Door entity.</p> <p>table data Door data overrides.</p> Example Usage <pre><code>  lia.doors.setCachedData(door, {\n      name = \"Police HQ\",\n      price = 0,\n      factions = {FACTION_POLICE}\n  })\n</code></pre> lia.doors.getCachedData(door) Purpose <p>Retrieve cached door data merged with defaults.</p> When Called <p>Before saving/loading or when building UI state for a door.</p> Parameters <p>Entity door</p> Returns <p>table Complete door data with defaults filled.</p> Example Usage <pre><code>  local data = lia.doors.getCachedData(door)\n  print(\"Door price:\", data.price)\n</code></pre> lia.doors.syncDoorData(door) Purpose <p>Net-sync a single door's cached data to all clients.</p> When Called <p>After updating a door's data.</p> Parameters <p>Entity door</p> Example Usage <pre><code>  lia.doors.syncDoorData(door)\n</code></pre> lia.doors.syncAllDoorsToClient(client) Purpose <p>Bulk-sync all cached doors to a single client.</p> When Called <p>On player spawn/join or after admin refresh.</p> Parameters <p>Player client</p> Example Usage <pre><code>  hook.Add(\"PlayerInitialSpawn\", \"SyncDoorsOnJoin\", function(ply)\n      lia.doors.syncAllDoorsToClient(ply)\n  end)\n</code></pre> lia.doors.setData(door, data) Purpose <p>Set data for a door (alias to setCachedData).</p> When Called <p>Convenience wrapper used by other systems.</p> Parameters <p>Entity door</p> <p>table data</p> Example Usage <pre><code>  lia.doors.setData(door, {locked = true})\n</code></pre> lia.doors.addPreset(mapName, presetData) Purpose <p>Register a preset of door data for a specific map.</p> When Called <p>During map setup to predefine door ownership/prices.</p> Parameters <p>string mapName</p> <p>table presetData</p> Example Usage <pre><code>  lia.doors.addPreset(\"rp_downtown\", {\n      [1234] = {name = \"Bank\", price = 0, factions = {FACTION_POLICE}},\n      [5678] = {locked = true, hidden = true}\n  })\n</code></pre> lia.doors.getPreset(mapName) Purpose <p>Retrieve a door preset table for a map.</p> When Called <p>During map load or admin inspection of presets.</p> Parameters <p>string mapName</p> Returns <p>table|nil</p> Example Usage <pre><code>  local preset = lia.doors.getPreset(game.GetMap())\n  if preset then PrintTable(preset) end\n</code></pre> lia.doors.verifyDatabaseSchema() Purpose <p>Validate the doors database schema against expected columns.</p> When Called <p>On startup or after migrations to detect missing/mismatched columns.</p> Example Usage <pre><code>  hook.Add(\"DatabaseConnected\", \"VerifyDoorSchema\", lia.doors.verifyDatabaseSchema)\n</code></pre> lia.doors.cleanupCorruptedData() Purpose <p>Detect and repair corrupted faction/class door data in the database.</p> When Called <p>Maintenance task to clean malformed data entries.</p> Example Usage <pre><code>  concommand.Add(\"lia_fix_doors\", function(admin)\n      if not IsValid(admin) or not admin:IsAdmin() then return end\n      lia.doors.cleanupCorruptedData()\n  end)\n</code></pre> lia.doors.getData(door) Purpose <p>Access cached door data (server/client wrapper).</p> When Called <p>Anywhere door data is needed without hitting DB.</p> Parameters <p>Entity door</p> Returns <p>table</p> Example Usage <pre><code>  local data = lia.doors.getData(ent)\n  if data.locked then\n      -- show locked icon\n  end\n</code></pre> lia.doors.getCachedData(door) Purpose <p>Client helper to build full door data from cached entries.</p> When Called <p>For HUD/tooltips when interacting with doors.</p> Parameters <p>Entity door</p> Returns <p>table</p> Example Usage <pre><code>  local info = lia.doors.getCachedData(door)\n  draw.SimpleText(info.name or \"Door\", \"LiliaFont.18\", x, y, color_white)\n</code></pre> lia.doors.updateCachedData(doorID, data) Purpose <p>Update the client-side cache for a door ID (or clear it).</p> When Called <p>After receiving sync updates from the server.</p> Parameters <p>number doorID</p> <p>table data optional nil clears the cache entry.</p> Example Usage <pre><code>  lia.doors.updateCachedData(doorID, net.ReadTable())\n</code></pre>"},{"location":"development/libraries/faction/","title":"Faction","text":"<p>Comprehensive faction (team) management and registration system for the Lilia framework.</p> Overview  The faction library provides comprehensive functionality for managing factions (teams) in the Lilia framework. It handles registration, loading, and management of faction data including models, colors, descriptions, and team setup. The library operates on both server and client sides, with server handling faction registration and client handling whitelist checks. It includes functionality for loading factions from directories, managing faction models with bodygroup support, and providing utilities for faction categorization and player management. The library ensures proper team setup and model precaching for all registered factions, supporting both simple string models and complex model data with bodygroup configurations.  lia.faction.register(uniqueID, data) Purpose <p>Registers a new faction with the specified unique ID and data table, setting up team configuration and model caching.</p> When Called <p>Called during gamemode initialization to register factions programmatically, typically in shared files or during faction loading.</p> Parameters <p>string uniqueID The unique identifier for the faction.</p> <p>table data A table containing faction configuration data including name, description, color, models, etc.</p> Returns <p>number, table Returns the faction index and the faction data table.</p> Example Usage <pre><code>  local index, faction = lia.faction.register(\"citizen\", {\n      name = \"Citizen\",\n      desc = \"A regular citizen\",\n      color = Color(100, 150, 200),\n      models = {\"models/player/group01/male_01.mdl\"}\n  })\n</code></pre> lia.faction.cacheModels(models) Purpose <p>Precaches model files to ensure they load quickly when needed, handling both string model paths and table-based model data.</p> When Called <p>Called automatically during faction registration to precache all models associated with a faction.</p> Parameters <p>table models A table of model data, where each entry can be a string path or a table with model information.</p> Example Usage <pre><code>  local models = {\"models/player/group01/male_01.mdl\", \"models/player/group01/female_01.mdl\"}\n  lia.faction.cacheModels(models)\n</code></pre> lia.faction.loadFromDir(directory) Purpose <p>Loads faction definitions from Lua files in a specified directory, registering each faction found.</p> When Called <p>Called during gamemode initialization to load faction definitions from organized directory structures.</p> Parameters <p>string directory The path to the directory containing faction definition files.</p> Example Usage <pre><code>  lia.faction.loadFromDir(\"gamemode/factions\")\n</code></pre> lia.faction.getAll() Purpose <p>Retrieves all registered factions as a table.</p> When Called <p>Called whenever all faction information needs to be accessed by other systems or scripts.</p> Returns <p>table A table containing all faction data tables.</p> Example Usage <pre><code>  local allFactions = lia.faction.getAll()\n  for _, faction in ipairs(allFactions) do\n      print(\"Faction: \" .. faction.name)\n  end\n</code></pre> lia.faction.get(identifier) Purpose <p>Retrieves faction data by either its unique ID or index number.</p> When Called <p>Called whenever faction information needs to be accessed by other systems or scripts.</p> Parameters <p>string|number identifier The faction's unique ID string or numeric index.</p> Returns <p>table The faction data table, or nil if not found.</p> Example Usage <pre><code>  local faction = lia.faction.get(\"citizen\")\n  -- or\n  local faction = lia.faction.get(1)\n</code></pre> lia.faction.getIndex(uniqueID) Purpose <p>Retrieves the numeric team index for a faction given its unique ID.</p> When Called <p>Called when the numeric team index is needed for GMod team functions or comparisons.</p> Parameters <p>string uniqueID The unique identifier of the faction.</p> Returns <p>number The faction's team index, or nil if the faction doesn't exist.</p> Example Usage <pre><code>  local index = lia.faction.getIndex(\"citizen\")\n  if index then\n      print(\"Citizen faction index: \" .. index)\n  end\n</code></pre> lia.faction.getClasses(faction) Purpose <p>Retrieves all character classes that belong to a specific faction.</p> When Called <p>Called when needing to display or work with all classes available to a faction.</p> Parameters <p>string|number faction The faction identifier (unique ID or index).</p> Returns <p>table An array of class data tables that belong to the specified faction.</p> Example Usage <pre><code>  local classes = lia.faction.getClasses(\"citizen\")\n  for _, class in ipairs(classes) do\n      print(\"Class: \" .. class.name)\n  end\n</code></pre> lia.faction.getPlayers(faction) Purpose <p>Retrieves all players who are currently playing characters in the specified faction.</p> When Called <p>Called when needing to iterate over or work with all players belonging to a specific faction.</p> Parameters <p>string|number faction The faction identifier (unique ID or index).</p> Returns <p>table An array of player entities who belong to the specified faction.</p> Example Usage <pre><code>  local players = lia.faction.getPlayers(\"citizen\")\n  for _, player in ipairs(players) do\n      player:ChatPrint(\"Hello citizens!\")\n  end\n</code></pre> lia.faction.getPlayerCount(faction) Purpose <p>Counts the number of players currently playing characters in the specified faction.</p> When Called <p>Called when needing to know how many players are in a faction for UI display, limits, or statistics.</p> Parameters <p>string|number faction The faction identifier (unique ID or index).</p> Returns <p>number The number of players in the specified faction.</p> Example Usage <pre><code>  local count = lia.faction.getPlayerCount(\"citizen\")\n  print(\"There are \" .. count .. \" citizens online\")\n</code></pre> lia.faction.isFactionCategory(faction, categoryFactions) Purpose <p>Checks if a faction belongs to a specific category of factions.</p> When Called <p>Called when determining if a faction is part of a group or category for organizational purposes.</p> Parameters <p>string|number faction The faction identifier to check.</p> <p>table categoryFactions An array of faction identifiers that define the category.</p> Returns <p>boolean True if the faction is in the category, false otherwise.</p> Example Usage <pre><code>  local lawFactions = {\"police\", \"sheriff\"}\n  if lia.faction.isFactionCategory(\"police\", lawFactions) then\n      print(\"This is a law enforcement faction\")\n  end\n</code></pre> lia.faction.jobGenerate(index, name, color, default, models) Purpose <p>Generates a basic faction configuration programmatically with minimal required parameters.</p> When Called <p>Called for quick faction creation during development or for compatibility with other systems.</p> Parameters <p>number index The numeric team index for the faction.</p> <p>string name The display name of the faction.</p> <p>Color color The color associated with the faction.</p> <p>boolean default Whether this is a default faction that doesn't require whitelisting.</p> <p>table models Array of model paths for the faction (optional, uses defaults if not provided).</p> Returns <p>table The created faction data table.</p> Example Usage <pre><code>  local faction = lia.faction.jobGenerate(5, \"Visitor\", Color(200, 200, 200), true)\n</code></pre> lia.faction.formatModelData() Purpose <p>Formats and standardizes model data across all factions, converting bodygroup configurations to proper format.</p> When Called <p>Called after faction loading to ensure all model data is properly formatted for use.</p> Example Usage <pre><code>  -- Called automatically during faction initialization\n  lia.faction.formatModelData()\n</code></pre> lia.faction.getCategories(teamName) Purpose <p>Retrieves all model categories defined for a faction (string keys in the models table).</p> When Called <p>Called when needing to display or work with faction model categories in UI or selection systems.</p> Parameters <p>string teamName The unique ID of the faction.</p> Returns <p>table An array of category names (strings) defined for the faction's models.</p> Example Usage <pre><code>  local categories = lia.faction.getCategories(\"citizen\")\n  for _, category in ipairs(categories) do\n      print(\"Category: \" .. category)\n  end\n</code></pre> lia.faction.getModelsFromCategory(teamName, category) Purpose <p>Retrieves all models belonging to a specific category within a faction.</p> When Called <p>Called when needing to display or select models from a particular category for character creation.</p> Parameters <p>string teamName The unique ID of the faction.</p> <p>string category The name of the model category to retrieve.</p> Returns <p>table A table of models in the specified category, indexed by their position.</p> Example Usage <pre><code>  local models = lia.faction.getModelsFromCategory(\"citizen\", \"male\")\n  for index, model in pairs(models) do\n      print(\"Model \" .. index .. \": \" .. (istable(model) and model[1] or model))\n  end\n</code></pre> lia.faction.getDefaultClass(id) Purpose <p>Retrieves the default character class for a faction (marked with isDefault = true).</p> When Called <p>Called when automatically assigning a class to new characters or when needing the primary class for a faction.</p> Parameters <p>string|number id The faction identifier (unique ID or index).</p> Returns <p>table The default class data table for the faction, or nil if no default class exists.</p> Example Usage <pre><code>  local defaultClass = lia.faction.getDefaultClass(\"citizen\")\n  if defaultClass then\n      print(\"Default class: \" .. defaultClass.name)\n  end\n</code></pre> lia.faction.hasWhitelist(faction) Purpose <p>Checks if the local player has whitelist access to the specified faction on the client side.</p> When Called <p>Called on the client when determining if a faction should be available for character creation.</p> Parameters <p>string|number faction The faction identifier (unique ID or index).</p> Returns <p>boolean True if the player has access to the faction, false otherwise.</p> Example Usage <pre><code>  if lia.faction.hasWhitelist(\"citizen\") then\n      -- Show citizen faction in character creation menu\n  end\n</code></pre> lia.faction.hasWhitelist(faction) Purpose <p>Checks whitelist access for a faction on the server side (currently simplified implementation).</p> When Called <p>Called on the server for faction access validation, though the current implementation is restrictive.</p> Parameters <p>string|number faction The faction identifier (unique ID or index).</p> Returns <p>boolean True only for default factions, false for all others including staff.</p> Example Usage <pre><code>  -- Server-side validation\n  if lia.faction.hasWhitelist(\"citizen\") then\n      -- Allow character creation\n  end\n</code></pre>"},{"location":"development/libraries/flag/","title":"Flags","text":"<p>Character permission and access control system for the Lilia framework.</p> Overview  The flags library provides a comprehensive permission system for managing character abilities and access rights in the Lilia framework. It allows administrators to assign specific flags to characters that grant or restrict various gameplay features and tools. The library operates on both server and client sides, with the server handling flag assignment and callback execution during character spawning, while the client provides user interface elements for viewing and managing flags. Flags can have associated callbacks that execute when granted or removed, enabling dynamic behavior changes based on permission levels. The system includes built-in flags for common administrative tools like physgun, toolgun, and various spawn permissions. The library ensures proper flag validation and prevents duplicate flag assignments.  lia.flag.add(flag, Single, Single, desc, callback) Purpose <p>Register a flag with description and optional grant/remove callback.</p> When Called <p>During framework setup to define permission flags.</p> Parameters <p>string flag Single-character flag id.</p> <p>unknown Single character flag id.</p> <p>unknown Single character flag id.</p> <p>string desc Localization key or plain description.</p> <p>function callback optional function(client, isGiven) for grant/remove side effects.</p> Example Usage <pre><code>  lia.flag.add(\"B\", \"flagBuildMenu\", function(client, isGiven)\n      if isGiven then\n          client:Give(\"weapon_physgun\")\n      else\n          client:StripWeapon(\"weapon_physgun\")\n      end\n  end)\n</code></pre> lia.flag.onSpawn(client) Purpose <p>Execute flag callbacks for a player on spawn, ensuring each flag runs once.</p> When Called <p>Automatically when characters spawn; can be hooked for reapplication.</p> Parameters <p>Player client Player whose flags should be processed.</p> Example Usage <pre><code>  hook.Add(\"PlayerSpawn\", \"ApplyFlagWeapons\", lia.flag.onSpawn)\n</code></pre>"},{"location":"development/libraries/font/","title":"Font","text":"<p>Comprehensive font management system for the Lilia framework.</p> Overview  The font library provides comprehensive functionality for managing custom fonts in the Lilia framework. It handles font registration, loading, and automatic font creation for UI elements throughout the gamemode. The library operates on both server and client sides, with the server storing font metadata and the client handling actual font creation and rendering. It includes automatic font generation for various sizes and styles, dynamic font loading based on configuration, and intelligent font name parsing for automatic font creation. The library ensures consistent typography across all UI elements and provides easy access to predefined font variants for different use cases.  lia.font.loadFonts() Purpose <p>Create all registered fonts on the client and count successes/failures.</p> When Called <p>After registration or config load to ensure fonts exist before drawing.</p> Example Usage <pre><code>  hook.Add(\"RefreshFonts\", \"ReloadAllFonts\", function()\n      lia.font.loadFonts()\n  end)\n</code></pre> lia.font.register(fontName, fontData) Purpose <p>Register a single font definition and create it clientside if possible.</p> When Called <p>During font setup or dynamically when encountering unknown font names.</p> Parameters <p>string fontName Unique font identifier.</p> <p>table fontData surface.CreateFont data table.</p> Example Usage <pre><code>  lia.font.register(\"liaDialogHeader\", {\n      font = \"Montserrat Bold\",\n      size = 28,\n      weight = 800,\n      antialias = true\n  })\n</code></pre> lia.font.getAvailableFonts() Purpose <p>List all registered font identifiers.</p> When Called <p>Populate dropdowns or config options for font selection.</p> Returns <p>table Sorted array of font names.</p> Example Usage <pre><code>  for _, name in ipairs(lia.font.getAvailableFonts()) do\n      print(\"Font:\", name)\n  end\n</code></pre> lia.font.getBoldFontName(fontName) Purpose <p>Convert a base font name to its bold variant.</p> When Called <p>When auto-registering bold/shadow variants of LiliaFont entries.</p> Parameters <p>string fontName Base font name.</p> Returns <p>string Best-effort bold font name.</p> Example Usage <pre><code>  local boldName = lia.font.getBoldFontName(\"Montserrat Medium\")\n  lia.font.register(\"DialogTitle\", {font = boldName, size = 26, weight = 800})\n</code></pre> lia.font.registerFonts(fontName) Purpose <p>Register the full suite of Lilia fonts (regular, bold, italic, sizes).</p> When Called <p>On config load or when switching the base font setting.</p> Parameters <p>string fontName optional Base font name; defaults to config Font.</p> Example Usage <pre><code>  concommand.Add(\"lia_reload_fonts\", function()\n      local base = lia.config.get(\"Font\", \"Montserrat Medium\")\n      lia.font.registerFonts(base)\n      timer.Simple(0.1, lia.font.loadFonts)\n  end)\n</code></pre>"},{"location":"development/libraries/inventory/","title":"Inventory","text":"<p>Comprehensive inventory system management with multiple storage types for the Lilia framework.</p> Overview  The inventory library provides comprehensive functionality for managing inventory systems in the Lilia framework. It handles inventory type registration, instance creation, storage management, and database persistence. The library operates on both server and client sides, with the server managing inventory data persistence, loading, and storage registration, while the client handles inventory panel display and user interaction. It supports multiple inventory types, storage containers, vehicle trunks, and character-based inventory management. The library ensures proper data validation, caching, and cleanup for optimal performance.  lia.inventory.newType(typeID, invTypeStruct) Purpose <p>Registers a new inventory type with the specified ID and structure.</p> When Called <p>Called during gamemode initialization or when defining custom inventory types that extend the base inventory system.</p> Parameters <p>string typeID Unique identifier for the inventory type.</p> <p>table invTypeStruct Table containing the inventory type definition with required fields like className, config, and methods.</p> Example Usage <pre><code>  lia.inventory.newType(\"grid\", {\n      className = \"GridInv\",\n      config = {w = 10, h = 10},\n      add = function(self, item) end,\n      remove = function(self, item) end,\n      sync = function(self, client) end\n  })\n</code></pre> lia.inventory.new(typeID) Purpose <p>Creates a new inventory instance of the specified type.</p> When Called <p>Called when instantiating inventories during loading, character creation, or when creating new storage containers.</p> Parameters <p>string typeID The inventory type identifier that was previously registered with newType.</p> Returns <p>table A new inventory instance with items table and copied config from the type definition.</p> Example Usage <pre><code>  local myInventory = lia.inventory.new(\"grid\")\n  -- Creates a new grid-based inventory instance\n</code></pre> lia.inventory.loadByID(id, noCache) Purpose <p>Loads an inventory instance by its ID, checking cache first and falling back to storage loading.</p> When Called <p>Called when accessing inventories by ID, typically during character loading, item operations, or storage access.</p> Parameters <p>number id The unique inventory ID to load.</p> <p>boolean noCache Optional flag to bypass cache and force loading from storage.</p> Returns <p>Deferred A deferred object that resolves to the loaded inventory instance, or rejects if loading fails.</p> Example Usage <pre><code>  lia.inventory.loadByID(123):next(function(inventory)\n      print(\"Loaded inventory:\", inventory.id)\n  end)\n</code></pre> lia.inventory.loadFromDefaultStorage(id, noCache) Purpose <p>Loads an inventory from the default database storage, including associated data and items.</p> When Called <p>Called by loadByID when no custom storage loader is found, or when directly loading from database storage.</p> Parameters <p>number id The inventory ID to load from database storage.</p> <p>boolean noCache Optional flag to bypass cache and force fresh loading.</p> Returns <p>Deferred A deferred object that resolves to the fully loaded inventory instance with data and items.</p> Example Usage <pre><code>  lia.inventory.loadFromDefaultStorage(456, true):next(function(inventory)\n      -- Inventory loaded with fresh data, bypassing cache\n  end)\n</code></pre> lia.inventory.instance(typeID, initialData) Purpose <p>Creates a new inventory instance with persistent storage initialization.</p> When Called <p>Called when creating new inventories that need database persistence, such as character inventories or storage containers.</p> Parameters <p>string typeID The inventory type identifier.</p> <p>table initialData Optional initial data to store with the inventory instance.</p> Returns <p>Deferred A deferred object that resolves to the created inventory instance after storage initialization.</p> Example Usage <pre><code>  lia.inventory.instance(\"grid\", {char = 1}):next(function(inventory)\n      -- New inventory created and stored in database\n  end)\n</code></pre> lia.inventory.loadAllFromCharID(charID) Purpose <p>Loads all inventories associated with a specific character ID.</p> When Called <p>Called during character loading to restore all inventory data for a character.</p> Parameters <p>number|string charID The character ID to load inventories for (will be converted to number).</p> Returns <p>Deferred A deferred object that resolves to an array of loaded inventory instances.</p> Example Usage <pre><code>  lia.inventory.loadAllFromCharID(42):next(function(inventories)\n      for _, inv in ipairs(inventories) do\n          print(\"Loaded inventory:\", inv.id)\n      end\n  end)\n</code></pre> lia.inventory.deleteByID(id) Purpose <p>Permanently deletes an inventory and all its associated data from the database.</p> When Called <p>Called when removing inventories, such as during character deletion or storage cleanup.</p> Parameters <p>number id The inventory ID to delete.</p> Example Usage <pre><code>  lia.inventory.deleteByID(123)\n  -- Inventory 123 and all its data/items are permanently removed\n</code></pre> lia.inventory.cleanUpForCharacter(character) Purpose <p>Destroys all inventories associated with a character during cleanup.</p> When Called <p>Called during character deletion or when cleaning up character data to prevent memory leaks.</p> Parameters <p>table character The character object whose inventories should be destroyed.</p> Example Usage <pre><code>  lia.inventory.cleanUpForCharacter(player:getChar())\n  -- All inventories for this character are destroyed\n</code></pre> lia.inventory.checkOverflow(inv, character, oldW, oldH) Purpose <p>Checks for items that no longer fit in an inventory after resizing and moves them to overflow storage.</p> When Called <p>Called when inventory dimensions change (like when upgrading inventory size) to handle items that no longer fit.</p> Parameters <p>table inv The inventory instance to check for overflow.</p> <p>table character The character object to store overflow items on.</p> <p>number oldW The previous width of the inventory.</p> <p>number oldH The previous height of the inventory.</p> Returns <p>boolean True if overflow items were found and moved, false otherwise.</p> Example Usage <pre><code>  if lia.inventory.checkOverflow(inventory, player:getChar(), 5, 5) then\n      -- Items were moved to overflow storage\n  end\n</code></pre> lia.inventory.registerStorage(model, data) Purpose <p>Registers a storage container configuration for entities with the specified model.</p> When Called <p>Called during gamemode initialization to define storage containers like lockers, crates, or other inventory-holding entities.</p> Parameters <p>string model The model path of the entity that will have storage capability.</p> <p>table data Configuration table containing name, invType, invData, and other storage properties.</p> Returns <p>table The registered storage data table.</p> Example Usage <pre><code>  lia.inventory.registerStorage(\"models/props_c17/lockers001a.mdl\", {\n      name = \"Locker\",\n      invType = \"grid\",\n      invData = {w = 4, h = 6}\n  })\n</code></pre> lia.inventory.getStorage(model) Purpose <p>Retrieves the storage configuration for a specific model.</p> When Called <p>Called when checking if an entity model has storage capabilities or retrieving storage properties.</p> Parameters <p>string model The model path to look up storage configuration for.</p> Returns <p>table|nil The storage configuration table if found, nil otherwise.</p> Example Usage <pre><code>  local storage = lia.inventory.getStorage(\"models/props_c17/lockers001a.mdl\")\n  if storage then\n      print(\"Storage name:\", storage.name)\n  end\n</code></pre> lia.inventory.registerTrunk(vehicleClass, data) Purpose <p>Registers a vehicle trunk configuration for vehicles with the specified class.</p> When Called <p>Called during gamemode initialization to define vehicle trunk storage capabilities.</p> Parameters <p>string vehicleClass The vehicle class name that will have trunk capability.</p> <p>table data Configuration table containing name, invType, invData, and trunk-specific properties.</p> Returns <p>table The registered trunk data table with trunk flags set.</p> Example Usage <pre><code>  lia.inventory.registerTrunk(\"vehicle_class\", {\n      name = \"Car Trunk\",\n      invType = \"grid\",\n      invData = {w = 8, h = 4}\n  })\n</code></pre> lia.inventory.getTrunk(vehicleClass) Purpose <p>Retrieves the trunk configuration for a specific vehicle class.</p> When Called <p>Called when checking if a vehicle class has trunk capabilities or retrieving trunk properties.</p> Parameters <p>string vehicleClass The vehicle class name to look up trunk configuration for.</p> Returns <p>table|nil The trunk configuration table if found and it's a trunk, nil otherwise.</p> Example Usage <pre><code>  local trunk = lia.inventory.getTrunk(\"vehicle_class\")\n  if trunk then\n      print(\"Trunk capacity:\", trunk.invData.w, \"x\", trunk.invData.h)\n  end\n</code></pre> lia.inventory.getAllTrunks() Purpose <p>Retrieves all registered trunk configurations.</p> When Called <p>Called when listing all available vehicle trunk types or for administrative purposes.</p> Returns <p>table A table containing all registered trunk configurations keyed by vehicle class.</p> Example Usage <pre><code>  local trunks = lia.inventory.getAllTrunks()\n  for class, config in pairs(trunks) do\n      print(\"Trunk for\", class, \":\", config.name)\n  end\n</code></pre> lia.inventory.getAllStorage(includeTrunks) Purpose <p>Retrieves all registered storage configurations, optionally excluding trunks.</p> When Called <p>Called when listing all available storage types or for administrative purposes.</p> Parameters <p>boolean includeTrunks Optional flag to include (true) or exclude (false) trunk configurations. Defaults to true.</p> Returns <p>table A table containing all registered storage configurations, optionally filtered.</p> Example Usage <pre><code>  -- Get all storage including trunks\n  local allStorage = lia.inventory.getAllStorage(true)\n  -- Get only non-trunk storage\n  local storageOnly = lia.inventory.getAllStorage(false)\n</code></pre> lia.inventory.show(inventory, parent) Purpose <p>Creates and displays an inventory panel for the specified inventory.</p> When Called <p>Called when opening inventory interfaces, such as character inventories, storage containers, or other inventory UIs.</p> Parameters <p>table inventory The inventory instance to display in the panel.</p> <p>Panel parent Optional parent panel for the inventory panel.</p> Returns <p>Panel The created inventory panel instance.</p> Example Usage <pre><code>  local panel = lia.inventory.show(myInventory)\n  -- Opens the inventory UI for myInventory\n</code></pre> lia.inventory.showDual(inventory1, inventory2, parent) Purpose <p>Creates and displays two inventory panels side by side for dual inventory interactions.</p> When Called <p>Called when opening dual inventory interfaces, such as trading, transferring items between inventories, or accessing storage.</p> Parameters <p>table inventory1 The first inventory instance to display.</p> <p>table inventory2 The second inventory instance to display.</p> <p>Panel parent Optional parent panel for the inventory panels.</p> Returns <p>table An array containing both created inventory panel instances {panel1, panel2}.</p> Example Usage <pre><code>  local panels = lia.inventory.showDual(playerInv, storageInv)\n  -- Opens dual inventory UI for trading between player and storage\n</code></pre>"},{"location":"development/libraries/item/","title":"Item","text":"<p>Comprehensive item registration, instantiation, and management system for the Lilia framework.</p> Overview  The item library provides comprehensive functionality for managing items in the Lilia framework. It handles item registration, instantiation, inventory management, and item operations such as dropping, taking, rotating, and transferring items between players. The library operates on both server and client sides, with server-side functions handling database operations, item spawning, and data persistence, while client-side functions manage item interactions and UI operations. It includes automatic weapon and ammunition generation from Garry's Mod weapon lists, inventory type registration, and item entity management. The library ensures proper item lifecycle management from creation to deletion, with support for custom item functions, hooks, and data persistence.  lia.item.get(identifier) Purpose <p>Retrieves an item definition (base or regular item) by its unique identifier.</p> When Called <p>Called when needing to access item definitions for registration, validation, or manipulation.</p> Parameters <p>string identifier The unique identifier of the item to retrieve.</p> Returns <p>table or nil The item definition table if found, nil if not found.</p> Example Usage <pre><code>  local weaponItem = lia.item.get(\"weapon_pistol\")\n  if weaponItem then\n      print(\"Found weapon:\", weaponItem.name)\n  end\n</code></pre> lia.item.applyWeaponOverride(uniqueID) Purpose <p>Applies weapon override data to an existing item definition.</p> When Called <p>Called during item registration to ensure weapon overrides are applied after the base item properties are set but before final localization.</p> Parameters <p>string uniqueID The unique ID of the item to apply overrides to.</p> Example Usage <pre><code>  -- This function is typically called internally during item registration\n  lia.item.applyWeaponOverride(\"weapon_pistol\")\n</code></pre> lia.item.getItemByID(itemID) Purpose <p>Retrieves an instanced item by its ID and determines its current location.</p> When Called <p>Called when needing to access specific item instances, typically for manipulation or inspection.</p> Parameters <p>number itemID The unique ID of the instanced item to retrieve.</p> Returns <p>table or nil, string A table containing the item and its location (\"inventory\", \"world\", or \"unknown\"), or nil and an error message if not found.</p> Example Usage <pre><code>  local itemData, errorMsg = lia.item.getItemByID(123)\n  if itemData then\n      print(\"Item found at:\", itemData.location)\n      -- Use itemData.item for item operations\n  else\n      print(\"Error:\", errorMsg)\n  end\n</code></pre> lia.item.getInstancedItemByID(itemID) Purpose <p>Retrieves an instanced item directly by its ID without location information.</p> When Called <p>Called when needing to access item instances for direct manipulation without location context.</p> Parameters <p>number itemID The unique ID of the instanced item to retrieve.</p> Returns <p>table or nil, string The item instance if found, or nil and an error message if not found.</p> Example Usage <pre><code>  local item, errorMsg = lia.item.getInstancedItemByID(123)\n  if item then\n      item:setData(\"customValue\", \"example\")\n  else\n      print(\"Error:\", errorMsg)\n  end\n</code></pre> lia.item.getItemDataByID(itemID) Purpose <p>Retrieves the data table of an instanced item by its ID.</p> When Called <p>Called when needing to access or inspect the custom data stored on an item instance.</p> Parameters <p>number itemID The unique ID of the instanced item to retrieve data from.</p> Returns <p>table or nil, string The item's data table if found, or nil and an error message if not found.</p> Example Usage <pre><code>  local data, errorMsg = lia.item.getItemDataByID(123)\n  if data then\n      print(\"Item durability:\", data.durability or \"N/A\")\n  else\n      print(\"Error:\", errorMsg)\n  end\n</code></pre> lia.item.load(path, baseID, isBaseItem) Purpose <p>Loads and registers an item from a file path by extracting the unique ID and registering it.</p> When Called <p>Called during item loading process to register items from files in the items directory.</p> Parameters <p>string path The file path of the item to load.</p> <p>string, optional baseID The base item ID to inherit from.</p> <p>boolean, optional isBaseItem Whether this is a base item definition.</p> Example Usage <pre><code>  -- Load a regular item\n  lia.item.load(\"lilia/gamemode/items/food_apple.lua\")\n  -- Load a base item\n  lia.item.load(\"lilia/gamemode/items/base/food.lua\", nil, true)\n</code></pre> lia.item.isItem(object) Purpose <p>Checks if an object is a valid Lilia item instance.</p> When Called <p>Called to validate that an object is an item before performing item-specific operations.</p> Parameters <p>any object The object to check if it's an item.</p> Returns <p>boolean True if the object is a valid item, false otherwise.</p> Example Usage <pre><code>  local someObject = getSomeObject()\n  if lia.item.isItem(someObject) then\n      someObject:setData(\"used\", true)\n  else\n      print(\"Object is not an item\")\n  end\n</code></pre> lia.item.getInv(invID) Purpose <p>Retrieves an inventory instance by its ID.</p> When Called <p>Called when needing to access inventory objects for item operations or inspection.</p> Parameters <p>number invID The unique ID of the inventory to retrieve.</p> Returns <p>table or nil The inventory instance if found, nil if not found.</p> Example Usage <pre><code>  local inventory = lia.item.getInv(5)\n  if inventory then\n      print(\"Inventory size:\", inventory:getWidth(), \"x\", inventory:getHeight())\n  end\n</code></pre> lia.item.addRarities(name, color) Purpose <p>Adds a new item rarity tier with an associated color for visual identification.</p> When Called <p>Called during item system initialization to define available rarity levels for items.</p> Parameters <p>string name The name of the rarity tier (e.g., \"Common\", \"Rare\", \"Legendary\").</p> <p>Color color The color associated with this rarity tier.</p> Example Usage <pre><code>  lia.item.addRarities(\"Mythical\", Color(255, 0, 255))\n  lia.item.addRarities(\"Divine\", Color(255, 215, 0))\n</code></pre> lia.item.register(uniqueID, baseID, isBaseItem, path, luaGenerated) Purpose <p>Registers an item definition with the Lilia item system, setting up inheritance and default functions.</p> When Called <p>Called during item loading to register item definitions, either from files or programmatically generated.</p> Parameters <p>string uniqueID The unique identifier for the item.</p> <p>string, optional baseID The base item ID to inherit from (defaults to lia.meta.item).</p> <p>boolean, optional isBaseItem Whether this is a base item definition.</p> <p>string, optional path The file path for loading the item (used for shared loading).</p> <p>boolean, optional luaGenerated Whether the item is generated programmatically rather than loaded from a file.</p> Returns <p>table The registered item definition table.</p> Example Usage <pre><code>  -- Register a base item\n  lia.item.register(\"base_weapon\", nil, true, \"path/to/base_weapon.lua\")\n  -- Register a regular item\n  lia.item.register(\"weapon_pistol\", \"base_weapon\", false, \"path/to/weapon_pistol.lua\")\n</code></pre> lia.item.registerItem(id, base, properties) Purpose <p>Queues an item for deferred registration and returns a placeholder that can access the item once registered.</p> When Called <p>Called during item system initialization to register items that will be created later, such as auto-generated weapons or ammunition items.</p> Parameters <p>string id The unique identifier for the item to register.</p> <p>string, optional base The base item ID to inherit from.</p> <p>table, optional properties A table of properties to apply to the item when it is registered.</p> Returns <p>table A placeholder object that can access the actual item properties once registration is complete.</p> Example Usage <pre><code>  -- Queue a weapon item for registration\n  local weaponPlaceholder = lia.item.registerItem(\"weapon_pistol\", \"base_weapons\", {\n      name = \"Custom Pistol\",\n      width = 2,\n      height = 1\n  })\n  -- The actual item will be registered when InitializedModules hook runs\n</code></pre> lia.item.overrideItem(uniqueID, overrides) Purpose <p>Queues property overrides for an item that will be applied when the item is initialized.</p> When Called <p>Called during item system setup to modify item properties before they are finalized.</p> Parameters <p>string uniqueID The unique ID of the item to override.</p> <p>table overrides A table of properties to override on the item.</p> Example Usage <pre><code>  lia.item.overrideItem(\"weapon_pistol\", {\n      name = \"Custom Pistol\",\n      width = 2,\n      height = 1,\n      price = 500\n  })\n</code></pre> lia.item.loadFromDir(directory) Purpose <p>Loads all items from a directory structure, organizing base items and regular items.</p> When Called <p>Called during gamemode initialization to load all item definitions from the items directory.</p> Parameters <p>string directory The directory path containing the item files to load.</p> Example Usage <pre><code>  -- Load all items from the gamemode's items directory\n  lia.item.loadFromDir(\"lilia/gamemode/items\")\n</code></pre> lia.item.new(uniqueID, id) Purpose <p>Creates a new item instance from an item definition with a specific ID.</p> When Called <p>Called when instantiating items from the database or creating new items programmatically.</p> Parameters <p>string uniqueID The unique ID of the item definition to instantiate.</p> <p>number id The unique instance ID for this item.</p> Returns <p>table The newly created item instance.</p> Example Usage <pre><code>  -- Create a new pistol item instance\n  local pistol = lia.item.new(\"weapon_pistol\", 123)\n  pistol:setData(\"durability\", 100)\n</code></pre> lia.item.registerInv(invType, w, h) Purpose <p>Registers a new inventory type with specified dimensions.</p> When Called <p>Called during inventory system initialization to define different inventory types.</p> Parameters <p>string invType The unique type identifier for this inventory.</p> <p>number w The width of the inventory in grid units.</p> <p>number h The height of the inventory in grid units.</p> Example Usage <pre><code>  -- Register a backpack inventory type\n  lia.item.registerInv(\"backpack\", 4, 6)\n  -- Register a safe inventory type\n  lia.item.registerInv(\"safe\", 8, 8)\n</code></pre> lia.item.newInv(owner, invType, callback) Purpose <p>Creates a new inventory instance for a character and syncs it with the appropriate player.</p> When Called <p>Called when creating new inventories for characters, such as during character creation or item operations.</p> Parameters <p>number owner The character ID that owns this inventory.</p> <p>string invType The type of inventory to create.</p> <p>function, optional callback Function called when the inventory is created and ready.</p> Example Usage <pre><code>  -- Create a backpack inventory for character ID 5\n  lia.item.newInv(5, \"backpack\", function(inventory)\n      print(\"Backpack created with ID:\", inventory:getID())\n  end)\n</code></pre> lia.item.createInv(w, h, id) Purpose <p>Creates a new inventory instance with specified dimensions and registers it.</p> When Called <p>Called when creating inventories programmatically, such as for containers or special storage.</p> Parameters <p>number w The width of the inventory in grid units.</p> <p>number h The height of the inventory in grid units.</p> <p>number id The unique ID for this inventory instance.</p> Returns <p>table The created inventory instance.</p> Example Usage <pre><code>  -- Create a 4x6 container inventory\n  local container = lia.item.createInv(4, 6, 1001)\n  print(\"Container created with ID:\", container.id)\n</code></pre> lia.item.addWeaponOverride(className, data) Purpose <p>Adds custom override data for weapon items during auto-generation.</p> When Called <p>Called during weapon item generation to customize properties of specific weapons.</p> Parameters <p>string className The weapon class name to override.</p> <p>table data The override data containing weapon properties.</p> Example Usage <pre><code>  lia.item.addWeaponOverride(\"weapon_pistol\", {\n      name = \"Custom Pistol\",\n      width = 2,\n      height = 1,\n      price = 500,\n      model = \"models/weapons/custom_pistol.mdl\"\n  })\n</code></pre> lia.item.addWeaponToBlacklist(className) Purpose <p>Adds a weapon class to the blacklist to prevent it from being auto-generated as an item.</p> When Called <p>Called during weapon generation setup to exclude certain weapons from item creation.</p> Parameters <p>string className The weapon class name to blacklist.</p> Example Usage <pre><code>  -- Prevent admin tools from being generated as items\n  lia.item.addWeaponToBlacklist(\"weapon_physgun\")\n  lia.item.addWeaponToBlacklist(\"gmod_tool\")\n</code></pre> lia.item.setItemDataByID(itemID, key, value, receivers, noSave, noCheckEntity) Purpose <p>Sets data on an item instance by its ID and synchronizes the changes.</p> When Called <p>Called when needing to modify item data server-side and sync to clients.</p> Parameters <p>number itemID The unique ID of the item instance.</p> <p>string key The data key to set.</p> <p>any value The value to set for the key.</p> <p>table, optional receivers Specific players to sync the data to.</p> <p>boolean, optional noSave Whether to skip saving to database.</p> <p>boolean, optional noCheckEntity Whether to skip entity validation.</p> Returns <p>boolean, string True if successful, false and error message if failed.</p> Example Usage <pre><code>  local success, errorMsg = lia.item.setItemDataByID(123, \"durability\", 75)\n  if success then\n      print(\"Item durability updated\")\n  else\n      print(\"Error:\", errorMsg)\n  end\n</code></pre> lia.item.instance(index, uniqueID, itemData, x, y, callback) Purpose <p>Creates a new item instance in the database and returns the created item.</p> When Called <p>Called when creating new items that need to be persisted to the database.</p> Parameters <p>number|string index The inventory ID or unique ID if first parameter is string.</p> <p>string|table uniqueID The item definition unique ID or item data if index is string.</p> <p>table, optional itemData The item data to set on creation.</p> <p>number, optional x The X position in inventory.</p> <p>number, optional y The Y position in inventory.</p> <p>function, optional callback Function called when item is created.</p> Returns <p>table A deferred promise that resolves with the created item.</p> Example Usage <pre><code>  -- Create a pistol in inventory 5 at position 1,1\n  lia.item.instance(5, \"weapon_pistol\", {}, 1, 1):next(function(item)\n      print(\"Created item with ID:\", item:getID())\n  end)\n</code></pre> lia.item.deleteByID(id) Purpose <p>Deletes an item instance by its ID from memory and/or database.</p> When Called <p>Called when permanently removing items from the game world.</p> Parameters <p>number id The unique ID of the item to delete.</p> Example Usage <pre><code>  -- Delete item with ID 123\n  lia.item.deleteByID(123)\n</code></pre> lia.item.loadItemByID(itemIndex) Purpose <p>Loads item instances from the database by their IDs and recreates them in memory.</p> When Called <p>Called during server startup or when needing to restore items from the database.</p> Parameters <p>number|table itemIndex Single item ID or array of item IDs to load.</p> Example Usage <pre><code>  -- Load a single item\n  lia.item.loadItemByID(123)\n  -- Load multiple items\n  lia.item.loadItemByID({123, 456, 789})\n</code></pre> lia.item.spawn(uniqueID, position, callback, angles, data) Purpose <p>Creates and spawns an item entity in the world at the specified position.</p> When Called <p>Called when dropping items or creating item entities in the game world.</p> Parameters <p>string uniqueID The unique ID of the item to spawn.</p> <p>Vector position The position to spawn the item at.</p> <p>function, optional callback Function called when item is spawned.</p> <p>Angle, optional angles The angles to set on the spawned item.</p> <p>table, optional data The item data to set on creation.</p> Returns <p>table or nil A deferred promise that resolves with the spawned item, or nil if synchronous.</p> Example Usage <pre><code>  -- Spawn a pistol at a position\n  lia.item.spawn(\"weapon_pistol\", Vector(0, 0, 0), function(item)\n      print(\"Spawned item:\", item:getName())\n  end)\n</code></pre> lia.item.restoreInv(invID, w, h, callback) Purpose <p>Restores an inventory from the database and sets its dimensions.</p> When Called <p>Called when loading saved inventories from the database.</p> Parameters <p>number invID The unique ID of the inventory to restore.</p> <p>number w The width of the inventory.</p> <p>number h The height of the inventory.</p> <p>function, optional callback Function called when inventory is restored.</p> Example Usage <pre><code>  -- Restore a 4x6 inventory\n  lia.item.restoreInv(5, 4, 6, function(inventory)\n      print(\"Restored inventory with\", inventory:getItemCount(), \"items\")\n  end)\n</code></pre> lia.item.loadWeaponOverrides(invID, w, h, callback) Purpose <p>Restores an inventory from the database and sets its dimensions.</p> When Called <p>Called when loading saved inventories from the database.</p> Parameters <p>number invID The unique ID of the inventory to restore.</p> <p>number w The width of the inventory.</p> <p>number h The height of the inventory.</p> <p>function, optional callback Function called when inventory is restored.</p> Example Usage <pre><code>  -- Restore a 4x6 inventory\n  lia.item.restoreInv(5, 4, 6, function(inventory)\n      print(\"Restored inventory with\", inventory:getItemCount(), \"items\")\n  end)\n</code></pre>"},{"location":"development/libraries/keybind/","title":"Keybind","text":"<p>Keyboard binding registration, storage, and execution system for the Lilia framework.</p> Overview  The keybind library provides comprehensive functionality for managing keyboard bindings in the Lilia framework. It handles registration, storage, and execution of custom keybinds that can be triggered by players. The library supports both client-side and server-side keybind execution, with automatic networking for server-only keybinds. It includes persistent storage of keybind configurations, user interface for keybind management, and validation to prevent key conflicts. The library operates on both client and server sides, with the client handling input detection and UI, while the server processes server-only keybind actions. It ensures proper key mapping, callback execution, and provides a complete keybind management system for the gamemode.  lia.keybind.add(k, d, desc, cb) Purpose <p>Register a keybind action with callbacks and optional metadata.</p> When Called <p>During initialization to expose actions to the keybind system/UI.</p> Parameters <p>string|number k Key code or key name (or actionName when using table config form).</p> <p>string|table d Action name or config table when first arg is action name.</p> <p>string desc optional Description when using legacy signature.</p> <p>table cb optional Callback table {onPress, onRelease, shouldRun, serverOnly}.</p> Example Usage <pre><code>  -- Table-based registration with shouldRun and serverOnly.\n  lia.keybind.add(\"toggleMap\", {\n      keyBind = KEY_M,\n      desc = \"Open the world map\",\n      serverOnly = false,\n      shouldRun = function(client) return client:Alive() end,\n      onPress = function(client)\n          if IsValid(client.mapPanel) then\n              client.mapPanel:Close()\n              client.mapPanel = nil\n          else\n              client.mapPanel = vgui.Create(\"liaWorldMap\")\n          end\n      end\n  })\n</code></pre> lia.keybind.get(a, df) Purpose <p>Get the key code assigned to an action, with default fallback.</p> When Called <p>When populating keybind UI or triggering actions manually.</p> Parameters <p>string a Action name.</p> <p>number df optional Default key code if not set.</p> Returns <p>number|nil</p> Example Usage <pre><code>  local key = lia.keybind.get(\"openInventory\", KEY_I)\n  print(\"Inventory key is:\", input.GetKeyName(key))\n</code></pre> lia.keybind.save() Purpose <p>Persist current keybind overrides to disk.</p> When Called <p>After users change keybinds in the config UI.</p> Example Usage <pre><code>  lia.keybind.save()\n</code></pre> lia.keybind.load() Purpose <p>Load keybind overrides from disk, falling back to defaults if missing.</p> When Called <p>On client init/config load; rebuilds reverse lookup table for keys.</p> Example Usage <pre><code>  hook.Add(\"Initialize\", \"LoadLiliaKeybinds\", lia.keybind.load)\n</code></pre>"},{"location":"development/libraries/lang/","title":"Languages","text":"<p>Internationalization (i18n) and localization system for the Lilia framework.</p> Overview  The languages library provides comprehensive internationalization (i18n) functionality for the Lilia framework. It handles loading, storing, and retrieving localized strings from language files, supporting multiple languages with fallback mechanisms. The library automatically loads language files from directories, processes them into a unified storage system, and provides string formatting with parameter substitution. It includes functions for adding custom language tables, retrieving available languages, and getting localized strings with proper error handling. The library operates on both server and client sides, ensuring consistent localization across the entire gamemode. It supports dynamic language switching and provides the global L() function for easy access to localized strings throughout the codebase.  lia.lang.loadFromDir(directory) Purpose <p>Load language files from a directory and merge them into storage.</p> When Called <p>During startup to load built-in and schema-specific localization.</p> Parameters <p>string directory Path containing language Lua files.</p> Example Usage <pre><code>  -- Load base languages and a custom pack.\n  lia.lang.loadFromDir(\"lilia/gamemode/languages\")\n  lia.lang.loadFromDir(\"schema/languages\")\n</code></pre> lia.lang.addTable(name, tbl) Purpose <p>Merge a table of localized strings into a named language.</p> When Called <p>When adding runtime localization or extending a language.</p> Parameters <p>string name Language id (e.g., \"english\").</p> <p>table tbl Key/value pairs to merge.</p> Example Usage <pre><code>  lia.lang.addTable(\"english\", {\n      customGreeting = \"Hello, %s!\",\n      adminOnly = \"You must be an admin.\"\n  })\n</code></pre> lia.lang.getLanguages() Purpose <p>List available languages by display name.</p> When Called <p>When populating language selection menus or config options.</p> Returns <p>table Sorted array of language display names.</p> Example Usage <pre><code>  for _, langName in ipairs(lia.lang.getLanguages()) do\n      print(\"Language option:\", langName)\n  end\n</code></pre> lia.lang.generateCacheKey(lang, key) Purpose <p>Build a cache key for a localized string with parameters.</p> When Called <p>Before caching formatted localization results.</p> Parameters <p>string lang</p> <p>string key ... (vararg)</p> Returns <p>string</p> Example Usage <pre><code>  local cacheKey = lia.lang.generateCacheKey(\"english\", \"hello\", \"John\")\n</code></pre> lia.lang.cleanupCache() Purpose <p>Evict half of the cached localization entries when over capacity.</p> When Called <p>Automatically from getLocalizedString when cache exceeds maxSize.</p> Example Usage <pre><code>  if lia.lang.cache.currentSize &gt; lia.lang.cache.maxSize then\n      lia.lang.cleanupCache()\n  end\n</code></pre> lia.lang.clearCache() Purpose <p>Reset the localization cache to its initial state.</p> When Called <p>When changing languages or when flushing cached strings.</p> Example Usage <pre><code>  hook.Add(\"OnConfigUpdated\", \"ClearLangCache\", function(key, old, new)\n      if key == \"Language\" and old ~= new then\n          lia.lang.clearCache()\n      end\n  end)\n</code></pre> lia.lang.getLocalizedString(key) Purpose <p>Resolve and format a localized string with caching and fallbacks.</p> When Called <p>Every time L() is used to display text with parameters.</p> Parameters <p>string key Localization key.</p> Returns <p>string Formatted localized string or key when missing.</p> Example Usage <pre><code>  local msg = lia.lang.getLocalizedString(\"welcomeUser\", ply:Name(), os.date())\n  chat.AddText(msg)\n</code></pre>"},{"location":"development/libraries/loader/","title":"Loader","text":"<p>Core initialization and module loading system for the Lilia framework.</p> Overview  The loader library is the core initialization system for the Lilia framework, responsible for managing the loading sequence of all framework components, modules, and dependencies. It handles file inclusion with proper realm detection (client, server, shared), manages module loading order, provides compatibility layer support for third-party addons, and includes update checking functionality. The library ensures that all framework components are loaded in the correct order and context, handles hot-reloading during development, and provides comprehensive logging and error handling throughout the initialization process. It also manages entity registration for weapons, tools, effects, and custom entities, and provides Discord webhook integration for logging and notifications.  lia.loader.include(path, realm) Purpose <p>Include a Lua file with realm auto-detection and AddCSLuaFile handling.</p> When Called <p>Throughout bootstrap to load framework, module, and compatibility files.</p> Parameters <p>string path File path.</p> <p>string realm optional \"server\" | \"client\" | \"shared\". Auto-detected from filename if nil.</p> Example Usage <pre><code>  -- Force client-only include for a UI helper.\n  lia.loader.include(\"lilia/gamemode/core/ui/cl_helper.lua\", \"client\")\n  -- Auto-detect realm from prefix (sv_/cl_/sh_).\n  lia.loader.include(\"modules/sv_custom.lua\")\n</code></pre> lia.loader.includeDir(dir, raw, deep, realm) Purpose <p>Include every Lua file in a directory; optionally recurse subfolders.</p> When Called <p>To load plugin folders or schema-specific directories.</p> Parameters <p>string dir Directory relative to gamemode root unless raw=true.</p> <p>boolean raw optional If true, treat dir as absolute (no schema/gamemode prefix).</p> <p>boolean deep optional If true, recurse into subfolders.</p> <p>string realm optional Force realm for all files; auto-detect when nil.</p> Example Usage <pre><code>  -- Load all schema hooks recursively.\n  lia.loader.includeDir(\"schema/hooks\", false, true)\n</code></pre> lia.loader.includeGroupedDir(dir, raw, recursive, forceRealm) Purpose <p>Include a directory grouping files by realm (sv_/cl_/sh_) with optional recursion.</p> When Called <p>Loading modular folders (e.g., plugins, languages, meta) with mixed realms.</p> Parameters <p>string dir Directory relative to gamemode root unless raw=true.</p> <p>boolean raw optional If true, treat dir as absolute.</p> <p>boolean recursive optional Recurse into subfolders when true.</p> <p>string forceRealm optional Override realm detection for all files.</p> Example Usage <pre><code>  -- Load all plugin folders, respecting sv_/cl_/sh_ prefixes.\n  lia.loader.includeGroupedDir(\"modules\", false, true)\n</code></pre> lia.loader.checkForUpdates() Purpose <p>Check framework and module versions against remote manifests.</p> When Called <p>During startup or by admin command to report outdated modules.</p> Example Usage <pre><code>  concommand.Add(\"lia_check_updates\", function(ply)\n      if not IsValid(ply) or ply:IsAdmin() then\n          lia.loader.checkForUpdates()\n      end\n  end)\n</code></pre> lia.error(msg) Purpose <p>Logs an error message to the console with proper formatting and color coding.</p> When Called <p>Called throughout the framework when errors occur that need to be logged to the console for debugging purposes.</p> Parameters <p>string msg The error message to display in the console.</p> Example Usage <pre><code>  -- Log an error when a required file fails to load\n  lia.error(\"Failed to load configuration file: config.json not found\")\n</code></pre> lia.warning(msg) Purpose <p>Logs a warning message to the console with proper formatting and color coding.</p> When Called <p>Called throughout the framework when non-critical issues occur that should be brought to attention but don't stop execution.</p> Parameters <p>string msg The warning message to display in the console.</p> Example Usage <pre><code>  -- Log a warning when an optional dependency is missing\n  lia.warning(\"Optional addon 'advanced_logging' not found, using basic logging instead\")\n</code></pre> lia.information(msg) Purpose <p>Logs an informational message to the console with proper formatting and color coding.</p> When Called <p>Called throughout the framework to provide general information about system status, initialization progress, or important events.</p> Parameters <p>string msg The informational message to display in the console.</p> Example Usage <pre><code>  -- Log information during system initialization\n  lia.information(\"Database connection established successfully\")\n</code></pre> lia.bootstrap(section, msg) Purpose <p>Logs bootstrap/initialization messages to the console with section categorization and color coding.</p> When Called <p>Called during the framework initialization process to log progress and status of different loading sections.</p> Parameters <p>string section The name of the bootstrap section being initialized (e.g., \"Core\", \"Modules\", \"Database\").</p> <p>string msg The message describing what is being initialized or loaded.</p> Example Usage <pre><code>  -- Log bootstrap progress during initialization\n  lia.bootstrap(\"Database\", \"Connecting to MySQL server...\")\n  lia.bootstrap(\"Modules\", \"Loading character system...\")\n</code></pre> lia.relaydiscordMessage(embed) Purpose <p>Sends formatted messages to a Discord webhook for logging and notifications.</p> When Called <p>Called when important events need to be relayed to Discord, such as server status updates, errors, or administrative actions.</p> Parameters <p>table embed A Discord embed object containing message details. Supports fields like title, description, color, timestamp, footer, etc.</p> Example Usage <pre><code>  -- Send a notification when a player achieves something special\n  lia.relaydiscordMessage({\n      title = \"Achievement Unlocked!\",\n      description = player:Name() .. \" unlocked the 'Master Trader' achievement\",\n      color = 16776960, -- Yellow\n      timestamp = os.date(\"!%Y-%m-%dT%H:%M:%SZ\")\n  })\n</code></pre> lia.loader.includeEntities(path) Purpose <p>Include and register scripted entities, weapons, and effects under a path.</p> When Called <p>During initialization to load custom entities from addons/schema.</p> Parameters <p>string path Base path containing entities/weapons/effects subfolders.</p> Example Usage <pre><code>  -- Load schema-specific entities.\n  lia.loader.includeEntities(\"schema/entities\")\n</code></pre> lia.loader.initializeGamemode(isReload) Purpose <p>Initialize modules, apply reload syncs, and announce hot reloads.</p> When Called <p>On gamemode initialize and OnReloaded; supports hot-reload flow.</p> Parameters <p>boolean isReload true when called from OnReloaded.</p> Example Usage <pre><code>  -- Called automatically from GM:Initialize / GM:OnReloaded.\n  lia.loader.initializeGamemode(false)\n</code></pre>"},{"location":"development/libraries/log/","title":"Logger","text":"<p>Comprehensive logging and audit trail system for the Lilia framework.</p> Overview  The logger library provides comprehensive logging functionality for the Lilia framework, enabling detailed tracking and recording of player actions, administrative activities, and system events. It operates on the server side and automatically categorizes log entries into predefined categories such as character management, combat, world interactions, chat communications, item transactions, administrative actions, and security events. The library stores all log entries in a database table with timestamps, player information, and categorized messages. It supports dynamic log type registration and provides hooks for external systems to process log events. The logger ensures accountability and provides administrators with detailed audit trails for server management and moderation.  lia.log.addType(logType, func, category) Purpose <p>Register a new log type with formatter and category.</p> When Called <p>During init to add custom audit events (e.g., quests, crafting).</p> Parameters <p>string logType Unique log key.</p> <p>function func Formatter function (client, ... ) -&gt; string.</p> <p>string category Category label used in console output and DB.</p> Example Usage <pre><code>  lia.log.addType(\"questComplete\", function(client, questID, reward)\n      return L(\"logQuestComplete\", client:Name(), questID, reward)\n  end, L(\"quests\"))\n</code></pre> lia.log.getString(client, logType) Purpose <p>Build a formatted log string and return its category.</p> When Called <p>Internally by lia.log.add before printing/persisting logs.</p> Parameters <p>Player client optional</p> <p>string logType ... (vararg)</p> Returns <p>string|nil, string|nil logString, category</p> Example Usage <pre><code>  local text, category = lia.log.getString(ply, \"playerDeath\", attackerName)\n  if text then print(category, text) end\n</code></pre> lia.log.add(client, logType) Purpose <p>Create and store a log entry (console + database) using a logType.</p> When Called <p>Anywhere you need to audit player/admin/system actions.</p> Parameters <p>Player client optional</p> <p>string logType ... (vararg)</p> Example Usage <pre><code>  lia.log.add(client, \"itemTake\", itemName)\n  lia.log.add(nil, \"frameworkOutdated\") -- system log without player\n</code></pre>"},{"location":"development/libraries/menu/","title":"Menu","text":"<p>Interactive 3D context menu system for world and entity interactions in the Lilia framework.</p> Overview  The menu library provides a comprehensive context menu system for the Lilia framework. It enables the creation of interactive context menus that appear in 3D world space or attached to entities, allowing players to interact with objects and perform actions through a visual interface. The library handles menu positioning, animation, collision detection, and user interaction. Menus automatically fade in when the player looks at them and fade out when they look away, with smooth animations and proper range checking. The system supports both world-positioned menus and entity-attached menus with automatic screen space conversion and boundary clamping to ensure menus remain visible and accessible.  lia.menu.add(opts, pos, onRemove) Purpose <p>Adds a new interactive context menu to the system that can be displayed in 3D world space or attached to entities.</p> When Called <p>Called when creating context menus for world interactions, entity interactions, or any situation requiring a visual menu interface.</p> Parameters <p>table opts A table containing menu options where keys are display text and values are callback functions.</p> <p>Vector or Entity pos The world position for the menu, or an entity to attach the menu to.</p> <p>function onRemove Optional callback function called when the menu is removed.</p> Returns <p>number The index of the newly added menu in the menu list.</p> Example Usage <pre><code>  -- Create a simple menu for an entity\n  lia.menu.add({\n      [\"Open\"] = function() print(\"Opening...\") end,\n      [\"Close\"] = function() print(\"Closing...\") end\n  }, entity)\n  -- Create a world-positioned menu\n  lia.menu.add({\n      [\"Pickup\"] = function() print(\"Picked up!\") end\n  }, Vector(0, 0, 0))\n</code></pre> lia.menu.drawAll() Purpose <p>Renders all active context menus on the screen with smooth animations, range checking, and mouse interaction highlighting.</p> When Called <p>Called every frame during the HUD/rendering phase to draw all active menus. Typically hooked into the drawing system.</p> Example Usage <pre><code>  -- Called automatically by the framework's rendering system\n  -- Can be manually called if needed for custom rendering setups\n  hook.Add(\"HUDPaint\", \"DrawMenus\", function()\n      lia.menu.drawAll()\n  end)\n</code></pre> lia.menu.getActiveMenu() Purpose <p>Determines which menu item is currently under the mouse cursor and within interaction range.</p> When Called <p>Called when checking for menu interactions, mouse clicks, or determining which menu option the player is hovering over.</p> Returns <p>number, function or nil Returns the menu index and the callback function of the active menu item, or nil if no active menu item is found.</p> Example Usage <pre><code>  -- Check for menu interactions in a click handler\n  local menuIndex, callback = lia.menu.getActiveMenu()\n  if menuIndex and callback then\n      lia.menu.onButtonPressed(menuIndex, callback)\n  end\n  -- Check if player is hovering over a menu\n  local activeMenu = lia.menu.getActiveMenu()\n  if activeMenu then\n      -- Player is hovering over a menu item\n  end\n</code></pre> lia.menu.onButtonPressed(id, cb) Purpose <p>Handles menu button press events by removing the menu and executing the associated callback function.</p> When Called <p>Called when a menu button is clicked to process the interaction and clean up the menu.</p> Parameters <p>number id The index of the menu to remove from the menu list.</p> <p>function cb The callback function to execute when the button is pressed.</p> Returns <p>boolean Returns true if a callback was executed, false otherwise.</p> Example Usage <pre><code>  -- Handle a menu button press\n  local menuIndex, callback = lia.menu.getActiveMenu()\n  if menuIndex then\n      local success = lia.menu.onButtonPressed(menuIndex, callback)\n      if success then\n          print(\"Menu action executed successfully\")\n      end\n  end\n  -- Remove a menu without executing callback\n  lia.menu.onButtonPressed(specificMenuId)\n</code></pre>"},{"location":"development/libraries/module/","title":"Modularity","text":"<p>Module loading, initialization, and lifecycle management system for the Lilia framework.</p> Overview  The modularity library provides comprehensive functionality for managing modules in the Lilia framework. It handles loading, initialization, and management of modules including schemas, preload modules, and regular modules. The library operates on both server and client sides, managing module dependencies, permissions, and lifecycle events. It includes functionality for loading modules from directories, handling module-specific data storage, and ensuring proper initialization order. The library also manages submodules, handles module validation, and provides hooks for module lifecycle events. It ensures that all modules are properly loaded and initialized before gameplay begins.  lia.module.load(uniqueID, path, variable, skipSubmodules) Purpose <p>Loads and initializes a module from a specified directory path with the given unique ID.</p> When Called <p>Called during module initialization to load individual modules, their dependencies, and register them in the system.</p> Parameters <p>string uniqueID The unique identifier for the module.</p> <p>string path The file system path to the module directory.</p> <p>string, optional variable The global variable name to assign the module to (defaults to \"MODULE\").</p> <p>boolean, optional skipSubmodules Whether to skip loading submodules for this module.</p> Example Usage <pre><code>  -- Load a custom module\n  lia.module.load(\"mymodule\", \"gamemodes/my_schema/modules/mymodule\")\n</code></pre> lia.module.initialize() Purpose <p>Initializes the entire module system by loading the schema, preload modules, and all available modules in the correct order.</p> When Called <p>Called once during gamemode initialization to set up the module loading system and load all modules.</p> Example Usage <pre><code>  -- Initialize the module system (called automatically by the framework)\n  lia.module.initialize()\n</code></pre> lia.module.loadFromDir(directory, group, skip) Purpose <p>Loads all modules found in the specified directory, optionally skipping certain modules.</p> When Called <p>Called during module initialization to load groups of modules from directories like preload, modules, and overrides.</p> Parameters <p>string directory The directory path to search for modules.</p> <p>string group The type of modules being loaded (\"schema\" or \"module\").</p> <p>table, optional skip A table of module IDs to skip loading.</p> Example Usage <pre><code>  -- Load all modules from the gamemode's modules directory\n  lia.module.loadFromDir(\"gamemodes/my_schema/modules\", \"module\")\n</code></pre> lia.module.get(identifier) Purpose <p>Retrieves a loaded module by its unique identifier.</p> When Called <p>Called whenever code needs to access a specific module's data or functions.</p> Parameters <p>string identifier The unique identifier of the module to retrieve.</p> Returns <p>table or nil The module table if found, nil if the module doesn't exist.</p> Example Usage <pre><code>  -- Get a reference to the inventory module\n  local inventoryModule = lia.module.get(\"inventory\")\n  if inventoryModule then\n      -- Use the module\n  end\n</code></pre>"},{"location":"development/libraries/net/","title":"Network","text":"<p>Network communication and data streaming system for the Lilia framework.</p> Overview  The network library provides comprehensive functionality for managing network communication in the Lilia framework. It handles both simple message passing and complex data streaming between server and client. The library includes support for registering network message handlers, sending messages to specific targets or broadcasting to all clients, and managing large data transfers through chunked streaming. It also provides global variable synchronization across the network, allowing server-side variables to be automatically synchronized with clients. The library operates on both server and client sides, with server handling message broadcasting and client handling message reception and acknowledgment.  lia.net.isCacheHit(name, args) Purpose <p>Determine if a net payload with given args is still fresh in cache.</p> When Called <p>Before sending large net payloads to avoid duplicate work.</p> Parameters <p>string name Cache identifier.</p> <p>table args Arguments that define cache identity.</p> Returns <p>boolean true if cached entry exists within TTL.</p> Example Usage <pre><code>  if not lia.net.isCacheHit(\"bigSync\", {ply:SteamID64()}) then\n      lia.net.writeBigTable(ply, \"liaBigSync\", payload)\n      lia.net.addToCache(\"bigSync\", {ply:SteamID64()})\n  end\n</code></pre> lia.net.addToCache(name, args) Purpose <p>Insert a cache marker for a named payload/args combination.</p> When Called <p>Right after sending a large or expensive net payload.</p> Parameters <p>string name Cache identifier.</p> <p>table args Arguments that define cache identity.</p> Example Usage <pre><code>  lia.net.writeBigTable(targets, \"liaDialogSync\", data)\n  lia.net.addToCache(\"dialogSync\", {table.Count(data)})\n</code></pre> lia.net.readBigTable(netStr, callback) Purpose <p>Receive chunked JSON-compressed tables and reconstruct them.</p> When Called <p>To register a receiver for big table streams (both realms).</p> Parameters <p>string netStr Net message name carrying the chunks.</p> <p>function callback Function called when table is fully received. Client: function(tbl), Server: function(ply, tbl).</p> Example Usage <pre><code>  lia.net.readBigTable(\"liaDoorDataBulk\", function(tbl)\n      if not tbl then return end\n      for doorID, data in pairs(tbl) do\n          lia.doors.updateCachedData(doorID, data)\n      end\n  end)\n</code></pre> lia.net.writeBigTable(targets, netStr, tbl, chunkSize) Purpose <p>Send a large table by compressing and chunking it across the net.</p> When Called <p>For big payloads (dialog sync, door data, keybinds) that exceed net limits.</p> Parameters <p>Player|table targets optional Single player, list of players, or nil to broadcast to humans.</p> <p>string netStr Net message name to use.</p> <p>table tbl Data to serialize.</p> <p>number chunkSize optional Optional override for chunk size.</p> Example Usage <pre><code>  local payload = {doors = lia.doors.stored, ts = os.time()}\n  lia.net.writeBigTable(player.GetHumans(), \"liaDoorDataBulk\", payload, 2048)\n  lia.net.addToCache(\"doorBulk\", {payload.ts})\n</code></pre> lia.net.checkBadType(name, object) Purpose <p>Validate netvar payloads to prevent functions being networked.</p> When Called <p>Internally before setting globals/locals.</p> Parameters <p>string name Identifier for error reporting.</p> <p>any object Value to validate for networking safety.</p> Returns <p>boolean|nil true if bad type detected.</p> Example Usage <pre><code>  if lia.net.checkBadType(\"example\", someTable) then return end\n</code></pre> lia.net.setNetVar(key, value, receiver) Purpose <p>Set a global netvar and broadcast it (or send to specific receiver).</p> When Called <p>Whenever shared state changes (config sync, feature flags, etc.).</p> Parameters <p>string key Netvar identifier.</p> <p>any value Value to set.</p> <p>Player|table receiver optional Optional target(s); broadcasts when nil.</p> Example Usage <pre><code>  lia.net.setNetVar(\"eventActive\", true)\n  lia.net.setNetVar(\"roundNumber\", round, targetPlayers)\n</code></pre> lia.net.getNetVar(key, default) Purpose <p>Retrieve a global netvar with a fallback default.</p> When Called <p>Client/server code reading synchronized state.</p> Parameters <p>string key Netvar identifier.</p> <p>any default Fallback value if netvar is not set.</p> Returns <p>any</p> Example Usage <pre><code>  if lia.net.getNetVar(\"eventActive\", false) then\n      DrawEventHUD()\n  end\n</code></pre> lia.net.profiler.log(key, default) Purpose <p>Retrieve a global netvar with a fallback default.</p> When Called <p>Client/server code reading synchronized state.</p> Parameters <p>string key Netvar identifier.</p> <p>any default Fallback value if netvar is not set.</p> Returns <p>any</p> Example Usage <pre><code>  if lia.net.getNetVar(\"eventActive\", false) then\n      DrawEventHUD()\n  end\n</code></pre>"},{"location":"development/libraries/notices/","title":"Notice","text":"<p>Player notification and messaging system for the Lilia framework.</p> Overview  The notice library provides comprehensive functionality for displaying notifications and messages to players in the Lilia framework. It handles both server-side and client-side notification systems, supporting both direct text messages and localized messages with parameter substitution. The library operates across server and client realms, with the server sending notification data to clients via network messages, while the client handles the visual display of notifications using VGUI panels. It includes automatic organization of multiple notifications, sound effects, and console output for debugging purposes. The library also provides compatibility with Garry's Mod's legacy notification system.  lia.notices.receiveNotify() Purpose <p>Receives notification data from the server via network message and displays it to the client.</p> When Called <p>Automatically called when the client receives a \"liaNotificationData\" network message from the server.</p> Example Usage <pre><code>  -- This function is called automatically when receiving server notifications\n  -- No manual calling needed\n</code></pre> lia.notices.receiveNotifyL() Purpose <p>Receives localized notification data from the server and displays the localized message to the client.</p> When Called <p>Automatically called when the client receives a \"liaNotifyLocal\" network message from the server containing localized notification data.</p> Example Usage <pre><code>  -- This function is called automatically when receiving localized server notifications\n  -- No manual calling needed\n</code></pre> lia.notices.notifyInfoLocalized(client, key) Purpose <p>Sends an informational notification to a client using a localized message key with optional parameters.</p> When Called <p>Called when you want to send an info-type notification with localized text to a specific client or all clients.</p> Parameters <p>Player client optional The player to send the notification to. If nil, sends to all players.</p> <p>string key The localization key for the message.</p> Example Usage <pre><code>  -- Send localized info notification to a specific player\n  lia.notices.notifyInfoLocalized(player, \"item.purchased\", itemName, price)\n  -- Send to all players\n  lia.notices.notifyInfoLocalized(nil, \"server.restart\", \"5\")\n</code></pre> lia.notices.notifyWarningLocalized(client, key) Purpose <p>Sends a warning notification to a client using a localized message key with optional parameters.</p> When Called <p>Called when you want to send a warning-type notification with localized text to a specific client or all clients.</p> Parameters <p>Player client optional The player to send the notification to. If nil, sends to all players.</p> <p>string key The localization key for the message.</p> Example Usage <pre><code>  -- Send localized warning notification to a specific player\n  lia.notices.notifyWarningLocalized(player, \"inventory.full\")\n  -- Send to all players\n  lia.notices.notifyWarningLocalized(nil, \"server.maintenance\", \"30\")\n</code></pre> lia.notices.notifyErrorLocalized(client, key) Purpose <p>Sends an error notification to a client using a localized message key with optional parameters.</p> When Called <p>Called when you want to send an error-type notification with localized text to a specific client or all clients.</p> Parameters <p>Player client optional The player to send the notification to. If nil, sends to all players.</p> <p>string key The localization key for the message.</p> Example Usage <pre><code>  -- Send localized error notification to a specific player\n  lia.notices.notifyErrorLocalized(player, \"command.noPermission\")\n  -- Send to all players\n  lia.notices.notifyErrorLocalized(nil, \"server.error\", errorCode)\n</code></pre> lia.notices.notifySuccessLocalized(client, key) Purpose <p>Sends a success notification to a client using a localized message key with optional parameters.</p> When Called <p>Called when you want to send a success-type notification with localized text to a specific client or all clients.</p> Parameters <p>Player client optional The player to send the notification to. If nil, sends to all players.</p> <p>string key The localization key for the message.</p> Example Usage <pre><code>  -- Send localized success notification to a specific player\n  lia.notices.notifySuccessLocalized(player, \"quest.completed\", questName)\n  -- Send to all players\n  lia.notices.notifySuccessLocalized(nil, \"server.update.complete\")\n</code></pre> lia.notices.notifyMoneyLocalized(client, key) Purpose <p>Sends a money-related notification to a client using a localized message key with optional parameters.</p> When Called <p>Called when you want to send a money-type notification with localized text to a specific client or all clients.</p> Parameters <p>Player client optional The player to send the notification to. If nil, sends to all players.</p> <p>string key The localization key for the message.</p> Example Usage <pre><code>  -- Send localized money notification to a specific player\n  lia.notices.notifyMoneyLocalized(player, \"money.earned\", amount, reason)\n  -- Send to all players\n  lia.notices.notifyMoneyLocalized(nil, \"lottery.winner\", winnerName, prize)\n</code></pre> lia.notices.notifyAdminLocalized(client, key) Purpose <p>Sends an admin-related notification to a client using a localized message key with optional parameters.</p> When Called <p>Called when you want to send an admin-type notification with localized text to a specific client or all clients.</p> Parameters <p>Player client optional The player to send the notification to. If nil, sends to all players.</p> <p>string key The localization key for the message.</p> Example Usage <pre><code>  -- Send localized admin notification to a specific player\n  lia.notices.notifyAdminLocalized(player, \"admin.kicked\", reason)\n  -- Send to all players\n  lia.notices.notifyAdminLocalized(nil, \"admin.announcement\", message)\n</code></pre> lia.notices.notifyLocalized(client, key, notifType) Purpose <p>Sends a localized notification to a client or all clients, handling both server-side networking and client-side display.</p> When Called <p>Called when you want to send a notification using a localization key with variable arguments to a specific client or all clients.</p> Parameters <p>Player|string client optional The player to send the notification to, or the first argument if not a player. If nil, sends to all players.</p> <p>string key The localization key for the message.</p> <p>string notifType The type of notification (e.g., \"info\", \"warning\", \"error\", \"success\").</p> Example Usage <pre><code>  -- Server-side: Send to specific player\n  lia.notices.notifyLocalized(player, \"item.purchased\", \"success\", itemName, price)\n  -- Server-side: Send to all players\n  lia.notices.notifyLocalized(nil, \"server.restart\", \"warning\", \"5\")\n  -- Client-side: Display localized notification\n  lia.notices.notifyLocalized(nil, \"ui.button.clicked\", \"info\")\n</code></pre> lia.notices.notify(client, message, notifType) Purpose <p>Sends a text notification to a client or all clients, handling both server-side networking and client-side display with sound and visual effects.</p> When Called <p>Called when you want to send a notification with plain text (not localized) to a specific client or all clients.</p> Parameters <p>Player client optional The player to send the notification to. If nil, sends to all players.</p> <p>string message The notification message text to display.</p> <p>string notifType The type of notification (e.g., \"default\", \"info\", \"warning\", \"error\", \"success\", \"money\", \"admin\").</p> Example Usage <pre><code>  -- Server-side: Send to specific player\n  lia.notices.notify(player, \"You have received 100 credits!\", \"money\")\n  -- Server-side: Send to all players\n  lia.notices.notify(nil, \"Server restarting in 5 minutes\", \"warning\")\n  -- Client-side: Display notification\n  lia.notices.notify(nil, \"Welcome to the server!\", \"info\")\n</code></pre>"},{"location":"development/libraries/option/","title":"Option","text":"<p>User-configurable settings management system for the Lilia framework.</p> Overview  The option library provides comprehensive functionality for managing user-configurable settings in the Lilia framework. It handles the creation, storage, retrieval, and persistence of various types of options including boolean toggles, numeric sliders, color pickers, text inputs, and dropdown selections. The library operates on both client and server sides, with automatic persistence to JSON files and optional networking capabilities for server-side options. It includes a complete user interface system for displaying and modifying options through the configuration menu, with support for categories, visibility conditions, and real-time updates. The library ensures that all user preferences are maintained across sessions and provides hooks for modules to react to option changes.  lia.option.add(key, name, desc, default, callback, data) Purpose <p>Register a configurable option with defaults, callbacks, and metadata.</p> When Called <p>During initialization to expose settings to the config UI/system.</p> Parameters <p>string key Option identifier to resolve choices for.</p> <p>string name Display name or localization key.</p> <p>string desc Description or localization key.</p> <p>any default Default value; determines inferred type.</p> <p>function callback optional function(old, new) invoked on change.</p> <p>table data Extra fields: category, min/max, options, visible, shouldNetwork, isQuick, type, etc.</p> Example Usage <pre><code>  lia.option.add(\"hudScale\", \"HUD Scale\", \"Scale HUD elements\", 1.0, function(old, new)\n      hook.Run(\"HUDScaleChanged\", old, new)\n  end, {\n      category = \"Core\",\n      min = 0.5,\n      max = 1.5,\n      decimals = 2,\n      isQuick = true\n  })\n</code></pre> lia.option.getOptions(key) Purpose <p>Resolve option choices (static or generated) for dropdowns.</p> When Called <p>By the config UI before rendering a Table option.</p> Parameters <p>string key</p> Returns <p>table Array/map of options.</p> Example Usage <pre><code>  local list = lia.option.getOptions(\"weaponSelectorPosition\")\n  for _, opt in pairs(list) do print(\"Choice:\", opt) end\n</code></pre> lia.option.set(key, value) Purpose <p>Set an option value, run callbacks/hooks, persist and optionally network it.</p> When Called <p>From UI interactions or programmatic changes.</p> Parameters <p>string key</p> <p>any value</p> Example Usage <pre><code>  lia.option.set(\"BarsAlwaysVisible\", true)\n</code></pre> lia.option.get(key, default) Purpose <p>Retrieve an option value with fallback to default or provided default.</p> When Called <p>Anywhere an option influences behavior or UI.</p> Parameters <p>string key</p> <p>any default</p> Returns <p>any</p> Example Usage <pre><code>  local showTime = lia.option.get(\"ChatShowTime\", false)\n</code></pre> lia.option.save() Purpose <p>Persist option values to disk (data/lilia/options.json).</p> When Called <p>After option changes; auto-called by lia.option.set.</p> Example Usage <pre><code>  lia.option.save()\n</code></pre> lia.option.load() Purpose <p>Load option values from disk or initialize defaults when missing.</p> When Called <p>On client init or config menu load.</p> Example Usage <pre><code>  hook.Add(\"Initialize\", \"LoadLiliaOptions\", lia.option.load)\n</code></pre>"},{"location":"development/libraries/playerinteract/","title":"Player Interaction","text":"<p>Player-to-player and entity interaction management system for the Lilia framework.</p> Overview  The player interaction library provides comprehensive functionality for managing player interactions and actions within the Lilia framework. It handles the creation, registration, and execution of various interaction types including player-to-player interactions, entity interactions, and personal actions. The library operates on both server and client sides, with the server managing interaction registration and validation, while the client handles UI display and user input. It includes range checking, timed actions, and network synchronization to ensure consistent interaction behavior across all clients. The library supports both immediate and delayed actions with progress indicators, making it suitable for complex interaction systems like money transfers, voice changes, and other gameplay mechanics.  lia.playerinteract.isWithinRange(client, entity, customRange) Purpose <p>Check if a client is within a usable range of an entity.</p> When Called <p>Before running interaction logic or building interaction menus.</p> Parameters <p>Player client The player attempting the interaction.</p> <p>Entity entity Target entity to test.</p> <p>number customRange optional Optional override distance in Hammer units (default 100).</p> Returns <p>boolean true if both are valid and distance is within range.</p> Example Usage <pre><code>  -- Validate a timed hack action before starting the progress bar.\n  local function tryHackDoor(client, door)\n      if not lia.playerinteract.isWithinRange(client, door, 96) then\n          client:notifyLocalized(\"tooFarAway\")\n          return\n      end\n      client:setAction(\"@hackingDoor\", 5, function()\n          if IsValid(door) then door:Fire(\"Unlock\") end\n      end)\n  end\n</code></pre> lia.playerinteract.getInteractions(client) Purpose <p>Collect interaction options for the entity the player is aiming at.</p> When Called <p>When opening the interaction menu (TAB keybind) to populate entries.</p> Parameters <p>Player client optional Player to use for trace; defaults to LocalPlayer on client.</p> Returns <p>table Map of interaction name \u2192 data filtered for the target.</p> Example Usage <pre><code>  -- Server: send only valid interactions for the traced entity.\n  net.Receive(\"liaRequestInteractOptions\", function(_, ply)\n      local interactions = lia.playerinteract.getInteractions(ply)\n      local categorized = lia.playerinteract.getCategorizedOptions(interactions)\n      lia.net.writeBigTable(ply, \"liaInteractionOptions\", categorized)\n  end)\n</code></pre> lia.playerinteract.getActions(client) Purpose <p>Gather personal actions that do not require a target entity.</p> When Called <p>When opening the personal actions menu (G keybind).</p> Parameters <p>Player client optional Player to evaluate; defaults to LocalPlayer on client.</p> Returns <p>table Map of action name \u2192 data available for this player.</p> Example Usage <pre><code>  -- Filter actions for a character sheet panel.\n  local actions = lia.playerinteract.getActions(ply)\n  for name, data in pairs(actions) do\n      if name:find(\"changeTo\") then\n          -- add a voice toggle button\n      end\n  end\n</code></pre> lia.playerinteract.getCategorizedOptions(options) Purpose <p>Transform option map into a categorized, ordered list for UI display.</p> When Called <p>Before rendering interaction/action menus that use category headers.</p> Parameters <p>table options Map of name \u2192 option entry (expects `opt.category`).</p> Returns <p>table Array containing category rows followed by option entries.</p> Example Usage <pre><code>  -- Build an options array with headers for a custom menu.\n  local options = lia.playerinteract.getCategorizedOptions(interactions)\n  local panel = vgui.Create(\"liaOptionsPanel\")\n  panel:Populate(options)\n</code></pre> lia.playerinteract.addInteraction(name, data) Purpose <p>Register a targeted interaction and ensure timed actions wrap onRun.</p> When Called <p>Server startup or dynamically when new context interactions are added.</p> Parameters <p>string name Unique interaction key.</p> <p>table data Fields: `onRun`, `shouldShow`, `range`, `target`, `category`,</p> Example Usage <pre><code>  lia.playerinteract.addInteraction(\"zipTie\", {\n      target = \"player\",\n      range = 96,\n      category = \"categoryRestraint\",\n      timeToComplete = 4,\n      actionText = \"@tying\",\n      targetActionText = \"@beingTied\",\n      shouldShow = function(client, target)\n          return target:IsPlayer() and not target:getNetVar(\"ziptied\")\n      end,\n      onRun = function(client, target)\n          target:setNetVar(\"ziptied\", true)\n      end\n  })\n</code></pre> lia.playerinteract.addAction(name, data) Purpose <p>Register a self-action (no target) and auto-wrap timed executions.</p> When Called <p>Server startup or dynamically to add personal actions/emotes.</p> Parameters <p>string name Unique action key.</p> <p>table data Fields similar to interactions but no target differentiation.</p> Example Usage <pre><code>  lia.playerinteract.addAction(\"wave\", {\n      category = \"categoryEmotes\",\n      timeToComplete = 1,\n      actionText = \"@gesturing\",\n      onRun = function(client)\n          client:DoAnimation(ACT_GMOD_GESTURE_WAVE)\n      end\n  })\n</code></pre> lia.playerinteract.sync(client) Purpose <p>Push registered interactions/actions and categories to clients.</p> When Called <p>After definitions change or when a player joins to keep menus current.</p> Parameters <p>Player client optional Send to one player if provided; otherwise broadcast in batches.</p> Example Usage <pre><code>  if lia.playerinteract.hasChanges() then\n      lia.playerinteract.sync() -- broadcast updates\n  end\n</code></pre> lia.playerinteract.hasChanges() Purpose <p>Determine if interaction/action definitions changed since last sync.</p> When Called <p>Prior to syncing to avoid unnecessary network traffic.</p> Returns <p>boolean true when counts differ from the last broadcast.</p> Example Usage <pre><code>  if lia.playerinteract.hasChanges() then\n      lia.playerinteract.sync()\n  end\n</code></pre> lia.playerinteract.openMenu(options, isInteraction, titleText, closeKey, netMsg, preFiltered) Purpose <p>Open the interaction or personal action menu on the client.</p> When Called <p>After receiving options from the server or when keybind handlers fire.</p> Parameters <p>table options Array of option entries plus category rows.</p> <p>boolean isInteraction true for interaction mode; false for personal actions.</p> <p>string titleText optional Optional menu title override.</p> <p>number closeKey optional Optional key code to close the menu.</p> <p>string netMsg optional Net message name to send selections with.</p> <p>boolean preFiltered optional If true, options are already filtered for target/range visibility.</p> Returns <p>Panel|nil The created menu panel.</p> Example Usage <pre><code>  net.Receive(\"liaSendInteractOptions\", function()\n      local data = lia.net.readBigTable()\n      local categorized = lia.playerinteract.getCategorizedOptions(data)\n      lia.playerinteract.openMenu(categorized, true, L(\"interactionMenu\"))\n  end)\n</code></pre>"},{"location":"development/libraries/time/","title":"Time","text":"<p>Time manipulation, formatting, and calculation system for the Lilia framework.</p> Overview  The time library provides comprehensive functionality for time manipulation, formatting, and calculation within the Lilia framework. It handles time parsing, formatting, relative time calculations, and date/time display with support for both 24-hour and 12-hour (American) time formats. The library operates on both server and client sides, providing consistent time handling across the gamemode. It includes functions for calculating time differences, formatting durations, parsing date strings, and generating localized time displays. The library ensures proper time zone handling and supports configurable time format preferences.  lia.time.timeSince(strTime, \"YYYY) Purpose <p>Produce a localized \"time since\" string from a date stamp or Unix time.</p> When Called <p>Anywhere UI or logs need relative time (e.g., last seen, ban info).</p> Parameters <p>string|number strTime \"YYYY-MM-DD\" style date or Unix timestamp (seconds).</p> <p>unknown \"YYYY MM-DD\" style date or Unix timestamp (seconds).</p> Returns <p>string Localized human-friendly delta (seconds/minutes/hours/days ago).</p> Example Usage <pre><code>  -- Build a rich status string for a ban record and a last-seen stamp.\n  local function formatBanStatus(ply)\n      local lastSeen = lia.time.timeSince(ply:getNetVar(\"lastSeenAt\"))\n      local banStarted = lia.time.timeSince(ply:getNetVar(\"banStart\"))\n      local banEnds = lia.time.formatDHM(ply:getNetVar(\"banEnd\") - os.time())\n      return string.format(\"%s \u2022 banned %s \u2022 expires in %s\", lastSeen, banStarted, banEnds)\n  end\n  hook.Add(\"ScoreboardShow\", \"ShowBanTiming\", function()\n      for _, ply in ipairs(player.GetAll()) do\n          local status = formatBanStatus(ply)\n          chat.AddText(Color(200, 200, 50), ply:Name(), Color(180, 180, 180), \" - \", status)\n      end\n  end)\n</code></pre> lia.time.toNumber(str) Purpose <p>Parse a date/time string in \"YYYY-MM-DD HH:MM:SS\" format into a numeric date table.</p> When Called <p>When converting date strings to components for calculations or storage.</p> Parameters <p>string str Date/time string in \"YYYY-MM-DD HH:MM:SS\" format. Defaults to current date/time if omitted.</p> Returns <p>table Table containing numeric date components: {year, month, day, hour, min, sec}.</p> Example Usage <pre><code>  -- Normalize a date string into a timestamp for storage.\n  local function normalizeDate(inputStr)\n      local parts = lia.time.toNumber(inputStr)\n      if not parts.year then return nil end\n      return os.time(parts)\n  end\n  net.Receive(\"liaSubmitEvent\", function(_, ply)\n      local eventDateStr = net.ReadString()\n      local ts = normalizeDate(eventDateStr)\n      if not ts then\n          ply:notifyLocalized(\"invalidDate\")\n          return\n      end\n      lia.log.add(ply, \"eventScheduled\", os.date(\"%c\", ts))\n  end)\n</code></pre> lia.time.getDate() Purpose <p>Return the current date/time as a localized formatted string.</p> When Called <p>For HUD clocks, chat timestamps, or admin panels showing server time.</p> Returns <p>string Localized date/time in 24h or American 12h format based on config.</p> Example Usage <pre><code>  -- Display server time in a HUD corner, honoring American/24h format.\n  hook.Add(\"HUDPaint\", \"DrawServerClock\", function()\n      local text = lia.time.getDate()\n      surface.SetFont(\"liaSmallFont\")\n      local w, h = surface.GetTextSize(text)\n      draw.RoundedBox(4, ScrW() - w - 20, 16, w + 12, h + 8, Color(0, 0, 0, 170))\n      draw.SimpleText(text, \"liaSmallFont\", ScrW() - 14, 20, color_white, TEXT_ALIGN_RIGHT)\n  end)\n</code></pre> lia.time.formatDHM(seconds) Purpose <p>Format a duration into days, hours, and minutes.</p> When Called <p>Cooldowns, jail timers, rental durations, or any long-running countdown.</p> Parameters <p>number seconds Duration in seconds.</p> Returns <p>string Localized `X days Y hours Z minutes`.</p> Example Usage <pre><code>  -- Show detention duration and remaining parole time in an admin panel.\n  local function buildDetentionRow(char)\n      local remainingSeconds = math.max(char:getDetainTime() - os.time(), 0)\n      local formatted = lia.time.formatDHM(remainingSeconds)\n      return string.format(\"%s (%s)\", char:getName(), formatted)\n  end\n  hook.Add(\"OnAdminPanelOpened\", \"PopulateDetentions\", function(panel)\n      for _, char in ipairs(lia.char.loaded) do\n          if char:isDetained() then\n              panel:AddLine(buildDetentionRow(char))\n          end\n      end\n  end)\n</code></pre> lia.time.getHour() Purpose <p>Get the current hour string honoring 12h/24h configuration.</p> When Called <p>HUD clocks or schedule checks that need the current hour formatted.</p> Returns <p>string|number \"12am/pm\" string in American mode; numeric 0-23 otherwise.</p> Example Usage <pre><code>  -- Trigger different ambiance based on configured hour format and time.\n  local function applyAmbientByHour()\n      local hour = lia.time.getHour()\n      local numericHour = tonumber(hour) or (tostring(hour):find(\"pm\") and (tonumber(hour:match(\"%d+\")) % 12) + 12 or tonumber(hour:match(\"%d+\")) % 12)\n      if numericHour &gt;= 20 or numericHour &lt; 6 then\n          RunConsoleCommand(\"stopsound\")\n          surface.PlaySound(\"ambient/atmosphere/city_silent.wav\")\n      else\n          surface.PlaySound(\"ambient/atmosphere/underground_hall.wav\")\n      end\n  end\n  hook.Add(\"InitPostEntity\", \"ApplyAmbientHourly\", applyAmbientByHour)\n</code></pre>"},{"location":"development/libraries/util/","title":"Utility","text":"<p>Common operations and helper functions for the Lilia framework.</p> Overview  The utility library provides comprehensive functionality for common operations and helper functions used throughout the Lilia framework. It contains a wide range of utilities for player management, string processing, entity handling, UI operations, and general purpose calculations. The library is divided into server-side functions for game logic and data management, and client-side functions for user interface, visual effects, and player interaction. These utilities simplify complex operations, provide consistent behavior across the framework, and offer reusable components for modules and plugins. The library handles everything from player identification and spatial queries to advanced UI animations and text processing, ensuring robust and efficient operations across both server and client environments.  lia.util.findPlayersInBox(mins, maxs) Purpose <p>Finds all players within an axis-aligned bounding box.</p> When Called <p>Use when you need the players contained inside specific world bounds (e.g. triggers or zones).</p> Parameters <p>Vector mins Minimum corner of the search box.</p> <p>Vector maxs Maximum corner of the search box.</p> Returns <p>table List of player entities inside the box.</p> Example Usage <pre><code>  local players = lia.util.findPlayersInBox(Vector(-128, -128, 0), Vector(128, 128, 128))\n</code></pre> lia.util.requestEntityInformation(client, entity, argTypes, callback) Purpose <p>Prompts the user for entity information and forwards the result.</p> When Called <p>Use when a client must supply additional data for an entity action.</p> Parameters <p>Player client Player who will be prompted for the information.</p> <p>Entity entity Entity that the information pertains to; removed if the request fails.</p> <p>table argTypes Argument descriptors passed to `requestArguments`.</p> <p>function callback optional Invoked with the collected information on success.</p> Example Usage <pre><code>  lia.util.requestEntityInformation(client, ent, argTypes, function(info) print(info) end)\n</code></pre> lia.util.getBySteamID(steamID) Purpose <p>Locates a connected player by SteamID or SteamID64 and requires an active character.</p> When Called <p>Use when commands or systems need to resolve a Steam identifier to a live player with a character loaded.</p> Parameters <p>string steamID SteamID (e.g. \"STEAM_0:1:12345\") or SteamID64; empty/invalid strings are ignored.</p> Returns <p>Player|nil The matching player with a loaded character, or nil if not found/invalid input.</p> Example Usage <pre><code>  local ply = lia.util.getBySteamID(\"76561198000000000\")\n  if ply then print(\"Found\", ply:Name()) end\n</code></pre> lia.util.findPlayersInSphere(origin, radius) Purpose <p>Returns all players inside a spherical radius from a point.</p> When Called <p>Use to gather players near a position for proximity-based effects or checks.</p> Parameters <p>Vector origin Center of the search sphere.</p> <p>number radius Radius of the search sphere.</p> Returns <p>table Players whose positions are within the given radius.</p> Example Usage <pre><code>  for _, ply in ipairs(lia.util.findPlayersInSphere(pos, 256)) do\n      ply:ChatPrint(\"You feel a nearby pulse.\")\n  end\n</code></pre> lia.util.findPlayer(client, identifier) Purpose <p>Resolves a player from various identifiers and optionally informs the caller on failure.</p> When Called <p>Use in admin/command handlers that accept flexible player identifiers (SteamID, SteamID64, name, \"^\", \"@\").</p> Parameters <p>Player client optional The player requesting the lookup; used for localized error notifications.</p> <p>string identifier Identifier to match: SteamID, SteamID64, \"^\" (self), \"@\" (trace target), or partial name.</p> Returns <p>Player|nil Matched player or nil when no match is found/identifier is invalid.</p> Example Usage <pre><code>  local target = lia.util.findPlayer(caller, args[1])\n  if not target then return end\n  target:kick(\"Example\")\n</code></pre> lia.util.findPlayerItems(client) Purpose <p>Collects all spawned item entities created by a specific player.</p> When Called <p>Use when cleaning up or inspecting items a player has spawned into the world.</p> Parameters <p>Player client Player whose created item entities should be found.</p> Returns <p>table List of item entities created by the player.</p> Example Usage <pre><code>  for _, ent in ipairs(lia.util.findPlayerItems(ply)) do\n      ent:Remove()\n  end\n</code></pre> lia.util.findPlayerItemsByClass(client, class) Purpose <p>Collects spawned item entities from a player filtered by item class.</p> When Called <p>Use when you need only specific item classes (by netvar \"id\") created by a player.</p> Parameters <p>Player client Player whose item entities are being inspected.</p> <p>string class Item class/netvar id to match.</p> Returns <p>table Item entities created by the player that match the class.</p> Example Usage <pre><code>  local ammo = lia.util.findPlayerItemsByClass(ply, \"ammo_9mm\")\n</code></pre> lia.util.findPlayerEntities(client, class) Purpose <p>Finds entities created by or associated with a player, optionally by class.</p> When Called <p>Use to track props or scripted entities a player spawned or owns.</p> Parameters <p>Player client Player whose entities should be matched.</p> <p>string class optional Optional entity class filter; nil includes all classes.</p> Returns <p>table Entities created by or linked via entity.client to the player that match the class filter.</p> Example Usage <pre><code>  local ragdolls = lia.util.findPlayerEntities(ply, \"prop_ragdoll\")\n</code></pre> lia.util.stringMatches(a, b) Purpose <p>Performs case-insensitive equality and substring comparison between two strings.</p> When Called <p>Use for loose name matching where exact case is not important.</p> Parameters <p>string a First string to compare.</p> <p>string b Second string to compare.</p> Returns <p>boolean True if the strings are equal (case-insensitive) or one contains the other; otherwise false.</p> Example Usage <pre><code>  if lia.util.stringMatches(ply:Name(), \"john\") then print(\"Matched player\") end\n</code></pre> lia.util.getAdmins() Purpose <p>Returns all connected staff members.</p> When Called <p>Use when broadcasting staff notifications or iterating over staff-only recipients.</p> Returns <p>table Players that pass `isStaff()`.</p> Example Usage <pre><code>  for _, admin in ipairs(lia.util.getAdmins()) do\n      admin:notify(\"Server restart in 5 minutes.\")\n  end\n</code></pre> lia.util.findPlayerBySteamID64(SteamID64) Purpose <p>Resolves a player from a SteamID64 wrapper around `findPlayerBySteamID`.</p> When Called <p>Use when you have a 64-bit SteamID and need the corresponding player entity.</p> Parameters <p>string SteamID64 SteamID64 to resolve.</p> Returns <p>Player|nil Matching player or nil when none is found/SteamID64 is invalid.</p> Example Usage <pre><code>  local ply = lia.util.findPlayerBySteamID64(steamID64)\n</code></pre> lia.util.findPlayerBySteamID(SteamID) Purpose <p>Searches connected players for a matching SteamID.</p> When Called <p>Use when you need to map a SteamID string to the in-game player.</p> Parameters <p>string SteamID SteamID in legacy format (e.g. \"STEAM_0:1:12345\").</p> Returns <p>Player|nil Player whose SteamID matches, or nil if none.</p> Example Usage <pre><code>  local ply = lia.util.findPlayerBySteamID(\"STEAM_0:1:12345\")\n</code></pre> lia.util.canFit(pos, mins, maxs, filter) Purpose <p>Checks whether a bounding hull can fit at a position without collisions.</p> When Called <p>Use before spawning or teleporting entities to ensure the space is clear.</p> Parameters <p>Vector pos Position to test.</p> <p>Vector mins Hull minimums; defaults to Vector(16, 16, 0) mirrored if positive.</p> <p>Vector maxs optional Hull maximums; defaults to mins when nil.</p> <p>Entity|table filter optional Entity or filter list to ignore in the trace.</p> Returns <p>boolean True if the hull does not hit anything solid, false otherwise.</p> Example Usage <pre><code>  if lia.util.canFit(pos, Vector(16, 16, 0)) then\n      ent:SetPos(pos)\n  end\n</code></pre> lia.util.playerInRadius(pos, dist) Purpose <p>Finds all players within a given radius.</p> When Called <p>Use for proximity-based logic such as AoE effects or notifications.</p> Parameters <p>Vector pos Center position for the search.</p> <p>number dist Radius to search, in units.</p> Returns <p>table Players whose distance squared to pos is less than dist^2.</p> Example Usage <pre><code>  for _, ply in ipairs(lia.util.playerInRadius(pos, 512)) do\n      ply:notify(\"You are near the beacon.\")\n  end\n</code></pre> lia.util.formatStringNamed(format) Purpose <p>Formats a string using named placeholders or positional arguments.</p> When Called <p>Use to substitute tokens in a template string with table keys or ordered arguments.</p> Parameters <p>string format Template containing placeholders like \"{name}\".</p> Returns <p>string The formatted string with placeholders replaced.</p> Example Usage <pre><code>  lia.util.formatStringNamed(\"Hello {who}\", {who = \"world\"})\n  lia.util.formatStringNamed(\"{1} + {2}\", 1, 2)\n</code></pre> lia.util.getMaterial(materialPath, materialParameters) Purpose <p>Retrieves and caches a material by path and parameters.</p> When Called <p>Use whenever drawing materials repeatedly to avoid recreating them.</p> Parameters <p>string materialPath Path to the material.</p> <p>string materialParameters optional Optional material creation parameters.</p> Returns <p>IMaterial Cached or newly created material instance.</p> Example Usage <pre><code>  local blurMat = lia.util.getMaterial(\"pp/blurscreen\")\n</code></pre> lia.util.findFaction(client, name) Purpose <p>Resolves a faction table by name or unique ID and notifies the caller on failure.</p> When Called <p>Use in commands or UI when users input a faction identifier.</p> Parameters <p>Player client Player to notify on invalid faction.</p> <p>string name Faction name or uniqueID to search for.</p> Returns <p>table|nil Matching faction table, or nil if not found.</p> Example Usage <pre><code>  local faction = lia.util.findFaction(ply, \"combine\")\n  if faction then print(faction.name) end\n</code></pre> lia.util.generateRandomName(firstNames, lastNames) Purpose <p>Generates a random full name from provided or default name lists.</p> When Called <p>Use when creating placeholder or randomized character names.</p> Parameters <p>table firstNames optional Optional list of first names to draw from; defaults to built-in list when nil/empty.</p> <p>table lastNames optional Optional list of last names to draw from; defaults to built-in list when nil/empty.</p> Returns <p>string Concatenated first and last name.</p> Example Usage <pre><code>  local name = lia.util.generateRandomName()\n</code></pre> lia.util.setPositionCallback(firstNames, lastNames) Purpose <p>Generates a random full name from provided or default name lists.</p> When Called <p>Use when creating placeholder or randomized character names.</p> Parameters <p>table firstNames optional Optional list of first names to draw from; defaults to built-in list when nil/empty.</p> <p>table lastNames optional Optional list of last names to draw from; defaults to built-in list when nil/empty.</p> Returns <p>string Concatenated first and last name.</p> Example Usage <pre><code>  local name = lia.util.generateRandomName()\n</code></pre> lia.util.sendTableUI(client, title, columns, data, options, characterID) Purpose <p>Sends a localized table UI payload to a client.</p> When Called <p>Use when the server needs to present tabular data/options to a specific player.</p> Parameters <p>Player client Recipient player.</p> <p>string title optional Localization key for the window title; defaults to \"tableListTitle\".</p> <p>table columns Column definitions; names are localized if present.</p> <p>table data Row data to display.</p> <p>table options optional Optional menu options to accompany the table.</p> <p>number characterID optional Optional character identifier to send with the payload.</p> Example Usage <pre><code>  lia.util.sendTableUI(ply, \"staffList\", columns, rows, options, charID)\n</code></pre> lia.util.findEmptySpace(entity, filter, spacing, size, height, tolerance) Purpose <p>Finds nearby empty positions around an entity using grid sampling.</p> When Called <p>Use when spawning items or players near an entity while avoiding collisions and the void.</p> Parameters <p>Entity entity Origin entity to search around.</p> <p>Entity|table filter optional Optional trace filter to ignore certain entities; defaults to the origin entity.</p> <p>number spacing Grid spacing between samples; defaults to 32.</p> <p>number size Number of steps in each direction from the origin; defaults to 3.</p> <p>number height Hull height used for traces; defaults to 36.</p> <p>number tolerance Upward offset to avoid starting inside the ground; defaults to 5.</p> Returns <p>table Sorted list of valid origin positions, nearest to farthest from the entity.</p> Example Usage <pre><code>  local spots = lia.util.findEmptySpace(ent, nil, 24)\n  local pos = spots[1]\n</code></pre> lia.util.animateAppearance(panel, targetWidth, targetHeight, duration, alphaDuration, callback, scaleFactor) Purpose <p>Animates a panel appearing from a scaled, transparent state to its target size and opacity.</p> When Called <p>Use when showing popups or menus that should ease into view.</p> Parameters <p>Panel panel Panel to animate.</p> <p>number targetWidth Final width of the panel.</p> <p>number targetHeight Final height of the panel.</p> <p>number duration optional Duration for size/position easing; defaults to 0.18 seconds.</p> <p>number alphaDuration optional Duration for alpha easing; defaults to duration.</p> <p>function callback optional Called when the animation finishes.</p> <p>number scaleFactor optional Initial size scale relative to target; defaults to 0.8.</p> Example Usage <pre><code>  lia.util.animateAppearance(panel, 300, 200)\n</code></pre> lia.util.clampMenuPosition(panel) Purpose <p>Keeps a menu panel within the screen bounds, respecting the character logo space.</p> When Called <p>Use after positioning a menu to prevent it from going off-screen.</p> Parameters <p>Panel panel Menu panel to clamp.</p> Example Usage <pre><code>  lia.util.clampMenuPosition(menu)\n</code></pre> lia.util.drawGradient(x, y, w, h, direction, colorShadow, radius, flags) Purpose <p>Draws a directional gradient rectangle.</p> When Called <p>Use in panel paints when you need simple gradient backgrounds.</p> Parameters <p>number x X position of the gradient.</p> <p>number y Y position of the gradient.</p> <p>number w Width of the gradient.</p> <p>number h Height of the gradient.</p> <p>number direction Gradient direction index (1 up, 2 down, 3 left, 4 right).</p> <p>Color colorShadow Color tint for the gradient.</p> <p>number radius optional Corner radius for drawing helper; defaults to 0.</p> <p>number flags optional Optional draw flags passed to `drawMaterial`.</p> Example Usage <pre><code>  lia.util.drawGradient(0, 0, w, h, 2, Color(0, 0, 0, 180))\n</code></pre> lia.util.wrapText(text, width, font) Purpose <p>Wraps text to a maximum width using a specified font.</p> When Called <p>Use when drawing text that must fit inside a set horizontal space.</p> Parameters <p>string text Text to wrap.</p> <p>number width Maximum width in pixels.</p> <p>string font optional Font name to measure with; defaults to \"LiliaFont.16\".</p> Returns <p>table, number Array of wrapped lines and the widest line width.</p> Example Usage <pre><code>  local lines = lia.util.wrapText(description, 300, \"LiliaFont.17\")\n</code></pre> lia.util.drawBlur(panel, amount, passes, alpha) Purpose <p>Draws a blurred background behind a panel.</p> When Called <p>Use inside a panel's Paint hook to soften the content behind it.</p> Parameters <p>Panel panel Panel whose screen area will be blurred.</p> <p>number amount optional Blur strength; defaults to 5.</p> <p>number passes optional Unused; kept for signature compatibility.</p> <p>number alpha optional Draw color alpha; defaults to 255.</p> Example Usage <pre><code>  lia.util.drawBlur(self, 4)\n</code></pre> lia.util.drawBlackBlur(panel, amount, passes, alpha, darkAlpha) Purpose <p>Draws a blurred background with a dark overlay in a panel's bounds.</p> When Called <p>Use for modal overlays where both blur and darkening are desired.</p> Parameters <p>Panel panel Panel area to blur.</p> <p>number amount optional Blur strength; defaults to 6.</p> <p>number passes optional Number of blur passes; defaults to 5.</p> <p>number alpha optional Blur draw alpha; defaults to 255.</p> <p>number darkAlpha optional Alpha for the black overlay; defaults to 220.</p> Example Usage <pre><code>  lia.util.drawBlackBlur(self, 6, 4, 255, 200)\n</code></pre> lia.util.drawBlurAt(x, y, w, h, amount, passes, alpha) Purpose <p>Draws a blur effect over a specific rectangle on the screen.</p> When Called <p>Use when you need a localized blur that is not tied to a panel.</p> Parameters <p>number x X coordinate of the rectangle.</p> <p>number y Y coordinate of the rectangle.</p> <p>number w Width of the rectangle.</p> <p>number h Height of the rectangle.</p> <p>number amount optional Blur strength; defaults to 5.</p> <p>number passes optional Number of blur samples; defaults to 0.2 steps when nil.</p> <p>number alpha optional Draw alpha; defaults to 255.</p> Example Usage <pre><code>  lia.util.drawBlurAt(100, 100, 200, 150, 4)\n</code></pre> lia.util.createTableUI(title, columns, data, options, charID) Purpose <p>Builds and displays a table UI on the client.</p> When Called <p>Use when the client needs to view tabular data with optional menu actions.</p> Parameters <p>string title optional Localization key for the frame title; defaults to \"tableListTitle\".</p> <p>table columns Column definitions with `name`, `width`, `align`, and `sortable` fields.</p> <p>table data Row data keyed by column field names.</p> <p>table options optional Optional menu options with callbacks or net names.</p> <p>number charID optional Character identifier forwarded with net options.</p> Returns <p>Panel, Panel The created frame and table list view.</p> Example Usage <pre><code>  local frame, list = lia.util.createTableUI(\"myData\", cols, rows)\n</code></pre> lia.util.openOptionsMenu(title, options) Purpose <p>Displays a simple options menu with clickable entries.</p> When Called <p>Use to quickly prompt the user with a list of named actions.</p> Parameters <p>string title optional Title text to show at the top of the menu; defaults to \"options\".</p> <p>table options Either an array of {name, callback} or a map of name -&gt; callback.</p> Returns <p>Panel|nil The created frame, or nil if no valid options exist.</p> Example Usage <pre><code>  lia.util.openOptionsMenu(\"choose\", {{\"Yes\", onYes}, {\"No\", onNo}})\n</code></pre> lia.util.drawEntText(ent, text, posY, alphaOverride) Purpose <p>Draws floating text above an entity that eases in based on distance.</p> When Called <p>Use in HUD painting to label world entities when nearby.</p> Parameters <p>Entity ent Entity to draw text above.</p> <p>string text Text to display.</p> <p>number posY optional Vertical offset in screen space; defaults to 0.</p> <p>number alphaOverride optional Optional alpha multiplier (0-1 or 0-255).</p> Example Usage <pre><code>  hook.Add(\"HUDPaint\", \"DrawEntLabels\", function()\n      lia.util.drawEntText(ent, \"Storage\")\n  end)\n</code></pre> lia.util.drawLookText(text, posY, Screen, Screen, alphaOverride, maxDist) Purpose <p>Draws text at the player's look position with distance-based easing.</p> When Called <p>Use to display contextual prompts or hints where the player is aiming.</p> Parameters <p>string text Text to render at the hit position.</p> <p>number posY optional Screen-space vertical offset; defaults to 0.</p> <p>unknown Screen space vertical offset; defaults to 0.</p> <p>unknown Screen space vertical offset; defaults to 0.</p> <p>number alphaOverride optional Optional alpha multiplier (0-1 or 0-255).</p> <p>number maxDist optional Maximum trace distance; defaults to 380 units.</p> Example Usage <pre><code>  lia.util.drawLookText(\"Press E to interact\")\n</code></pre> lia.util.setFeaturePosition(pos, typeId) Purpose <p>Sets a feature position using the position tool callback system.</p> When Called <p>Called by the position tool when a player sets a position (left-click or Shift+R).</p> Parameters <p>Vector pos The world position to set.</p> <p>string typeId The type ID of the position callback (e.g., \"faction_spawn_adder\", \"sit_room\").</p> Example Usage <pre><code>  lia.util.setFeaturePosition(Vector(0, 0, 0), \"faction_spawn_adder\")\n</code></pre> lia.util.drawLookText(text, posY, Screen, Screen, alphaOverride, maxDist) Purpose <p>Draws text at the player's look position with distance-based easing.</p> When Called <p>Use to display contextual prompts or hints where the player is aiming.</p> Parameters <p>string text Text to render at the hit position.</p> <p>number posY optional Screen-space vertical offset; defaults to 0.</p> <p>unknown Screen space vertical offset; defaults to 0.</p> <p>unknown Screen space vertical offset; defaults to 0.</p> <p>number alphaOverride optional Optional alpha multiplier (0-1 or 0-255).</p> <p>number maxDist optional Maximum trace distance; defaults to 380 units.</p> Example Usage <pre><code>  lia.util.drawLookText(\"Press E to interact\")\n</code></pre> lia.util.setFeaturePosition(pos, typeId) Purpose <p>Sets a feature position using the position tool callback system.</p> When Called <p>Called by the position tool when a player sets a position (left-click or Shift+R).</p> Parameters <p>Vector pos The world position to set.</p> <p>string typeId The type ID of the position callback (e.g., \"faction_spawn_adder\", \"sit_room\").</p> Example Usage <pre><code>  lia.util.setFeaturePosition(Vector(0, 0, 0), \"faction_spawn_adder\")\n</code></pre> lia.util.removeFeaturePosition(pos, typeId) Purpose <p>Removes a feature position using the position tool callback system.</p> When Called <p>Called by the position tool when a player removes a position (right-click).</p> Parameters <p>Vector pos The world position to remove.</p> <p>string typeId The type ID of the position callback (e.g., \"faction_spawn_adder\", \"sit_room\").</p> Example Usage <pre><code>  lia.util.removeFeaturePosition(Vector(0, 0, 0), \"faction_spawn_adder\")\n</code></pre> lia.util.drawESPStyledText(text, x, y, espColor, font, fadeAlpha) Purpose <p>Draws styled ESP text with background, blur, and theme support.</p> When Called <p>Use when you need to draw text with ESP styling, including background panels and blur effects.</p> Parameters <p>string text The text to display.</p> <p>number x X position on screen.</p> <p>number y Y position on screen.</p> <p>Color espColor Color for the accent/bottom bar.</p> <p>string font Font to use for the text.</p> <p>number, optional fadeAlpha Alpha multiplier for fading (default: 1).</p> Returns <p>number Height of the drawn element.</p> Example Usage <pre><code>  local height = lia.util.drawESPStyledText(\"Player Name\", 200, 100, Color(255, 0, 0), \"liaMediumFont\", 0.8)\n</code></pre>"},{"location":"development/libraries/vendor/","title":"Vendor","text":"<p>NPC vendor management system with editing and rarity support for the Lilia framework.</p> Overview  The vendor library provides comprehensive functionality for managing NPC vendors in the Lilia framework. It handles vendor configuration, editing, presets, and rarity systems for items sold by vendors. The library operates on both server and client sides, with the server handling vendor data processing and the client managing the editing interface. It includes support for vendor presets, item rarities, stock management, pricing, faction/class restrictions, and visual customization. The library ensures that vendors can be easily configured and managed through both code and in-game editing tools.  lia.vendor.addPreset(name, items) Purpose <p>Register a reusable vendor item preset with validated entries.</p> When Called <p>During initialization to define canned loadouts for vendors (e.g., weapon dealer, medic).</p> Parameters <p>string name Unique preset name.</p> <p>table items Map of item uniqueIDs to tables with pricing/stock metadata.</p> Example Usage <pre><code>  -- Define a preset and apply it dynamically based on map location.\n  lia.vendor.addPreset(\"gunsmith\", {\n      ar15 = {stock = 3, price = 3500},\n      akm = {stock = 2, price = 3200},\n      [\"9mm\"] = {stock = 50, price = 30}\n  })\n  hook.Add(\"OnVendorSpawned\", \"SetupMapVendors\", function(vendorEnt)\n      if vendorEnt:GetClass() ~= \"lia_vendor\" then return end\n      local zone = lia.zones and lia.zones.getNameAtPos(vendorEnt:GetPos()) or \"default\"\n      if zone == \"Armory\" then\n          vendorEnt:applyPreset(\"gunsmith\")\n          vendorEnt:setFactionAllowed(FACTION_POLICE, true)\n      end\n  end)\n</code></pre> lia.vendor.getPreset(name) Purpose <p>Retrieve a preset definition by name.</p> When Called <p>While applying presets to vendors or inspecting available vendor templates.</p> Parameters <p>string name Preset identifier (case-insensitive).</p> Returns <p>table|nil Item definition table if present.</p> Example Usage <pre><code>  -- Clone and tweak a preset before applying to a specific vendor.\n  local preset = table.Copy(lia.vendor.getPreset(\"gunsmith\") or {})\n  if preset then\n      preset[\"9mm\"].price = 25\n      preset[\"akm\"] = nil -- remove AKM for this vendor\n      vendor:applyPreset(\"gunsmith\") -- base preset\n      for item, data in pairs(preset) do\n          vendor:setItemPrice(item, data.price)\n          if data.stock then vendor:setMaxStock(item, data.stock) end\n      end\n  end\n</code></pre> lia.vendor.getVendorProperty(entity, property) Purpose <p>Fetch a vendor property from cache with default fallback.</p> When Called <p>Anywhere vendor state is read (pricing, stock, model, etc.).</p> Parameters <p>Entity entity Vendor NPC entity.</p> <p>string property Property key from `lia.vendor.defaults`.</p> Returns <p>any Cached property value or default.</p> Example Usage <pre><code>  -- Build a UI row with live vendor state (including defaults).\n  local function addVendorRow(list, vendorEnt)\n      local name = lia.vendor.getVendorProperty(vendorEnt, \"name\")\n      local cash = lia.vendor.getVendorProperty(vendorEnt, \"money\") or 0\n      local items = lia.vendor.getVendorProperty(vendorEnt, \"items\")\n      list:AddLine(name, cash, table.Count(items or {}))\n  end\n</code></pre> lia.vendor.setVendorProperty(entity, property, value) Purpose <p>Mutate a vendor property, pruning defaults to keep network/state lean.</p> When Called <p>During vendor edits (net messages) or when scripting dynamic vendor behavior.</p> Parameters <p>Entity entity Vendor NPC entity.</p> <p>string property Key to update.</p> <p>any value New value to store; default-equivalent values clear the entry.</p> Example Usage <pre><code>  -- Dynamically flip vendor inventory for an event and prune defaults.\n  hook.Add(\"EventStarted\", \"StockEventVendors\", function()\n      for _, vendorEnt in ipairs(ents.FindByClass(\"lia_vendor\")) do\n          lia.vendor.setVendorProperty(vendorEnt, \"items\", {\n              [\"event_ticket\"] = {stock = 100, price = 0},\n              [\"rare_crate\"] = {stock = 5, price = 7500}\n          })\n      end\n  end)\n</code></pre> lia.vendor.syncVendorProperty(entity, property, value, isDefault) Purpose <p>Broadcast a vendor property update to all clients.</p> When Called <p>Server-side after mutating vendor properties to keep clients in sync.</p> Parameters <p>Entity entity Vendor NPC entity.</p> <p>string property Key being synchronized.</p> <p>any value New value for the property.</p> <p>boolean isDefault Whether the property should be cleared (uses defaults clientside).</p> Example Usage <pre><code>  -- Force sync after a server-side rebuild of vendor data.\n  local function rebuildVendor(vendorEnt)\n      lia.vendor.setVendorProperty(vendorEnt, \"name\", \"Quartermaster\")\n      lia.vendor.setVendorProperty(vendorEnt, \"factionSellScales\", { [FACTION_POLICE] = 0.8 })\n      lia.vendor.syncVendorProperty(vendorEnt, \"name\", \"Quartermaster\", false)\n      lia.vendor.syncVendorProperty(vendorEnt, \"factionSellScales\", { [FACTION_POLICE] = 0.8 }, false)\n  end\n</code></pre> lia.vendor.getAllVendorData(entity) Purpose <p>Build a full vendor state table with defaults applied.</p> When Called <p>Before serializing vendor data for saving or sending to clients.</p> Parameters <p>Entity entity Vendor NPC entity.</p> Returns <p>table Key-value table covering every defaulted vendor property.</p> Example Usage <pre><code>  -- Serialize full vendor state for a persistence layer.\n  net.Receive(\"RequestVendorSnapshot\", function(_, ply)\n      local ent = net.ReadEntity()\n      local data = lia.vendor.getAllVendorData(ent)\n      if not data then return end\n      lia.data.set(\"vendor_\" .. ent:EntIndex(), data)\n      net.Start(\"SendVendorSnapshot\")\n      net.WriteTable(data)\n      net.Send(ply)\n  end)\n</code></pre>"},{"location":"development/libraries/webimage/","title":"Web Image","text":"<p>Web-based image downloading, caching, and management system for the Lilia framework.</p> Overview  The web image library provides comprehensive functionality for downloading, caching, and managing web-based images in the Lilia framework. It handles automatic downloading of images from URLs, local caching to improve performance, and seamless integration with Garry's Mod's material system. The library operates on both server and client sides, with intelligent caching mechanisms that prevent redundant downloads and ensure images are available offline after initial download. It includes URL validation, file format detection, and automatic directory management for organized storage. The library also provides hooks for download events and statistics tracking. Images are stored in the data/lilia/webimages/ directory and can be accessed through various path formats for maximum compatibility with existing code.  lia.webimage.download(n, u, cb, flags) Purpose <p>Ensure a remote image is downloaded, validated, and made available as a `Material`.</p> When Called <p>During UI setup when an image asset must be cached before drawing panels.</p> Parameters <p>string n Logical storage name for the downloaded image.</p> <p>string u optional Optional override URL; uses registered `stored` entry otherwise.</p> <p>function cb optional Callback receiving `(material, fromCache, errStr)`.</p> <p>string flags optional Optional material flags for creation (e.g., `\"noclamp smooth\"`).</p> Example Usage <pre><code>  -- Preload multiple HUD icons, then draw them when ready.\n  local function preloadIcons(list)\n      if #list == 0 then return end\n      local entry = table.remove(list, 1)\n      lia.webimage.download(entry.name, entry.url, function(mat)\n          if mat then\n              hook.Run(\"WebImageReady\", entry.name, mat)\n          end\n          preloadIcons(list)\n      end, entry.flags)\n  end\n  hook.Add(\"InitPostEntity\", \"PreloadHUDImages\", function()\n      preloadIcons({\n          {name = \"hud/armor_icon.png\", url = \"https://assets.example.com/images/armor_icon.png\", flags = \"noclamp smooth\"},\n          {name = \"hud/health_icon.png\", url = \"https://assets.example.com/images/health_icon.png\", flags = \"noclamp smooth\"}\n      })\n  end)\n</code></pre> lia.webimage.register(n, u, cb, flags) Purpose <p>Cache metadata for a URL and optionally download it immediately.</p> When Called <p>At startup when the gamemode wants to pre-register UI imagery.</p> Parameters <p>string n Internal key used to store and retrieve the image.</p> <p>string u The HTTP/HTTPS source URL.</p> <p>function cb optional Optional callback forwarded to `download`.</p> <p>string flags optional Material creation flags stored for future lookups.</p> Example Usage <pre><code>  hook.Add(\"GamemodeLoaded\", \"RegisterIconLibrary\", function()\n      lia.webimage.register(\"icons/police.png\", \"https://assets.example.com/ui/icons/police.png\", function(mat)\n          if mat then lia.log.add(nil, \"webimageCached\", \"icons/police.png\") end\n      end, \"noclamp smooth\")\n      lia.webimage.register(\"icons/medic.png\", \"https://assets.example.com/ui/icons/medic.png\", function(mat)\n          if not mat then return end\n          hook.Add(\"HUDPaint\", \"DrawMedicBadge\", function()\n              surface.SetMaterial(mat)\n              surface.DrawTexturedRect(24, ScrH() - 96, 64, 64)\n          end)\n      end)\n  end)\n</code></pre> lia.webimage.get(n, flags) Purpose <p>Retrieve a previously cached `Material` for immediate drawing.</p> When Called <p>Within paint hooks or derma code that needs a cached texture without triggering a download.</p> Parameters <p>string n The registered name or derived key.</p> <p>string flags optional Optional material flags used to rebuild the material when missing.</p> Returns <p>Material|nil The cached material or `nil` if it isn't downloaded yet.</p> Example Usage <pre><code>  -- Render cached image if available, otherwise queue download and retry.\n  local function drawIcon(name, x, y)\n      local mat = lia.webimage.get(name, \"noclamp smooth\")\n      if mat then\n          surface.SetMaterial(mat)\n          surface.DrawTexturedRect(x, y, 64, 64)\n      else\n          lia.webimage.download(name)\n          timer.Simple(0.2, function() drawIcon(name, x, y) end)\n      end\n  end\n  hook.Add(\"HUDPaint\", \"DrawPoliceIcon\", function() drawIcon(\"icons/police.png\", 32, 32) end)\n</code></pre> lia.webimage.getStats() Purpose <p>Expose download statistics to aid diagnostics or admin tooling.</p> When Called <p>When reporting the number of cached images or implementing cache health checks.</p> Returns <p>table `{ downloaded = number, stored = number, lastReset = timestamp }`.</p> Example Usage <pre><code>  hook.Add(\"PlayerSay\", \"PrintWebImageStats\", function(ply, text)\n      if text ~= \"!imagecache\" then return end\n      local stats = lia.webimage.getStats()\n      ply:notifyLocalized(\"webImageStats\", stats.downloaded, stats.stored, os.date(\"%c\", stats.lastReset))\n  end)\n</code></pre> lia.webimage.clearCache(skipReRegister) Purpose <p>Evict all downloaded web images, resetting the material cache.</p> When Called <p>During configuration reloads or when manual cache management is required.</p> Parameters <p>boolean skipReRegister When true, previously registered URLs are not re-downloaded.</p> Example Usage <pre><code>  -- Drop and re-download web images after admins push new branding.\n  hook.Add(\"OnConfigReload\", \"RebuildWebImageCache\", function()\n      lia.webimage.clearCache(false)\n      for name, data in pairs(lia.webimage.stored) do\n          lia.webimage.download(name, data.url, nil, data.flags)\n      end\n  end)\n</code></pre>"},{"location":"development/libraries/websound/","title":"WebSound","text":"<p>Web-based audio content downloading, caching, and playback system for the Lilia framework.</p> Overview  The websound library provides comprehensive functionality for managing web-based audio content in the Lilia framework. It handles downloading, caching, validation, and playback of sound files from HTTP/HTTPS URLs, with automatic local storage and retrieval. The library operates on both server and client sides, providing seamless integration with Garry's Mod's sound system through enhanced versions of sound.PlayFile, sound.PlayURL, and surface.PlaySound functions. It includes robust URL validation, file format verification, caching mechanisms, and statistics tracking. The library ensures optimal performance by avoiding redundant downloads and providing fallback mechanisms for failed downloads while maintaining compatibility with existing sound APIs.  lia.websound.download(name, url, cb) Purpose <p>Download or reuse a cached web sound by name, running a callback with the local file path.</p> When Called <p>Whenever a module needs to ensure a URL-based sound exists before playback, especially during initialization.</p> Parameters <p>string name The logical name for this sound; normalized before saving.</p> <p>string url optional Optional override URL; falls back to previously registered URLs.</p> <p>function cb optional Completion callback that receives (path, fromCache, error).</p> Example Usage <pre><code>  -- Preload multiple tracks in sequence, falling back to cached copies.\n  local playlist = {\n      {\"music/combat_theme.mp3\", \"https://assets.example.com/music/combat_theme.mp3\"},\n      {\"music/stealth_loop.ogg\", \"https://assets.example.com/music/stealth_loop.ogg\"}\n  }\n  local function preloadNext(i)\n      local entry = playlist[i]\n      if not entry then return end\n      lia.websound.download(entry[1], entry[2], function(path, fromCache, err)\n          if not path then\n              lia.util.logError(\"Failed to preload \" .. entry[1] .. \": \" .. tostring(err))\n              return\n          end\n          if not fromCache then\n              lia.log.add(nil, \"websoundCached\", entry[1])\n          end\n          preloadNext(i + 1)\n      end)\n  end\n  hook.Add(\"InitPostEntity\", \"PreloadMusicPlaylist\", function() preloadNext(1) end)\n</code></pre> lia.websound.register(name, url, cb) Purpose <p>Register a named URL so future calls can rely on a cached entry and optionally download it immediately.</p> When Called <p>During gamemode setup when you want to associate a friendly key with a remote sound asset.</p> Parameters <p>string name Logical identifier used for caching and later lookup.</p> <p>string url HTTP/HTTPS link pointing to the desired sound file.</p> <p>function cb optional Optional callback same as `download`.</p> Returns <p>string? Returns the cached path if already downloaded.</p> Example Usage <pre><code>  hook.Add(\"PostGamemodeLoaded\", \"RegisterUIAudio\", function()\n      lia.websound.register(\"ui/alert.wav\", \"https://assets.example.com/sounds/ui/alert.wav\", function(path)\n          if path then surface.PlaySound(path) end\n      end)\n      lia.websound.register(\"ui/ambient.mp3\", \"https://assets.example.com/sounds/ui/ambient.mp3\", function(path)\n          if not path then return end\n          timer.Create(\"UIAmbientLoop\", 120, 0, function()\n              sound.PlayFile(path, \"\", function() end)\n          end)\n      end)\n  end)\n</code></pre> lia.websound.get(name) Purpose <p>Lookup the cached filesystem path for a registered web sound when you need to play it immediately.</p> When Called <p>Within any playback logic that wants to skip downloading and use an already fetched file.</p> Parameters <p>string name The normalized identifier previously registered or downloaded.</p> Returns <p>string|nil Local `data/` path to the sound file, or `nil` if not downloaded yet.</p> Example Usage <pre><code>  -- Play from cache or queue a download with a one-time completion hook.\n  local function playAmbient()\n      local cachedPath = lia.websound.get(\"ui/ambient.mp3\")\n      if cachedPath then\n          sound.PlayFile(cachedPath, \"mono\", function() end)\n          return\n      end\n      lia.websound.download(\"ui/ambient.mp3\", nil, function(path)\n          if path then sound.PlayFile(path, \"mono\", function() end) end\n      end)\n  end\n  hook.Add(\"InitPostEntity\", \"PlayAmbientCached\", playAmbient)\n</code></pre> lia.websound.getStats() Purpose <p>Provide download statistics for diagnostic interfaces or admin reporting.</p> When Called <p>When showing status panels or logging background downloads.</p> Returns <p>table `{ downloaded = number, stored = number, lastReset = timestamp }`.</p> Example Usage <pre><code>  hook.Add(\"PlayerSay\", \"ReportWebSoundStats\", function(ply, text)\n      if text ~= \"!soundstats\" then return end\n      local stats = lia.websound.getStats()\n      ply:notifyLocalized(\"webSoundStats\", stats.downloaded, stats.stored, os.date(\"%c\", stats.lastReset))\n  end)\n</code></pre> lia.websound.clearCache(skipReRegister) Purpose <p>Delete all cached web sounds and optionally trigger re-registration.</p> When Called <p>During round resets or when you want to force a fresh download of every entry.</p> Parameters <p>boolean skipReRegister If true, registered entries are not re-downloaded automatically.</p> Example Usage <pre><code>  -- Force-refresh all cached sounds when admins reload content packs.\n  hook.Add(\"OnConfigReload\", \"ResetWebSounds\", function()\n      lia.websound.clearCache(false)\n      for name, url in pairs(lia.websound.stored) do\n          lia.websound.download(name, url)\n      end\n  end)\n</code></pre> lia.websound.playButtonSound(customSound, callback) Purpose <p>Play the configured button click sound with optional overrides and fallbacks.</p> When Called <p>Whenever a UI element wants to use a consistent button audio cue.</p> Parameters <p>string customSound optional Optional override path or URL.</p> <p>function callback optional Receives `(success, errStr)` once playback is attempted.</p> Example Usage <pre><code>  -- Use a per-skin override and fall back to the global default.\n  local button = vgui.Create(\"DButton\")\n  button.DoClick = function()\n      lia.websound.playButtonSound(\"https://assets.example.com/sounds/ui/blue_click.wav\", function(success, err)\n          if not success then\n              lia.websound.playButtonSound(nil) -- fallback to default\n          end\n      end)\n  end\n</code></pre>"},{"location":"development/libraries/workshop/","title":"Workshop","text":"<p>Steam Workshop addon downloading, mounting, and management system for the Lilia framework.</p> Overview  The workshop library provides comprehensive functionality for managing Steam Workshop addons in the Lilia framework. It handles automatic downloading, mounting, and management of workshop content required by the gamemode and its modules. The library operates on both server and client sides, with the server gathering workshop IDs from modules and mounted addons, while the client handles downloading and mounting of required content. It includes user interface elements for download progress tracking and addon information display. The library ensures that all required workshop content is available before gameplay begins.  lia.workshop.addWorkshop(id) Purpose <p>Queue a workshop addon for download and notify the admin UI.</p> When Called <p>During module initialization or whenever a new workshop dependency is registered.</p> Parameters <p>string|number id Workshop addon ID to download (will be converted to string).</p> Example Usage <pre><code>  -- Register a workshop addon dependency\n  lia.workshop.addWorkshop(\"3527535922\")\n  lia.workshop.addWorkshop(1234567890) -- Also accepts numbers\n</code></pre> lia.workshop.gather() Purpose <p>Gather every known workshop ID from mounted addons and registered modules.</p> When Called <p>Once modules are initialized to cache which workshop addons are needed.</p> Returns <p>table Set of workshop IDs that should be downloaded/mounted.</p> Example Usage <pre><code>  -- Gather all workshop IDs that need to be downloaded\n  local workshopIds = lia.workshop.gather()\n  lia.workshop.cache = workshopIds\n</code></pre> lia.workshop.send(ply) Purpose <p>Send the cached workshop IDs to a player so the client knows what to download.</p> When Called <p>Automatically when a player initially spawns.</p> Parameters <p>Player ply The player entity to notify.</p> Example Usage <pre><code>  -- Send workshop cache to a specific player\n  lia.workshop.send(player.GetByID(1))\n</code></pre> lia.workshop.hasContentToDownload() Purpose <p>Determine whether there is any extra workshop content the client needs to download.</p> When Called <p>Before prompting the player to download server workshop addons.</p> Returns <p>boolean true if the client is missing workshop content that needs to be fetched.</p> Example Usage <pre><code>  -- Check if client needs to download workshop content\n  if lia.workshop.hasContentToDownload() then\n      -- Show download prompt to player\n  end\n</code></pre> lia.workshop.mountContent() Purpose <p>Initiate mounting (downloading) of server-required workshop addons.</p> When Called <p>When the player explicitly asks to install missing workshop content from the info panel.</p> Example Usage <pre><code>  -- Start downloading missing workshop content\n  lia.workshop.mountContent()\n</code></pre>"},{"location":"development/meta/","title":"Meta Tables","text":"Character <p>Character management system for the Lilia framework.</p> Entity <p>Entity management system for the Lilia framework.</p> Inventory <p>Inventory management system for the Lilia framework.</p> Item <p>Item management system for the Lilia framework.</p> Panel <p>Panel management system for the Lilia framework.</p> Player <p>Player management system for the Lilia framework.</p>"},{"location":"development/meta/character/","title":"Character","text":"<p>Character management system for the Lilia framework.</p> Overview  The character meta table provides comprehensive functionality for managing character data, attributes, and operations in the Lilia framework. It handles character creation, data persistence, attribute management, recognition systems, and character-specific operations. The meta table operates on both server and client sides, with the server managing character storage and validation while the client provides character data access and display. It includes integration with the database system for character persistence, inventory management for character items, and faction/class systems for character roles. The meta table ensures proper character data synchronization, attribute calculations with boosts, recognition between characters, and comprehensive character lifecycle management from creation to deletion.  getID() Purpose <p>Returns this character's unique numeric identifier.</p> When Called <p>Use when persisting, comparing, or networking character state.</p> Returns <p>number Character ID.</p> Example Usage <pre><code>  local id = char:getID()\n</code></pre> getPlayer() Purpose <p>Retrieves the player entity associated with this character.</p> When Called <p>Use whenever you need the live player controlling this character.</p> Returns <p>Player|nil Player that owns the character, or nil if not found.</p> Example Usage <pre><code>  local ply = char:getPlayer()\n</code></pre> getDisplayedName(client) Purpose <p>Returns the name to show to a viewing client, honoring recognition rules.</p> When Called <p>Use when rendering a character's name to another player.</p> Parameters <p>Player client The viewer whose recognition determines the name.</p> Returns <p>string Display name or a localized \"unknown\" placeholder.</p> Example Usage <pre><code>  local name = targetChar:getDisplayedName(viewer)\n</code></pre> hasMoney(amount) Purpose <p>Checks if the character has at least the given amount of money.</p> When Called <p>Use before charging a character to ensure they can afford a cost.</p> Parameters <p>number amount The amount to verify.</p> Returns <p>boolean True if the character's balance is equal or higher.</p> Example Usage <pre><code>  if char:hasMoney(100) then purchase() end\n</code></pre> hasFlags(flagStr) Purpose <p>Determines whether the character possesses any flag in the string.</p> When Called <p>Use when gating actions behind one or more privilege flags.</p> Parameters <p>string flagStr One or more flag characters to test.</p> Returns <p>boolean True if at least one provided flag is present.</p> Example Usage <pre><code>  if char:hasFlags(\"ab\") then grantAccess() end\n</code></pre> getAttrib(key, default) Purpose <p>Gets the character's attribute value including any active boosts.</p> When Called <p>Use when calculating rolls or stats that depend on attributes.</p> Parameters <p>string key Attribute identifier.</p> <p>number default Fallback value if the attribute is missing.</p> Returns <p>number Attribute level plus stacked boosts.</p> Example Usage <pre><code>  local strength = char:getAttrib(\"str\", 0)\n</code></pre> doesRecognize(id) Purpose <p>Determines whether this character recognizes another character.</p> When Called <p>Use when deciding if a viewer should see a real name or remain unknown.</p> Parameters <p>number|table id Character ID or object implementing getID.</p> Returns <p>boolean True if recognition is allowed by hooks.</p> Example Usage <pre><code>  if viewerChar:doesRecognize(targetChar) then showName() end\n</code></pre> doesFakeRecognize(id) Purpose <p>Checks if the character recognizes another under a fake name.</p> When Called <p>Use when evaluating disguise or alias recognition logic.</p> Parameters <p>number|table id Character ID or object implementing getID.</p> Returns <p>boolean True if fake recognition passes custom hooks.</p> Example Usage <pre><code>  local canFake = char:doesFakeRecognize(otherChar)\n</code></pre> setData(k, v, noReplication, receiver) Purpose <p>Stores custom data on the character and optionally replicates it.</p> When Called <p>Use when adding persistent or networked character metadata.</p> Parameters <p>string|table k Key to set or table of key/value pairs.</p> <p>any v Value to store when k is a string.</p> <p>boolean noReplication Skip networking when true.</p> <p>Player receiver optional Specific client to receive the update instead of owner.</p> Example Usage <pre><code>  char:setData(\"lastLogin\", os.time())\n</code></pre> getData(key, default) Purpose <p>Retrieves previously stored custom character data.</p> When Called <p>Use when you need saved custom fields or default fallbacks.</p> Parameters <p>string key optional Specific key to fetch or nil for the whole table.</p> <p>any default Value to return if the key is unset.</p> Returns <p>any Stored value, default, or entire data table.</p> Example Usage <pre><code>  local note = char:getData(\"note\", \"\")\n</code></pre> isBanned() Purpose <p>Reports whether the character is currently banned.</p> When Called <p>Use when validating character selection or spawning.</p> Returns <p>boolean True if banned permanently or until a future time.</p> Example Usage <pre><code>  if char:isBanned() then denyJoin() end\n</code></pre> recognize(character, name) Purpose <p>Marks another character as recognized, optionally storing a fake name.</p> When Called <p>Invoke when a player learns or is assigned recognition of someone.</p> Parameters <p>number|table character Target character ID or object implementing getID.</p> <p>string name optional Optional alias to remember instead of real recognition.</p> Returns <p>boolean True after recognition is recorded.</p> Example Usage <pre><code>  char:recognize(otherChar)\n</code></pre> joinClass(class, isForced) Purpose <p>Attempts to place the character into the specified class.</p> When Called <p>Use during class selection or forced reassignment.</p> Parameters <p>number class Class ID to join.</p> <p>boolean isForced Skip eligibility checks when true.</p> Returns <p>boolean True if the class change succeeded.</p> Example Usage <pre><code>  local ok = char:joinClass(newClassID)\n</code></pre> kickClass() Purpose <p>Removes the character from its current class, falling back to default.</p> When Called <p>Use when a class is invalid, revoked, or explicitly left.</p> Example Usage <pre><code>  char:kickClass()\n</code></pre> updateAttrib(key, value) Purpose <p>Increases an attribute by the given amount, respecting maximums.</p> When Called <p>Use when awarding experience toward an attribute.</p> Parameters <p>string key Attribute identifier.</p> <p>number value Amount to add.</p> Example Usage <pre><code>  char:updateAttrib(\"stm\", 5)\n</code></pre> setAttrib(key, value) Purpose <p>Directly sets an attribute to a specific value and syncs it.</p> When Called <p>Use when loading characters or forcing an attribute level.</p> Parameters <p>string key Attribute identifier.</p> <p>number value New attribute level.</p> Example Usage <pre><code>  char:setAttrib(\"str\", 15)\n</code></pre> addBoost(boostID, attribID, boostAmount) Purpose <p>Adds a temporary boost to an attribute and propagates it.</p> When Called <p>Use when buffs or debuffs modify an attribute value.</p> Parameters <p>string boostID Unique identifier for the boost source.</p> <p>string attribID Attribute being boosted.</p> <p>number boostAmount Amount to add (can be negative).</p> Returns <p>boolean Result from setVar update.</p> Example Usage <pre><code>  char:addBoost(\"stimpack\", \"end\", 2)\n</code></pre> removeBoost(boostID, attribID) Purpose <p>Removes a previously applied attribute boost.</p> When Called <p>Use when a buff expires or is cancelled.</p> Parameters <p>string boostID Identifier of the boost source.</p> <p>string attribID Attribute to adjust.</p> Returns <p>boolean Result from setVar update.</p> Example Usage <pre><code>  char:removeBoost(\"stimpack\", \"end\")\n</code></pre> clearAllBoosts() Purpose <p>Clears all attribute boosts and notifies listeners.</p> When Called <p>Use when resetting a character's temporary modifiers.</p> Returns <p>boolean Result from resetting the boost table.</p> Example Usage <pre><code>  char:clearAllBoosts()\n</code></pre> setFlags(flags) Purpose <p>Replaces the character's flag string and synchronizes it.</p> When Called <p>Use when setting privileges wholesale (e.g., admin changes).</p> Parameters <p>string flags Complete set of flags to apply.</p> Example Usage <pre><code>  char:setFlags(\"abc\")\n</code></pre> giveFlags(flags) Purpose <p>Adds one or more flags to the character if they are missing.</p> When Called <p>Use when granting new permissions or perks.</p> Parameters <p>string flags Concatenated flag characters to grant.</p> Example Usage <pre><code>  char:giveFlags(\"z\")\n</code></pre> takeFlags(flags) Purpose <p>Removes specific flags from the character and triggers callbacks.</p> When Called <p>Use when revoking privileges or perks.</p> Parameters <p>string flags Concatenated flag characters to remove.</p> Example Usage <pre><code>  char:takeFlags(\"z\")\n</code></pre> save(callback) Purpose <p>Persists the character's current variables to the database.</p> When Called <p>Use during saves, character switches, or shutdown to keep data.</p> Parameters <p>function callback optional Invoked after the save completes.</p> Example Usage <pre><code>  char:save(function() print(\"saved\") end)\n</code></pre> sync(receiver) Purpose <p>Sends character data to a specific player or all players.</p> When Called <p>Use after character creation, load, or when vars change.</p> Parameters <p>Player receiver optional Target player to sync to; nil broadcasts to everyone.</p> Example Usage <pre><code>  char:sync(client)\n</code></pre> setup(noNetworking) Purpose <p>Applies the character state to the owning player and optionally syncs.</p> When Called <p>Use right after a character is loaded or swapped in.</p> Parameters <p>boolean noNetworking Skip inventory and char networking when true.</p> Example Usage <pre><code>  char:setup()\n</code></pre> kick() Purpose <p>Forces the owning player off this character and cleans up state.</p> When Called <p>Use when removing access, kicking, or swapping characters.</p> Example Usage <pre><code>  char:kick()\n</code></pre> ban(time) Purpose <p>Bans the character for a duration or permanently and kicks them.</p> When Called <p>Use for disciplinary actions like permakill or timed bans.</p> Parameters <p>number time optional Ban duration in seconds; nil makes it permanent.</p> Example Usage <pre><code>  char:ban(3600)\n</code></pre> delete() Purpose <p>Deletes the character from persistent storage.</p> When Called <p>Use when a character is intentionally removed by the player or admin.</p> Example Usage <pre><code>  char:delete()\n</code></pre> destroy() Purpose <p>Removes the character from the active cache without DB interaction.</p> When Called <p>Use when unloading a character instance entirely.</p> Example Usage <pre><code>  char:destroy()\n</code></pre> giveMoney(amount) Purpose <p>Adds money to the character through the owning player object.</p> When Called <p>Use when rewarding or refunding currency.</p> Parameters <p>number amount Amount to add (can be negative to deduct).</p> Returns <p>boolean False if no valid player exists; otherwise result of addMoney.</p> Example Usage <pre><code>  char:giveMoney(250)\n</code></pre> takeMoney(amount) Purpose <p>Deducts money from the character and logs the transaction.</p> When Called <p>Use when charging a player for purchases or penalties.</p> Parameters <p>number amount Amount to remove; the absolute value is used.</p> Returns <p>boolean True after the deduction process runs.</p> Example Usage <pre><code>  char:takeMoney(50)\n</code></pre> isMainCharacter() Purpose <p>Checks whether this character matches the player's main character ID.</p> When Called <p>Use when showing main character indicators or restrictions.</p> Returns <p>boolean True if this character is the player's main selection.</p> Example Usage <pre><code>  if char:isMainCharacter() then highlight() end\n</code></pre>"},{"location":"development/meta/entity/","title":"Entity","text":"<p>Entity management system for the Lilia framework.</p> Overview  The entity meta table provides comprehensive functionality for extending Garry's Mod entities with Lilia-specific features and operations. It handles entity identification, sound management, door access control, vehicle ownership, network variable synchronization, and entity-specific operations. The meta table operates on both server and client sides, with the server managing entity data and validation while the client provides entity interaction and display. It includes integration with the door system for access control, vehicle system for ownership management, network system for data synchronization, and sound system for audio playback. The meta table ensures proper entity identification, access control validation, network data synchronization, and comprehensive entity interaction management for doors, vehicles, and other game objects.  EmitSound(soundName, soundLevel, pitchPercent, volume, channel, flags, dsp) Purpose <p>Detour of Entity:EmitSound that plays a sound from this entity, handling web sound URLs and fallbacks. This function overrides the base game's EmitSound method to add support for web-sourced audio streams.</p> When Called <p>Use whenever an entity needs to emit a sound that may be streamed.</p> Parameters <p>string soundName File path or URL to play.</p> <p>number soundLevel Sound level for attenuation.</p> <p>number pitchPercent Pitch modifier.</p> <p>number volume Volume from 0-100.</p> <p>number channel Optional sound channel.</p> <p>number flags Optional emit flags.</p> <p>number dsp Optional DSP effect index.</p> Returns <p>boolean True when handled by websound logic; otherwise base emit result.</p> Example Usage <pre><code>  ent:EmitSound(\"lilia/websounds/example.mp3\", 75)\n</code></pre> isProp() Purpose <p>Indicates whether this entity is a physics prop.</p> When Called <p>Use when filtering interactions to physical props only.</p> Returns <p>boolean True if the entity class is prop_physics.</p> Example Usage <pre><code>  if ent:isProp() then handleProp(ent) end\n</code></pre> isItem() Purpose <p>Checks if the entity represents a Lilia item.</p> When Called <p>Use when distinguishing item entities from other entities.</p> Returns <p>boolean True if the entity class is lia_item.</p> Example Usage <pre><code>  if ent:isItem() then pickUpItem(ent) end\n</code></pre> isMoney() Purpose <p>Checks if the entity is a Lilia money pile.</p> When Called <p>Use when processing currency pickups or interactions.</p> Returns <p>boolean True if the entity class is lia_money.</p> Example Usage <pre><code>  if ent:isMoney() then ent:Remove() end\n</code></pre> isSimfphysCar() Purpose <p>Determines whether the entity belongs to supported vehicle classes.</p> When Called <p>Use when applying logic specific to Simfphys/LVS vehicles.</p> Returns <p>boolean True if the entity is a recognized vehicle type.</p> Example Usage <pre><code>  if ent:isSimfphysCar() then configureVehicle(ent) end\n</code></pre> checkDoorAccess(client, access) Purpose <p>Verifies whether a client has a specific level of access to a door.</p> When Called <p>Use when opening menus or performing actions gated by door access.</p> Parameters <p>Player client Player requesting access.</p> <p>number access Required access level, defaults to DOOR_GUEST.</p> Returns <p>boolean True if the client meets the access requirement.</p> Example Usage <pre><code>  if door:checkDoorAccess(ply, DOOR_OWNER) then openDoor() end\n</code></pre> keysOwn(client) Purpose <p>Assigns vehicle ownership metadata to a player.</p> When Called <p>Use when a player purchases or claims a vehicle entity.</p> Parameters <p>Player client Player to set as owner.</p> Example Usage <pre><code>  vehicle:keysOwn(ply)\n</code></pre> keysLock() Purpose <p>Locks a vehicle entity via its Fire interface.</p> When Called <p>Use when a player locks their owned vehicle.</p> Example Usage <pre><code>  vehicle:keysLock()\n</code></pre> keysUnLock() Purpose <p>Unlocks a vehicle entity via its Fire interface.</p> When Called <p>Use when giving a player access back to their vehicle.</p> Example Usage <pre><code>  vehicle:keysUnLock()\n</code></pre> getDoorOwner() Purpose <p>Retrieves the owning player for a door or vehicle, if any.</p> When Called <p>Use when displaying ownership information.</p> Returns <p>Player|nil Owner entity or nil if unknown.</p> Example Usage <pre><code>  local owner = door:getDoorOwner()\n</code></pre> isLocked() Purpose <p>Returns whether the entity is flagged as locked through net vars.</p> When Called <p>Use when deciding if interactions should be blocked.</p> Returns <p>boolean True if the entity's locked net var is set.</p> Example Usage <pre><code>  if door:isLocked() then denyUse() end\n</code></pre> isDoorLocked() Purpose <p>Checks the underlying lock state of a door entity.</p> When Called <p>Use when syncing lock visuals or handling use attempts.</p> Returns <p>boolean True if the door reports itself as locked.</p> Example Usage <pre><code>  local locked = door:isDoorLocked()\n</code></pre> isFemale() Purpose <p>Infers whether the entity's model is tagged as female.</p> When Called <p>Use for gender-specific animations or sounds.</p> Returns <p>boolean True if GetModelGender returns \"female\".</p> Example Usage <pre><code>  if ent:isFemale() then setFemaleVoice(ent) end\n</code></pre> getDoorPartner() Purpose <p>Finds the paired door entity associated with this door.</p> When Called <p>Use when syncing double-door behavior or ownership.</p> Returns <p>Entity|nil Partner door entity when found.</p> Example Usage <pre><code>  local partner = door:getDoorPartner()\n</code></pre> sendNetVar(key, receiver) Purpose <p>Sends a networked variable for this entity to one or more clients.</p> When Called <p>Use immediately after changing lia.net values to sync them.</p> Parameters <p>string key Net variable name to send.</p> <p>Player receiver optional Optional player to send to; broadcasts when nil.</p> Example Usage <pre><code>  ent:sendNetVar(\"locked\", ply)\n</code></pre> clearNetVars(receiver) Purpose <p>Clears all stored net vars for this entity and notifies clients.</p> When Called <p>Use when an entity is being removed or reset.</p> Parameters <p>Player receiver optional Optional target to notify; broadcasts when nil.</p> Example Usage <pre><code>  ent:clearNetVars()\n</code></pre> removeDoorAccessData() Purpose <p>Resets stored door access data and closes any open menus.</p> When Called <p>Use when clearing door permissions or transferring ownership.</p> Example Usage <pre><code>  door:removeDoorAccessData()\n</code></pre> setLocked(state) Purpose <p>Sets the locked net var state for this entity.</p> When Called <p>Use when toggling lock status server-side.</p> Parameters <p>boolean state Whether the entity should be considered locked.</p> Example Usage <pre><code>  door:setLocked(true)\n</code></pre> setKeysNonOwnable(state) Purpose <p>Marks an entity as non-ownable for keys/door systems.</p> When Called <p>Use when preventing selling or owning of a door/vehicle.</p> Parameters <p>boolean state True to make the entity non-ownable.</p> Example Usage <pre><code>  door:setKeysNonOwnable(true)\n</code></pre> setNetVar(key, value, receiver) Purpose <p>Stores a networked variable for this entity and notifies listeners.</p> When Called <p>Use when updating shared entity state that clients need.</p> Parameters <p>string key Net variable name.</p> <p>any value Value to store and broadcast.</p> <p>Player receiver optional Optional player to send to; broadcasts when nil.</p> Example Usage <pre><code>  ent:setNetVar(\"color\", Color(255, 0, 0))\n</code></pre> setLocalVar(key, value) Purpose <p>Saves a local (server-only) variable on the entity.</p> When Called <p>Use for transient server state that should not be networked.</p> Parameters <p>string key Local variable name.</p> <p>any value Value to store.</p> Example Usage <pre><code>  ent:setLocalVar(\"cooldown\", CurTime())\n</code></pre> getLocalVar(key, default) Purpose <p>Reads a server-side local variable stored on the entity.</p> When Called <p>Use when retrieving transient server-only state.</p> Parameters <p>string key Local variable name.</p> <p>any default Value to return if unset.</p> Returns <p>any Stored local value or default.</p> Example Usage <pre><code>  local cooldown = ent:getLocalVar(\"cooldown\", 0)\n</code></pre> playFollowingSound(soundPath, volume, shouldFollow, maxDistance, startDelay, minDistance, pitch, soundLevel, dsp) Purpose <p>Plays a web sound locally on the client, optionally following the entity.</p> When Called <p>Use when the client must play a streamed sound attached to an entity.</p> Parameters <p>string soundPath URL or path to the sound.</p> <p>number volume Volume from 0-1.</p> <p>boolean shouldFollow Whether the sound follows the entity.</p> <p>number maxDistance Maximum audible distance.</p> <p>number startDelay Delay before playback starts.</p> <p>number minDistance Minimum distance for attenuation.</p> <p>number pitch Playback rate multiplier.</p> <p>number soundLevel Optional sound level for attenuation.</p> <p>number dsp Optional DSP effect index.</p> Example Usage <pre><code>  ent:playFollowingSound(url, 1, true, 1200)\n</code></pre> isDoor() Purpose <p>Determines whether this entity should be treated as a door.</p> When Called <p>Use when applying door-specific logic on an entity.</p> Returns <p>boolean True if the entity class matches common door types.</p> Example Usage <pre><code>  if ent:isDoor() then handleDoor(ent) end\n</code></pre> getNetVar(key, default) Purpose <p>Retrieves a networked variable stored on this entity.</p> When Called <p>Use when reading shared entity state on either server or client.</p> Parameters <p>string key Net variable name.</p> <p>any default Fallback value if none is set.</p> Returns <p>any Stored net var or default.</p> Example Usage <pre><code>  local locked = ent:getNetVar(\"locked\", false)\n</code></pre>"},{"location":"development/meta/inventory/","title":"Inventory","text":"<p>Inventory management system for the Lilia framework.</p> Overview  The inventory meta table provides comprehensive functionality for managing inventory data, item storage, and inventory operations in the Lilia framework. It handles inventory creation, item management, data persistence, capacity management, and inventory-specific operations. The meta table operates on both server and client sides, with the server managing inventory storage and validation while the client provides inventory data access and display. It includes integration with the item system for item storage, database system for inventory persistence, character system for character inventories, and network system for inventory synchronization. The meta table ensures proper inventory data synchronization, item capacity management, item validation, and comprehensive inventory lifecycle management from creation to deletion.  getData(key, default) Purpose <p>Retrieves a stored data value on the inventory.</p> When Called <p>Use whenever reading custom inventory metadata.</p> Parameters <p>string key Data key to read.</p> <p>any default Value returned when the key is missing.</p> Returns <p>any Stored value or the provided default.</p> Example Usage <pre><code>  local owner = inv:getData(\"char\")\n</code></pre> extend(className) Purpose <p>Creates a subclass of Inventory with its own metatable.</p> When Called <p>Use when defining a new inventory type.</p> Parameters <p>string className Registry name for the new subclass.</p> Returns <p>table Newly created subclass table.</p> Example Usage <pre><code>  local Backpack = Inventory:extend(\"liaBackpack\")\n</code></pre> configure() Purpose <p>Sets up inventory defaults; meant to be overridden.</p> When Called <p>Invoked during type registration to configure behavior.</p> Example Usage <pre><code>  function Inventory:configure() self.config.size = {4,4} end\n</code></pre> configure() Purpose <p>Sets up inventory defaults; meant to be overridden.</p> When Called <p>Invoked during type registration to configure behavior.</p> Example Usage <pre><code>  function Inventory:configure() self.config.size = {4,4} end\n</code></pre> addDataProxy(key, onChange) Purpose <p>Registers a proxy callback for a specific data key.</p> When Called <p>Use when you need to react to data changes.</p> Parameters <p>string key Data key to watch.</p> <p>function onChange Callback receiving old and new values.</p> Example Usage <pre><code>  inv:addDataProxy(\"locked\", function(o,n) end)\n</code></pre> getItemsByUniqueID(uniqueID, onlyMain) Purpose <p>Returns all items in the inventory matching a uniqueID.</p> When Called <p>Use when finding all copies of a specific item type.</p> Parameters <p>string uniqueID Item unique identifier.</p> <p>boolean onlyMain Restrict search to main inventory when true.</p> Returns <p>table Array of matching item instances.</p> Example Usage <pre><code>  local meds = inv:getItemsByUniqueID(\"medkit\")\n</code></pre> register(typeID) Purpose <p>Registers this inventory type with the system.</p> When Called <p>Invoke once per subclass to set type ID and defaults.</p> Parameters <p>string typeID Unique identifier for this inventory type.</p> Example Usage <pre><code>  Inventory:register(\"bag\")\n</code></pre> new() Purpose <p>Creates a new instance of this inventory type.</p> When Called <p>Use when a character or container needs a fresh inventory.</p> Returns <p>table Deferred inventory instance creation.</p> Example Usage <pre><code>  local inv = Inventory:new()\n</code></pre> tostring() Purpose <p>Formats the inventory as a readable string with its ID.</p> When Called <p>Use for logging or debugging output.</p> Returns <p>string Localized class name and ID.</p> Example Usage <pre><code>  print(inv:tostring())\n</code></pre> getType() Purpose <p>Returns the inventory type definition table.</p> When Called <p>Use when accessing type-level configuration.</p> Returns <p>table Registered inventory type data.</p> Example Usage <pre><code>  local typeData = inv:getType()\n</code></pre> onDataChanged(key, oldValue, newValue) Purpose <p>Fires proxy callbacks when a tracked data value changes.</p> When Called <p>Internally after setData updates.</p> Parameters <p>string key Data key that changed.</p> <p>any oldValue Previous value.</p> <p>any newValue New value.</p> Example Usage <pre><code>  inv:onDataChanged(\"locked\", false, true)\n</code></pre> getItems() Purpose <p>Returns the table of item instances in this inventory.</p> When Called <p>Use when iterating all items.</p> Returns <p>table Item instances keyed by item ID.</p> Example Usage <pre><code>  for id, itm in pairs(inv:getItems()) do end\n</code></pre> getItemsOfType(itemType) Purpose <p>Collects items of a given type from the inventory.</p> When Called <p>Use when filtering for a specific item uniqueID.</p> Parameters <p>string itemType Unique item identifier to match.</p> Returns <p>table Array of matching items.</p> Example Usage <pre><code>  local foods = inv:getItemsOfType(\"food\")\n</code></pre> getFirstItemOfType(itemType) Purpose <p>Returns the first item matching a uniqueID.</p> When Called <p>Use when only one instance of a type is needed.</p> Parameters <p>string itemType Unique item identifier to find.</p> Returns <p>table|nil Item instance or nil if none found.</p> Example Usage <pre><code>  local gun = inv:getFirstItemOfType(\"pistol\")\n</code></pre> hasItem(itemType) Purpose <p>Checks whether the inventory contains an item type.</p> When Called <p>Use before consuming or requiring an item.</p> Parameters <p>string itemType Unique item identifier to check.</p> Returns <p>boolean True if at least one matching item exists.</p> Example Usage <pre><code>  if inv:hasItem(\"keycard\") then unlock() end\n</code></pre> getItemCount(itemType) Purpose <p>Counts items, optionally filtering by uniqueID.</p> When Called <p>Use for capacity checks or UI badge counts.</p> Parameters <p>string itemType optional Unique ID to filter by; nil counts all.</p> Returns <p>number Total quantity of matching items.</p> Example Usage <pre><code>  local ammoCount = inv:getItemCount(\"ammo\")\n</code></pre> getID() Purpose <p>Returns the numeric identifier for this inventory.</p> When Called <p>Use when networking, saving, or comparing inventories.</p> Returns <p>number Inventory ID.</p> Example Usage <pre><code>  local id = inv:getID()\n</code></pre> addItem(item, noReplicate) Purpose <p>Inserts an item into this inventory and persists its invID.</p> When Called <p>Use when adding an item to the inventory on the server.</p> Parameters <p>Item item Item instance to add.</p> <p>boolean noReplicate Skip replication hooks when true.</p> Returns <p>Inventory The inventory for chaining.</p> Example Usage <pre><code>  inv:addItem(item)\n</code></pre> add(item) Purpose <p>Alias to addItem for convenience.</p> When Called <p>Use wherever you would call addItem.</p> Parameters <p>Item item Item instance to add.</p> Returns <p>Inventory The inventory for chaining.</p> Example Usage <pre><code>  inv:add(item)\n</code></pre> syncItemAdded(item) Purpose <p>Notifies clients about an item newly added to this inventory.</p> When Called <p>Invoked after addItem to replicate state.</p> Parameters <p>Item item Item instance already inserted.</p> Example Usage <pre><code>  inv:syncItemAdded(item)\n</code></pre> initializeStorage(initialData) Purpose <p>Creates a database record for a new inventory and its data.</p> When Called <p>Use during initial inventory creation.</p> Parameters <p>table initialData Key/value pairs to seed invdata rows; may include char.</p> Returns <p>Promise Resolves with new inventory ID.</p> Example Usage <pre><code>  inv:initializeStorage({char = charID})\n</code></pre> restoreFromStorage() Purpose <p>Hook for restoring inventory data from storage.</p> When Called <p>Override to load custom data during restoration.</p> Example Usage <pre><code>  function Inventory:restoreFromStorage() end\n</code></pre> restoreFromStorage() Purpose <p>Hook for restoring inventory data from storage.</p> When Called <p>Override to load custom data during restoration.</p> Example Usage <pre><code>  function Inventory:restoreFromStorage() end\n</code></pre> removeItem(itemID, preserveItem) Purpose <p>Removes an item from this inventory and updates clients/DB.</p> When Called <p>Use when deleting or moving items out of the inventory.</p> Parameters <p>number itemID ID of the item to remove.</p> <p>boolean preserveItem Keep the instance and DB row when true.</p> Returns <p>Promise Resolves after removal finishes.</p> Example Usage <pre><code>  inv:removeItem(itemID)\n</code></pre> remove(itemID) Purpose <p>Alias for removeItem.</p> When Called <p>Use interchangeably with removeItem.</p> Parameters <p>number itemID ID of the item to remove.</p> Returns <p>Promise Resolves after removal.</p> Example Usage <pre><code>  inv:remove(id)\n</code></pre> setData(key, value) Purpose <p>Updates inventory data, persists it, and notifies listeners.</p> When Called <p>Use to change stored metadata such as character assignment.</p> Parameters <p>string key Data key to set.</p> <p>any value New value or nil to delete.</p> Returns <p>Inventory The inventory for chaining.</p> Example Usage <pre><code>  inv:setData(\"locked\", true)\n</code></pre> canAccess(action, context) Purpose <p>Evaluates access rules for a given action context.</p> When Called <p>Use before allowing inventory interactions.</p> Parameters <p>string action Action name (e.g., \"repl\", \"transfer\").</p> <p>table context Additional data such as client.</p> Returns <p>boolean|nil, string|nil Decision and optional reason if a rule handled it.</p> Example Usage <pre><code>  local ok = inv:canAccess(\"repl\", {client = ply})\n</code></pre> addAccessRule(rule, priority) Purpose <p>Inserts an access rule into the rule list.</p> When Called <p>Use when configuring permissions for this inventory type.</p> Parameters <p>function rule Function returning decision and reason.</p> <p>number priority optional Optional insert position.</p> Returns <p>Inventory The inventory for chaining.</p> Example Usage <pre><code>  inv:addAccessRule(myRule, 1)\n</code></pre> removeAccessRule(rule) Purpose <p>Removes a previously added access rule.</p> When Called <p>Use when unregistering dynamic permission logic.</p> Parameters <p>function rule The rule function to remove.</p> Returns <p>Inventory The inventory for chaining.</p> Example Usage <pre><code>  inv:removeAccessRule(myRule)\n</code></pre> getRecipients() Purpose <p>Determines which players should receive inventory replication.</p> When Called <p>Use before sending inventory data to clients.</p> Returns <p>table List of player recipients allowed by access rules.</p> Example Usage <pre><code>  local recips = inv:getRecipients()\n</code></pre> onInstanced() Purpose <p>Hook called when an inventory instance is created.</p> When Called <p>Override to perform custom initialization.</p> Example Usage <pre><code>  function Inventory:onInstanced() end\n</code></pre> onInstanced() Purpose <p>Hook called when an inventory instance is created.</p> When Called <p>Override to perform custom initialization.</p> Example Usage <pre><code>  function Inventory:onInstanced() end\n</code></pre> onLoaded() Purpose <p>Hook called after inventory data is loaded.</p> When Called <p>Override to react once storage data is retrieved.</p> Example Usage <pre><code>  function Inventory:onLoaded() end\n</code></pre> onLoaded() Purpose <p>Hook called after inventory data is loaded.</p> When Called <p>Override to react once storage data is retrieved.</p> Example Usage <pre><code>  function Inventory:onLoaded() end\n</code></pre> loadItems() Purpose <p>Loads item instances from the database into this inventory.</p> When Called <p>Use during inventory initialization to restore contents.</p> Returns <p>Promise Resolves with the loaded items table.</p> Example Usage <pre><code>  inv:loadItems():next(function(items) end)\n</code></pre> onItemsLoaded(items) Purpose <p>Hook called after items are loaded into the inventory.</p> When Called <p>Override to run logic after contents are ready.</p> Parameters <p>table items Loaded items table.</p> Example Usage <pre><code>  function Inventory:onItemsLoaded(items) end\n</code></pre> onItemsLoaded(items) Purpose <p>Hook called after items are loaded into the inventory.</p> When Called <p>Override to run logic after contents are ready.</p> Parameters <p>table items Loaded items table.</p> Example Usage <pre><code>  function Inventory:onItemsLoaded(items) end\n</code></pre> instance(initialData) Purpose <p>Creates and registers an inventory instance with initial data.</p> When Called <p>Use to instantiate a server-side inventory of this type.</p> Parameters <p>table initialData Data used during creation (e.g., char assignment).</p> Returns <p>Promise Resolves with the new inventory instance.</p> Example Usage <pre><code>  Inventory:instance({char = charID})\n</code></pre> syncData(key, recipients) Purpose <p>Sends a single inventory data key to recipients.</p> When Called <p>Use after setData to replicate a specific field.</p> Parameters <p>string key Data key to send.</p> <p>Player|table recipients optional Targets to notify; defaults to recipients with access.</p> Example Usage <pre><code>  inv:syncData(\"locked\")\n</code></pre> sync(recipients) Purpose <p>Sends full inventory state and contained items to recipients.</p> When Called <p>Use when initializing or resyncing an inventory for clients.</p> Parameters <p>Player|table recipients optional Targets to receive the update; defaults to access list.</p> Example Usage <pre><code>  inv:sync(ply)\n</code></pre> delete() Purpose <p>Deletes this inventory via the inventory manager.</p> When Called <p>Use when permanently removing an inventory record.</p> Example Usage <pre><code>  inv:delete()\n</code></pre> destroy() Purpose <p>Clears inventory items, removes it from cache, and notifies clients.</p> When Called <p>Use when unloading or destroying an inventory instance.</p> Example Usage <pre><code>  inv:destroy()\n</code></pre> show(parent) Purpose <p>Opens the inventory UI on the client.</p> When Called <p>Use to display this inventory to the player.</p> Parameters <p>Panel parent Optional parent panel.</p> Returns <p>Panel The created inventory panel.</p> Example Usage <pre><code>  inv:show()\n</code></pre>"},{"location":"development/meta/item/","title":"Item","text":"<p>Item management system for the Lilia framework.</p> Overview  The item meta table provides comprehensive functionality for managing item data, properties, and operations in the Lilia framework. It handles item creation, data persistence, inventory management, stacking, rotation, and item-specific operations. The meta table operates on both server and client sides, with the server managing item storage and validation while the client provides item data access and display. It includes integration with the inventory system for item storage, database system for item persistence, and rendering system for item display. The meta table ensures proper item data synchronization, quantity management, rotation handling, and comprehensive item lifecycle management from creation to destruction.  isRotated() Purpose <p>Reports whether the item is stored in a rotated state.</p> When Called <p>Use when calculating grid dimensions or rendering the item icon.</p> Returns <p>boolean True if the item is rotated.</p> Example Usage <pre><code>  if item:isRotated() then swapDims() end\n</code></pre> getWidth() Purpose <p>Returns the item's width considering rotation and defaults.</p> When Called <p>Use when placing the item into a grid inventory.</p> Returns <p>number Width in grid cells.</p> Example Usage <pre><code>  local w = item:getWidth()\n</code></pre> getHeight() Purpose <p>Returns the item's height considering rotation and defaults.</p> When Called <p>Use when calculating how much vertical space an item needs.</p> Returns <p>number Height in grid cells.</p> Example Usage <pre><code>  local h = item:getHeight()\n</code></pre> getQuantity() Purpose <p>Returns the current stack quantity for this item.</p> When Called <p>Use when showing stack counts or validating transfers.</p> Returns <p>number Quantity within the stack.</p> Example Usage <pre><code>  local count = item:getQuantity()\n</code></pre> tostring() Purpose <p>Builds a readable string identifier for the item.</p> When Called <p>Use for logging, debugging, or console output.</p> Returns <p>string Formatted identifier including uniqueID and item id.</p> Example Usage <pre><code>  print(item:tostring())\n</code></pre> getID() Purpose <p>Retrieves the numeric identifier for this item instance.</p> When Called <p>Use when persisting, networking, or comparing items.</p> Returns <p>number Unique item ID.</p> Example Usage <pre><code>  local id = item:getID()\n</code></pre> getModel() Purpose <p>Returns the model path assigned to this item.</p> When Called <p>Use when spawning an entity or rendering the item icon.</p> Returns <p>string Model file path.</p> Example Usage <pre><code>  local mdl = item:getModel()\n</code></pre> getSkin() Purpose <p>Returns the skin index assigned to this item.</p> When Called <p>Use when spawning the entity or applying cosmetics.</p> Returns <p>number|nil Skin index or nil when not set.</p> Example Usage <pre><code>  local skin = item:getSkin()\n</code></pre> getBodygroups() Purpose <p>Provides the bodygroup configuration for the item model.</p> When Called <p>Use when spawning or rendering to ensure correct bodygroups.</p> Returns <p>table Key-value pairs of bodygroup indexes to values.</p> Example Usage <pre><code>  local groups = item:getBodygroups()\n</code></pre> getPrice() Purpose <p>Calculates the current sale price for the item.</p> When Called <p>Use when selling, buying, or displaying item cost.</p> Returns <p>number Price value, possibly adjusted by calcPrice.</p> Example Usage <pre><code>  local cost = item:getPrice()\n</code></pre> call(method, client, entity) Purpose <p>Invokes an item method while temporarily setting context.</p> When Called <p>Use when you need to call an item function with player/entity context.</p> Parameters <p>string method Name of the item method to invoke.</p> <p>Player client optional Player to treat as the caller.</p> <p>Entity entity optional Entity representing the item.</p> Returns <p>any Return values from the invoked method.</p> Example Usage <pre><code>  item:call(\"onUse\", ply, ent)\n</code></pre> getOwner() Purpose <p>Attempts to find the player that currently owns this item.</p> When Called <p>Use when routing notifications or networking to the item owner.</p> Returns <p>Player|nil Owning player if found.</p> Example Usage <pre><code>  local owner = item:getOwner()\n</code></pre> getData(key, default) Purpose <p>Reads a stored data value from the item or its entity.</p> When Called <p>Use for custom item metadata such as durability or rotation.</p> Parameters <p>string key Data key to read.</p> <p>any default Value to return when the key is missing.</p> Returns <p>any Stored value or default.</p> Example Usage <pre><code>  local durability = item:getData(\"durability\", 100)\n</code></pre> getAllData() Purpose <p>Returns a merged table of all item data, including entity netvars.</p> When Called <p>Use when syncing the entire data payload to clients.</p> Returns <p>table Combined data table.</p> Example Usage <pre><code>  local data = item:getAllData()\n</code></pre> hook(name, func) Purpose <p>Registers a pre-run hook for an item interaction.</p> When Called <p>Use when adding custom behavior before an action executes.</p> Parameters <p>string name Hook name to bind.</p> <p>function func Callback to execute.</p> Example Usage <pre><code>  item:hook(\"use\", function(itm) end)\n</code></pre> postHook(name, func) Purpose <p>Registers a post-run hook for an item interaction.</p> When Called <p>Use when you need to react after an action completes.</p> Parameters <p>string name Hook name to bind.</p> <p>function func Callback to execute with results.</p> Example Usage <pre><code>  item:postHook(\"use\", function(itm, result) end)\n</code></pre> onRegistered() Purpose <p>Performs setup tasks after an item definition is registered.</p> When Called <p>Automatically invoked once the item type is loaded.</p> Example Usage <pre><code>  item:onRegistered()\n</code></pre> print(detail) Purpose <p>Prints a concise or detailed identifier for the item.</p> When Called <p>Use during debugging or admin commands.</p> Parameters <p>boolean detail Include owner and grid info when true.</p> Example Usage <pre><code>  item:print(true)\n</code></pre> printData() Purpose <p>Outputs item metadata and all stored data fields.</p> When Called <p>Use for diagnostics to inspect an item's state.</p> Example Usage <pre><code>  item:printData()\n</code></pre> getName() Purpose <p>Returns the display name of the item.</p> When Called <p>Use for UI labels, tooltips, and logs.</p> Returns <p>string Item name.</p> Example Usage <pre><code>  local name = item:getName()\n</code></pre> getDesc() Purpose <p>Returns the description text for the item.</p> When Called <p>Use in tooltips or inventory details.</p> Returns <p>string Item description.</p> Example Usage <pre><code>  local desc = item:getDesc()\n</code></pre> removeFromInventory(preserveItem) Purpose <p>Removes the item from its current inventory instance.</p> When Called <p>Use when dropping, deleting, or transferring the item out.</p> Parameters <p>boolean preserveItem When true, keeps the instance for later use.</p> Returns <p>Promise Deferred resolution for removal completion.</p> Example Usage <pre><code>  item:removeFromInventory():next(function() end)\n</code></pre> delete() Purpose <p>Deletes the item record from storage after destroying it in-game.</p> When Called <p>Use when an item should be permanently removed.</p> Returns <p>Promise Resolves after the database delete and callbacks run.</p> Example Usage <pre><code>  item:delete()\n</code></pre> remove() Purpose <p>Removes the world entity, inventory reference, and database entry.</p> When Called <p>Use when the item is consumed or otherwise removed entirely.</p> Returns <p>Promise Resolves once removal and deletion complete.</p> Example Usage <pre><code>  item:remove()\n</code></pre> destroy() Purpose <p>Broadcasts item deletion to clients and frees the instance.</p> When Called <p>Use internally before removing an item from memory.</p> Example Usage <pre><code>  item:destroy()\n</code></pre> onDisposed() Purpose <p>Hook called after an item is destroyed; intended for overrides.</p> When Called <p>Automatically triggered when the item instance is disposed.</p> Example Usage <pre><code>  function ITEM:onDisposed() end\n</code></pre> onDisposed() Purpose <p>Hook called after an item is destroyed; intended for overrides.</p> When Called <p>Automatically triggered when the item instance is disposed.</p> Example Usage <pre><code>  function ITEM:onDisposed() end\n</code></pre> getEntity() Purpose <p>Finds the world entity representing this item instance.</p> When Called <p>Use when needing the spawned entity from the item data.</p> Returns <p>Entity|nil Spawned item entity if present.</p> Example Usage <pre><code>  local ent = item:getEntity()\n</code></pre> spawn(position, angles) Purpose <p>Spawns a world entity for this item at the given position and angle.</p> When Called <p>Use when dropping an item into the world.</p> Parameters <p>Vector|table|Entity position Where to spawn, or the player dropping the item.</p> <p>Angle|Vector|table angles optional Orientation for the spawned entity.</p> Returns <p>Entity|nil Spawned entity on success.</p> Example Usage <pre><code>  local ent = item:spawn(ply, Angle(0, 0, 0))\n</code></pre> transfer(newInventory, bBypass) Purpose <p>Moves the item into another inventory if access rules allow.</p> When Called <p>Use when transferring items between containers or players.</p> Parameters <p>Inventory newInventory Destination inventory.</p> <p>boolean bBypass Skip access checks when true.</p> Returns <p>boolean True if the transfer was initiated.</p> Example Usage <pre><code>  item:transfer(otherInv)\n</code></pre> onInstanced() Purpose <p>Hook called when a new item instance is created.</p> When Called <p>Automatically invoked after instancing; override to customize.</p> Example Usage <pre><code>  function ITEM:onInstanced() end\n</code></pre> onInstanced() Purpose <p>Hook called when a new item instance is created.</p> When Called <p>Automatically invoked after instancing; override to customize.</p> Example Usage <pre><code>  function ITEM:onInstanced() end\n</code></pre> onSync(recipient) Purpose <p>Hook called after the item data is synchronized to clients.</p> When Called <p>Triggered by sync calls; override for custom behavior.</p> Parameters <p>Player recipient optional The player who received the sync, or nil for broadcast.</p> Example Usage <pre><code>  function ITEM:onSync(ply) end\n</code></pre> onSync(recipient) Purpose <p>Hook called after the item data is synchronized to clients.</p> When Called <p>Triggered by sync calls; override for custom behavior.</p> Parameters <p>Player recipient optional The player who received the sync, or nil for broadcast.</p> Example Usage <pre><code>  function ITEM:onSync(ply) end\n</code></pre> onRemoved() Purpose <p>Hook called after the item has been removed from the world/inventory.</p> When Called <p>Automatically invoked once deletion finishes.</p> Example Usage <pre><code>  function ITEM:onRemoved() end\n</code></pre> onRemoved() Purpose <p>Hook called after the item has been removed from the world/inventory.</p> When Called <p>Automatically invoked once deletion finishes.</p> Example Usage <pre><code>  function ITEM:onRemoved() end\n</code></pre> onRestored() Purpose <p>Hook called after an item is restored from persistence.</p> When Called <p>Automatically invoked after loading an item from the database.</p> Example Usage <pre><code>  function ITEM:onRestored() end\n</code></pre> onRestored() Purpose <p>Hook called after an item is restored from persistence.</p> When Called <p>Automatically invoked after loading an item from the database.</p> Example Usage <pre><code>  function ITEM:onRestored() end\n</code></pre> sync(recipient) Purpose <p>Sends this item instance to a recipient or all clients for syncing.</p> When Called <p>Use after creating or updating an item instance.</p> Parameters <p>Player recipient optional Specific player to sync; broadcasts when nil.</p> Example Usage <pre><code>  item:sync(ply)\n</code></pre> setData(key, value, receivers, noSave, noCheckEntity) Purpose <p>Sets a custom data value on the item, networking and saving as needed.</p> When Called <p>Use when updating item metadata that clients or persistence require.</p> Parameters <p>string key Data key to set.</p> <p>any value Value to store.</p> <p>Player|table receivers optional Targets to send the update to; defaults to owner.</p> <p>boolean noSave Skip database write when true.</p> <p>boolean noCheckEntity Skip updating the world entity netvar when true.</p> Example Usage <pre><code>  item:setData(\"durability\", 80, item:getOwner())\n</code></pre> addQuantity(quantity, receivers, noCheckEntity) Purpose <p>Increases the item quantity by the given amount.</p> When Called <p>Use for stacking items or consuming partial quantities.</p> Parameters <p>number quantity Amount to add (can be negative).</p> <p>Player|table receivers optional Targets to notify; defaults to owner.</p> <p>boolean noCheckEntity Skip updating the entity netvar when true.</p> Example Usage <pre><code>  item:addQuantity(-1, ply)\n</code></pre> setQuantity(quantity, receivers, noCheckEntity) Purpose <p>Sets the item quantity, updating entities, clients, and storage.</p> When Called <p>Use after splitting stacks or consuming items.</p> Parameters <p>number quantity New stack amount.</p> <p>Player|table receivers optional Targets to notify; defaults to owner.</p> <p>boolean noCheckEntity Skip updating the world entity netvar when true.</p> Example Usage <pre><code>  item:setQuantity(5, ply)\n</code></pre> interact(action, client, entity, data) Purpose <p>Handles an item interaction action, running hooks and callbacks.</p> When Called <p>Use when a player selects an action from an item's context menu.</p> Parameters <p>string action Action identifier from the item's functions table.</p> <p>Player client Player performing the action.</p> <p>Entity entity optional World entity representing the item, if any.</p> <p>any data Additional data for multi-option actions.</p> Returns <p>boolean True if the action was processed; false otherwise.</p> Example Usage <pre><code>  item:interact(\"use\", ply, ent)\n</code></pre> getCategory() Purpose <p>Returns the item's localized category label.</p> When Called <p>Use when grouping or displaying items by category.</p> Returns <p>string Localized category name, or \"misc\" if undefined.</p> Example Usage <pre><code>  local category = item:getCategory()\n</code></pre>"},{"location":"development/meta/panel/","title":"Panel","text":"<p>Panel management system for the Lilia framework.</p> Overview  The panel meta table provides comprehensive functionality for managing VGUI panels, UI interactions, and panel operations in the Lilia framework. It handles panel event listening, inventory synchronization, UI updates, and panel-specific operations. The meta table operates primarily on the client side, with the server providing data that panels can listen to and display. It includes integration with the inventory system for inventory change notifications, character system for character data display, network system for data synchronization, and UI system for panel management. The meta table ensures proper panel event handling, inventory synchronization, UI updates, and comprehensive panel lifecycle management from creation to destruction.  liaListenForInventoryChanges(inventory) Purpose <p>Registers the panel to mirror inventory events to its methods.</p> When Called <p>Use when a panel needs to react to changes in a specific inventory.</p> Parameters <p>Inventory inventory Inventory instance whose events should be listened to.</p> Example Usage <pre><code>  panel:liaListenForInventoryChanges(inv)\n</code></pre> liaDeleteInventoryHooks(id) Purpose <p>Removes inventory event hooks previously registered on the panel.</p> When Called <p>Call when tearing down a panel or when an inventory is no longer tracked.</p> Parameters <p>number id optional Optional inventory ID to target; nil clears all known hooks.</p> Example Usage <pre><code>  panel:liaDeleteInventoryHooks(invID)\n</code></pre> setScaledPos(x, y) Purpose <p>Sets the panel position using screen-scaled coordinates.</p> When Called <p>Use when positioning should respect different resolutions.</p> Parameters <p>number x Horizontal position before scaling.</p> <p>number y Vertical position before scaling.</p> Example Usage <pre><code>  panel:setScaledPos(32, 48)\n</code></pre> setScaledSize(w, h) Purpose <p>Sets the panel size using screen-scaled dimensions.</p> When Called <p>Use when sizing should scale with screen resolution.</p> Parameters <p>number w Width before scaling.</p> <p>number h Height before scaling.</p> Example Usage <pre><code>  panel:setScaledSize(120, 36)\n</code></pre> On(name, fn) Purpose <p>Appends an additional handler to a panel function without removing the existing one.</p> When Called <p>Use to extend an existing panel callback (e.g., Paint, Think) while preserving prior logic.</p> Parameters <p>string name Panel function name to wrap.</p> <p>function fn Function to run after the original callback.</p> Example Usage <pre><code>  panel:On(\"Paint\", function(s, w, h) draw.RoundedBox(0, 0, 0, w, h, col) end)\n</code></pre> SetupTransition(name, speed, fn) Purpose <p>Creates a smoothly lerped state property driven by a predicate function.</p> When Called <p>Use when a panel needs an animated transition flag (e.g., hover fades).</p> Parameters <p>string name Property name to animate on the panel.</p> <p>number speed Lerp speed multiplier.</p> <p>function fn Predicate returning true when the property should approach 1.</p> Example Usage <pre><code>  panel:SetupTransition(\"HoverAlpha\", 6, function(s) return s:IsHovered() end)\n</code></pre> FadeHover(col, speed, rad) Purpose <p>Draws a faded overlay that brightens when the panel is hovered.</p> When Called <p>Apply to panels that need a simple hover highlight.</p> Parameters <p>Color col Overlay color and base alpha.</p> <p>number speed Transition speed toward hover state.</p> <p>number rad optional Optional corner radius for rounded boxes.</p> Example Usage <pre><code>  panel:FadeHover(Color(255,255,255,40), 8, 4)\n</code></pre> BarHover(col, height, speed) Purpose <p>Animates a horizontal bar under the panel while hovered.</p> When Called <p>Use for button underlines or similar hover indicators.</p> Parameters <p>Color col Bar color.</p> <p>number height Bar thickness in pixels.</p> <p>number speed Transition speed toward hover state.</p> Example Usage <pre><code>  panel:BarHover(Color(0,150,255), 2, 10)\n</code></pre> FillHover(col, dir, speed, mat) Purpose <p>Fills the panel from one side while hovered, optionally using a material.</p> When Called <p>Use when a directional hover fill effect is desired.</p> Parameters <p>Color col Fill color.</p> <p>number dir Direction constant (LEFT, RIGHT, TOP, BOTTOM).</p> <p>number speed Transition speed toward hover state.</p> <p>IMaterial mat optional Optional material to draw instead of a solid color.</p> Example Usage <pre><code>  panel:FillHover(Color(255,255,255,20), LEFT, 6)\n</code></pre> Background(col, rad) Purpose <p>Paints a solid background for the panel with optional rounded corners.</p> When Called <p>Use when a panel needs a consistent background fill.</p> Parameters <p>Color col Fill color.</p> <p>number rad optional Corner radius; nil or 0 draws a square rect.</p> Example Usage <pre><code>  panel:Background(Color(20,20,20,230), 6)\n</code></pre> Material(mat, col) Purpose <p>Draws a textured material across the panel.</p> When Called <p>Use when a static material should cover the panel area.</p> Parameters <p>IMaterial mat Material to render.</p> <p>Color col Color tint applied to the material.</p> Example Usage <pre><code>  panel:Material(Material(\"vgui/gradient-l\"), Color(255,255,255))\n</code></pre> TiledMaterial(mat, tw, th, col) Purpose <p>Tiles a material over the panel at a fixed texture size.</p> When Called <p>Use when repeating patterns should fill the panel.</p> Parameters <p>IMaterial mat Material to tile.</p> <p>number tw Tile width in texture units.</p> <p>number th Tile height in texture units.</p> <p>Color col Color tint for the material.</p> Example Usage <pre><code>  panel:TiledMaterial(myMat, 64, 64, Color(255,255,255))\n</code></pre> Outline(col, width) Purpose <p>Draws an outlined rectangle around the panel.</p> When Called <p>Use to give a panel a simple border.</p> Parameters <p>Color col Outline color.</p> <p>number width Border thickness in pixels.</p> Example Usage <pre><code>  panel:Outline(Color(255,255,255), 2)\n</code></pre> LinedCorners(col, cornerLen) Purpose <p>Draws minimal corner lines on opposite corners of the panel.</p> When Called <p>Use for a lightweight corner accent instead of a full border.</p> Parameters <p>Color col Corner line color.</p> <p>number cornerLen Length of each corner arm in pixels.</p> Example Usage <pre><code>  panel:LinedCorners(Color(255,255,255), 12)\n</code></pre> SideBlock(col, size, side) Purpose <p>Adds a solid strip to one side of the panel.</p> When Called <p>Use for side indicators or separators on panels.</p> Parameters <p>Color col Strip color.</p> <p>number size Strip thickness in pixels.</p> <p>number side Side constant (LEFT, RIGHT, TOP, BOTTOM).</p> Example Usage <pre><code>  panel:SideBlock(Color(0,140,255), 4, LEFT)\n</code></pre> Text(text, font, col, alignment, paint) Purpose <p>Renders a single line of text within the panel or sets label properties directly.</p> When Called <p>Use to quickly add centered or aligned text to a panel.</p> Parameters <p>string text Text to display.</p> <p>string font Font name to use.</p> <p>Color col Text color.</p> <p>number alignment TEXT_ALIGN_* constant controlling horizontal alignment.</p> <p>boolean paint Force paint-based rendering even if label setters exist.</p> Example Usage <pre><code>  panel:Text(\"Hello\", \"Trebuchet24\", color_white, TEXT_ALIGN_CENTER)\n</code></pre> DualText(alignment, centerSpacing) Purpose <p>Draws two stacked text lines with independent styling.</p> When Called <p>Use when a panel needs a title and subtitle aligned together.</p> Parameters <p>number alignment TEXT_ALIGN_* horizontal alignment.</p> <p>number centerSpacing Offset to spread the two lines from the center point.</p> Example Usage <pre><code>  panel:DualText(\"Title\", \"Trebuchet24\", lia.colors.primary, \"Detail\", \"Trebuchet18\", color_white)\n</code></pre> Blur(amount) Purpose <p>Draws a post-process blur behind the panel bounds.</p> When Called <p>Use to blur the world/UI behind a panel while it is painted.</p> Parameters <p>number amount Blur intensity multiplier.</p> Example Usage <pre><code>  panel:Blur(8)\n</code></pre> CircleClick(col, speed, trad) Purpose <p>Creates a ripple effect centered on the click position.</p> When Called <p>Use for buttons that need animated click feedback.</p> Parameters <p>Color col Ripple color and opacity.</p> <p>number speed Lerp speed for expansion and fade.</p> <p>number trad optional Target radius override; defaults to panel width.</p> Example Usage <pre><code>  panel:CircleClick(Color(255,255,255,40), 5)\n</code></pre> CircleHover(col, speed, trad) Purpose <p>Draws a circular highlight that follows the cursor while hovering.</p> When Called <p>Use for hover feedback centered on the cursor position.</p> Parameters <p>Color col Highlight color and base opacity.</p> <p>number speed Transition speed for appearing/disappearing.</p> <p>number trad optional Target radius; defaults to panel width.</p> Example Usage <pre><code>  panel:CircleHover(Color(255,255,255,30), 6)\n</code></pre> SquareCheckbox(inner, outer, speed) Purpose <p>Renders an animated square checkbox fill tied to the panel's checked state.</p> When Called <p>Use on checkbox panels to visualize toggled state.</p> Parameters <p>Color inner Color of the filled square.</p> <p>Color outer Color of the outline/background.</p> <p>number speed Transition speed for filling.</p> Example Usage <pre><code>  checkbox:SquareCheckbox()\n</code></pre> CircleCheckbox(inner, outer, speed) Purpose <p>Renders an animated circular checkbox tied to the panel's checked state.</p> When Called <p>Use on checkbox panels that should appear circular.</p> Parameters <p>Color inner Color of the inner filled circle.</p> <p>Color outer Outline color.</p> <p>number speed Transition speed for filling.</p> Example Usage <pre><code>  checkbox:CircleCheckbox()\n</code></pre> AvatarMask(mask) Purpose <p>Applies a stencil mask to an AvatarImage child using a custom shape.</p> When Called <p>Use when an avatar needs to be clipped to a non-rectangular mask.</p> Parameters <p>function mask Draw callback that defines the stencil shape.</p> Example Usage <pre><code>  panel:AvatarMask(function(_, w, h) drawCircle(w/2, h/2, w/2) end)\n</code></pre> CircleAvatar() Purpose <p>Masks the panel's avatar as a circle.</p> When Called <p>Use when a circular avatar presentation is desired.</p> Example Usage <pre><code>  panel:CircleAvatar()\n</code></pre> Circle(col) Purpose <p>Paints a filled circle that fits the panel bounds.</p> When Called <p>Use for circular panels or backgrounds.</p> Parameters <p>Color col Circle color.</p> Example Usage <pre><code>  panel:Circle(Color(255,255,255))\n</code></pre> CircleFadeHover(col, speed) Purpose <p>Shows a fading circular overlay at the center while hovered.</p> When Called <p>Use for subtle hover feedback on circular elements.</p> Parameters <p>Color col Overlay color and base alpha.</p> <p>number speed Transition speed toward hover state.</p> Example Usage <pre><code>  panel:CircleFadeHover(Color(255,255,255,30), 6)\n</code></pre> CircleExpandHover(col, speed) Purpose <p>Draws an expanding circle from the panel center while hovered.</p> When Called <p>Use when a growing highlight is needed on hover.</p> Parameters <p>Color col Circle color and alpha.</p> <p>number speed Transition speed toward hover state.</p> Example Usage <pre><code>  panel:CircleExpandHover(Color(255,255,255,30), 6)\n</code></pre> Gradient(col, dir, frac, op) Purpose <p>Draws a directional gradient over the panel.</p> When Called <p>Use to overlay a gradient tint from a chosen side.</p> Parameters <p>Color col Gradient color.</p> <p>number dir Direction constant (LEFT, RIGHT, TOP, BOTTOM).</p> <p>number frac Fraction of the panel to cover with the gradient.</p> <p>boolean op When true, flips the gradient material for the given direction.</p> Example Usage <pre><code>  panel:Gradient(Color(0,0,0,180), BOTTOM, 0.4)\n</code></pre> SetOpenURL(url) Purpose <p>Opens a URL when the panel is clicked.</p> When Called <p>Attach to clickable panels that should launch an external link.</p> Parameters <p>string url URL to open.</p> Example Usage <pre><code>  panel:SetOpenURL(\"https://example.com\")\n</code></pre> NetMessage(name, data) Purpose <p>Sends a network message when the panel is clicked.</p> When Called <p>Use for UI buttons that trigger server-side actions.</p> Parameters <p>string name Net message name.</p> <p>function data Optional writer that populates the net message payload.</p> Example Usage <pre><code>  panel:NetMessage(\"liaAction\", function(p) net.WriteEntity(p.Entity) end)\n</code></pre> Stick(dock, margin, dontInvalidate) Purpose <p>Docks the panel with optional margin and parent invalidation.</p> When Called <p>Use to pin a panel to a dock position with minimal boilerplate.</p> Parameters <p>number dock DOCK constant to apply; defaults to FILL.</p> <p>number margin Optional uniform margin after docking.</p> <p>boolean dontInvalidate Skip invalidating the parent when true.</p> Example Usage <pre><code>  panel:Stick(LEFT, 8)\n</code></pre> DivTall(frac, target) Purpose <p>Sets the panel height to a fraction of another panel's height.</p> When Called <p>Use for proportional layout against a parent or target panel.</p> Parameters <p>number frac Divisor applied to the target height.</p> <p>Panel target Panel to reference; defaults to the parent.</p> Example Usage <pre><code>  panel:DivTall(3, parentPanel)\n</code></pre> DivWide(frac, target) Purpose <p>Sets the panel width to a fraction of another panel's width.</p> When Called <p>Use for proportional layout against a parent or target panel.</p> Parameters <p>number frac Divisor applied to the target width.</p> <p>Panel target Panel to reference; defaults to the parent.</p> Example Usage <pre><code>  panel:DivWide(2, parentPanel)\n</code></pre> SquareFromHeight() Purpose <p>Makes the panel width equal its current height.</p> When Called <p>Use when the panel should become a square based on height.</p> Example Usage <pre><code>  panel:SquareFromHeight()\n</code></pre> SquareFromWidth() Purpose <p>Makes the panel height equal its current width.</p> When Called <p>Use when the panel should become a square based on width.</p> Example Usage <pre><code>  panel:SquareFromWidth()\n</code></pre> SetRemove(target) Purpose <p>Removes a target panel when this panel is clicked.</p> When Called <p>Use for close buttons or dismiss actions.</p> Parameters <p>Panel target optional Panel to remove; defaults to the panel itself.</p> Example Usage <pre><code>  closeButton:SetRemove(parentPanel)\n</code></pre> FadeIn(time, alpha) Purpose <p>Fades the panel in from transparent to a target alpha.</p> When Called <p>Use when showing a panel with a quick fade animation.</p> Parameters <p>number time Duration of the fade in seconds.</p> <p>number alpha Target opacity after fading.</p> Example Usage <pre><code>  panel:FadeIn(0.2, 255)\n</code></pre> HideVBar() Purpose <p>Hides and collapses the vertical scrollbar of a DScrollPanel.</p> When Called <p>Use when the scrollbar should be invisible but scrolling remains enabled.</p> Example Usage <pre><code>  scrollPanel:HideVBar()\n</code></pre> SetTransitionFunc(fn) Purpose <p>Sets a shared predicate used by transition helpers to determine state.</p> When Called <p>Use before invoking helpers like SetupTransition to change their condition.</p> Parameters <p>function fn Predicate returning true when the transition should be active.</p> Example Usage <pre><code>  panel:SetTransitionFunc(function(s) return s:IsVisible() end)\n</code></pre> ClearTransitionFunc() Purpose <p>Clears any predicate set for transition helpers.</p> When Called <p>Use to revert transition helpers back to their default behavior.</p> Example Usage <pre><code>  panel:ClearTransitionFunc()\n</code></pre> SetAppendOverwrite(fn) Purpose <p>Overrides the target function name used by the On helper.</p> When Called <p>Use when On should wrap a different function name than the provided one.</p> Parameters <p>string fn Function name to force On to wrap.</p> Example Usage <pre><code>  panel:SetAppendOverwrite(\"PaintOver\")\n</code></pre> ClearAppendOverwrite() Purpose <p>Removes any function name override set for the On helper.</p> When Called <p>Use to return On to its default behavior.</p> Example Usage <pre><code>  panel:ClearAppendOverwrite()\n</code></pre> ClearPaint() Purpose <p>Removes any custom Paint function on the panel.</p> When Called <p>Use to revert a panel to its default painting behavior.</p> Example Usage <pre><code>  panel:ClearPaint()\n</code></pre> ReadyTextbox() Purpose <p>Prepares a text entry for Lilia styling by hiding its background and adding focus feedback.</p> When Called <p>Use after creating a TextEntry to match framework visuals.</p> Example Usage <pre><code>  textEntry:ReadyTextbox()\n</code></pre>"},{"location":"development/meta/player/","title":"Player","text":"<p>Player management system for the Lilia framework.</p> Overview  The player meta table provides comprehensive functionality for managing player data, interactions, and operations in the Lilia framework. It handles player character access, notification systems, permission checking, data management, interaction systems, and player-specific operations. The meta table operates on both server and client sides, with the server managing player data and validation while the client provides player interaction and display. It includes integration with the character system for character access, notification system for player messages, permission system for access control, data system for player persistence, and interaction system for player actions. The meta table ensures proper player data synchronization, permission validation, notification delivery, and comprehensive player management from connection to disconnection.  getChar() Purpose <p>Returns the active character object associated with this player.</p> When Called <p>Use whenever you need the player's character state.</p> Returns <p>table|nil Character instance or nil if none is selected.</p> Example Usage <pre><code>  local char = ply:getChar()\n</code></pre> tostring() Purpose <p>Builds a readable name for the player preferring character name.</p> When Called <p>Use for logging or UI when displaying player identity.</p> Returns <p>string Character name if available, otherwise Steam name.</p> Example Usage <pre><code>  print(ply:tostring())\n</code></pre> Name() Purpose <p>Returns the display name, falling back to Steam name if no character.</p> When Called <p>Use wherever Garry's Mod expects Name/Nick/GetName.</p> Returns <p>string Character or Steam name.</p> Example Usage <pre><code>  local name = ply:Name()\n</code></pre> doGesture(a, b, c) Purpose <p>Restarts a gesture animation and replicates it.</p> When Called <p>Use to play a gesture on the player and sync to others.</p> Parameters <p>number a Gesture activity.</p> <p>number b Layer or slot.</p> <p>number c Playback rate or weight.</p> Example Usage <pre><code>  ply:doGesture(ACT_GMOD_GESTURE_WAVE, 0, 1)\n</code></pre> setAction(text, time, callback) Purpose <p>Shows an action bar for the player and runs a callback when done.</p> When Called <p>Use to gate actions behind a timed progress bar.</p> Parameters <p>string text optional Message to display; nil cancels the bar.</p> <p>number time Duration in seconds.</p> <p>function callback optional Invoked when the timer completes.</p> Example Usage <pre><code>  ply:setAction(\"Lockpicking\", 5, onFinish)\n</code></pre> doStaredAction(entity, callback, time, onCancel, distance) Purpose <p>Runs a callback after the player stares at an entity for a duration.</p> When Called <p>Use for interactions requiring sustained aim on a target.</p> Parameters <p>Entity entity Target entity to watch.</p> <p>function callback Function called after staring completes.</p> <p>number time Duration in seconds required.</p> <p>function onCancel optional Called if the stare is interrupted.</p> <p>number distance optional Max distance trace length.</p> Example Usage <pre><code>  ply:doStaredAction(door, onComplete, 3)\n</code></pre> stopAction() Purpose <p>Cancels any active action or stare timers and hides the bar.</p> When Called <p>Use when an action is interrupted or completed early.</p> Example Usage <pre><code>  ply:stopAction()\n</code></pre> hasPrivilege(privilegeName) Purpose <p>Checks if the player has a specific admin privilege.</p> When Called <p>Use before allowing privileged actions.</p> Parameters <p>string privilegeName Permission to query.</p> Returns <p>boolean True if the player has access.</p> Example Usage <pre><code>  if ply:hasPrivilege(\"canBan\") then ...\n</code></pre> removeRagdoll() Purpose <p>Deletes the player's ragdoll entity and clears the net var.</p> When Called <p>Use when respawning or cleaning up ragdolls.</p> Example Usage <pre><code>  ply:removeRagdoll()\n</code></pre> getItemWeapon() Purpose <p>Returns the active weapon and matching inventory item if equipped.</p> When Called <p>Use when syncing weapon state with inventory data.</p> Returns <p>Weapon|nil, Item|nil Active weapon entity and corresponding item, if found.</p> Example Usage <pre><code>  local wep, itm = ply:getItemWeapon()\n</code></pre> isFamilySharedAccount() Purpose <p>Detects whether the account is being used via Steam Family Sharing.</p> When Called <p>Use for restrictions or messaging on shared accounts.</p> Returns <p>boolean True if OwnerSteamID64 differs from SteamID.</p> Example Usage <pre><code>  if ply:isFamilySharedAccount() then warn() end\n</code></pre> getItemDropPos() Purpose <p>Calculates a suitable position in front of the player to drop items.</p> When Called <p>Use before spawning a world item.</p> Returns <p>Vector Drop position.</p> Example Usage <pre><code>  local pos = ply:getItemDropPos()\n</code></pre> getItems() Purpose <p>Retrieves the player's inventory items if a character exists.</p> When Called <p>Use when accessing a player's item list directly.</p> Returns <p>table|nil Items table or nil if no inventory.</p> Example Usage <pre><code>  local items = ply:getItems()\n</code></pre> getTracedEntity(distance) Purpose <p>Returns the entity the player is aiming at within a distance.</p> When Called <p>Use for interaction traces.</p> Parameters <p>number distance Max trace length; default 96.</p> Returns <p>Entity|nil Hit entity or nil.</p> Example Usage <pre><code>  local ent = ply:getTracedEntity(128)\n</code></pre> notify(message, notifType) Purpose <p>Sends a notification to this player (or locally on client).</p> When Called <p>Use to display a generic notice.</p> Parameters <p>string message Text to show.</p> <p>string notifType Optional type key.</p> Example Usage <pre><code>  ply:notify(\"Hello\")\n</code></pre> notifyLocalized(message, notifType) Purpose <p>Sends a localized notification to this player or locally.</p> When Called <p>Use when the message is a localization token.</p> Parameters <p>string message Localization key.</p> <p>string notifType Optional type key.</p> Example Usage <pre><code>  ply:notifyLocalized(\"itemTaken\", \"apple\")\n</code></pre> notifyError(message) Purpose <p>Sends an error notification to this player or locally.</p> When Called <p>Use to display error messages in a consistent style.</p> Parameters <p>string message Error text.</p> Example Usage <pre><code>  ply:notifyError(\"Invalid action\")\n</code></pre> notifyWarning(message) Purpose <p>Sends a warning notification to this player or locally.</p> When Called <p>Use for cautionary messages.</p> Parameters <p>string message Text to display.</p> Example Usage <pre><code>  ply:notifyWarning(\"Low health\")\n</code></pre> notifyInfo(message) Purpose <p>Sends an info notification to this player or locally.</p> When Called <p>Use for neutral informational messages.</p> Parameters <p>string message Text to display.</p> Example Usage <pre><code>  ply:notifyInfo(\"Quest updated\")\n</code></pre> notifySuccess(message) Purpose <p>Sends a success notification to this player or locally.</p> When Called <p>Use to indicate successful actions.</p> Parameters <p>string message Text to display.</p> Example Usage <pre><code>  ply:notifySuccess(\"Saved\")\n</code></pre> notifyMoney(message) Purpose <p>Sends a money-themed notification to this player or locally.</p> When Called <p>Use for currency gain/spend messages.</p> Parameters <p>string message Text to display.</p> Example Usage <pre><code>  ply:notifyMoney(\"+$50\")\n</code></pre> notifyAdmin(message) Purpose <p>Sends an admin-level notification to this player or locally.</p> When Called <p>Use for staff-oriented alerts.</p> Parameters <p>string message Text to display.</p> Example Usage <pre><code>  ply:notifyAdmin(\"Ticket opened\")\n</code></pre> notifyErrorLocalized(key) Purpose <p>Sends a localized error notification to the player or locally.</p> When Called <p>Use for localized error tokens.</p> Parameters <p>string key Localization key.</p> Example Usage <pre><code>  ply:notifyErrorLocalized(\"invalidArg\")\n</code></pre> notifyWarningLocalized(key) Purpose <p>Sends a localized warning notification to the player or locally.</p> When Called <p>Use for localized warnings.</p> Parameters <p>string key Localization key.</p> Example Usage <pre><code>  ply:notifyWarningLocalized(\"lowHealth\")\n</code></pre> notifyInfoLocalized(key) Purpose <p>Sends a localized info notification to the player or locally.</p> When Called <p>Use for localized informational messages.</p> Parameters <p>string key Localization key.</p> Example Usage <pre><code>  ply:notifyInfoLocalized(\"questUpdate\")\n</code></pre> notifySuccessLocalized(key) Purpose <p>Sends a localized success notification to the player or locally.</p> When Called <p>Use for localized success confirmations.</p> Parameters <p>string key Localization key.</p> Example Usage <pre><code>  ply:notifySuccessLocalized(\"saved\")\n</code></pre> notifyMoneyLocalized(key) Purpose <p>Sends a localized money notification to the player or locally.</p> When Called <p>Use for localized currency messages.</p> Parameters <p>string key Localization key.</p> Example Usage <pre><code>  ply:notifyMoneyLocalized(\"moneyGained\", 50)\n</code></pre> notifyAdminLocalized(key) Purpose <p>Sends a localized admin notification to the player or locally.</p> When Called <p>Use for staff messages with localization.</p> Parameters <p>string key Localization key.</p> Example Usage <pre><code>  ply:notifyAdminLocalized(\"ticketOpened\")\n</code></pre> canEditVendor(vendor) Purpose <p>Checks if the player can edit a vendor.</p> When Called <p>Use before opening vendor edit interfaces.</p> Parameters <p>Entity vendor Vendor entity to check.</p> Returns <p>boolean True if editing is permitted.</p> Example Usage <pre><code>  if ply:canEditVendor(vendor) then ...\n</code></pre> isStaff() Purpose <p>Determines if the player's user group is marked as Staff.</p> When Called <p>Use for gating staff-only features.</p> Returns <p>boolean True if their usergroup includes the Staff type.</p> Example Usage <pre><code>  if ply:isStaff() then ...\n</code></pre> isStaffOnDuty() Purpose <p>Checks if the player is currently on the staff faction.</p> When Called <p>Use when features apply only to on-duty staff.</p> Returns <p>boolean True if the player is in FACTION_STAFF.</p> Example Usage <pre><code>  if ply:isStaffOnDuty() then ...\n</code></pre> hasWhitelist(faction) Purpose <p>Checks if the player has whitelist access to a faction.</p> When Called <p>Use before allowing faction selection.</p> Parameters <p>number faction Faction ID.</p> Returns <p>boolean True if default or whitelisted.</p> Example Usage <pre><code>  if ply:hasWhitelist(factionID) then ...\n</code></pre> getClassData() Purpose <p>Retrieves the class table for the player's current character.</p> When Called <p>Use when needing class metadata like limits or permissions.</p> Returns <p>table|nil Class definition or nil if unavailable.</p> Example Usage <pre><code>  local classData = ply:getClassData()\n</code></pre> getDarkRPVar(var) Purpose <p>Provides DarkRP compatibility for money queries.</p> When Called <p>Use when DarkRP expects getDarkRPVar(\"money\").</p> Parameters <p>string var Variable name, only \"money\" supported.</p> Returns <p>number|nil Character money or nil if unsupported var.</p> Example Usage <pre><code>  local cash = ply:getDarkRPVar(\"money\")\n</code></pre> getMoney() Purpose <p>Returns the character's money or zero if unavailable.</p> When Called <p>Use whenever reading player currency.</p> Returns <p>number Current money amount.</p> Example Usage <pre><code>  local cash = ply:getMoney()\n</code></pre> canAfford(amount) Purpose <p>Returns whether the player can afford a cost.</p> When Called <p>Use before charging the player.</p> Parameters <p>number amount Cost to check.</p> Returns <p>boolean True if the player has enough money.</p> Example Usage <pre><code>  if ply:canAfford(100) then ...\n</code></pre> hasSkillLevel(skill, level) Purpose <p>Checks if the player meets a specific skill level requirement.</p> When Called <p>Use for gating actions behind skills.</p> Parameters <p>string skill Attribute key.</p> <p>number level Required level.</p> Returns <p>boolean True if the player meets or exceeds the level.</p> Example Usage <pre><code>  if ply:hasSkillLevel(\"lockpick\", 3) then ...\n</code></pre> meetsRequiredSkills(requiredSkillLevels) Purpose <p>Verifies all required skills meet their target levels.</p> When Called <p>Use when checking multiple skill prerequisites.</p> Parameters <p>table requiredSkillLevels Map of skill keys to required levels.</p> Returns <p>boolean True if all requirements pass.</p> Example Usage <pre><code>  if ply:meetsRequiredSkills(reqs) then ...\n</code></pre> forceSequence(sequenceName, callback, time, noFreeze) Purpose <p>Forces the player to play a sequence and freezes movement if needed.</p> When Called <p>Use for scripted animations like sit or interact sequences.</p> Parameters <p>string sequenceName optional Sequence to play; nil clears the current sequence.</p> <p>function callback optional Called when the sequence ends.</p> <p>number time optional Override duration.</p> <p>boolean noFreeze Prevent movement freeze when true.</p> Returns <p>number|boolean|nil Duration when started, false on failure, or nil when clearing.</p> Example Usage <pre><code>  ply:forceSequence(\"sit\", nil, 5)\n</code></pre> leaveSequence() Purpose <p>Stops the forced sequence, unfreezes movement, and runs callbacks.</p> When Called <p>Use when a sequence finishes or must be cancelled.</p> Example Usage <pre><code>  ply:leaveSequence()\n</code></pre> getFlags() Purpose <p>Returns the flag string from the player's character.</p> When Called <p>Use when checking player permissions.</p> Returns <p>string Concatenated flags or empty string.</p> Example Usage <pre><code>  local flags = ply:getFlags()\n</code></pre> giveFlags(flags) Purpose <p>Grants one or more flags to the player's character.</p> When Called <p>Use when adding privileges.</p> Parameters <p>string flags Flags to give.</p> Example Usage <pre><code>  ply:giveFlags(\"z\")\n</code></pre> takeFlags(flags) Purpose <p>Removes flags from the player's character.</p> When Called <p>Use when revoking privileges.</p> Parameters <p>string flags Flags to remove.</p> Example Usage <pre><code>  ply:takeFlags(\"z\")\n</code></pre> networkAnimation(active, boneData) Purpose <p>Synchronizes or applies a bone animation state across server/client.</p> When Called <p>Use when enabling or disabling custom bone angles.</p> Parameters <p>boolean active Whether the animation is active.</p> <p>table boneData Map of bone names to Angle values.</p> Example Usage <pre><code>  ply:networkAnimation(true, bones)\n</code></pre> getAllLiliaData() Purpose <p>Returns the table storing Lilia-specific player data.</p> When Called <p>Use when reading or writing persistent player data.</p> Returns <p>table Data table per realm.</p> Example Usage <pre><code>  local data = ply:getAllLiliaData()\n</code></pre> setWaypoint(name, vector, logo, onReach) Purpose <p>Sets a waypoint for the player and draws HUD guidance clientside.</p> When Called <p>Use when directing a player to a position or objective.</p> Parameters <p>string name Label shown on the HUD.</p> <p>Vector vector Target world position.</p> <p>string logo optional Optional material path for the icon.</p> <p>function onReach optional Callback fired when the waypoint is reached.</p> Example Usage <pre><code>  ply:setWaypoint(\"Stash\", pos)\n</code></pre> getLiliaData(key, default) Purpose <p>Reads stored Lilia player data, returning a default when missing.</p> When Called <p>Use for persistent per-player data such as settings or cooldowns.</p> Parameters <p>string key Data key to fetch.</p> <p>any default Value to return when unset.</p> Returns <p>any Stored value or default.</p> Example Usage <pre><code>  local last = ply:getLiliaData(\"lastIP\", \"\")\n</code></pre> getMainCharacter() Purpose <p>Returns the player's recorded main character ID, if set.</p> When Called <p>Use to highlight or auto-select the main character.</p> Returns <p>number|nil Character ID or nil when unset.</p> Example Usage <pre><code>  local main = ply:getMainCharacter()\n</code></pre> setMainCharacter(charID) Purpose <p>Sets the player's main character, applying cooldown rules server-side.</p> When Called <p>Use when a player picks or clears their main character.</p> Parameters <p>number charID optional Character ID to set, or nil/0 to clear.</p> Returns <p>boolean, string|nil True on success, or false with a reason.</p> Example Usage <pre><code>  ply:setMainCharacter(charID)\n</code></pre> hasFlags(flags) Purpose <p>Checks if the player (via their character) has any of the given flags.</p> When Called <p>Use when gating actions behind flag permissions.</p> Parameters <p>string flags One or more flag characters to test.</p> Returns <p>boolean True if at least one flag is present.</p> Example Usage <pre><code>  if ply:hasFlags(\"z\") then ...\n</code></pre> playTimeGreaterThan(time) Purpose <p>Returns true if the player's recorded playtime exceeds a value.</p> When Called <p>Use for requirements based on time played.</p> Parameters <p>number time Threshold in seconds.</p> Returns <p>boolean True if playtime is greater than the threshold.</p> Example Usage <pre><code>  if ply:playTimeGreaterThan(3600) then ...\n</code></pre> requestOptions(title, subTitle, options, limit, callback) Purpose <p>Presents a list of options to the player and returns selected values.</p> When Called <p>Use for multi-choice prompts that may return multiple selections.</p> Parameters <p>string title Dialog title.</p> <p>string subTitle Subtitle/description.</p> <p>table options Array of option labels.</p> <p>number limit Max selections allowed.</p> <p>function callback Called with selections when chosen.</p> Returns <p>deferred|nil Promise when callback omitted, otherwise nil.</p> Example Usage <pre><code>  ply:requestOptions(\"Pick\", \"Choose one\", {\"A\",\"B\"}, 1, cb)\n</code></pre> requestString(title, subTitle, callback, default) Purpose <p>Prompts the player for a string value and returns it.</p> When Called <p>Use when collecting free-form text input.</p> Parameters <p>string title</p> <p>string subTitle</p> <p>function callback optional Receives the string result; optional if using deferred.</p> <p>string default optional Prefilled value.</p> Returns <p>deferred|nil Promise when callback omitted, otherwise nil.</p> Example Usage <pre><code>  ply:requestString(\"Name\", \"Enter name\", onDone)\n</code></pre> requestArguments(title, argTypes, callback) Purpose <p>Requests typed arguments from the player based on a specification.</p> When Called <p>Use for admin commands requiring typed input.</p> Parameters <p>string title Dialog title.</p> <p>table argTypes Schema describing required arguments.</p> <p>function callback optional Receives parsed values; optional if using deferred.</p> Returns <p>deferred|nil Promise when callback omitted.</p> Example Usage <pre><code>  ply:requestArguments(\"Teleport\", spec, cb)\n</code></pre> requestBinaryQuestion(question, option1, option2, manualDismiss, callback) Purpose <p>Shows a binary (two-button) question to the player and returns choice.</p> When Called <p>Use for yes/no confirmations.</p> Parameters <p>string question Prompt text.</p> <p>string option1 Label for first option.</p> <p>string option2 Label for second option.</p> <p>boolean manualDismiss Require manual close; optional.</p> <p>function callback Receives 0/1 result.</p> Example Usage <pre><code>  ply:requestBinaryQuestion(\"Proceed?\", \"Yes\", \"No\", false, cb)\n</code></pre> requestPopupQuestion(question, buttons) Purpose <p>Displays a popup question with arbitrary buttons and handles responses.</p> When Called <p>Use for multi-button confirmations or admin prompts.</p> Parameters <p>string question Prompt text.</p> <p>table buttons Array of strings or {label, callback} pairs.</p> Example Usage <pre><code>  ply:requestPopupQuestion(\"Choose\", {{\"A\", cbA}, {\"B\", cbB}})\n</code></pre> getRagdoll() Purpose <p>Gets the player's ragdoll entity from either GMod's GetRagdollEntity or the custom setRagdolled system.</p> When Called <p>Use when needing to access the player's current ragdoll entity.</p> Returns <p>entity|nil The ragdoll entity if one exists, nil otherwise.</p> Example Usage <pre><code>  local ragdoll = ply:getRagdoll()\n  if IsValid(ragdoll) then\n      -- Do something with ragdoll\n  end\n</code></pre> requestButtons(title, buttons) Purpose <p>Sends a button list prompt to the player and routes callbacks.</p> When Called <p>Use when a simple list of actions is needed.</p> Parameters <p>string title Dialog title.</p> <p>table buttons Array of {text=, callback=} entries.</p> Example Usage <pre><code>  ply:requestButtons(\"Actions\", {{text=\"A\", callback=cb}})\n</code></pre> isStuck() Purpose <p>Checks if the player is currently stuck in geometry.</p> When Called <p>Use when determining if a player needs to be repositioned.</p> Returns <p>boolean True if stuck, false otherwise.</p> Example Usage <pre><code>  if ply:isStuck() then\n      ply:SetPos(newPosition)\n  end\n</code></pre> requestDropdown(title, subTitle, options, callback) Purpose <p>Presents a dropdown selection dialog to the player.</p> When Called <p>Use for single-choice option selection.</p> Parameters <p>string title</p> <p>string subTitle</p> <p>table options Available options.</p> <p>function callback Invoked with chosen option.</p> Example Usage <pre><code>  ply:requestDropdown(\"Pick class\", \"Choose\", opts, cb)\n</code></pre> restoreStamina(amount) Purpose <p>Restores stamina by an amount, clamping to the character's maximum.</p> When Called <p>Use when giving the player stamina back (e.g., resting or items).</p> Parameters <p>number amount Stamina to add.</p> Example Usage <pre><code>  ply:restoreStamina(10)\n</code></pre> consumeStamina(amount) Purpose <p>Reduces stamina by an amount and handles exhaustion state.</p> When Called <p>Use when sprinting or performing actions that consume stamina.</p> Parameters <p>number amount Stamina to subtract.</p> Example Usage <pre><code>  ply:consumeStamina(5)\n</code></pre> addMoney(amount) Purpose <p>Adds money to the player's character and logs the change.</p> When Called <p>Use when rewarding currency server-side.</p> Parameters <p>number amount Amount to add (can be negative via takeMoney).</p> Returns <p>boolean False if no character exists.</p> Example Usage <pre><code>  ply:addMoney(50)\n</code></pre> takeMoney(amount) Purpose <p>Removes money from the player's character by delegating to giveMoney.</p> When Called <p>Use when charging the player server-side.</p> Parameters <p>number amount Amount to deduct.</p> Example Usage <pre><code>  ply:takeMoney(20)\n</code></pre> loadLiliaData(callback) Purpose <p>Loads persistent Lilia player data from the database.</p> When Called <p>Use during player initial spawn to hydrate data.</p> Parameters <p>function callback optional Invoked with loaded data table.</p> Example Usage <pre><code>  ply:loadLiliaData()\n</code></pre> saveLiliaData() Purpose <p>Persists the player's Lilia data back to the database.</p> When Called <p>Use on disconnect or after updating persistent data.</p> Example Usage <pre><code>  ply:saveLiliaData()\n</code></pre> setLiliaData(key, value, noNetworking, noSave) Purpose <p>Sets a key in the player's Lilia data, optionally syncing and saving.</p> When Called <p>Use when updating persistent player-specific values.</p> Parameters <p>string key Data key.</p> <p>any value Value to store.</p> <p>boolean noNetworking Skip net sync when true.</p> <p>boolean noSave Skip immediate DB save when true.</p> Example Usage <pre><code>  ply:setLiliaData(\"lastIP\", ip)\n</code></pre> banPlayer(reason, duration, banner) Purpose <p>Records a ban entry and kicks the player with a ban message.</p> When Called <p>Use when banning a player via scripts.</p> Parameters <p>string reason Ban reason.</p> <p>number duration Duration in mies; 0 or nil for perm.</p> <p>Player banner optional Staff issuing the ban.</p> Example Usage <pre><code>  ply:banPlayer(\"RDM\", 60, admin)\n</code></pre> getPlayTime() Purpose <p>Returns the player's total playtime in seconds (server calculation).</p> When Called <p>Use for server-side playtime checks.</p> Returns <p>number Playtime in seconds.</p> Example Usage <pre><code>  local t = ply:getPlayTime()\n</code></pre> createRagdoll(freeze) Purpose <p>Creates a ragdoll entity for the player with proper physics setup.</p> When Called <p>Use when needing to create a physical ragdoll representation.</p> Parameters <p>boolean freeze optional True to freeze physics, false for normal physics.</p> Returns <p>entity The created ragdoll entity.</p> Example Usage <pre><code>  local ragdoll = ply:createRagdoll(false)\n</code></pre> setRagdolled(state, baseTime, getUpGrace, getUpMessage) Purpose <p>Toggles ragdoll state for the player, handling weapons, timers, and get-up.</p> When Called <p>Use when knocking out or reviving a player.</p> Parameters <p>boolean state True to ragdoll, false to restore.</p> <p>number baseTime optional Duration to stay ragdolled.</p> <p>number getUpGrace optional Additional grace time before getting up.</p> <p>string getUpMessage optional Action bar text while ragdolled.</p> Example Usage <pre><code></code></pre> syncVars() Purpose <p>Synchronizes networked variables for this player.</p> When Called <p>Use when a player joins or needs a full resync.</p> Returns <p>None.</p> Example Usage <pre><code>  ply:syncVars()\n</code></pre> setNetVar(key, value) Purpose <p>Sets a networked variable for this player and broadcasts it.</p> When Called <p>Use when updating shared player state.</p> Parameters <p>string key Variable name.</p> <p>any value Value to store.</p> Example Usage <pre><code>  ply:setNetVar(\"hasKey\", true)\n</code></pre> setLocalVar(key, value) Purpose <p>Sets a server-local variable for this player and sends it only to them.</p> When Called <p>Use for per-player state that should not broadcast.</p> Parameters <p>string key Variable name.</p> <p>any value Value to store.</p> Example Usage <pre><code>  ply:setLocalVar(\"stamina\", 80)\n</code></pre> getLocalVar(key, default) Purpose <p>Reads a server-local variable for this player.</p> When Called <p>Use when accessing non-networked state.</p> Parameters <p>string key Variable name.</p> <p>any default Fallback when unset.</p> Returns <p>any Stored value or default.</p> Example Usage <pre><code>  local stamina = ply:getLocalVar(\"stamina\", 100)\n</code></pre> getLocalVar(key, default) Purpose <p>Reads a networked variable for this player on the client.</p> When Called <p>Use clientside when accessing shared netvars.</p> Parameters <p>string key Variable name.</p> <p>any default Fallback when unset.</p> Returns <p>any Stored value or default.</p> Example Usage <pre><code>  local val = ply:getLocalVar(\"stamina\", 0)\n</code></pre> getPlayTime() Purpose <p>Returns the player's playtime (client-calculated fallback).</p> When Called <p>Use on the client when server data is unavailable.</p> Returns <p>number Playtime in seconds.</p> Example Usage <pre><code>  local t = ply:getPlayTime()\n</code></pre> getParts() Purpose <p>Returns the player's active PAC parts.</p> When Called <p>Use to check which PAC parts are currently equipped on the player.</p> Returns <p>table Table of active PAC part IDs.</p> Example Usage <pre><code>  local parts = ply:getParts()\n  if parts[\"helmet\"] then\n      print(\"Player has helmet equipped\")\n  end\n</code></pre> syncParts() Purpose <p>Synchronizes the player's PAC parts with the client.</p> When Called <p>Use to ensure the client has the correct PAC parts data.</p> Returns <p>None.</p> Example Usage <pre><code>  ply:syncParts()\n</code></pre> addPart(partID) Purpose <p>Adds a PAC part to the player.</p> When Called <p>Use when equipping PAC parts on a player.</p> Parameters <p>string partID The unique ID of the PAC part to add.</p> Returns <p>None.</p> Example Usage <pre><code>  ply:addPart(\"helmet_model\")\n</code></pre> removePart(partID) Purpose <p>Removes a PAC part from the player.</p> When Called <p>Use when unequipping PAC parts from a player.</p> Parameters <p>string partID The unique ID of the PAC part to remove.</p> Returns <p>None.</p> Example Usage <pre><code>  ply:removePart(\"helmet_model\")\n</code></pre> resetParts() Purpose <p>Removes all PAC parts from the player.</p> When Called <p>Use to clear all equipped PAC parts from a player.</p> Returns <p>None.</p> Example Usage <pre><code>  ply:resetParts()\n</code></pre> IsAvailable() Purpose <p>Removes all PAC parts from the player.</p> When Called <p>Use to clear all equipped PAC parts from a player.</p> Returns <p>None.</p> Example Usage <pre><code>  ply:resetParts()\n</code></pre>"},{"location":"generators/","title":"Generators","text":"<p>This section contains generators and templates for creating Lilia framework components.</p> Attribute Generator <p>Code templates and examples for creating character attributes.</p> Class Generator <p>Code templates and examples for creating character classes.</p> Faction Generator <p>Code templates and examples for creating factions.</p>"},{"location":"generators/#item-generators","title":"Item Generators","text":"Aid Item Generator Ammo Item Generator Books Item Generator Grenade Item Generator Outfit Item Generator Stackable Item Generator Weapons Item Generator"},{"location":"generators/attribute/","title":"Attribute Generator","text":"<p>Quickly create custom character attributes like Strength, Endurance, or Intelligence.</p> Overview <p>Use this tool to generate the Lua structure for your custom attribute. Once generated, the code should be placed in a new file within your schema's attributes directory.</p> <p>Recommended Placement:</p> <code>garrysmod/gamemodes/[schema folder]/schema/attributes/[attribute_name].lua</code> Attribute Name: Description: Maximum Value: The highest value this attribute can reach Starting Maximum: The maximum value available at character creation (leave empty for no limit)  No Starting Bonus          Disable automatic attribute points at character creation Generate Attribute Code Generate Example Generated Code"},{"location":"generators/class/","title":"Class Generator","text":"<p>Create sub-roles and specialized classes for your factions, such as 'Medic' or 'Officer'.</p> Overview <p>Use this tool to generate the Lua structure for your custom class. Once generated, the code should be placed in a new file within your schema's classes directory.</p> <p>Recommended Placement:</p> <code>garrysmod/gamemodes/[schema folder]/schema/classes/[class_name].lua</code> Class Index: The unique identifier for this class (e.g., CLASS_POLICEOFFICER) Faction Index: The faction index this class belongs to (e.g., FACTION_POLICE) Class Name: Description:  Whitelist Required            Players need to be whitelisted to join this class  Is Default Class            This is the default class for the faction Player Limit: 0 = unlimited, decimals = percentage of faction (e.g., 0.5 = 50%) Model: + Add Model Player model path(s) (leave empty to inherit from faction) Color (R,G,B): Comma-separated RGB values (0-255), leave empty to inherit from faction Skin: Model skin index (leave empty to inherit from faction) Logo: Logo material path or URL for scoreboard (leave empty for no logo) Model Scale: Model scale multiplier (1.0 = normal size) Health: Leave empty to inherit from faction Armor: Leave empty to inherit from faction Pay/Salary: Currency amount per paycheck (leave empty to inherit from faction) Run Speed:  Use as multiplier Leave empty to inherit from faction Walk Speed:  Use as multiplier Leave empty to inherit from faction Jump Power:  Use as multiplier Leave empty to inherit from faction Weapons: + Add Weapon Leave empty to inherit from faction  Hidden from Scoreboard            Class won't appear in scoreboard categories Scoreboard Priority: Lower numbers appear first in scoreboard (default: 999)  Can Invite to Faction            Allows this class to invite players into the faction  Can Invite to Class            Allows this class to invite players into the same class Team: Groups related classes for door access (leave empty for no team) Commands: + Add Command Command permissions Generate Class Code Generate Example Generated Code"},{"location":"generators/faction/","title":"Faction Generator","text":"<p>Define the core groups and teams that players can join on your server.</p> Overview <p>Use this tool to generate the Lua structure for your custom faction. Once generated, the code should be placed in a new file within your schema's factions directory.</p> <p>Recommended Placement:</p> <code>garrysmod/gamemodes/[schema folder]/schema/factions/[faction_name].lua</code> Faction Index: The unique identifier for this faction (e.g., FACTION_POLICE) Faction Name: Description: Color (R,G,B): Comma-separated RGB values (0-255) Logo: Logo material path or URL for scoreboard (leave empty for no logo)  Is Default Faction            Can new characters join this faction by default?  One Character Only            Players can only have one character in this faction? Player Limit: 0 = unlimited, decimals = percentage of server (e.g., 0.1 = 10%) Models: + Add Model Add player model paths Health: Armor: Run Speed:  Use as multiplier Walk Speed:  Use as multiplier Jump Power:  Use as multiplier Pay/Salary: Currency amount per paycheck Pay Timer (seconds): Interval in seconds between paychecks (defaults to global salary interval if not set) Weapons: + Add Weapon Add weapon classes Starting Items: + Add Item Add item unique IDs  Recognizes Globally          Members are always globally recognized  Globally Recognized          Faction is globally recognizable to others  Member Auto-Recognition          Members automatically recognize each other  Hidden from Scoreboard          Faction won't appear in scoreboard categories Scoreboard Priority: Lower numbers appear first in scoreboard (default: 999) Custom Spawns: + Add Spawn Point Map Name, Position Vector, Angle Main Menu Position: + Add Main Menu Position Map Name (leave empty for all), Position Vector, Angle Commands: + Add Command Command Name, Enabled Generate Faction Code Generate Example Generated Code"},{"location":"generators/items/aid/","title":"Aid Item Generator","text":"<p>Create consumable items that restore health, armor, or stamina.</p> Overview <p>Use this tool to generate the Lua structure for your custom aid item. Once generated, the code should be placed in a new file within your schema's items directory.</p> <p>Recommended Placement:</p> <code>garrysmod/gamemodes/[schema folder]/schema/items/[item_id].lua</code> Unique ID: Unique identifier for this item (no spaces, lowercase) Item Name: Description: A professional medical kit containing various surgical tools and high-grade bandages. Model: 3D model path for the aid item Width: Inventory slot width Height: Inventory slot height Health Amount: Amount of health restored (leave empty for no health restoration) Armor Amount: Amount of armor restored (leave empty for no armor restoration) Stamina Amount: Amount of stamina restored (leave empty for no stamina restoration) Generate Aid Item Code Generate Example Generated Code"},{"location":"generators/items/ammo/","title":"Ammo","text":""},{"location":"generators/items/ammo/#ammo-item-generator","title":"Ammo Item Generator","text":"<p>Create ammunition items for your server's weapons.</p> Overview <p>Use this tool to generate the Lua structure for your custom ammo item. Once generated, the code should be placed in a new file within your schema's items directory.</p> <p>Recommended Placement:</p> <code>garrysmod/gamemodes/[schema folder]/schema/items/[item_id].lua</code> Unique ID: Unique identifier for this item (no spaces, lowercase) Item Name: Description: A box containing 30 rounds of 9mm ammunition. Model: 3D model path for the ammo box Width: Inventory slot width Height: Inventory slot height Ammo Type: Ammo type that gets given to players (e.g., pistol, smg1, buckshot) Ammo Amount: Amount of ammo given to the player Generate Ammo Item Code Generate Example Generated Code"},{"location":"generators/items/books/","title":"Book &amp; Note Item Generator","text":"<p>Create readable items like books, documents, or notes for your server.</p> Overview <p>Use this tool to generate the Lua structure for your custom book or note. Once generated, the code should be placed in a new file within your schema's items directory.</p> <p>Recommended Placement:</p> <code>garrysmod/gamemodes/[schema folder]/schema/items/[item_id].lua</code> Unique ID: Unique identifier for this item (no spaces, lowercase) Item Name: Description: A comprehensive guide detailing the laws, locations, and history of the local district. Model: 3D model path for the book item Width: Inventory slot width Height: Inventory slot height In-Game Book Title: The title displayed when the book is opened in-game Book Content: Section 1: Civil Conduct\\nAll citizens must remain within their designated blocks during curfew hours...\\n\\nSection 2: Ration Distribution\\nRation packets are distributed every 24 hours at the Central Hub. The text content of the book. Generate Book Item Code Generate Example Generated Code"},{"location":"generators/items/grenade/","title":"Grenade Item Generator","text":"<p>Define explosive or utility throwable items for your server.</p> Overview <p>Use this tool to generate the Lua structure for your custom grenade. Once generated, the code should be placed in a new file within your schema's items directory.</p> <p>Recommended Placement:</p> <code>garrysmod/gamemodes/[schema folder]/schema/items/[item_id].lua</code> Unique ID: Unique identifier for this item (no spaces, lowercase) Item Name: Description: A high-explosive fragmentation grenade used for clearing rooms and neutralizing hostile clusters. Model: 3D model path for the grenade item Weapon Class: The weapon entity class that is given when equipped Width: Inventory slot width Height: Inventory slot height Generate Grenade Code Generate Example Generated Code"},{"location":"generators/items/outfit/","title":"Outfit Item Generator","text":"<p>Create wearable clothing and armor that changes the player's model and adds protection.</p> Overview <p>Use this tool to generate the Lua structure for your custom outfit. Once generated, the code should be placed in a new file within your schema's items directory.</p> <p>Recommended Placement:</p> <code>garrysmod/gamemodes/[schema folder]/schema/items/[item_id].lua</code> Unique ID: Unique identifier for this item (no spaces, lowercase) Item Name: Description: Reinforced tactical plating designed to withstand high-caliber impacts at the cost of mobility. Item Model (Inventory): 3D model path displayed in the inventory Width: Inventory slot width Height: Inventory slot height Wearable Model: The player model that is applied when this outfit is worn Armor Points: Additional armor given to the player Speed Multiplier: 1.0 = normal speed, 0.5 = half speed Generate Outfit Code Generate Example Generated Code"},{"location":"generators/items/stackable/","title":"Stackable Item Generator","text":"<p>Create items that can be stacked together to save space, like currency, resources, or scraps.</p> Overview <p>Use this tool to generate the Lua structure for your custom stackable item. Once generated, the code should be placed in a new file within your schema's items directory.</p> <p>Recommended Placement:</p> <code>garrysmod/gamemodes/[schema folder]/schema/items/[item_id].lua</code> Unique ID: Unique identifier for this item (no spaces, lowercase) Item Name: Description: Torn fragments of industrial-grade steel and iron, often salvaged from abandoned structures. Model: 3D model path for the stackable item Width: Inventory width Height: Inventory height Max Stacks: Highest stack count Generate Stackable Item Code Generate Example Generated Code"},{"location":"generators/items/weapons/","title":"Weapon Item Generator","text":"<p>Create equippable weapons that players can carry in their inventory and use in combat.</p> Overview <p>Use this tool to generate the Lua structure for your custom weapon item. Once generated, the code should be placed in a new file within your schema's items directory.</p> <p>Note on Automatic Generation: Lilia automatically generates weapon items for any registered weapon entity that does not have a manual item definition. Using this generator to create a custom item will override that default behavior for the specified weapon class.</p> <p>Recommended Placement:</p> <code>garrysmod/gamemodes/[schema folder]/schema/items/[item_id].lua</code> Unique ID: Unique identifier for this item (no spaces, lowercase) Item Name: Description: A rugged and dependable gas-operated assault rifle, known for its stopping power and reliability in harsh conditions. Item Model (Inventory): 3D model path displayed in the inventory Weapon Class: The weapon entity class that is given when equipped Width: Inventory slot width Height: Inventory slot height  Holsterable          Can the weapon be holstered/visible on the player's back? Holster Slot: None Back (Primary) Side (Sidearm) Visual attachment point on the player model Generate Weapon Code Generate Example Generated Code"},{"location":"modules/","title":"Modules","text":"<p>Comprehensive collection of official and community-built modules for the Lilia framework.</p> Overview <p>Modules are self-contained extensions that add new features or modify existing behavior in the Lilia framework. They allow for easy organization and distribution of custom code without modifying core gamemode files.</p> <p>For server owners and developers looking to add custom functionality, modules should be placed in the following directory relative to your server installation:</p> <code>garrysmod/gamemodes/[schema folder]/modules/[module folder]</code> Advertisements Description <p>Implements a paid /advert command for server-wide announcements. Messages are colored, logged, and throttled by a cooldown to curb spam.</p> Changelog Version 1.0 <ul> <li>Initial Release</li> </ul>      Download    AFK Protection Description <p>Comprehensive AFK protection system that automatically detects inactive players, prevents exploitation of AFK players, and integrates with restraint systems. Features configurable AFK detection, admin commands, multi-language support, and protection against various player actions.</p> Changelog Version 1.0 <ul> <li>Initial Release</li> </ul>      Download    Alcoholism Description <p>Adds drinkable alcohol that increases a player's intoxication level. High BAC blurs vision and slows movement until the effect wears off.</p> Changelog Version 1.0 <ul> <li>Initial Release</li> </ul>      Download    Anonymous Rumors Description <p>Adds an anonymous rumour chat command, hiding of the sender's identity, encouragement for roleplay intrigue, a cooldown to prevent spam, and admin logging of rumour messages.</p> Changelog Version 1.0 <ul> <li>Initial Release</li> </ul>      Download    Auto Restarter Description <p>Schedules automatic server restarts at set intervals. Players see a countdown so they can prepare before the map changes.</p> Changelog Version 1.0 <ul> <li>Initial Release</li> </ul>      Download    BodyGroup Closet Description <p>Spawns a bodygroup closet where players can edit their model's bodygroups. Admins may inspect others and configure the closet's model.</p>      Download    Broadcasts Description <p>Allows staff to broadcast messages to chosen factions or classes. Every broadcast is logged and controlled through CAMI privileges.</p> Changelog Version 1.0 <ul> <li>Initial Release</li> </ul>      Download    Captions Description <p>Offers an API for timed on-screen captions suited for tutorials or story events. Captions can be triggered from the server or client and last for a chosen duration.</p> Changelog Version 1.0 <ul> <li>Initial Release</li> </ul>      Download    Cards Description <p>Adds a full deck of playing cards that can be shuffled and drawn. Card draws sync to all players for simple in-game minigames.</p> Changelog Version 1.0 <ul> <li>Initial Release</li> </ul>      Download    Chat Messages Description <p>Periodically posts automated advert messages in chat on a timer. Keeps players informed with rotating tips even when staff are offline.</p> Changelog Version 1.0 <ul> <li>Initial Release</li> </ul>      Download    Cinematic Text Description <p>Adds displays of cinematic splash text overlays, screen darkening with letterbox bars, support for scripted scenes, timed fades for dramatic effect, and customizable text fonts.</p> Changelog Version 1.0 <ul> <li>Initial Release</li> </ul>      Download    Climbing Description <p>Adds the ability to climb ledges using movement keys, custom climbing animations, and hooks for climb attempts.</p> Changelog Version 1.0 <ul> <li>Initial Release</li> </ul>      Download    Code Utilities Description <p>Adds extra helper functions in lia.util, simplified utilities for common scripting tasks, a central library used by other modules, utilities for networking data, and shared constants for modules.</p>      Download    Community Commands Description <p>Adds chat commands to open community links, easy sharing of workshop and docs, configurable commands via settings, localization for command names, and the ability to add custom URLs.</p> Changelog Version 1.0 <ul> <li>Initial Release</li> </ul>      Download    Cursor Description <p>Adds a toggleable custom cursor for the UI, a purely client-side implementation, improved menu navigation, a hotkey to quickly show or hide the cursor, and compatibility with other menu modules.</p> Changelog Version 1.0 <ul> <li>Initial Release</li> </ul>      Download    Cutscenes Description <p>Adds a framework for simple cutscene playback, scenes defined through tables, syncing of camera movement across clients, commands to trigger cutscenes, and the ability for players to skip.</p> Changelog Version 1.0 <ul> <li>Initial Release</li> </ul>      Download    Damage Numbers Description <p>Adds floating combat text when hitting targets, different colors for damage types, display of damage dealt and received, scaling text based on damage amount, and client option to disable numbers.</p> Changelog Version 1.0 <ul> <li>Initial Release</li> </ul>      Download    Development HUD Description <p>Adds a staff-only development HUD, font customization via DevHudFont, a requirement for the CAMI privilege, real-time server performance metrics, and a toggle command to show or hide the HUD.</p> Changelog Version 1.0 <ul> <li>Initial Release</li> </ul>      Download    Development Server Description <p>Adds a development server mode for testing, the ability to run special development functions, a toggle via configuration, an environment flag for dev commands, and logging of executed dev actions.</p> Changelog Version 1.0 <ul> <li>Initial Release</li> </ul>      Download    Donator Description <p>Adds libraries to manage donor perks, tracking for donor ranks and perks, configurable perks by tier, and commands to adjust character slots.</p> Changelog Version 1.0 <ul> <li>Initial Release</li> </ul>      Download    Door Kick Description <p>Adds the ability to kick doors open with an animation, logging of door kick events, and a fun breach mechanic with physics force to fling doors open.</p> Changelog Version 1.0 <ul> <li>Initial Release</li> </ul>      Download    Extended Descriptions Description <p>Adds support for long item descriptions, localization for multiple languages, better RP text display, automatic line wrapping, and fallback to short descriptions.</p> Changelog Version 1.0 <ul> <li>Initial Release</li> </ul>      Download    First Person Effects Description <p>Adds head bob and view sway, camera motion synced to actions, a realistic first-person feel, and adjustable intensity via config.</p> Changelog Version 1.0 <ul> <li>Initial Release</li> </ul>      Download    Flashlight Description <p>Adds a serious flashlight with dynamic light, darkening of surroundings when turned off, adjustable brightness, and keybind toggle support.</p> Changelog Version 1.0 <ul> <li>Initial Release</li> </ul>      Download    Free Look Description <p>Adds the ability to look around without turning the body, a toggle key similar to EFT, movement direction preservation, and adjustable sensitivity while freelooking.</p> Changelog Version 1.0 <ul> <li>Initial Release</li> </ul>      Download    Gamemaster Points Description <p>Adds teleport points for game masters, quick navigation across large maps, saving of locations for reuse, a command to list saved points, and sharing of points with other staff.</p> Changelog Version 1.0 <ul> <li>Initial Release</li> </ul>      Download    Hospitals Description <p>Adds respawning of players at hospitals with support for multiple hospital spawn locations on different maps.</p> Changelog Version 1.0 <ul> <li>Initial Release</li> </ul>      Download    HUD Extras Description <p>Adds extra HUD elements like an FPS counter, fonts configurable with FPSHudFont, hooks so other modules can extend, performance stats display, and toggles for individual HUD elements.</p> Changelog Version 1.0 <ul> <li>Initial Release</li> </ul>      Download    Instakill Description <p>Adds instant kill on headshots, lethality configurable per weapon, extra tension to combat, and integration with damage numbers.</p> Changelog Version 1.0 <ul> <li>Initial Release</li> </ul>      Download    Join Leave Messages Description <p>Adds announcements when players join, notifications on disconnect, improved community awareness, relay of messages to Discord, and per-player toggle to hide messages.</p> Changelog Version 1.0 <ul> <li>Initial Release</li> </ul>      Download    Load Messages Description <p>Adds faction-based load messages, execution when players first load a character, customizable message text, color-coded formatting options, and per-faction enable toggles.</p> Changelog Version 1.0 <ul> <li>Initial Release</li> </ul>      Download    Loyalism Description <p>Adds a loyalty tier system for players, the /partytier command access, permission control through flags, automatic tier progression, and customizable rewards per tier.</p> Changelog Version 1.0 <ul> <li>Initial Release</li> </ul>      Download    Map Cleaner Description <p>Adds periodic cleaning of map debris, a configurable interval, reduced server lag, a whitelist for protected entities, and manual cleanup commands.</p> Changelog Version 1.0 <ul> <li>Initial Release</li> </ul>      Download    Model Pay Description <p>Adds payment to characters based on model, custom wage definitions, integration into the economy, config to exclude certain models, and logs of wages issued.</p> Changelog Version 1.0 <ul> <li>Initial Release</li> </ul>      Download    Model Tweaker Description <p>Adds an entity to tweak prop models, adjustments for scale and rotation, easy UI controls, saving of tweaked props between restarts, and undo support for recent tweaks.</p> Changelog Version 1.0 <ul> <li>Initial Release</li> </ul>      Download    NPC Drop Description <p>Adds NPCs that drop items on death, DropTable to define probabilities, encouragement for looting, editable drop tables per NPC type, and weighted chances for rare items.</p> Changelog Version 1.0 <ul> <li>Initial Release</li> </ul>      Download    NPC Money Description <p>Adds NPCs that give money to players on death, MoneyTable to define rewards, editable money amounts per NPC type, and configurable default values.</p> Changelog Version 1.0 <ul> <li>Initial Release</li> </ul>      Download    NPC Spawner Description <p>Adds automatic NPC spawns at points, the ability for admins to force spawns, logging of spawn actions, and configuration for spawn intervals.</p> Changelog Version 1.0 <ul> <li>Initial Release</li> </ul>      Download    Perma Remove Description <p>Adds ability to permanently delete map entities, logging for each removed entity, an admin-only command, confirmation prompts before removal, and restore list to undo mistakes.</p> Changelog Version 1.0 <ul> <li>Initial Release</li> </ul>      Download    Radio Description <p>Adds a radio chat channel for players, font configuration via RadioFont, workshop models for radios, frequency channels for groups, and handheld radio items.</p> Changelog Version 1.0 <ul> <li>Initial Release</li> </ul>      Download    Raised Weapons Description <p>Adds auto-lowering of weapons when running, a raise delay set by WeaponRaiseSpeed, prevention of accidental fire, a toggle to keep weapons lowered, and compatibility with melee weapons.</p> Changelog Version 1.0 <ul> <li>Initial Release</li> </ul>      Download    Realistic View Description <p>Adds a first-person view that shows the full body, immersive camera transitions, compatibility with animations, smooth leaning animations, and optional third-person override.</p> Changelog Version 1.0 <ul> <li>Initial Release</li> </ul>      Download    Shoot Lock Description <p>Adds the ability to shoot door locks to open them, a quick breach alternative, a loud action that may alert others, and chance-based lock destruction.</p> Changelog Version 1.0 <ul> <li>Initial Release</li> </ul>      Download    Simple Lockpicking Description <p>Adds a simple lockpick tool for doors, logging of successful picks, brute-force style gameplay, configurable pick time, and chance for tools to break.</p> Changelog Version 1.0 <ul> <li>Initial Release</li> </ul>      Download    Slot Machine Description <p>Adds a slot machine minigame, a workshop model for the machine, handling of payouts to winners, customizable payout odds, and sound and animation effects.</p> Changelog Version 1.0 <ul> <li>Initial Release</li> </ul>      Download    Slow Weapons Description <p>Adds slower movement while holding heavy weapons, speed penalties defined per weapon, encouragement for strategic choices, customizable weapon speed table, and automatic speed restore when switching.</p> Changelog Version 1.0 <ul> <li>Initial Release</li> </ul>      Download    Steam Group Rewards Description <p>Provides Steam group membership rewards system that automatically checks group membership and gives money rewards to players who join your Steam group.</p> Changelog Version 1.0 <ul> <li>Initial Release</li> </ul>      Download    View Manipulation Description <p>Adds VManip animation support, hand gestures for items, functionality within Lilia, API for custom gesture triggers, and fallback animations when VManip is missing.</p> Changelog Version 1.0 <ul> <li>Initial Release</li> </ul>      Download    War Table Description <p>Adds an interactive 3D war table, the ability to plan operations on a map, a workshop model, marker placement for strategies, and support for multiple map layouts.</p> Changelog Version 1.0 <ul> <li>Initial Release</li> </ul>      Download    Word Filter Description <p>Adds chat word filtering, blocking of banned phrases, an easy-to-extend list, and admin commands to modify the list.</p> Changelog Version 1.0 <ul> <li>Initial Release</li> </ul>      Download"}]}