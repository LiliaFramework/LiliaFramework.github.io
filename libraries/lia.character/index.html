
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Official documentation for the Lilia Framework">
      
      
        <meta name="author" content="Lilia Framework Team">
      
      
        <link rel="canonical" href="https://liliaframework.github.io/libraries/lia.character/">
      
      
        <link rel="prev" href="../lia.bars/">
      
      
        <link rel="next" href="../lia.chatbox/">
      
      
      <link rel="icon" href="../../assets/favicon.ico">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.22">
    
    
      
        <title>Character Library - Lilia Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.84d31ad4.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Noto+Sans:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Noto Sans";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="lavender">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#character-library" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Lilia Documentation" class="md-header__button md-logo" aria-label="Lilia Documentation" data-md-component="logo">
      
  <img src="../../assets/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Lilia Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Character Library
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="lavender"  aria-label="Dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="lavender"  aria-label="Light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/LiliaFramework/Lilia" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../changelog/" class="md-tabs__link">
        
  
  
    
  
  Changelog

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../compatibility/" class="md-tabs__link">
        
  
  
    
  
  Addon Compatibility

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../gettingstarted/" class="md-tabs__link">
        
  
  
    
  
  Getting Started with Lilia

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../installation/" class="md-tabs__link">
        
  
  
    
  
  Installation Guide

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../definitions/attributes/" class="md-tabs__link">
          
  
  
    
  
  Definitions

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../hooks/client/" class="md-tabs__link">
          
  
  
    
  
  Hooks

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../lia.admin/" class="md-tabs__link">
          
  
  
    
  
  Libraries

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../meta/character/" class="md-tabs__link">
          
  
  
    
  
  Meta

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../modules/" class="md-tabs__link">
          
  
  
    
  
  Modules

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Lilia Documentation" class="md-nav__button md-logo" aria-label="Lilia Documentation" data-md-component="logo">
      
  <img src="../../assets/logo.png" alt="logo">

    </a>
    Lilia Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/LiliaFramework/Lilia" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../changelog/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Changelog
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../compatibility/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Addon Compatibility
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../gettingstarted/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Getting Started with Lilia
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Installation Guide
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../definitions/attributes/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Definitions
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../hooks/client/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Hooks
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
      
        
      
    
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" checked>
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Libraries
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            Libraries
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../lia.admin/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Administrator Library
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../lia.attributes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Attributes Library
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../lia.bars/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Bars Library
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Character Library
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Character Library
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#getcharacter" class="md-nav__link">
    <span class="md-ellipsis">
      getCharacter
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#getall" class="md-nav__link">
    <span class="md-ellipsis">
      getAll
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#isloaded" class="md-nav__link">
    <span class="md-ellipsis">
      isLoaded
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#addcharacter" class="md-nav__link">
    <span class="md-ellipsis">
      addCharacter
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#removecharacter" class="md-nav__link">
    <span class="md-ellipsis">
      removeCharacter
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#new" class="md-nav__link">
    <span class="md-ellipsis">
      new
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#hookvar" class="md-nav__link">
    <span class="md-ellipsis">
      hookVar
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#registervar" class="md-nav__link">
    <span class="md-ellipsis">
      registerVar
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#getchardata" class="md-nav__link">
    <span class="md-ellipsis">
      getCharData
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#getchardataraw" class="md-nav__link">
    <span class="md-ellipsis">
      getCharDataRaw
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#getownerbyid" class="md-nav__link">
    <span class="md-ellipsis">
      getOwnerByID
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#getbysteamid" class="md-nav__link">
    <span class="md-ellipsis">
      getBySteamID
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#getteamcolor" class="md-nav__link">
    <span class="md-ellipsis">
      getTeamColor
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#create" class="md-nav__link">
    <span class="md-ellipsis">
      create
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#restore" class="md-nav__link">
    <span class="md-ellipsis">
      restore
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cleanupforplayer" class="md-nav__link">
    <span class="md-ellipsis">
      cleanUpForPlayer
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#delete" class="md-nav__link">
    <span class="md-ellipsis">
      delete
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#getcharbanned" class="md-nav__link">
    <span class="md-ellipsis">
      getCharBanned
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#setchardatabase" class="md-nav__link">
    <span class="md-ellipsis">
      setCharDatabase
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#unloadcharacter" class="md-nav__link">
    <span class="md-ellipsis">
      unloadCharacter
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#unloadunusedcharacters" class="md-nav__link">
    <span class="md-ellipsis">
      unloadUnusedCharacters
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#loadsinglecharacter" class="md-nav__link">
    <span class="md-ellipsis">
      loadSingleCharacter
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../lia.chatbox/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Chatbox Library
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../lia.classes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Classes Library
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../lia.color/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Color Library
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../lia.commands/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Commands Library
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../lia.config/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Configuration Library
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../lia.currency/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Currency Library
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../lia.darkrp/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    DarkRP Compatibility Library
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../lia.data/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Data Library
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../lia.database/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Database Library
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../lia.derma/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Derma Library
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../lia.doors/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Doors Library Server
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../lia.factions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Faction Library
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../lia.flags/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Flags Library
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../lia.fonts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Font Library
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../lia.inventory/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Inventory Library
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../lia.item/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Item Library
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../lia.keybind/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Keybind Library
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../lia.languages/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Languages Library
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../lia.loader/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Loader Library
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../lia.logger/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Logger Library
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../lia.menu/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Menu Library
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../lia.modularity/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Modularity Library
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../lia.net/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Network Library
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../lia.notice/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Notice Library
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../lia.option/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Option Library
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../lia.playerinteract/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Player Interaction Library
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../lia.time/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Time Library
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../lia.util/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Utility Library
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../lia.vendor/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Vendor Library
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../lia.webimage/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Web Image Library
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../lia.websound/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    WebSound Library
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../lia.workshop/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Workshop Library
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../meta/character/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Meta
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../modules/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    Modules
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="character-library">Character Library</h1>
<p>Comprehensive character creation, management, and persistence system for the Lilia framework.</p>
<hr />
<p>Overview</p>
<p>The character library provides comprehensive functionality for managing player characters in the Lilia framework. It handles character creation, loading, saving, and management across both server and client sides. The library operates character data persistence, networking synchronization, and provides hooks for character variable changes. It includes functions for character validation, database operations, inventory management, and character lifecycle management. The library ensures proper character data integrity and provides a robust system for character-based gameplay mechanics including factions, attributes, money, and custom character variables.</p>
<hr />
<h3 id="getcharacter">getCharacter</h3>
<p><strong>Purpose</strong></p>
<p>Retrieves a character by its ID, loading it if necessary</p>
<p><strong>When Called</strong></p>
<p>When a character needs to be accessed by ID, either from server or client</p>
<p><strong>Parameters</strong></p>
<ul>
<li><code>charID</code> (<em>number</em>): The unique identifier of the character</li>
<li><code>client</code> (<em>Player</em>): The player requesting the character (optional)</li>
<li><code>callback</code> (<em>function</em>): Function to call when character is loaded (optional)</li>
</ul>
<p><strong>Returns</strong></p>
<ul>
<li>Character object if found/loaded, nil otherwise</li>
</ul>
<p><strong>Realm</strong></p>
<p>Shared (works on both server and client)</p>
<p><strong>Example Usage</strong></p>
<p><strong>Low Complexity:</strong>
<div class="language-lua highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="c1">-- Simple: Get a character by ID</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="kd">local</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">lia</span><span class="p">.</span><span class="py">char</span><span class="p">.</span><span class="nf">getCharacter</span><span class="p">(</span><span class="mi">123</span><span class="p">)</span>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="kr">if</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="kr">then</span>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="w">    </span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Character name:&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">character</span><span class="p">:</span><span class="nf">getName</span><span class="p">())</span>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="kr">end</span>
</span></code></pre></div></p>
<p><strong>Medium Complexity:</strong>
<div class="language-lua highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="c1">-- Medium: Get character with callback for async loading</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="nv">lia</span><span class="p">.</span><span class="py">char</span><span class="p">.</span><span class="nf">getCharacter</span><span class="p">(</span><span class="mi">123</span><span class="p">,</span><span class="w"> </span><span class="nv">client</span><span class="p">,</span><span class="w"> </span><span class="kr">function</span><span class="p">(</span><span class="nv">character</span><span class="p">)</span>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="kr">if</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="kr">then</span>
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="w">    </span><span class="nv">character</span><span class="p">:</span><span class="nf">setMoney</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span>
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="w">    </span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Character loaded:&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">character</span><span class="p">:</span><span class="nf">getName</span><span class="p">())</span>
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="kr">end</span>
</span><span id="__span-1-7"><a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="kr">end</span><span class="p">)</span>
</span></code></pre></div></p>
<p><strong>High Complexity:</strong>
<div class="language-lua highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="c1">-- High: Get multiple characters with validation and error handling</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="kd">local</span><span class="w"> </span><span class="nv">charIDs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="mi">123</span><span class="p">,</span><span class="w"> </span><span class="mi">456</span><span class="p">,</span><span class="w"> </span><span class="mi">789</span><span class="p">}</span>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="kd">local</span><span class="w"> </span><span class="nv">loadedChars</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{}</span>
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="kr">for</span><span class="w"> </span><span class="nv">_</span><span class="p">,</span><span class="w"> </span><span class="nv">charID</span><span class="w"> </span><span class="kr">in</span><span class="w"> </span><span class="nb">ipairs</span><span class="p">(</span><span class="nv">charIDs</span><span class="p">)</span><span class="w"> </span><span class="kr">do</span>
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="w">    </span><span class="nv">lia</span><span class="p">.</span><span class="py">char</span><span class="p">.</span><span class="nf">getCharacter</span><span class="p">(</span><span class="nv">charID</span><span class="p">,</span><span class="w"> </span><span class="nv">client</span><span class="p">,</span><span class="w"> </span><span class="kr">function</span><span class="p">(</span><span class="nv">character</span><span class="p">)</span>
</span><span id="__span-2-6"><a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a><span class="w">        </span><span class="kr">if</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="kr">then</span>
</span><span id="__span-2-7"><a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a><span class="w">            </span><span class="nv">loadedChars</span><span class="p">[</span><span class="nv">charID</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">character</span>
</span><span id="__span-2-8"><a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a><span class="w">            </span><span class="kr">if</span><span class="w"> </span><span class="nv">table</span><span class="p">.</span><span class="nf">Count</span><span class="p">(</span><span class="nv">loadedChars</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="o">#</span><span class="nv">charIDs</span><span class="w"> </span><span class="kr">then</span>
</span><span id="__span-2-9"><a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a><span class="w">                </span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;All characters loaded successfully&quot;</span><span class="p">)</span>
</span><span id="__span-2-10"><a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a><span class="w">            </span><span class="kr">end</span>
</span><span id="__span-2-11"><a id="__codelineno-2-11" name="__codelineno-2-11" href="#__codelineno-2-11"></a><span class="w">        </span><span class="kr">else</span>
</span><span id="__span-2-12"><a id="__codelineno-2-12" name="__codelineno-2-12" href="#__codelineno-2-12"></a><span class="w">            </span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Failed to load character:&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">charID</span><span class="p">)</span>
</span><span id="__span-2-13"><a id="__codelineno-2-13" name="__codelineno-2-13" href="#__codelineno-2-13"></a><span class="w">        </span><span class="kr">end</span>
</span><span id="__span-2-14"><a id="__codelineno-2-14" name="__codelineno-2-14" href="#__codelineno-2-14"></a><span class="w">    </span><span class="kr">end</span><span class="p">)</span>
</span><span id="__span-2-15"><a id="__codelineno-2-15" name="__codelineno-2-15" href="#__codelineno-2-15"></a><span class="kr">end</span>
</span></code></pre></div></p>
<hr />
<h3 id="getall">getAll</h3>
<p><strong>Purpose</strong></p>
<p>Retrieves all currently loaded characters from all players</p>
<p><strong>When Called</strong></p>
<p>When you need to iterate through all active characters on the server</p>
<p><strong>Returns</strong></p>
<ul>
<li>Table with Player objects as keys and their Character objects as values</li>
</ul>
<p><strong>Realm</strong></p>
<p>Shared (works on both server and client)</p>
<p><strong>Example Usage</strong></p>
<p><strong>Low Complexity:</strong>
<div class="language-lua highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="c1">-- Simple: Get all characters and count them</span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="kd">local</span><span class="w"> </span><span class="nv">allChars</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">lia</span><span class="p">.</span><span class="py">char</span><span class="p">.</span><span class="nf">getAll</span><span class="p">()</span>
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Total active characters:&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">table</span><span class="p">.</span><span class="nf">Count</span><span class="p">(</span><span class="nv">allChars</span><span class="p">))</span>
</span></code></pre></div></p>
<p><strong>Medium Complexity:</strong>
<div class="language-lua highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="c1">-- Medium: Find characters by faction</span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="kd">local</span><span class="w"> </span><span class="nv">allChars</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">lia</span><span class="p">.</span><span class="py">char</span><span class="p">.</span><span class="nf">getAll</span><span class="p">()</span>
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="kd">local</span><span class="w"> </span><span class="nv">citizenChars</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{}</span>
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a><span class="kr">for</span><span class="w"> </span><span class="nv">player</span><span class="p">,</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="kr">in</span><span class="w"> </span><span class="nb">pairs</span><span class="p">(</span><span class="nv">allChars</span><span class="p">)</span><span class="w"> </span><span class="kr">do</span>
</span><span id="__span-4-5"><a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a><span class="w">    </span><span class="kr">if</span><span class="w"> </span><span class="nv">character</span><span class="p">:</span><span class="nf">getFaction</span><span class="p">()</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">&quot;Citizen&quot;</span><span class="w"> </span><span class="kr">then</span>
</span><span id="__span-4-6"><a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a><span class="w">        </span><span class="nv">citizenChars</span><span class="p">[</span><span class="nv">player</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">character</span>
</span><span id="__span-4-7"><a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a><span class="w">    </span><span class="kr">end</span>
</span><span id="__span-4-8"><a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a><span class="kr">end</span>
</span></code></pre></div></p>
<p><strong>High Complexity:</strong>
<div class="language-lua highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="c1">-- High: Process all characters with validation and statistics</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="kd">local</span><span class="w"> </span><span class="nv">allChars</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">lia</span><span class="p">.</span><span class="py">char</span><span class="p">.</span><span class="nf">getAll</span><span class="p">()</span>
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="kd">local</span><span class="w"> </span><span class="nv">stats</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a><span class="nv">totalChars</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
</span><span id="__span-5-5"><a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a><span class="nv">totalMoney</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
</span><span id="__span-5-6"><a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a><span class="nv">factions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{}</span>
</span><span id="__span-5-7"><a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a><span class="p">}</span>
</span><span id="__span-5-8"><a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a><span class="kr">for</span><span class="w"> </span><span class="nv">player</span><span class="p">,</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="kr">in</span><span class="w"> </span><span class="nb">pairs</span><span class="p">(</span><span class="nv">allChars</span><span class="p">)</span><span class="w"> </span><span class="kr">do</span>
</span><span id="__span-5-9"><a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a><span class="w">    </span><span class="kr">if</span><span class="w"> </span><span class="nf">IsValid</span><span class="p">(</span><span class="nv">player</span><span class="p">)</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="kr">then</span>
</span><span id="__span-5-10"><a id="__codelineno-5-10" name="__codelineno-5-10" href="#__codelineno-5-10"></a><span class="w">        </span><span class="nv">stats</span><span class="p">.</span><span class="py">totalChars</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">stats</span><span class="p">.</span><span class="py">totalChars</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span>
</span><span id="__span-5-11"><a id="__codelineno-5-11" name="__codelineno-5-11" href="#__codelineno-5-11"></a><span class="w">        </span><span class="nv">stats</span><span class="p">.</span><span class="py">totalMoney</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">stats</span><span class="p">.</span><span class="py">totalMoney</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nv">character</span><span class="p">:</span><span class="nf">getMoney</span><span class="p">()</span>
</span><span id="__span-5-12"><a id="__codelineno-5-12" name="__codelineno-5-12" href="#__codelineno-5-12"></a><span class="w">        </span><span class="kd">local</span><span class="w"> </span><span class="nv">faction</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">character</span><span class="p">:</span><span class="nf">getFaction</span><span class="p">()</span>
</span><span id="__span-5-13"><a id="__codelineno-5-13" name="__codelineno-5-13" href="#__codelineno-5-13"></a><span class="w">        </span><span class="nv">stats</span><span class="p">.</span><span class="py">factions</span><span class="p">[</span><span class="nv">faction</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nv">stats</span><span class="p">.</span><span class="py">factions</span><span class="p">[</span><span class="nv">faction</span><span class="p">]</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span>
</span><span id="__span-5-14"><a id="__codelineno-5-14" name="__codelineno-5-14" href="#__codelineno-5-14"></a><span class="w">    </span><span class="kr">end</span>
</span><span id="__span-5-15"><a id="__codelineno-5-15" name="__codelineno-5-15" href="#__codelineno-5-15"></a><span class="kr">end</span>
</span></code></pre></div></p>
<hr />
<h3 id="isloaded">isLoaded</h3>
<p><strong>Purpose</strong></p>
<p>Checks if a character with the given ID is currently loaded in memory</p>
<p><strong>When Called</strong></p>
<p>Before attempting to access a character to avoid unnecessary loading</p>
<p><strong>Parameters</strong></p>
<ul>
<li><code>charID</code> (<em>number</em>): The unique identifier of the character to check</li>
</ul>
<p><strong>Returns</strong></p>
<ul>
<li>Boolean - true if character is loaded, false otherwise</li>
</ul>
<p><strong>Realm</strong></p>
<p>Shared (works on both server and client)</p>
<p><strong>Example Usage</strong></p>
<p><strong>Low Complexity:</strong>
<div class="language-lua highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="c1">-- Simple: Check if character is loaded</span>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="kr">if</span><span class="w"> </span><span class="nv">lia</span><span class="p">.</span><span class="py">char</span><span class="p">.</span><span class="nf">isLoaded</span><span class="p">(</span><span class="mi">123</span><span class="p">)</span><span class="w"> </span><span class="kr">then</span>
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="w">    </span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Character 123 is loaded&quot;</span><span class="p">)</span>
</span><span id="__span-6-4"><a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a><span class="kr">end</span>
</span></code></pre></div></p>
<p><strong>Medium Complexity:</strong>
<div class="language-lua highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="c1">-- Medium: Conditional character access</span>
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="kd">local</span><span class="w"> </span><span class="nv">charID</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">123</span>
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a><span class="kr">if</span><span class="w"> </span><span class="nv">lia</span><span class="p">.</span><span class="py">char</span><span class="p">.</span><span class="nf">isLoaded</span><span class="p">(</span><span class="nv">charID</span><span class="p">)</span><span class="w"> </span><span class="kr">then</span>
</span><span id="__span-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a><span class="w">    </span><span class="kd">local</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">lia</span><span class="p">.</span><span class="py">char</span><span class="p">.</span><span class="nf">getCharacter</span><span class="p">(</span><span class="nv">charID</span><span class="p">)</span>
</span><span id="__span-7-5"><a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a><span class="w">    </span><span class="nv">character</span><span class="p">:</span><span class="nf">setMoney</span><span class="p">(</span><span class="mi">5000</span><span class="p">)</span>
</span><span id="__span-7-6"><a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a><span class="w">    </span><span class="kr">else</span>
</span><span id="__span-7-7"><a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a><span class="w">        </span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Character not loaded, loading...&quot;</span><span class="p">)</span>
</span><span id="__span-7-8"><a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a><span class="w">        </span><span class="nv">lia</span><span class="p">.</span><span class="py">char</span><span class="p">.</span><span class="nf">getCharacter</span><span class="p">(</span><span class="nv">charID</span><span class="p">,</span><span class="w"> </span><span class="nv">client</span><span class="p">,</span><span class="w"> </span><span class="kr">function</span><span class="p">(</span><span class="nv">char</span><span class="p">)</span>
</span><span id="__span-7-9"><a id="__codelineno-7-9" name="__codelineno-7-9" href="#__codelineno-7-9"></a><span class="w">        </span><span class="kr">if</span><span class="w"> </span><span class="nv">char</span><span class="w"> </span><span class="kr">then</span><span class="w"> </span><span class="nv">char</span><span class="p">:</span><span class="nf">setMoney</span><span class="p">(</span><span class="mi">5000</span><span class="p">)</span><span class="w"> </span><span class="kr">end</span>
</span><span id="__span-7-10"><a id="__codelineno-7-10" name="__codelineno-7-10" href="#__codelineno-7-10"></a><span class="w">        </span><span class="kr">end</span><span class="p">)</span>
</span><span id="__span-7-11"><a id="__codelineno-7-11" name="__codelineno-7-11" href="#__codelineno-7-11"></a><span class="w">    </span><span class="kr">end</span>
</span></code></pre></div></p>
<p><strong>High Complexity:</strong>
<div class="language-lua highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="c1">-- High: Batch character loading with status checking</span>
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="kd">local</span><span class="w"> </span><span class="nv">charIDs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="mi">123</span><span class="p">,</span><span class="w"> </span><span class="mi">456</span><span class="p">,</span><span class="w"> </span><span class="mi">789</span><span class="p">}</span>
</span><span id="__span-8-3"><a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a><span class="kd">local</span><span class="w"> </span><span class="nv">loadedChars</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{}</span>
</span><span id="__span-8-4"><a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a><span class="kd">local</span><span class="w"> </span><span class="nv">unloadedChars</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{}</span>
</span><span id="__span-8-5"><a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a><span class="kr">for</span><span class="w"> </span><span class="nv">_</span><span class="p">,</span><span class="w"> </span><span class="nv">charID</span><span class="w"> </span><span class="kr">in</span><span class="w"> </span><span class="nb">ipairs</span><span class="p">(</span><span class="nv">charIDs</span><span class="p">)</span><span class="w"> </span><span class="kr">do</span>
</span><span id="__span-8-6"><a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a><span class="w">    </span><span class="kr">if</span><span class="w"> </span><span class="nv">lia</span><span class="p">.</span><span class="py">char</span><span class="p">.</span><span class="nf">isLoaded</span><span class="p">(</span><span class="nv">charID</span><span class="p">)</span><span class="w"> </span><span class="kr">then</span>
</span><span id="__span-8-7"><a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a><span class="w">        </span><span class="nv">loadedChars</span><span class="p">[</span><span class="nv">charID</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">lia</span><span class="p">.</span><span class="py">char</span><span class="p">.</span><span class="nf">getCharacter</span><span class="p">(</span><span class="nv">charID</span><span class="p">)</span>
</span><span id="__span-8-8"><a id="__codelineno-8-8" name="__codelineno-8-8" href="#__codelineno-8-8"></a><span class="w">        </span><span class="kr">else</span>
</span><span id="__span-8-9"><a id="__codelineno-8-9" name="__codelineno-8-9" href="#__codelineno-8-9"></a><span class="w">            </span><span class="nb">table.insert</span><span class="p">(</span><span class="nv">unloadedChars</span><span class="p">,</span><span class="w"> </span><span class="nv">charID</span><span class="p">)</span>
</span><span id="__span-8-10"><a id="__codelineno-8-10" name="__codelineno-8-10" href="#__codelineno-8-10"></a><span class="w">        </span><span class="kr">end</span>
</span><span id="__span-8-11"><a id="__codelineno-8-11" name="__codelineno-8-11" href="#__codelineno-8-11"></a><span class="w">    </span><span class="kr">end</span>
</span><span id="__span-8-12"><a id="__codelineno-8-12" name="__codelineno-8-12" href="#__codelineno-8-12"></a><span class="w">    </span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Loaded:&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">table</span><span class="p">.</span><span class="nf">Count</span><span class="p">(</span><span class="nv">loadedChars</span><span class="p">),</span><span class="w"> </span><span class="s2">&quot;Unloaded:&quot;</span><span class="p">,</span><span class="w"> </span><span class="o">#</span><span class="nv">unloadedChars</span><span class="p">)</span>
</span></code></pre></div></p>
<hr />
<h3 id="addcharacter">addCharacter</h3>
<p><strong>Purpose</strong></p>
<p>Adds a character to the loaded characters cache and triggers pending callbacks</p>
<p><strong>When Called</strong></p>
<p>When a character is loaded from database or created, to make it available in memory</p>
<p><strong>Parameters</strong></p>
<ul>
<li><code>id</code> (<em>number</em>): The unique identifier of the character</li>
<li><code>character</code> (<em>Character</em>): The character object to add to cache</li>
</ul>
<p><strong>Returns</strong></p>
<ul>
<li>None</li>
</ul>
<p><strong>Realm</strong></p>
<p>Shared (works on both server and client)</p>
<p><strong>Example Usage</strong></p>
<p><strong>Low Complexity:</strong>
<div class="language-lua highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="c1">-- Simple: Add a character to cache</span>
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a><span class="kd">local</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">lia</span><span class="p">.</span><span class="py">char</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="nv">charData</span><span class="p">,</span><span class="w"> </span><span class="mi">123</span><span class="p">,</span><span class="w"> </span><span class="nv">client</span><span class="p">)</span>
</span><span id="__span-9-3"><a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a><span class="nv">lia</span><span class="p">.</span><span class="py">char</span><span class="p">.</span><span class="nf">addCharacter</span><span class="p">(</span><span class="mi">123</span><span class="p">,</span><span class="w"> </span><span class="nv">character</span><span class="p">)</span>
</span></code></pre></div></p>
<p><strong>Medium Complexity:</strong>
<div class="language-lua highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="c1">-- Medium: Add character and handle pending requests</span>
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="kd">local</span><span class="w"> </span><span class="nv">charID</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">123</span>
</span><span id="__span-10-3"><a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a><span class="kd">local</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">lia</span><span class="p">.</span><span class="py">char</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="nv">charData</span><span class="p">,</span><span class="w"> </span><span class="nv">charID</span><span class="p">,</span><span class="w"> </span><span class="nv">client</span><span class="p">)</span>
</span><span id="__span-10-4"><a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a><span class="c1">-- This will trigger any pending callbacks for this character ID</span>
</span><span id="__span-10-5"><a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a><span class="nv">lia</span><span class="p">.</span><span class="py">char</span><span class="p">.</span><span class="nf">addCharacter</span><span class="p">(</span><span class="nv">charID</span><span class="p">,</span><span class="w"> </span><span class="nv">character</span><span class="p">)</span>
</span><span id="__span-10-6"><a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a><span class="c1">-- Check if there were pending requests</span>
</span><span id="__span-10-7"><a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a><span class="kr">if</span><span class="w"> </span><span class="nv">lia</span><span class="p">.</span><span class="py">char</span><span class="p">.</span><span class="py">pendingRequests</span><span class="p">[</span><span class="nv">charID</span><span class="p">]</span><span class="w"> </span><span class="kr">then</span>
</span><span id="__span-10-8"><a id="__codelineno-10-8" name="__codelineno-10-8" href="#__codelineno-10-8"></a><span class="w">    </span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Character had pending requests that were triggered&quot;</span><span class="p">)</span>
</span><span id="__span-10-9"><a id="__codelineno-10-9" name="__codelineno-10-9" href="#__codelineno-10-9"></a><span class="kr">end</span>
</span></code></pre></div></p>
<p><strong>High Complexity:</strong>
<div class="language-lua highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="c1">-- High: Batch character loading with callback management</span>
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a><span class="kd">local</span><span class="w"> </span><span class="nv">characters</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{}</span>
</span><span id="__span-11-3"><a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a><span class="kd">local</span><span class="w"> </span><span class="nv">charIDs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="mi">123</span><span class="p">,</span><span class="w"> </span><span class="mi">456</span><span class="p">,</span><span class="w"> </span><span class="mi">789</span><span class="p">}</span>
</span><span id="__span-11-4"><a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a><span class="kr">for</span><span class="w"> </span><span class="nv">_</span><span class="p">,</span><span class="w"> </span><span class="nv">charID</span><span class="w"> </span><span class="kr">in</span><span class="w"> </span><span class="nb">ipairs</span><span class="p">(</span><span class="nv">charIDs</span><span class="p">)</span><span class="w"> </span><span class="kr">do</span>
</span><span id="__span-11-5"><a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a><span class="w">    </span><span class="kd">local</span><span class="w"> </span><span class="nv">charData</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">lia</span><span class="p">.</span><span class="py">char</span><span class="p">.</span><span class="nf">getCharData</span><span class="p">(</span><span class="nv">charID</span><span class="p">)</span>
</span><span id="__span-11-6"><a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a><span class="w">    </span><span class="kr">if</span><span class="w"> </span><span class="nv">charData</span><span class="w"> </span><span class="kr">then</span>
</span><span id="__span-11-7"><a id="__codelineno-11-7" name="__codelineno-11-7" href="#__codelineno-11-7"></a><span class="w">        </span><span class="kd">local</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">lia</span><span class="p">.</span><span class="py">char</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="nv">charData</span><span class="p">,</span><span class="w"> </span><span class="nv">charID</span><span class="p">,</span><span class="w"> </span><span class="nv">client</span><span class="p">)</span>
</span><span id="__span-11-8"><a id="__codelineno-11-8" name="__codelineno-11-8" href="#__codelineno-11-8"></a><span class="w">        </span><span class="nv">characters</span><span class="p">[</span><span class="nv">charID</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">character</span>
</span><span id="__span-11-9"><a id="__codelineno-11-9" name="__codelineno-11-9" href="#__codelineno-11-9"></a><span class="w">        </span><span class="nv">lia</span><span class="p">.</span><span class="py">char</span><span class="p">.</span><span class="nf">addCharacter</span><span class="p">(</span><span class="nv">charID</span><span class="p">,</span><span class="w"> </span><span class="nv">character</span><span class="p">)</span>
</span><span id="__span-11-10"><a id="__codelineno-11-10" name="__codelineno-11-10" href="#__codelineno-11-10"></a><span class="w">    </span><span class="kr">end</span>
</span><span id="__span-11-11"><a id="__codelineno-11-11" name="__codelineno-11-11" href="#__codelineno-11-11"></a><span class="kr">end</span>
</span><span id="__span-11-12"><a id="__codelineno-11-12" name="__codelineno-11-12" href="#__codelineno-11-12"></a><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Loaded&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">table</span><span class="p">.</span><span class="nf">Count</span><span class="p">(</span><span class="nv">characters</span><span class="p">),</span><span class="w"> </span><span class="s2">&quot;characters into cache&quot;</span><span class="p">)</span>
</span></code></pre></div></p>
<hr />
<h3 id="removecharacter">removeCharacter</h3>
<p><strong>Purpose</strong></p>
<p>Removes a character from the loaded characters cache</p>
<p><strong>When Called</strong></p>
<p>When a character needs to be unloaded from memory (cleanup, deletion, etc.)</p>
<p><strong>Parameters</strong></p>
<ul>
<li><code>id</code> (<em>number</em>): The unique identifier of the character to remove</li>
</ul>
<p><strong>Returns</strong></p>
<ul>
<li>None</li>
</ul>
<p><strong>Realm</strong></p>
<p>Shared (works on both server and client)</p>
<p><strong>Example Usage</strong></p>
<p><strong>Low Complexity:</strong>
<div class="language-lua highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="c1">-- Simple: Remove character from cache</span>
</span><span id="__span-12-2"><a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a><span class="nv">lia</span><span class="p">.</span><span class="py">char</span><span class="p">.</span><span class="nf">removeCharacter</span><span class="p">(</span><span class="mi">123</span><span class="p">)</span>
</span></code></pre></div></p>
<p><strong>Medium Complexity:</strong>
<div class="language-lua highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="c1">-- Medium: Remove character with validation</span>
</span><span id="__span-13-2"><a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a><span class="kd">local</span><span class="w"> </span><span class="nv">charID</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">123</span>
</span><span id="__span-13-3"><a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a><span class="kr">if</span><span class="w"> </span><span class="nv">lia</span><span class="p">.</span><span class="py">char</span><span class="p">.</span><span class="nf">isLoaded</span><span class="p">(</span><span class="nv">charID</span><span class="p">)</span><span class="w"> </span><span class="kr">then</span>
</span><span id="__span-13-4"><a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a><span class="w">    </span><span class="kd">local</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">lia</span><span class="p">.</span><span class="py">char</span><span class="p">.</span><span class="nf">getCharacter</span><span class="p">(</span><span class="nv">charID</span><span class="p">)</span>
</span><span id="__span-13-5"><a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a><span class="w">    </span><span class="kr">if</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="kr">then</span>
</span><span id="__span-13-6"><a id="__codelineno-13-6" name="__codelineno-13-6" href="#__codelineno-13-6"></a><span class="w">        </span><span class="nv">character</span><span class="p">:</span><span class="nf">save</span><span class="p">()</span><span class="w"> </span><span class="c1">-- Save before removing</span>
</span><span id="__span-13-7"><a id="__codelineno-13-7" name="__codelineno-13-7" href="#__codelineno-13-7"></a><span class="w">        </span><span class="nv">lia</span><span class="p">.</span><span class="py">char</span><span class="p">.</span><span class="nf">removeCharacter</span><span class="p">(</span><span class="nv">charID</span><span class="p">)</span>
</span><span id="__span-13-8"><a id="__codelineno-13-8" name="__codelineno-13-8" href="#__codelineno-13-8"></a><span class="w">        </span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Character&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">charID</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;removed from cache&quot;</span><span class="p">)</span>
</span><span id="__span-13-9"><a id="__codelineno-13-9" name="__codelineno-13-9" href="#__codelineno-13-9"></a><span class="w">    </span><span class="kr">end</span>
</span><span id="__span-13-10"><a id="__codelineno-13-10" name="__codelineno-13-10" href="#__codelineno-13-10"></a><span class="kr">end</span>
</span></code></pre></div></p>
<p><strong>High Complexity:</strong>
<div class="language-lua highlight"><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="c1">-- High: Batch character cleanup with error handling</span>
</span><span id="__span-14-2"><a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a><span class="kd">local</span><span class="w"> </span><span class="nv">charIDs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="mi">123</span><span class="p">,</span><span class="w"> </span><span class="mi">456</span><span class="p">,</span><span class="w"> </span><span class="mi">789</span><span class="p">}</span>
</span><span id="__span-14-3"><a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a><span class="kd">local</span><span class="w"> </span><span class="nv">removedCount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span>
</span><span id="__span-14-4"><a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a><span class="kr">for</span><span class="w"> </span><span class="nv">_</span><span class="p">,</span><span class="w"> </span><span class="nv">charID</span><span class="w"> </span><span class="kr">in</span><span class="w"> </span><span class="nb">ipairs</span><span class="p">(</span><span class="nv">charIDs</span><span class="p">)</span><span class="w"> </span><span class="kr">do</span>
</span><span id="__span-14-5"><a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a><span class="w">    </span><span class="kr">if</span><span class="w"> </span><span class="nv">lia</span><span class="p">.</span><span class="py">char</span><span class="p">.</span><span class="nf">isLoaded</span><span class="p">(</span><span class="nv">charID</span><span class="p">)</span><span class="w"> </span><span class="kr">then</span>
</span><span id="__span-14-6"><a id="__codelineno-14-6" name="__codelineno-14-6" href="#__codelineno-14-6"></a><span class="w">        </span><span class="kd">local</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">lia</span><span class="p">.</span><span class="py">char</span><span class="p">.</span><span class="nf">getCharacter</span><span class="p">(</span><span class="nv">charID</span><span class="p">)</span>
</span><span id="__span-14-7"><a id="__codelineno-14-7" name="__codelineno-14-7" href="#__codelineno-14-7"></a><span class="w">        </span><span class="kr">if</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="kr">then</span>
</span><span id="__span-14-8"><a id="__codelineno-14-8" name="__codelineno-14-8" href="#__codelineno-14-8"></a><span class="w">            </span><span class="c1">-- Perform cleanup operations</span>
</span><span id="__span-14-9"><a id="__codelineno-14-9" name="__codelineno-14-9" href="#__codelineno-14-9"></a><span class="w">            </span><span class="nv">character</span><span class="p">:</span><span class="nf">save</span><span class="p">()</span>
</span><span id="__span-14-10"><a id="__codelineno-14-10" name="__codelineno-14-10" href="#__codelineno-14-10"></a><span class="w">            </span><span class="nv">lia</span><span class="p">.</span><span class="py">inventory</span><span class="p">.</span><span class="nf">cleanUpForCharacter</span><span class="p">(</span><span class="nv">character</span><span class="p">)</span>
</span><span id="__span-14-11"><a id="__codelineno-14-11" name="__codelineno-14-11" href="#__codelineno-14-11"></a><span class="w">            </span><span class="nv">lia</span><span class="p">.</span><span class="py">char</span><span class="p">.</span><span class="nf">removeCharacter</span><span class="p">(</span><span class="nv">charID</span><span class="p">)</span>
</span><span id="__span-14-12"><a id="__codelineno-14-12" name="__codelineno-14-12" href="#__codelineno-14-12"></a><span class="w">            </span><span class="nv">removedCount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">removedCount</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span>
</span><span id="__span-14-13"><a id="__codelineno-14-13" name="__codelineno-14-13" href="#__codelineno-14-13"></a><span class="w">        </span><span class="kr">end</span>
</span><span id="__span-14-14"><a id="__codelineno-14-14" name="__codelineno-14-14" href="#__codelineno-14-14"></a><span class="w">    </span><span class="kr">end</span>
</span><span id="__span-14-15"><a id="__codelineno-14-15" name="__codelineno-14-15" href="#__codelineno-14-15"></a><span class="kr">end</span>
</span><span id="__span-14-16"><a id="__codelineno-14-16" name="__codelineno-14-16" href="#__codelineno-14-16"></a><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Removed&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">removedCount</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;characters from cache&quot;</span><span class="p">)</span>
</span></code></pre></div></p>
<hr />
<h3 id="new">new</h3>
<p><strong>Purpose</strong></p>
<p>Creates a new character object from data with proper metatable and variable initialization</p>
<p><strong>When Called</strong></p>
<p>When creating a new character instance from database data or character creation</p>
<p><strong>Parameters</strong></p>
<ul>
<li><code>data</code> (<em>table</em>): Character data containing all character variables</li>
<li><code>id</code> (<em>number</em>): The unique identifier for the character (optional)</li>
<li><code>client</code> (<em>Player</em>): The player who owns this character (optional)</li>
<li><code>steamID</code> (<em>string</em>): Steam ID of the character owner (optional, used when client is invalid)</li>
</ul>
<p><strong>Returns</strong></p>
<ul>
<li>Character object with proper metatable and initialized variables</li>
</ul>
<p><strong>Realm</strong></p>
<p>Shared (works on both server and client)</p>
<p><strong>Example Usage</strong></p>
<p><strong>Low Complexity:</strong>
<div class="language-lua highlight"><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="c1">-- Simple: Create a basic character</span>
</span><span id="__span-15-2"><a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a><span class="kd">local</span><span class="w"> </span><span class="nv">charData</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-15-3"><a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a><span class="nv">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;John Doe&quot;</span><span class="p">,</span>
</span><span id="__span-15-4"><a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a><span class="nv">desc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;A citizen of the city&quot;</span><span class="p">,</span>
</span><span id="__span-15-5"><a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a><span class="nv">faction</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Citizen&quot;</span><span class="p">,</span>
</span><span id="__span-15-6"><a id="__codelineno-15-6" name="__codelineno-15-6" href="#__codelineno-15-6"></a><span class="nv">model</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;models/player/Group01/male_01.mdl&quot;</span>
</span><span id="__span-15-7"><a id="__codelineno-15-7" name="__codelineno-15-7" href="#__codelineno-15-7"></a><span class="p">}</span>
</span><span id="__span-15-8"><a id="__codelineno-15-8" name="__codelineno-15-8" href="#__codelineno-15-8"></a><span class="kd">local</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">lia</span><span class="p">.</span><span class="py">char</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="nv">charData</span><span class="p">,</span><span class="w"> </span><span class="mi">123</span><span class="p">,</span><span class="w"> </span><span class="nv">client</span><span class="p">)</span>
</span></code></pre></div></p>
<p><strong>Medium Complexity:</strong>
<div class="language-lua highlight"><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="c1">-- Medium: Create character with full data and validation</span>
</span><span id="__span-16-2"><a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a><span class="kd">local</span><span class="w"> </span><span class="nv">charData</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-16-3"><a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a><span class="nv">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Jane Smith&quot;</span><span class="p">,</span>
</span><span id="__span-16-4"><a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a><span class="nv">desc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;A skilled engineer&quot;</span><span class="p">,</span>
</span><span id="__span-16-5"><a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a><span class="nv">faction</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Engineer&quot;</span><span class="p">,</span>
</span><span id="__span-16-6"><a id="__codelineno-16-6" name="__codelineno-16-6" href="#__codelineno-16-6"></a><span class="nv">model</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;models/player/Group01/female_01.mdl&quot;</span><span class="p">,</span>
</span><span id="__span-16-7"><a id="__codelineno-16-7" name="__codelineno-16-7" href="#__codelineno-16-7"></a><span class="nv">money</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1000</span><span class="p">,</span>
</span><span id="__span-16-8"><a id="__codelineno-16-8" name="__codelineno-16-8" href="#__codelineno-16-8"></a><span class="nv">attribs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="nv">strength</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="nv">intelligence</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">8</span><span class="p">}</span>
</span><span id="__span-16-9"><a id="__codelineno-16-9" name="__codelineno-16-9" href="#__codelineno-16-9"></a><span class="p">}</span>
</span><span id="__span-16-10"><a id="__codelineno-16-10" name="__codelineno-16-10" href="#__codelineno-16-10"></a><span class="kd">local</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">lia</span><span class="p">.</span><span class="py">char</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="nv">charData</span><span class="p">,</span><span class="w"> </span><span class="mi">456</span><span class="p">,</span><span class="w"> </span><span class="nv">client</span><span class="p">)</span>
</span><span id="__span-16-11"><a id="__codelineno-16-11" name="__codelineno-16-11" href="#__codelineno-16-11"></a><span class="kr">if</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="kr">then</span>
</span><span id="__span-16-12"><a id="__codelineno-16-12" name="__codelineno-16-12" href="#__codelineno-16-12"></a><span class="w">    </span><span class="nv">character</span><span class="p">:</span><span class="nf">setSkin</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span><span id="__span-16-13"><a id="__codelineno-16-13" name="__codelineno-16-13" href="#__codelineno-16-13"></a><span class="w">    </span><span class="nv">character</span><span class="p">:</span><span class="nf">setBodygroups</span><span class="p">({[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">})</span>
</span><span id="__span-16-14"><a id="__codelineno-16-14" name="__codelineno-16-14" href="#__codelineno-16-14"></a><span class="kr">end</span>
</span></code></pre></div></p>
<p><strong>High Complexity:</strong>
<div class="language-lua highlight"><pre><span></span><code><span id="__span-17-1"><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="c1">-- High: Create character from database with error handling</span>
</span><span id="__span-17-2"><a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a><span class="kd">local</span><span class="w"> </span><span class="nv">charID</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">789</span>
</span><span id="__span-17-3"><a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a><span class="kd">local</span><span class="w"> </span><span class="nv">charData</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">lia</span><span class="p">.</span><span class="py">char</span><span class="p">.</span><span class="nf">getCharData</span><span class="p">(</span><span class="nv">charID</span><span class="p">)</span>
</span><span id="__span-17-4"><a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a><span class="kr">if</span><span class="w"> </span><span class="nv">charData</span><span class="w"> </span><span class="kr">then</span>
</span><span id="__span-17-5"><a id="__codelineno-17-5" name="__codelineno-17-5" href="#__codelineno-17-5"></a><span class="w">    </span><span class="c1">-- Validate required fields</span>
</span><span id="__span-17-6"><a id="__codelineno-17-6" name="__codelineno-17-6" href="#__codelineno-17-6"></a><span class="w">    </span><span class="kr">if</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="nv">charData</span><span class="p">.</span><span class="py">name</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="nv">charData</span><span class="p">.</span><span class="py">faction</span><span class="w"> </span><span class="kr">then</span>
</span><span id="__span-17-7"><a id="__codelineno-17-7" name="__codelineno-17-7" href="#__codelineno-17-7"></a><span class="w">        </span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Invalid character data for ID:&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">charID</span><span class="p">)</span>
</span><span id="__span-17-8"><a id="__codelineno-17-8" name="__codelineno-17-8" href="#__codelineno-17-8"></a><span class="w">        </span><span class="kr">return</span>
</span><span id="__span-17-9"><a id="__codelineno-17-9" name="__codelineno-17-9" href="#__codelineno-17-9"></a><span class="w">    </span><span class="kr">end</span>
</span><span id="__span-17-10"><a id="__codelineno-17-10" name="__codelineno-17-10" href="#__codelineno-17-10"></a><span class="w">    </span><span class="c1">-- Create character with fallback SteamID</span>
</span><span id="__span-17-11"><a id="__codelineno-17-11" name="__codelineno-17-11" href="#__codelineno-17-11"></a><span class="w">    </span><span class="kd">local</span><span class="w"> </span><span class="nv">steamID</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">client</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="nv">client</span><span class="p">:</span><span class="nf">SteamID</span><span class="p">()</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="s2">&quot;STEAM_0:0:0&quot;</span>
</span><span id="__span-17-12"><a id="__codelineno-17-12" name="__codelineno-17-12" href="#__codelineno-17-12"></a><span class="w">    </span><span class="kd">local</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">lia</span><span class="p">.</span><span class="py">char</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="nv">charData</span><span class="p">,</span><span class="w"> </span><span class="nv">charID</span><span class="p">,</span><span class="w"> </span><span class="nv">client</span><span class="p">,</span><span class="w"> </span><span class="nv">steamID</span><span class="p">)</span>
</span><span id="__span-17-13"><a id="__codelineno-17-13" name="__codelineno-17-13" href="#__codelineno-17-13"></a><span class="w">    </span><span class="kr">if</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="kr">then</span>
</span><span id="__span-17-14"><a id="__codelineno-17-14" name="__codelineno-17-14" href="#__codelineno-17-14"></a><span class="w">        </span><span class="c1">-- Initialize additional data</span>
</span><span id="__span-17-15"><a id="__codelineno-17-15" name="__codelineno-17-15" href="#__codelineno-17-15"></a><span class="w">        </span><span class="nv">character</span><span class="p">.</span><span class="py">vars</span><span class="p">.</span><span class="py">inv</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{}</span>
</span><span id="__span-17-16"><a id="__codelineno-17-16" name="__codelineno-17-16" href="#__codelineno-17-16"></a><span class="w">        </span><span class="nv">character</span><span class="p">.</span><span class="py">vars</span><span class="p">.</span><span class="py">loginTime</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">os.time</span><span class="p">()</span>
</span><span id="__span-17-17"><a id="__codelineno-17-17" name="__codelineno-17-17" href="#__codelineno-17-17"></a><span class="w">        </span><span class="nv">lia</span><span class="p">.</span><span class="py">char</span><span class="p">.</span><span class="nf">addCharacter</span><span class="p">(</span><span class="nv">charID</span><span class="p">,</span><span class="w"> </span><span class="nv">character</span><span class="p">)</span>
</span><span id="__span-17-18"><a id="__codelineno-17-18" name="__codelineno-17-18" href="#__codelineno-17-18"></a><span class="w">    </span><span class="kr">end</span>
</span><span id="__span-17-19"><a id="__codelineno-17-19" name="__codelineno-17-19" href="#__codelineno-17-19"></a><span class="kr">end</span>
</span></code></pre></div></p>
<hr />
<h3 id="hookvar">hookVar</h3>
<p><strong>Purpose</strong></p>
<p>Registers a hook function for a specific character variable</p>
<p><strong>When Called</strong></p>
<p>When you need to add custom behavior when a character variable changes</p>
<p><strong>Parameters</strong></p>
<ul>
<li><code>varName</code> (<em>string</em>): The name of the character variable to hook</li>
<li><code>hookName</code> (<em>string</em>): The name/identifier for this hook</li>
<li><code>func</code> (<em>function</em>): The function to call when the variable changes</li>
</ul>
<p><strong>Returns</strong></p>
<ul>
<li>None</li>
</ul>
<p><strong>Realm</strong></p>
<p>Shared (works on both server and client)</p>
<p><strong>Example Usage</strong></p>
<p><strong>Low Complexity:</strong>
<div class="language-lua highlight"><pre><span></span><code><span id="__span-18-1"><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a><span class="c1">-- Simple: Hook a variable change</span>
</span><span id="__span-18-2"><a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a><span class="nv">lia</span><span class="p">.</span><span class="py">char</span><span class="p">.</span><span class="nf">hookVar</span><span class="p">(</span><span class="s2">&quot;money&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;onMoneyChange&quot;</span><span class="p">,</span><span class="w"> </span><span class="kr">function</span><span class="p">(</span><span class="nv">character</span><span class="p">,</span><span class="w"> </span><span class="nv">oldValue</span><span class="p">,</span><span class="w"> </span><span class="nv">newValue</span><span class="p">)</span>
</span><span id="__span-18-3"><a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Money changed from&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">oldValue</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;to&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">newValue</span><span class="p">)</span>
</span><span id="__span-18-4"><a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a><span class="kr">end</span><span class="p">)</span>
</span></code></pre></div></p>
<p><strong>Medium Complexity:</strong>
<div class="language-lua highlight"><pre><span></span><code><span id="__span-19-1"><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a><span class="c1">-- Medium: Hook with validation and side effects</span>
</span><span id="__span-19-2"><a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a><span class="nv">lia</span><span class="p">.</span><span class="py">char</span><span class="p">.</span><span class="nf">hookVar</span><span class="p">(</span><span class="s2">&quot;faction&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;onFactionChange&quot;</span><span class="p">,</span><span class="w"> </span><span class="kr">function</span><span class="p">(</span><span class="nv">character</span><span class="p">,</span><span class="w"> </span><span class="nv">oldValue</span><span class="p">,</span><span class="w"> </span><span class="nv">newValue</span><span class="p">)</span>
</span><span id="__span-19-3"><a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a><span class="kd">local</span><span class="w"> </span><span class="nv">client</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">character</span><span class="p">:</span><span class="nf">getPlayer</span><span class="p">()</span>
</span><span id="__span-19-4"><a id="__codelineno-19-4" name="__codelineno-19-4" href="#__codelineno-19-4"></a><span class="kr">if</span><span class="w"> </span><span class="nf">IsValid</span><span class="p">(</span><span class="nv">client</span><span class="p">)</span><span class="w"> </span><span class="kr">then</span>
</span><span id="__span-19-5"><a id="__codelineno-19-5" name="__codelineno-19-5" href="#__codelineno-19-5"></a><span class="w">    </span><span class="c1">-- Update player team</span>
</span><span id="__span-19-6"><a id="__codelineno-19-6" name="__codelineno-19-6" href="#__codelineno-19-6"></a><span class="w">    </span><span class="nv">client</span><span class="p">:</span><span class="nf">SetTeam</span><span class="p">(</span><span class="nv">lia</span><span class="p">.</span><span class="py">faction</span><span class="p">.</span><span class="py">indices</span><span class="p">[</span><span class="nv">newValue</span><span class="p">].</span><span class="nv">index</span><span class="p">)</span>
</span><span id="__span-19-7"><a id="__codelineno-19-7" name="__codelineno-19-7" href="#__codelineno-19-7"></a><span class="w">    </span><span class="c1">-- Notify player</span>
</span><span id="__span-19-8"><a id="__codelineno-19-8" name="__codelineno-19-8" href="#__codelineno-19-8"></a><span class="w">    </span><span class="nv">client</span><span class="p">:</span><span class="nf">notify</span><span class="p">(</span><span class="s2">&quot;Faction changed to: &quot;</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="nv">newValue</span><span class="p">)</span>
</span><span id="__span-19-9"><a id="__codelineno-19-9" name="__codelineno-19-9" href="#__codelineno-19-9"></a><span class="w">    </span><span class="c1">-- Log the change</span>
</span><span id="__span-19-10"><a id="__codelineno-19-10" name="__codelineno-19-10" href="#__codelineno-19-10"></a><span class="w">    </span><span class="nv">lia</span><span class="p">.</span><span class="py">log</span><span class="p">.</span><span class="nf">add</span><span class="p">(</span><span class="s2">&quot;Faction change: &quot;</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="nv">client</span><span class="p">:</span><span class="nf">Name</span><span class="p">()</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="s2">&quot; changed faction from &quot;</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="nv">oldValue</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="s2">&quot; to &quot;</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="nv">newValue</span><span class="p">)</span>
</span><span id="__span-19-11"><a id="__codelineno-19-11" name="__codelineno-19-11" href="#__codelineno-19-11"></a><span class="kr">end</span>
</span><span id="__span-19-12"><a id="__codelineno-19-12" name="__codelineno-19-12" href="#__codelineno-19-12"></a><span class="kr">end</span><span class="p">)</span>
</span></code></pre></div></p>
<p><strong>High Complexity:</strong>
<div class="language-lua highlight"><pre><span></span><code><span id="__span-20-1"><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a><span class="c1">-- High: Multiple hooks with complex logic</span>
</span><span id="__span-20-2"><a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a><span class="kd">local</span><span class="w"> </span><span class="nv">hooks</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-20-3"><a id="__codelineno-20-3" name="__codelineno-20-3" href="#__codelineno-20-3"></a><span class="nv">money</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kr">function</span><span class="p">(</span><span class="nv">character</span><span class="p">,</span><span class="w"> </span><span class="nv">oldValue</span><span class="p">,</span><span class="w"> </span><span class="nv">newValue</span><span class="p">)</span>
</span><span id="__span-20-4"><a id="__codelineno-20-4" name="__codelineno-20-4" href="#__codelineno-20-4"></a><span class="kd">local</span><span class="w"> </span><span class="nv">client</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">character</span><span class="p">:</span><span class="nf">getPlayer</span><span class="p">()</span>
</span><span id="__span-20-5"><a id="__codelineno-20-5" name="__codelineno-20-5" href="#__codelineno-20-5"></a><span class="kr">if</span><span class="w"> </span><span class="nf">IsValid</span><span class="p">(</span><span class="nv">client</span><span class="p">)</span><span class="w"> </span><span class="kr">then</span>
</span><span id="__span-20-6"><a id="__codelineno-20-6" name="__codelineno-20-6" href="#__codelineno-20-6"></a><span class="w">    </span><span class="kd">local</span><span class="w"> </span><span class="nv">difference</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">newValue</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nv">oldValue</span>
</span><span id="__span-20-7"><a id="__codelineno-20-7" name="__codelineno-20-7" href="#__codelineno-20-7"></a><span class="w">    </span><span class="kr">if</span><span class="w"> </span><span class="nv">difference</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="kr">then</span>
</span><span id="__span-20-8"><a id="__codelineno-20-8" name="__codelineno-20-8" href="#__codelineno-20-8"></a><span class="w">        </span><span class="nv">client</span><span class="p">:</span><span class="nf">notify</span><span class="p">(</span><span class="s2">&quot;Gained $&quot;</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="nv">difference</span><span class="p">)</span>
</span><span id="__span-20-9"><a id="__codelineno-20-9" name="__codelineno-20-9" href="#__codelineno-20-9"></a><span class="w">        </span><span class="kr">elseif</span><span class="w"> </span><span class="nv">difference</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="kr">then</span>
</span><span id="__span-20-10"><a id="__codelineno-20-10" name="__codelineno-20-10" href="#__codelineno-20-10"></a><span class="w">            </span><span class="nv">client</span><span class="p">:</span><span class="nf">notify</span><span class="p">(</span><span class="s2">&quot;Lost $&quot;</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="nb">math.abs</span><span class="p">(</span><span class="nv">difference</span><span class="p">))</span>
</span><span id="__span-20-11"><a id="__codelineno-20-11" name="__codelineno-20-11" href="#__codelineno-20-11"></a><span class="w">        </span><span class="kr">end</span>
</span><span id="__span-20-12"><a id="__codelineno-20-12" name="__codelineno-20-12" href="#__codelineno-20-12"></a><span class="w">        </span><span class="c1">-- Update HUD if it exists</span>
</span><span id="__span-20-13"><a id="__codelineno-20-13" name="__codelineno-20-13" href="#__codelineno-20-13"></a><span class="w">        </span><span class="kr">if</span><span class="w"> </span><span class="nv">client</span><span class="p">.</span><span class="py">liaHUD</span><span class="w"> </span><span class="kr">then</span>
</span><span id="__span-20-14"><a id="__codelineno-20-14" name="__codelineno-20-14" href="#__codelineno-20-14"></a><span class="w">            </span><span class="nv">client</span><span class="p">.</span><span class="py">liaHUD</span><span class="p">:</span><span class="nf">updateMoney</span><span class="p">(</span><span class="nv">newValue</span><span class="p">)</span>
</span><span id="__span-20-15"><a id="__codelineno-20-15" name="__codelineno-20-15" href="#__codelineno-20-15"></a><span class="w">        </span><span class="kr">end</span>
</span><span id="__span-20-16"><a id="__codelineno-20-16" name="__codelineno-20-16" href="#__codelineno-20-16"></a><span class="w">    </span><span class="kr">end</span>
</span><span id="__span-20-17"><a id="__codelineno-20-17" name="__codelineno-20-17" href="#__codelineno-20-17"></a><span class="kr">end</span><span class="p">,</span>
</span><span id="__span-20-18"><a id="__codelineno-20-18" name="__codelineno-20-18" href="#__codelineno-20-18"></a><span class="nv">health</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kr">function</span><span class="p">(</span><span class="nv">character</span><span class="p">,</span><span class="w"> </span><span class="nv">oldValue</span><span class="p">,</span><span class="w"> </span><span class="nv">newValue</span><span class="p">)</span>
</span><span id="__span-20-19"><a id="__codelineno-20-19" name="__codelineno-20-19" href="#__codelineno-20-19"></a><span class="kr">if</span><span class="w"> </span><span class="nv">newValue</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="nv">oldValue</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="kr">then</span>
</span><span id="__span-20-20"><a id="__codelineno-20-20" name="__codelineno-20-20" href="#__codelineno-20-20"></a><span class="w">    </span><span class="nv">hook</span><span class="p">.</span><span class="nf">Run</span><span class="p">(</span><span class="s2">&quot;OnCharacterDeath&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">character</span><span class="p">)</span>
</span><span id="__span-20-21"><a id="__codelineno-20-21" name="__codelineno-20-21" href="#__codelineno-20-21"></a><span class="w">    </span><span class="kr">elseif</span><span class="w"> </span><span class="nv">newValue</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="nv">oldValue</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="kr">then</span>
</span><span id="__span-20-22"><a id="__codelineno-20-22" name="__codelineno-20-22" href="#__codelineno-20-22"></a><span class="w">        </span><span class="nv">hook</span><span class="p">.</span><span class="nf">Run</span><span class="p">(</span><span class="s2">&quot;OnCharacterRevive&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">character</span><span class="p">)</span>
</span><span id="__span-20-23"><a id="__codelineno-20-23" name="__codelineno-20-23" href="#__codelineno-20-23"></a><span class="w">    </span><span class="kr">end</span>
</span><span id="__span-20-24"><a id="__codelineno-20-24" name="__codelineno-20-24" href="#__codelineno-20-24"></a><span class="kr">end</span>
</span><span id="__span-20-25"><a id="__codelineno-20-25" name="__codelineno-20-25" href="#__codelineno-20-25"></a><span class="p">}</span>
</span><span id="__span-20-26"><a id="__codelineno-20-26" name="__codelineno-20-26" href="#__codelineno-20-26"></a><span class="kr">for</span><span class="w"> </span><span class="nv">varName</span><span class="p">,</span><span class="w"> </span><span class="nv">hookFunc</span><span class="w"> </span><span class="kr">in</span><span class="w"> </span><span class="nb">pairs</span><span class="p">(</span><span class="nv">hooks</span><span class="p">)</span><span class="w"> </span><span class="kr">do</span>
</span><span id="__span-20-27"><a id="__codelineno-20-27" name="__codelineno-20-27" href="#__codelineno-20-27"></a><span class="w">    </span><span class="nv">lia</span><span class="p">.</span><span class="py">char</span><span class="p">.</span><span class="nf">hookVar</span><span class="p">(</span><span class="nv">varName</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;customHook_&quot;</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="nv">varName</span><span class="p">,</span><span class="w"> </span><span class="nv">hookFunc</span><span class="p">)</span>
</span><span id="__span-20-28"><a id="__codelineno-20-28" name="__codelineno-20-28" href="#__codelineno-20-28"></a><span class="kr">end</span>
</span></code></pre></div></p>
<hr />
<h3 id="registervar">registerVar</h3>
<p><strong>Purpose</strong></p>
<p>Registers a new character variable with validation, networking, and database persistence</p>
<p><strong>When Called</strong></p>
<p>During gamemode initialization to define character variables and their behavior</p>
<p><strong>Parameters</strong></p>
<ul>
<li><code>key</code> (<em>string</em>): The unique identifier for the character variable</li>
<li><code>data</code> (<em>table</em>): Configuration table containing variable properties and callbacks</li>
</ul>
<p><strong>Returns</strong></p>
<ul>
<li>None</li>
</ul>
<p><strong>Realm</strong></p>
<p>Shared (works on both server and client)</p>
<p><strong>Example Usage</strong></p>
<p><strong>Low Complexity:</strong>
<div class="language-lua highlight"><pre><span></span><code><span id="__span-21-1"><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a><span class="c1">-- Simple: Register a basic character variable</span>
</span><span id="__span-21-2"><a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a><span class="nv">lia</span><span class="p">.</span><span class="py">char</span><span class="p">.</span><span class="nf">registerVar</span><span class="p">(</span><span class="s2">&quot;level&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-21-3"><a id="__codelineno-21-3" name="__codelineno-21-3" href="#__codelineno-21-3"></a><span class="nv">field</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;level&quot;</span><span class="p">,</span>
</span><span id="__span-21-4"><a id="__codelineno-21-4" name="__codelineno-21-4" href="#__codelineno-21-4"></a><span class="nv">fieldType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;integer&quot;</span><span class="p">,</span>
</span><span id="__span-21-5"><a id="__codelineno-21-5" name="__codelineno-21-5" href="#__codelineno-21-5"></a><span class="nv">default</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
</span><span id="__span-21-6"><a id="__codelineno-21-6" name="__codelineno-21-6" href="#__codelineno-21-6"></a><span class="nv">index</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span>
</span><span id="__span-21-7"><a id="__codelineno-21-7" name="__codelineno-21-7" href="#__codelineno-21-7"></a><span class="p">})</span>
</span></code></pre></div></p>
<p><strong>Medium Complexity:</strong>
<div class="language-lua highlight"><pre><span></span><code><span id="__span-22-1"><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a><span class="c1">-- Medium: Register variable with validation and custom behavior</span>
</span><span id="__span-22-2"><a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a><span class="nv">lia</span><span class="p">.</span><span class="py">char</span><span class="p">.</span><span class="nf">registerVar</span><span class="p">(</span><span class="s2">&quot;reputation&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-22-3"><a id="__codelineno-22-3" name="__codelineno-22-3" href="#__codelineno-22-3"></a><span class="nv">field</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;reputation&quot;</span><span class="p">,</span>
</span><span id="__span-22-4"><a id="__codelineno-22-4" name="__codelineno-22-4" href="#__codelineno-22-4"></a><span class="nv">fieldType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;integer&quot;</span><span class="p">,</span>
</span><span id="__span-22-5"><a id="__codelineno-22-5" name="__codelineno-22-5" href="#__codelineno-22-5"></a><span class="nv">default</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
</span><span id="__span-22-6"><a id="__codelineno-22-6" name="__codelineno-22-6" href="#__codelineno-22-6"></a><span class="nv">index</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span>
</span><span id="__span-22-7"><a id="__codelineno-22-7" name="__codelineno-22-7" href="#__codelineno-22-7"></a><span class="nv">onValidate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kr">function</span><span class="p">(</span><span class="nv">value</span><span class="p">,</span><span class="w"> </span><span class="nv">data</span><span class="p">,</span><span class="w"> </span><span class="nv">client</span><span class="p">)</span>
</span><span id="__span-22-8"><a id="__codelineno-22-8" name="__codelineno-22-8" href="#__codelineno-22-8"></a><span class="kr">if</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="nf">isnumber</span><span class="p">(</span><span class="nv">value</span><span class="p">)</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="nv">value</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="o">-</span><span class="mi">100</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="nv">value</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">100</span><span class="w"> </span><span class="kr">then</span>
</span><span id="__span-22-9"><a id="__codelineno-22-9" name="__codelineno-22-9" href="#__codelineno-22-9"></a><span class="w">    </span><span class="kr">return</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;invalid&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;reputation&quot;</span>
</span><span id="__span-22-10"><a id="__codelineno-22-10" name="__codelineno-22-10" href="#__codelineno-22-10"></a><span class="kr">end</span>
</span><span id="__span-22-11"><a id="__codelineno-22-11" name="__codelineno-22-11" href="#__codelineno-22-11"></a><span class="kr">return</span><span class="w"> </span><span class="kc">true</span>
</span><span id="__span-22-12"><a id="__codelineno-22-12" name="__codelineno-22-12" href="#__codelineno-22-12"></a><span class="kr">end</span><span class="p">,</span>
</span><span id="__span-22-13"><a id="__codelineno-22-13" name="__codelineno-22-13" href="#__codelineno-22-13"></a><span class="nv">onSet</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kr">function</span><span class="p">(</span><span class="nv">character</span><span class="p">,</span><span class="w"> </span><span class="nv">value</span><span class="p">)</span>
</span><span id="__span-22-14"><a id="__codelineno-22-14" name="__codelineno-22-14" href="#__codelineno-22-14"></a><span class="kd">local</span><span class="w"> </span><span class="nv">oldValue</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">character</span><span class="p">:</span><span class="nf">getReputation</span><span class="p">()</span>
</span><span id="__span-22-15"><a id="__codelineno-22-15" name="__codelineno-22-15" href="#__codelineno-22-15"></a><span class="nv">character</span><span class="p">.</span><span class="py">vars</span><span class="p">.</span><span class="py">reputation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">value</span>
</span><span id="__span-22-16"><a id="__codelineno-22-16" name="__codelineno-22-16" href="#__codelineno-22-16"></a><span class="c1">-- Notify player of reputation change</span>
</span><span id="__span-22-17"><a id="__codelineno-22-17" name="__codelineno-22-17" href="#__codelineno-22-17"></a><span class="kd">local</span><span class="w"> </span><span class="nv">client</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">character</span><span class="p">:</span><span class="nf">getPlayer</span><span class="p">()</span>
</span><span id="__span-22-18"><a id="__codelineno-22-18" name="__codelineno-22-18" href="#__codelineno-22-18"></a><span class="kr">if</span><span class="w"> </span><span class="nf">IsValid</span><span class="p">(</span><span class="nv">client</span><span class="p">)</span><span class="w"> </span><span class="kr">then</span>
</span><span id="__span-22-19"><a id="__codelineno-22-19" name="__codelineno-22-19" href="#__codelineno-22-19"></a><span class="w">    </span><span class="nv">client</span><span class="p">:</span><span class="nf">notify</span><span class="p">(</span><span class="s2">&quot;Reputation changed to: &quot;</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="nv">value</span><span class="p">)</span>
</span><span id="__span-22-20"><a id="__codelineno-22-20" name="__codelineno-22-20" href="#__codelineno-22-20"></a><span class="kr">end</span>
</span><span id="__span-22-21"><a id="__codelineno-22-21" name="__codelineno-22-21" href="#__codelineno-22-21"></a><span class="nv">hook</span><span class="p">.</span><span class="nf">Run</span><span class="p">(</span><span class="s2">&quot;OnCharVarChanged&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">character</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;reputation&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">oldValue</span><span class="p">,</span><span class="w"> </span><span class="nv">value</span><span class="p">)</span>
</span><span id="__span-22-22"><a id="__codelineno-22-22" name="__codelineno-22-22" href="#__codelineno-22-22"></a><span class="kr">end</span>
</span><span id="__span-22-23"><a id="__codelineno-22-23" name="__codelineno-22-23" href="#__codelineno-22-23"></a><span class="p">})</span>
</span></code></pre></div></p>
<p><strong>High Complexity:</strong>
<div class="language-lua highlight"><pre><span></span><code><span id="__span-23-1"><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a><span class="c1">-- High: Register complex variable with full feature set</span>
</span><span id="__span-23-2"><a id="__codelineno-23-2" name="__codelineno-23-2" href="#__codelineno-23-2"></a><span class="nv">lia</span><span class="p">.</span><span class="py">char</span><span class="p">.</span><span class="nf">registerVar</span><span class="p">(</span><span class="s2">&quot;skills&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-23-3"><a id="__codelineno-23-3" name="__codelineno-23-3" href="#__codelineno-23-3"></a><span class="nv">field</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;skills&quot;</span><span class="p">,</span>
</span><span id="__span-23-4"><a id="__codelineno-23-4" name="__codelineno-23-4" href="#__codelineno-23-4"></a><span class="nv">fieldType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;text&quot;</span><span class="p">,</span>
</span><span id="__span-23-5"><a id="__codelineno-23-5" name="__codelineno-23-5" href="#__codelineno-23-5"></a><span class="nv">default</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{},</span>
</span><span id="__span-23-6"><a id="__codelineno-23-6" name="__codelineno-23-6" href="#__codelineno-23-6"></a><span class="nv">index</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span>
</span><span id="__span-23-7"><a id="__codelineno-23-7" name="__codelineno-23-7" href="#__codelineno-23-7"></a><span class="nv">isLocal</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
</span><span id="__span-23-8"><a id="__codelineno-23-8" name="__codelineno-23-8" href="#__codelineno-23-8"></a><span class="nv">onValidate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kr">function</span><span class="p">(</span><span class="nv">value</span><span class="p">,</span><span class="w"> </span><span class="nv">data</span><span class="p">,</span><span class="w"> </span><span class="nv">client</span><span class="p">)</span>
</span><span id="__span-23-9"><a id="__codelineno-23-9" name="__codelineno-23-9" href="#__codelineno-23-9"></a><span class="kr">if</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="nf">istable</span><span class="p">(</span><span class="nv">value</span><span class="p">)</span><span class="w"> </span><span class="kr">then</span><span class="w"> </span><span class="kr">return</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;invalid&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;skills&quot;</span><span class="w"> </span><span class="kr">end</span>
</span><span id="__span-23-10"><a id="__codelineno-23-10" name="__codelineno-23-10" href="#__codelineno-23-10"></a><span class="w">    </span><span class="kd">local</span><span class="w"> </span><span class="nv">totalPoints</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span>
</span><span id="__span-23-11"><a id="__codelineno-23-11" name="__codelineno-23-11" href="#__codelineno-23-11"></a><span class="w">    </span><span class="kr">for</span><span class="w"> </span><span class="nv">skillName</span><span class="p">,</span><span class="w"> </span><span class="nv">level</span><span class="w"> </span><span class="kr">in</span><span class="w"> </span><span class="nb">pairs</span><span class="p">(</span><span class="nv">value</span><span class="p">)</span><span class="w"> </span><span class="kr">do</span>
</span><span id="__span-23-12"><a id="__codelineno-23-12" name="__codelineno-23-12" href="#__codelineno-23-12"></a><span class="w">        </span><span class="kr">if</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="nf">isnumber</span><span class="p">(</span><span class="nv">level</span><span class="p">)</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="nv">level</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="nv">level</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">100</span><span class="w"> </span><span class="kr">then</span>
</span><span id="__span-23-13"><a id="__codelineno-23-13" name="__codelineno-23-13" href="#__codelineno-23-13"></a><span class="w">            </span><span class="kr">return</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;invalid&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;skillLevel&quot;</span>
</span><span id="__span-23-14"><a id="__codelineno-23-14" name="__codelineno-23-14" href="#__codelineno-23-14"></a><span class="w">        </span><span class="kr">end</span>
</span><span id="__span-23-15"><a id="__codelineno-23-15" name="__codelineno-23-15" href="#__codelineno-23-15"></a><span class="w">        </span><span class="nv">totalPoints</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">totalPoints</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nv">level</span>
</span><span id="__span-23-16"><a id="__codelineno-23-16" name="__codelineno-23-16" href="#__codelineno-23-16"></a><span class="w">    </span><span class="kr">end</span>
</span><span id="__span-23-17"><a id="__codelineno-23-17" name="__codelineno-23-17" href="#__codelineno-23-17"></a><span class="w">    </span><span class="kd">local</span><span class="w"> </span><span class="nv">maxPoints</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">hook</span><span class="p">.</span><span class="nf">Run</span><span class="p">(</span><span class="s2">&quot;GetMaxSkillPoints&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">client</span><span class="p">)</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="mi">500</span>
</span><span id="__span-23-18"><a id="__codelineno-23-18" name="__codelineno-23-18" href="#__codelineno-23-18"></a><span class="w">    </span><span class="kr">if</span><span class="w"> </span><span class="nv">totalPoints</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="nv">maxPoints</span><span class="w"> </span><span class="kr">then</span>
</span><span id="__span-23-19"><a id="__codelineno-23-19" name="__codelineno-23-19" href="#__codelineno-23-19"></a><span class="w">        </span><span class="kr">return</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;tooManySkillPoints&quot;</span>
</span><span id="__span-23-20"><a id="__codelineno-23-20" name="__codelineno-23-20" href="#__codelineno-23-20"></a><span class="w">    </span><span class="kr">end</span>
</span><span id="__span-23-21"><a id="__codelineno-23-21" name="__codelineno-23-21" href="#__codelineno-23-21"></a><span class="w">    </span><span class="kr">return</span><span class="w"> </span><span class="kc">true</span>
</span><span id="__span-23-22"><a id="__codelineno-23-22" name="__codelineno-23-22" href="#__codelineno-23-22"></a><span class="kr">end</span><span class="p">,</span>
</span><span id="__span-23-23"><a id="__codelineno-23-23" name="__codelineno-23-23" href="#__codelineno-23-23"></a><span class="nv">onSet</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kr">function</span><span class="p">(</span><span class="nv">character</span><span class="p">,</span><span class="w"> </span><span class="nv">value</span><span class="p">)</span>
</span><span id="__span-23-24"><a id="__codelineno-23-24" name="__codelineno-23-24" href="#__codelineno-23-24"></a><span class="kd">local</span><span class="w"> </span><span class="nv">oldValue</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">character</span><span class="p">:</span><span class="nf">getSkills</span><span class="p">()</span>
</span><span id="__span-23-25"><a id="__codelineno-23-25" name="__codelineno-23-25" href="#__codelineno-23-25"></a><span class="nv">character</span><span class="p">.</span><span class="py">vars</span><span class="p">.</span><span class="py">skills</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">value</span>
</span><span id="__span-23-26"><a id="__codelineno-23-26" name="__codelineno-23-26" href="#__codelineno-23-26"></a><span class="c1">-- Recalculate derived stats</span>
</span><span id="__span-23-27"><a id="__codelineno-23-27" name="__codelineno-23-27" href="#__codelineno-23-27"></a><span class="kd">local</span><span class="w"> </span><span class="nv">client</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">character</span><span class="p">:</span><span class="nf">getPlayer</span><span class="p">()</span>
</span><span id="__span-23-28"><a id="__codelineno-23-28" name="__codelineno-23-28" href="#__codelineno-23-28"></a><span class="kr">if</span><span class="w"> </span><span class="nf">IsValid</span><span class="p">(</span><span class="nv">client</span><span class="p">)</span><span class="w"> </span><span class="kr">then</span>
</span><span id="__span-23-29"><a id="__codelineno-23-29" name="__codelineno-23-29" href="#__codelineno-23-29"></a><span class="w">    </span><span class="nv">hook</span><span class="p">.</span><span class="nf">Run</span><span class="p">(</span><span class="s2">&quot;OnSkillsChanged&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">character</span><span class="p">,</span><span class="w"> </span><span class="nv">oldValue</span><span class="p">,</span><span class="w"> </span><span class="nv">value</span><span class="p">)</span>
</span><span id="__span-23-30"><a id="__codelineno-23-30" name="__codelineno-23-30" href="#__codelineno-23-30"></a><span class="kr">end</span>
</span><span id="__span-23-31"><a id="__codelineno-23-31" name="__codelineno-23-31" href="#__codelineno-23-31"></a><span class="kr">end</span><span class="p">,</span>
</span><span id="__span-23-32"><a id="__codelineno-23-32" name="__codelineno-23-32" href="#__codelineno-23-32"></a><span class="nv">onGet</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kr">function</span><span class="p">(</span><span class="nv">character</span><span class="p">,</span><span class="w"> </span><span class="nv">default</span><span class="p">)</span>
</span><span id="__span-23-33"><a id="__codelineno-23-33" name="__codelineno-23-33" href="#__codelineno-23-33"></a><span class="kr">return</span><span class="w"> </span><span class="nv">character</span><span class="p">.</span><span class="py">vars</span><span class="p">.</span><span class="py">skills</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="nv">default</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="p">{}</span>
</span><span id="__span-23-34"><a id="__codelineno-23-34" name="__codelineno-23-34" href="#__codelineno-23-34"></a><span class="kr">end</span><span class="p">,</span>
</span><span id="__span-23-35"><a id="__codelineno-23-35" name="__codelineno-23-35" href="#__codelineno-23-35"></a><span class="nv">shouldDisplay</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kr">function</span><span class="p">()</span>
</span><span id="__span-23-36"><a id="__codelineno-23-36" name="__codelineno-23-36" href="#__codelineno-23-36"></a><span class="kr">return</span><span class="w"> </span><span class="nv">lia</span><span class="p">.</span><span class="py">config</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="s2">&quot;EnableSkills&quot;</span><span class="p">,</span><span class="w"> </span><span class="kc">true</span><span class="p">)</span>
</span><span id="__span-23-37"><a id="__codelineno-23-37" name="__codelineno-23-37" href="#__codelineno-23-37"></a><span class="kr">end</span>
</span><span id="__span-23-38"><a id="__codelineno-23-38" name="__codelineno-23-38" href="#__codelineno-23-38"></a><span class="p">})</span>
</span></code></pre></div></p>
<hr />
<h3 id="getchardata">getCharData</h3>
<p><strong>Purpose</strong></p>
<p>Retrieves character data from the database with automatic decoding</p>
<p><strong>When Called</strong></p>
<p>When you need to access character data directly from the database</p>
<p><strong>Parameters</strong></p>
<ul>
<li><code>charID</code> (<em>number</em>): The unique identifier of the character</li>
<li><code>key</code> (<em>string</em>): Specific data key to retrieve (optional)</li>
</ul>
<p><strong>Returns</strong></p>
<ul>
<li>Table of character data or specific value if key provided</li>
</ul>
<p><strong>Realm</strong></p>
<p>Server only</p>
<p><strong>Example Usage</strong></p>
<p><strong>Low Complexity:</strong>
<div class="language-lua highlight"><pre><span></span><code><span id="__span-24-1"><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a><span class="c1">-- Simple: Get all character data</span>
</span><span id="__span-24-2"><a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a><span class="kd">local</span><span class="w"> </span><span class="nv">charData</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">lia</span><span class="p">.</span><span class="py">char</span><span class="p">.</span><span class="nf">getCharData</span><span class="p">(</span><span class="mi">123</span><span class="p">)</span>
</span><span id="__span-24-3"><a id="__codelineno-24-3" name="__codelineno-24-3" href="#__codelineno-24-3"></a><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Character name:&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">charData</span><span class="p">.</span><span class="py">name</span><span class="p">)</span>
</span></code></pre></div></p>
<p><strong>Medium Complexity:</strong>
<div class="language-lua highlight"><pre><span></span><code><span id="__span-25-1"><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a><span class="c1">-- Medium: Get specific character data</span>
</span><span id="__span-25-2"><a id="__codelineno-25-2" name="__codelineno-25-2" href="#__codelineno-25-2"></a><span class="kd">local</span><span class="w"> </span><span class="nv">charID</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">123</span>
</span><span id="__span-25-3"><a id="__codelineno-25-3" name="__codelineno-25-3" href="#__codelineno-25-3"></a><span class="kd">local</span><span class="w"> </span><span class="nv">characterName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">lia</span><span class="p">.</span><span class="py">char</span><span class="p">.</span><span class="nf">getCharData</span><span class="p">(</span><span class="nv">charID</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;name&quot;</span><span class="p">)</span>
</span><span id="__span-25-4"><a id="__codelineno-25-4" name="__codelineno-25-4" href="#__codelineno-25-4"></a><span class="kd">local</span><span class="w"> </span><span class="nv">characterMoney</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">lia</span><span class="p">.</span><span class="py">char</span><span class="p">.</span><span class="nf">getCharData</span><span class="p">(</span><span class="nv">charID</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;money&quot;</span><span class="p">)</span>
</span><span id="__span-25-5"><a id="__codelineno-25-5" name="__codelineno-25-5" href="#__codelineno-25-5"></a><span class="kr">if</span><span class="w"> </span><span class="nv">characterName</span><span class="w"> </span><span class="kr">then</span>
</span><span id="__span-25-6"><a id="__codelineno-25-6" name="__codelineno-25-6" href="#__codelineno-25-6"></a><span class="w">    </span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Character&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">characterName</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;has&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">characterMoney</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;money&quot;</span><span class="p">)</span>
</span><span id="__span-25-7"><a id="__codelineno-25-7" name="__codelineno-25-7" href="#__codelineno-25-7"></a><span class="kr">end</span>
</span></code></pre></div></p>
<p><strong>High Complexity:</strong>
<div class="language-lua highlight"><pre><span></span><code><span id="__span-26-1"><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a><span class="c1">-- High: Batch character data retrieval with validation</span>
</span><span id="__span-26-2"><a id="__codelineno-26-2" name="__codelineno-26-2" href="#__codelineno-26-2"></a><span class="kd">local</span><span class="w"> </span><span class="nv">charIDs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="mi">123</span><span class="p">,</span><span class="w"> </span><span class="mi">456</span><span class="p">,</span><span class="w"> </span><span class="mi">789</span><span class="p">}</span>
</span><span id="__span-26-3"><a id="__codelineno-26-3" name="__codelineno-26-3" href="#__codelineno-26-3"></a><span class="kd">local</span><span class="w"> </span><span class="nv">charactersData</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{}</span>
</span><span id="__span-26-4"><a id="__codelineno-26-4" name="__codelineno-26-4" href="#__codelineno-26-4"></a><span class="kr">for</span><span class="w"> </span><span class="nv">_</span><span class="p">,</span><span class="w"> </span><span class="nv">charID</span><span class="w"> </span><span class="kr">in</span><span class="w"> </span><span class="nb">ipairs</span><span class="p">(</span><span class="nv">charIDs</span><span class="p">)</span><span class="w"> </span><span class="kr">do</span>
</span><span id="__span-26-5"><a id="__codelineno-26-5" name="__codelineno-26-5" href="#__codelineno-26-5"></a><span class="w">    </span><span class="kd">local</span><span class="w"> </span><span class="nv">charData</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">lia</span><span class="p">.</span><span class="py">char</span><span class="p">.</span><span class="nf">getCharData</span><span class="p">(</span><span class="nv">charID</span><span class="p">)</span>
</span><span id="__span-26-6"><a id="__codelineno-26-6" name="__codelineno-26-6" href="#__codelineno-26-6"></a><span class="w">    </span><span class="kr">if</span><span class="w"> </span><span class="nv">charData</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="nv">charData</span><span class="p">.</span><span class="py">name</span><span class="w"> </span><span class="kr">then</span>
</span><span id="__span-26-7"><a id="__codelineno-26-7" name="__codelineno-26-7" href="#__codelineno-26-7"></a><span class="w">        </span><span class="nv">charactersData</span><span class="p">[</span><span class="nv">charID</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-26-8"><a id="__codelineno-26-8" name="__codelineno-26-8" href="#__codelineno-26-8"></a><span class="w">        </span><span class="nv">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">charData</span><span class="p">.</span><span class="py">name</span><span class="p">,</span>
</span><span id="__span-26-9"><a id="__codelineno-26-9" name="__codelineno-26-9" href="#__codelineno-26-9"></a><span class="w">        </span><span class="nv">faction</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">charData</span><span class="p">.</span><span class="py">faction</span><span class="p">,</span>
</span><span id="__span-26-10"><a id="__codelineno-26-10" name="__codelineno-26-10" href="#__codelineno-26-10"></a><span class="w">        </span><span class="nv">money</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">charData</span><span class="p">.</span><span class="py">money</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
</span><span id="__span-26-11"><a id="__codelineno-26-11" name="__codelineno-26-11" href="#__codelineno-26-11"></a><span class="w">        </span><span class="nv">lastLogin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">charData</span><span class="p">.</span><span class="py">lastJoinTime</span>
</span><span id="__span-26-12"><a id="__codelineno-26-12" name="__codelineno-26-12" href="#__codelineno-26-12"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-26-13"><a id="__codelineno-26-13" name="__codelineno-26-13" href="#__codelineno-26-13"></a><span class="w">    </span><span class="kr">end</span>
</span><span id="__span-26-14"><a id="__codelineno-26-14" name="__codelineno-26-14" href="#__codelineno-26-14"></a><span class="kr">end</span>
</span><span id="__span-26-15"><a id="__codelineno-26-15" name="__codelineno-26-15" href="#__codelineno-26-15"></a><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Retrieved data for&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">table</span><span class="p">.</span><span class="nf">Count</span><span class="p">(</span><span class="nv">charactersData</span><span class="p">),</span><span class="w"> </span><span class="s2">&quot;characters&quot;</span><span class="p">)</span>
</span></code></pre></div></p>
<hr />
<h3 id="getchardataraw">getCharDataRaw</h3>
<p><strong>Purpose</strong></p>
<p>Retrieves raw character data from database without automatic processing</p>
<p><strong>When Called</strong></p>
<p>When you need unprocessed character data or want to handle decoding manually</p>
<p><strong>Parameters</strong></p>
<ul>
<li><code>charID</code> (<em>number</em>): The unique identifier of the character</li>
<li><code>key</code> (<em>string</em>): Specific data key to retrieve (optional)</li>
</ul>
<p><strong>Returns</strong></p>
<ul>
<li>Raw decoded data or specific value if key provided</li>
</ul>
<p><strong>Realm</strong></p>
<p>Server only</p>
<p><strong>Example Usage</strong></p>
<p><strong>Low Complexity:</strong>
<div class="language-lua highlight"><pre><span></span><code><span id="__span-27-1"><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a><span class="c1">-- Simple: Get raw character data</span>
</span><span id="__span-27-2"><a id="__codelineno-27-2" name="__codelineno-27-2" href="#__codelineno-27-2"></a><span class="kd">local</span><span class="w"> </span><span class="nv">rawData</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">lia</span><span class="p">.</span><span class="py">char</span><span class="p">.</span><span class="nf">getCharDataRaw</span><span class="p">(</span><span class="mi">123</span><span class="p">)</span>
</span><span id="__span-27-3"><a id="__codelineno-27-3" name="__codelineno-27-3" href="#__codelineno-27-3"></a><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Raw data keys:&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">table</span><span class="p">.</span><span class="nf">GetKeys</span><span class="p">(</span><span class="nv">rawData</span><span class="p">))</span>
</span></code></pre></div></p>
<p><strong>Medium Complexity:</strong>
<div class="language-lua highlight"><pre><span></span><code><span id="__span-28-1"><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a><span class="c1">-- Medium: Get specific raw data with error handling</span>
</span><span id="__span-28-2"><a id="__codelineno-28-2" name="__codelineno-28-2" href="#__codelineno-28-2"></a><span class="kd">local</span><span class="w"> </span><span class="nv">charID</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">123</span>
</span><span id="__span-28-3"><a id="__codelineno-28-3" name="__codelineno-28-3" href="#__codelineno-28-3"></a><span class="kd">local</span><span class="w"> </span><span class="nv">rawValue</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">lia</span><span class="p">.</span><span class="py">char</span><span class="p">.</span><span class="nf">getCharDataRaw</span><span class="p">(</span><span class="nv">charID</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;customData&quot;</span><span class="p">)</span>
</span><span id="__span-28-4"><a id="__codelineno-28-4" name="__codelineno-28-4" href="#__codelineno-28-4"></a><span class="kr">if</span><span class="w"> </span><span class="nv">rawValue</span><span class="w"> </span><span class="o">~=</span><span class="w"> </span><span class="kc">false</span><span class="w"> </span><span class="kr">then</span>
</span><span id="__span-28-5"><a id="__codelineno-28-5" name="__codelineno-28-5" href="#__codelineno-28-5"></a><span class="w">    </span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Custom data found:&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">rawValue</span><span class="p">)</span>
</span><span id="__span-28-6"><a id="__codelineno-28-6" name="__codelineno-28-6" href="#__codelineno-28-6"></a><span class="w">    </span><span class="kr">else</span>
</span><span id="__span-28-7"><a id="__codelineno-28-7" name="__codelineno-28-7" href="#__codelineno-28-7"></a><span class="w">        </span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;No custom data found for character&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">charID</span><span class="p">)</span>
</span><span id="__span-28-8"><a id="__codelineno-28-8" name="__codelineno-28-8" href="#__codelineno-28-8"></a><span class="w">    </span><span class="kr">end</span>
</span></code></pre></div></p>
<p><strong>High Complexity:</strong>
<div class="language-lua highlight"><pre><span></span><code><span id="__span-29-1"><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a><span class="c1">-- High: Process multiple raw data entries</span>
</span><span id="__span-29-2"><a id="__codelineno-29-2" name="__codelineno-29-2" href="#__codelineno-29-2"></a><span class="kd">local</span><span class="w"> </span><span class="nv">charID</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">123</span>
</span><span id="__span-29-3"><a id="__codelineno-29-3" name="__codelineno-29-3" href="#__codelineno-29-3"></a><span class="kd">local</span><span class="w"> </span><span class="nv">rawData</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">lia</span><span class="p">.</span><span class="py">char</span><span class="p">.</span><span class="nf">getCharDataRaw</span><span class="p">(</span><span class="nv">charID</span><span class="p">)</span>
</span><span id="__span-29-4"><a id="__codelineno-29-4" name="__codelineno-29-4" href="#__codelineno-29-4"></a><span class="kd">local</span><span class="w"> </span><span class="nv">processedData</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{}</span>
</span><span id="__span-29-5"><a id="__codelineno-29-5" name="__codelineno-29-5" href="#__codelineno-29-5"></a><span class="kr">if</span><span class="w"> </span><span class="nv">rawData</span><span class="w"> </span><span class="kr">then</span>
</span><span id="__span-29-6"><a id="__codelineno-29-6" name="__codelineno-29-6" href="#__codelineno-29-6"></a><span class="w">    </span><span class="kr">for</span><span class="w"> </span><span class="nv">key</span><span class="p">,</span><span class="w"> </span><span class="nv">value</span><span class="w"> </span><span class="kr">in</span><span class="w"> </span><span class="nb">pairs</span><span class="p">(</span><span class="nv">rawData</span><span class="p">)</span><span class="w"> </span><span class="kr">do</span>
</span><span id="__span-29-7"><a id="__codelineno-29-7" name="__codelineno-29-7" href="#__codelineno-29-7"></a><span class="w">        </span><span class="c1">-- Custom processing based on key type</span>
</span><span id="__span-29-8"><a id="__codelineno-29-8" name="__codelineno-29-8" href="#__codelineno-29-8"></a><span class="w">        </span><span class="kr">if</span><span class="w"> </span><span class="nv">key</span><span class="p">:</span><span class="nf">find</span><span class="p">(</span><span class="s2">&quot;^skill_&quot;</span><span class="p">)</span><span class="w"> </span><span class="kr">then</span>
</span><span id="__span-29-9"><a id="__codelineno-29-9" name="__codelineno-29-9" href="#__codelineno-29-9"></a><span class="w">            </span><span class="nv">processedData</span><span class="p">[</span><span class="nv">key</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">tonumber</span><span class="p">(</span><span class="nv">value</span><span class="p">)</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="mi">0</span>
</span><span id="__span-29-10"><a id="__codelineno-29-10" name="__codelineno-29-10" href="#__codelineno-29-10"></a><span class="w">            </span><span class="kr">elseif</span><span class="w"> </span><span class="nv">key</span><span class="p">:</span><span class="nf">find</span><span class="p">(</span><span class="s2">&quot;^item_&quot;</span><span class="p">)</span><span class="w"> </span><span class="kr">then</span>
</span><span id="__span-29-11"><a id="__codelineno-29-11" name="__codelineno-29-11" href="#__codelineno-29-11"></a><span class="w">                </span><span class="nv">processedData</span><span class="p">[</span><span class="nv">key</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">istable</span><span class="p">(</span><span class="nv">value</span><span class="p">)</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="nv">value</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="p">{}</span>
</span><span id="__span-29-12"><a id="__codelineno-29-12" name="__codelineno-29-12" href="#__codelineno-29-12"></a><span class="w">                </span><span class="kr">else</span>
</span><span id="__span-29-13"><a id="__codelineno-29-13" name="__codelineno-29-13" href="#__codelineno-29-13"></a><span class="w">                    </span><span class="nv">processedData</span><span class="p">[</span><span class="nv">key</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">value</span>
</span><span id="__span-29-14"><a id="__codelineno-29-14" name="__codelineno-29-14" href="#__codelineno-29-14"></a><span class="w">                </span><span class="kr">end</span>
</span><span id="__span-29-15"><a id="__codelineno-29-15" name="__codelineno-29-15" href="#__codelineno-29-15"></a><span class="w">            </span><span class="kr">end</span>
</span><span id="__span-29-16"><a id="__codelineno-29-16" name="__codelineno-29-16" href="#__codelineno-29-16"></a><span class="w">        </span><span class="kr">end</span>
</span><span id="__span-29-17"><a id="__codelineno-29-17" name="__codelineno-29-17" href="#__codelineno-29-17"></a><span class="w">        </span><span class="kr">return</span><span class="w"> </span><span class="nv">processedData</span>
</span></code></pre></div></p>
<hr />
<h3 id="getownerbyid">getOwnerByID</h3>
<p><strong>Purpose</strong></p>
<p>Finds the player who owns a character with the given ID</p>
<p><strong>When Called</strong></p>
<p>When you need to find which player is using a specific character</p>
<p><strong>Parameters</strong></p>
<ul>
<li><code>ID</code> (<em>number</em>): The unique identifier of the character</li>
</ul>
<p><strong>Returns</strong></p>
<ul>
<li>Player object if found, nil otherwise</li>
</ul>
<p><strong>Realm</strong></p>
<p>Shared (works on both server and client)</p>
<p><strong>Example Usage</strong></p>
<p><strong>Low Complexity:</strong>
<div class="language-lua highlight"><pre><span></span><code><span id="__span-30-1"><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a><span class="c1">-- Simple: Find character owner</span>
</span><span id="__span-30-2"><a id="__codelineno-30-2" name="__codelineno-30-2" href="#__codelineno-30-2"></a><span class="kd">local</span><span class="w"> </span><span class="nv">owner</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">lia</span><span class="p">.</span><span class="py">char</span><span class="p">.</span><span class="nf">getOwnerByID</span><span class="p">(</span><span class="mi">123</span><span class="p">)</span>
</span><span id="__span-30-3"><a id="__codelineno-30-3" name="__codelineno-30-3" href="#__codelineno-30-3"></a><span class="kr">if</span><span class="w"> </span><span class="nv">owner</span><span class="w"> </span><span class="kr">then</span>
</span><span id="__span-30-4"><a id="__codelineno-30-4" name="__codelineno-30-4" href="#__codelineno-30-4"></a><span class="w">    </span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Character 123 is owned by:&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">owner</span><span class="p">:</span><span class="nf">Name</span><span class="p">())</span>
</span><span id="__span-30-5"><a id="__codelineno-30-5" name="__codelineno-30-5" href="#__codelineno-30-5"></a><span class="kr">end</span>
</span></code></pre></div></p>
<p><strong>Medium Complexity:</strong>
<div class="language-lua highlight"><pre><span></span><code><span id="__span-31-1"><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a><span class="c1">-- Medium: Find owner and perform action</span>
</span><span id="__span-31-2"><a id="__codelineno-31-2" name="__codelineno-31-2" href="#__codelineno-31-2"></a><span class="kd">local</span><span class="w"> </span><span class="nv">charID</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">123</span>
</span><span id="__span-31-3"><a id="__codelineno-31-3" name="__codelineno-31-3" href="#__codelineno-31-3"></a><span class="kd">local</span><span class="w"> </span><span class="nv">owner</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">lia</span><span class="p">.</span><span class="py">char</span><span class="p">.</span><span class="nf">getOwnerByID</span><span class="p">(</span><span class="nv">charID</span><span class="p">)</span>
</span><span id="__span-31-4"><a id="__codelineno-31-4" name="__codelineno-31-4" href="#__codelineno-31-4"></a><span class="kr">if</span><span class="w"> </span><span class="nf">IsValid</span><span class="p">(</span><span class="nv">owner</span><span class="p">)</span><span class="w"> </span><span class="kr">then</span>
</span><span id="__span-31-5"><a id="__codelineno-31-5" name="__codelineno-31-5" href="#__codelineno-31-5"></a><span class="w">    </span><span class="kd">local</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">owner</span><span class="p">:</span><span class="nf">getChar</span><span class="p">()</span>
</span><span id="__span-31-6"><a id="__codelineno-31-6" name="__codelineno-31-6" href="#__codelineno-31-6"></a><span class="w">    </span><span class="kr">if</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="nv">character</span><span class="p">:</span><span class="nf">getID</span><span class="p">()</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nv">charID</span><span class="w"> </span><span class="kr">then</span>
</span><span id="__span-31-7"><a id="__codelineno-31-7" name="__codelineno-31-7" href="#__codelineno-31-7"></a><span class="w">        </span><span class="nv">owner</span><span class="p">:</span><span class="nf">notify</span><span class="p">(</span><span class="s2">&quot;Your character has been updated!&quot;</span><span class="p">)</span>
</span><span id="__span-31-8"><a id="__codelineno-31-8" name="__codelineno-31-8" href="#__codelineno-31-8"></a><span class="w">    </span><span class="kr">end</span>
</span><span id="__span-31-9"><a id="__codelineno-31-9" name="__codelineno-31-9" href="#__codelineno-31-9"></a><span class="kr">end</span>
</span></code></pre></div></p>
<p><strong>High Complexity:</strong>
<div class="language-lua highlight"><pre><span></span><code><span id="__span-32-1"><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a><span class="c1">-- High: Batch owner lookup with validation</span>
</span><span id="__span-32-2"><a id="__codelineno-32-2" name="__codelineno-32-2" href="#__codelineno-32-2"></a><span class="kd">local</span><span class="w"> </span><span class="nv">charIDs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="mi">123</span><span class="p">,</span><span class="w"> </span><span class="mi">456</span><span class="p">,</span><span class="w"> </span><span class="mi">789</span><span class="p">}</span>
</span><span id="__span-32-3"><a id="__codelineno-32-3" name="__codelineno-32-3" href="#__codelineno-32-3"></a><span class="kd">local</span><span class="w"> </span><span class="nv">owners</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{}</span>
</span><span id="__span-32-4"><a id="__codelineno-32-4" name="__codelineno-32-4" href="#__codelineno-32-4"></a><span class="kr">for</span><span class="w"> </span><span class="nv">_</span><span class="p">,</span><span class="w"> </span><span class="nv">charID</span><span class="w"> </span><span class="kr">in</span><span class="w"> </span><span class="nb">ipairs</span><span class="p">(</span><span class="nv">charIDs</span><span class="p">)</span><span class="w"> </span><span class="kr">do</span>
</span><span id="__span-32-5"><a id="__codelineno-32-5" name="__codelineno-32-5" href="#__codelineno-32-5"></a><span class="w">    </span><span class="kd">local</span><span class="w"> </span><span class="nv">owner</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">lia</span><span class="p">.</span><span class="py">char</span><span class="p">.</span><span class="nf">getOwnerByID</span><span class="p">(</span><span class="nv">charID</span><span class="p">)</span>
</span><span id="__span-32-6"><a id="__codelineno-32-6" name="__codelineno-32-6" href="#__codelineno-32-6"></a><span class="w">    </span><span class="kr">if</span><span class="w"> </span><span class="nf">IsValid</span><span class="p">(</span><span class="nv">owner</span><span class="p">)</span><span class="w"> </span><span class="kr">then</span>
</span><span id="__span-32-7"><a id="__codelineno-32-7" name="__codelineno-32-7" href="#__codelineno-32-7"></a><span class="w">        </span><span class="nv">owners</span><span class="p">[</span><span class="nv">charID</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-32-8"><a id="__codelineno-32-8" name="__codelineno-32-8" href="#__codelineno-32-8"></a><span class="w">        </span><span class="nv">player</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">owner</span><span class="p">,</span>
</span><span id="__span-32-9"><a id="__codelineno-32-9" name="__codelineno-32-9" href="#__codelineno-32-9"></a><span class="w">        </span><span class="nv">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">owner</span><span class="p">:</span><span class="nf">Name</span><span class="p">(),</span>
</span><span id="__span-32-10"><a id="__codelineno-32-10" name="__codelineno-32-10" href="#__codelineno-32-10"></a><span class="w">        </span><span class="nv">steamID</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">owner</span><span class="p">:</span><span class="nf">SteamID</span><span class="p">(),</span>
</span><span id="__span-32-11"><a id="__codelineno-32-11" name="__codelineno-32-11" href="#__codelineno-32-11"></a><span class="w">        </span><span class="nv">character</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">owner</span><span class="p">:</span><span class="nf">getChar</span><span class="p">()</span>
</span><span id="__span-32-12"><a id="__codelineno-32-12" name="__codelineno-32-12" href="#__codelineno-32-12"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-32-13"><a id="__codelineno-32-13" name="__codelineno-32-13" href="#__codelineno-32-13"></a><span class="w">    </span><span class="kr">end</span>
</span><span id="__span-32-14"><a id="__codelineno-32-14" name="__codelineno-32-14" href="#__codelineno-32-14"></a><span class="kr">end</span>
</span><span id="__span-32-15"><a id="__codelineno-32-15" name="__codelineno-32-15" href="#__codelineno-32-15"></a><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Found owners for&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">table</span><span class="p">.</span><span class="nf">Count</span><span class="p">(</span><span class="nv">owners</span><span class="p">),</span><span class="w"> </span><span class="s2">&quot;characters&quot;</span><span class="p">)</span>
</span></code></pre></div></p>
<hr />
<h3 id="getbysteamid">getBySteamID</h3>
<p><strong>Purpose</strong></p>
<p>Finds a character by the Steam ID of its owner</p>
<p><strong>When Called</strong></p>
<p>When you need to find a character using the player's Steam ID</p>
<p><strong>Parameters</strong></p>
<ul>
<li><code>steamID</code> (<em>string</em>): Steam ID of the character owner (supports both formats)</li>
</ul>
<p><strong>Returns</strong></p>
<ul>
<li>Character object if found, nil otherwise</li>
</ul>
<p><strong>Realm</strong></p>
<p>Shared (works on both server and client)</p>
<p><strong>Example Usage</strong></p>
<p><strong>Low Complexity:</strong>
<div class="language-lua highlight"><pre><span></span><code><span id="__span-33-1"><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a><span class="c1">-- Simple: Find character by Steam ID</span>
</span><span id="__span-33-2"><a id="__codelineno-33-2" name="__codelineno-33-2" href="#__codelineno-33-2"></a><span class="kd">local</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">lia</span><span class="p">.</span><span class="py">char</span><span class="p">.</span><span class="nf">getBySteamID</span><span class="p">(</span><span class="s2">&quot;STEAM_0:1:123456&quot;</span><span class="p">)</span>
</span><span id="__span-33-3"><a id="__codelineno-33-3" name="__codelineno-33-3" href="#__codelineno-33-3"></a><span class="kr">if</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="kr">then</span>
</span><span id="__span-33-4"><a id="__codelineno-33-4" name="__codelineno-33-4" href="#__codelineno-33-4"></a><span class="w">    </span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Found character:&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">character</span><span class="p">:</span><span class="nf">getName</span><span class="p">())</span>
</span><span id="__span-33-5"><a id="__codelineno-33-5" name="__codelineno-33-5" href="#__codelineno-33-5"></a><span class="kr">end</span>
</span></code></pre></div></p>
<p><strong>Medium Complexity:</strong>
<div class="language-lua highlight"><pre><span></span><code><span id="__span-34-1"><a id="__codelineno-34-1" name="__codelineno-34-1" href="#__codelineno-34-1"></a><span class="c1">-- Medium: Find character with Steam ID conversion</span>
</span><span id="__span-34-2"><a id="__codelineno-34-2" name="__codelineno-34-2" href="#__codelineno-34-2"></a><span class="kd">local</span><span class="w"> </span><span class="nv">steamID64</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;76561198000000000&quot;</span>
</span><span id="__span-34-3"><a id="__codelineno-34-3" name="__codelineno-34-3" href="#__codelineno-34-3"></a><span class="kd">local</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">lia</span><span class="p">.</span><span class="py">char</span><span class="p">.</span><span class="nf">getBySteamID</span><span class="p">(</span><span class="nv">steamID64</span><span class="p">)</span>
</span><span id="__span-34-4"><a id="__codelineno-34-4" name="__codelineno-34-4" href="#__codelineno-34-4"></a><span class="kr">if</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="kr">then</span>
</span><span id="__span-34-5"><a id="__codelineno-34-5" name="__codelineno-34-5" href="#__codelineno-34-5"></a><span class="w">    </span><span class="kd">local</span><span class="w"> </span><span class="nv">owner</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">character</span><span class="p">:</span><span class="nf">getPlayer</span><span class="p">()</span>
</span><span id="__span-34-6"><a id="__codelineno-34-6" name="__codelineno-34-6" href="#__codelineno-34-6"></a><span class="w">    </span><span class="kr">if</span><span class="w"> </span><span class="nf">IsValid</span><span class="p">(</span><span class="nv">owner</span><span class="p">)</span><span class="w"> </span><span class="kr">then</span>
</span><span id="__span-34-7"><a id="__codelineno-34-7" name="__codelineno-34-7" href="#__codelineno-34-7"></a><span class="w">        </span><span class="nv">owner</span><span class="p">:</span><span class="nf">notify</span><span class="p">(</span><span class="s2">&quot;Character found and loaded&quot;</span><span class="p">)</span>
</span><span id="__span-34-8"><a id="__codelineno-34-8" name="__codelineno-34-8" href="#__codelineno-34-8"></a><span class="w">    </span><span class="kr">end</span>
</span><span id="__span-34-9"><a id="__codelineno-34-9" name="__codelineno-34-9" href="#__codelineno-34-9"></a><span class="kr">end</span>
</span></code></pre></div></p>
<p><strong>High Complexity:</strong>
<div class="language-lua highlight"><pre><span></span><code><span id="__span-35-1"><a id="__codelineno-35-1" name="__codelineno-35-1" href="#__codelineno-35-1"></a><span class="c1">-- High: Batch character lookup by Steam IDs</span>
</span><span id="__span-35-2"><a id="__codelineno-35-2" name="__codelineno-35-2" href="#__codelineno-35-2"></a><span class="kd">local</span><span class="w"> </span><span class="nv">steamIDs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="s2">&quot;STEAM_0:1:123456&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;76561198000000000&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;STEAM_0:0:789012&quot;</span><span class="p">}</span>
</span><span id="__span-35-3"><a id="__codelineno-35-3" name="__codelineno-35-3" href="#__codelineno-35-3"></a><span class="kd">local</span><span class="w"> </span><span class="nv">foundCharacters</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{}</span>
</span><span id="__span-35-4"><a id="__codelineno-35-4" name="__codelineno-35-4" href="#__codelineno-35-4"></a><span class="kr">for</span><span class="w"> </span><span class="nv">_</span><span class="p">,</span><span class="w"> </span><span class="nv">steamID</span><span class="w"> </span><span class="kr">in</span><span class="w"> </span><span class="nb">ipairs</span><span class="p">(</span><span class="nv">steamIDs</span><span class="p">)</span><span class="w"> </span><span class="kr">do</span>
</span><span id="__span-35-5"><a id="__codelineno-35-5" name="__codelineno-35-5" href="#__codelineno-35-5"></a><span class="w">    </span><span class="kd">local</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">lia</span><span class="p">.</span><span class="py">char</span><span class="p">.</span><span class="nf">getBySteamID</span><span class="p">(</span><span class="nv">steamID</span><span class="p">)</span>
</span><span id="__span-35-6"><a id="__codelineno-35-6" name="__codelineno-35-6" href="#__codelineno-35-6"></a><span class="w">    </span><span class="kr">if</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="kr">then</span>
</span><span id="__span-35-7"><a id="__codelineno-35-7" name="__codelineno-35-7" href="#__codelineno-35-7"></a><span class="w">        </span><span class="kd">local</span><span class="w"> </span><span class="nv">owner</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">character</span><span class="p">:</span><span class="nf">getPlayer</span><span class="p">()</span>
</span><span id="__span-35-8"><a id="__codelineno-35-8" name="__codelineno-35-8" href="#__codelineno-35-8"></a><span class="w">        </span><span class="nv">foundCharacters</span><span class="p">[</span><span class="nv">steamID</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-35-9"><a id="__codelineno-35-9" name="__codelineno-35-9" href="#__codelineno-35-9"></a><span class="w">        </span><span class="nv">character</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">character</span><span class="p">,</span>
</span><span id="__span-35-10"><a id="__codelineno-35-10" name="__codelineno-35-10" href="#__codelineno-35-10"></a><span class="w">        </span><span class="nv">owner</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">owner</span><span class="p">,</span>
</span><span id="__span-35-11"><a id="__codelineno-35-11" name="__codelineno-35-11" href="#__codelineno-35-11"></a><span class="w">        </span><span class="nv">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">character</span><span class="p">:</span><span class="nf">getName</span><span class="p">(),</span>
</span><span id="__span-35-12"><a id="__codelineno-35-12" name="__codelineno-35-12" href="#__codelineno-35-12"></a><span class="w">        </span><span class="nv">faction</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">character</span><span class="p">:</span><span class="nf">getFaction</span><span class="p">()</span>
</span><span id="__span-35-13"><a id="__codelineno-35-13" name="__codelineno-35-13" href="#__codelineno-35-13"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-35-14"><a id="__codelineno-35-14" name="__codelineno-35-14" href="#__codelineno-35-14"></a><span class="w">    </span><span class="kr">end</span>
</span><span id="__span-35-15"><a id="__codelineno-35-15" name="__codelineno-35-15" href="#__codelineno-35-15"></a><span class="kr">end</span>
</span><span id="__span-35-16"><a id="__codelineno-35-16" name="__codelineno-35-16" href="#__codelineno-35-16"></a><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Found&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">table</span><span class="p">.</span><span class="nf">Count</span><span class="p">(</span><span class="nv">foundCharacters</span><span class="p">),</span><span class="w"> </span><span class="s2">&quot;characters&quot;</span><span class="p">)</span>
</span></code></pre></div></p>
<hr />
<h3 id="getteamcolor">getTeamColor</h3>
<p><strong>Purpose</strong></p>
<p>Gets the team color for a player based on their character's class</p>
<p><strong>When Called</strong></p>
<p>When you need to determine the appropriate color for a player's team/class</p>
<p><strong>Parameters</strong></p>
<ul>
<li><code>client</code> (<em>Player</em>): The player to get the team color for</li>
</ul>
<p><strong>Returns</strong></p>
<ul>
<li>Color object representing the team/class color</li>
</ul>
<p><strong>Realm</strong></p>
<p>Shared (works on both server and client)</p>
<p><strong>Example Usage</strong></p>
<p><strong>Low Complexity:</strong>
<div class="language-lua highlight"><pre><span></span><code><span id="__span-36-1"><a id="__codelineno-36-1" name="__codelineno-36-1" href="#__codelineno-36-1"></a><span class="c1">-- Simple: Get player team color</span>
</span><span id="__span-36-2"><a id="__codelineno-36-2" name="__codelineno-36-2" href="#__codelineno-36-2"></a><span class="kd">local</span><span class="w"> </span><span class="nv">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">lia</span><span class="p">.</span><span class="py">char</span><span class="p">.</span><span class="nf">getTeamColor</span><span class="p">(</span><span class="nv">client</span><span class="p">)</span>
</span><span id="__span-36-3"><a id="__codelineno-36-3" name="__codelineno-36-3" href="#__codelineno-36-3"></a><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Team color:&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">color</span><span class="p">.</span><span class="py">r</span><span class="p">,</span><span class="w"> </span><span class="nv">color</span><span class="p">.</span><span class="py">g</span><span class="p">,</span><span class="w"> </span><span class="nv">color</span><span class="p">.</span><span class="py">b</span><span class="p">)</span>
</span></code></pre></div></p>
<p><strong>Medium Complexity:</strong>
<div class="language-lua highlight"><pre><span></span><code><span id="__span-37-1"><a id="__codelineno-37-1" name="__codelineno-37-1" href="#__codelineno-37-1"></a><span class="c1">-- Medium: Use team color for UI elements</span>
</span><span id="__span-37-2"><a id="__codelineno-37-2" name="__codelineno-37-2" href="#__codelineno-37-2"></a><span class="kd">local</span><span class="w"> </span><span class="nv">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">lia</span><span class="p">.</span><span class="py">char</span><span class="p">.</span><span class="nf">getTeamColor</span><span class="p">(</span><span class="nv">client</span><span class="p">)</span>
</span><span id="__span-37-3"><a id="__codelineno-37-3" name="__codelineno-37-3" href="#__codelineno-37-3"></a><span class="c1">-- Set player name color in chat</span>
</span><span id="__span-37-4"><a id="__codelineno-37-4" name="__codelineno-37-4" href="#__codelineno-37-4"></a><span class="kd">local</span><span class="w"> </span><span class="nv">nameColor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">Color</span><span class="p">(</span><span class="nv">color</span><span class="p">.</span><span class="py">r</span><span class="p">,</span><span class="w"> </span><span class="nv">color</span><span class="p">.</span><span class="py">g</span><span class="p">,</span><span class="w"> </span><span class="nv">color</span><span class="p">.</span><span class="py">b</span><span class="p">,</span><span class="w"> </span><span class="mi">255</span><span class="p">)</span>
</span><span id="__span-37-5"><a id="__codelineno-37-5" name="__codelineno-37-5" href="#__codelineno-37-5"></a><span class="nv">chat</span><span class="p">.</span><span class="nf">AddText</span><span class="p">(</span><span class="nv">nameColor</span><span class="p">,</span><span class="w"> </span><span class="nv">client</span><span class="p">:</span><span class="nf">Name</span><span class="p">(),</span><span class="w"> </span><span class="nv">color_white</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;: Hello!&quot;</span><span class="p">)</span>
</span></code></pre></div></p>
<p><strong>High Complexity:</strong>
<div class="language-lua highlight"><pre><span></span><code><span id="__span-38-1"><a id="__codelineno-38-1" name="__codelineno-38-1" href="#__codelineno-38-1"></a><span class="c1">-- High: Batch team color processing for UI</span>
</span><span id="__span-38-2"><a id="__codelineno-38-2" name="__codelineno-38-2" href="#__codelineno-38-2"></a><span class="kd">local</span><span class="w"> </span><span class="nv">players</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">player</span><span class="p">.</span><span class="nf">GetAll</span><span class="p">()</span>
</span><span id="__span-38-3"><a id="__codelineno-38-3" name="__codelineno-38-3" href="#__codelineno-38-3"></a><span class="kd">local</span><span class="w"> </span><span class="nv">teamColors</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{}</span>
</span><span id="__span-38-4"><a id="__codelineno-38-4" name="__codelineno-38-4" href="#__codelineno-38-4"></a><span class="kr">for</span><span class="w"> </span><span class="nv">_</span><span class="p">,</span><span class="w"> </span><span class="nv">ply</span><span class="w"> </span><span class="kr">in</span><span class="w"> </span><span class="nb">ipairs</span><span class="p">(</span><span class="nv">players</span><span class="p">)</span><span class="w"> </span><span class="kr">do</span>
</span><span id="__span-38-5"><a id="__codelineno-38-5" name="__codelineno-38-5" href="#__codelineno-38-5"></a><span class="w">    </span><span class="kr">if</span><span class="w"> </span><span class="nf">IsValid</span><span class="p">(</span><span class="nv">ply</span><span class="p">)</span><span class="w"> </span><span class="kr">then</span>
</span><span id="__span-38-6"><a id="__codelineno-38-6" name="__codelineno-38-6" href="#__codelineno-38-6"></a><span class="w">        </span><span class="kd">local</span><span class="w"> </span><span class="nv">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">lia</span><span class="p">.</span><span class="py">char</span><span class="p">.</span><span class="nf">getTeamColor</span><span class="p">(</span><span class="nv">ply</span><span class="p">)</span>
</span><span id="__span-38-7"><a id="__codelineno-38-7" name="__codelineno-38-7" href="#__codelineno-38-7"></a><span class="w">        </span><span class="kd">local</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">ply</span><span class="p">:</span><span class="nf">getChar</span><span class="p">()</span>
</span><span id="__span-38-8"><a id="__codelineno-38-8" name="__codelineno-38-8" href="#__codelineno-38-8"></a><span class="w">        </span><span class="nv">teamColors</span><span class="p">[</span><span class="nv">ply</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-38-9"><a id="__codelineno-38-9" name="__codelineno-38-9" href="#__codelineno-38-9"></a><span class="w">        </span><span class="nv">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">color</span><span class="p">,</span>
</span><span id="__span-38-10"><a id="__codelineno-38-10" name="__codelineno-38-10" href="#__codelineno-38-10"></a><span class="w">        </span><span class="nv">character</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">character</span><span class="p">,</span>
</span><span id="__span-38-11"><a id="__codelineno-38-11" name="__codelineno-38-11" href="#__codelineno-38-11"></a><span class="w">        </span><span class="nv">faction</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="nv">character</span><span class="p">:</span><span class="nf">getFaction</span><span class="p">()</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="s2">&quot;Unknown&quot;</span><span class="p">,</span>
</span><span id="__span-38-12"><a id="__codelineno-38-12" name="__codelineno-38-12" href="#__codelineno-38-12"></a><span class="w">        </span><span class="nv">class</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="nv">character</span><span class="p">:</span><span class="nf">getClass</span><span class="p">()</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="mi">0</span>
</span><span id="__span-38-13"><a id="__codelineno-38-13" name="__codelineno-38-13" href="#__codelineno-38-13"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-38-14"><a id="__codelineno-38-14" name="__codelineno-38-14" href="#__codelineno-38-14"></a><span class="w">    </span><span class="kr">end</span>
</span><span id="__span-38-15"><a id="__codelineno-38-15" name="__codelineno-38-15" href="#__codelineno-38-15"></a><span class="kr">end</span>
</span><span id="__span-38-16"><a id="__codelineno-38-16" name="__codelineno-38-16" href="#__codelineno-38-16"></a><span class="c1">-- Update scoreboard with team colors</span>
</span><span id="__span-38-17"><a id="__codelineno-38-17" name="__codelineno-38-17" href="#__codelineno-38-17"></a><span class="nv">hook</span><span class="p">.</span><span class="nf">Run</span><span class="p">(</span><span class="s2">&quot;UpdateScoreboardColors&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">teamColors</span><span class="p">)</span>
</span></code></pre></div></p>
<hr />
<h3 id="create">create</h3>
<p><strong>Purpose</strong></p>
<p>Creates a new character in the database and initializes it with default inventory</p>
<p><strong>When Called</strong></p>
<p>When a player creates a new character through character creation</p>
<p><strong>Parameters</strong></p>
<ul>
<li><code>data</code> (<em>table</em>): Character data containing name, description, faction, model, etc.</li>
<li><code>callback</code> (<em>function</em>): Function to call when character creation is complete</li>
</ul>
<p><strong>Returns</strong></p>
<ul>
<li>None (uses callback for result)</li>
</ul>
<p><strong>Realm</strong></p>
<p>Server only</p>
<p><strong>Example Usage</strong></p>
<p><strong>Low Complexity:</strong>
<div class="language-lua highlight"><pre><span></span><code><span id="__span-39-1"><a id="__codelineno-39-1" name="__codelineno-39-1" href="#__codelineno-39-1"></a><span class="c1">-- Simple: Create a basic character</span>
</span><span id="__span-39-2"><a id="__codelineno-39-2" name="__codelineno-39-2" href="#__codelineno-39-2"></a><span class="kd">local</span><span class="w"> </span><span class="nv">charData</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-39-3"><a id="__codelineno-39-3" name="__codelineno-39-3" href="#__codelineno-39-3"></a><span class="nv">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;John Doe&quot;</span><span class="p">,</span>
</span><span id="__span-39-4"><a id="__codelineno-39-4" name="__codelineno-39-4" href="#__codelineno-39-4"></a><span class="nv">desc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;A citizen of the city&quot;</span><span class="p">,</span>
</span><span id="__span-39-5"><a id="__codelineno-39-5" name="__codelineno-39-5" href="#__codelineno-39-5"></a><span class="nv">faction</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Citizen&quot;</span><span class="p">,</span>
</span><span id="__span-39-6"><a id="__codelineno-39-6" name="__codelineno-39-6" href="#__codelineno-39-6"></a><span class="nv">model</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;models/player/Group01/male_01.mdl&quot;</span><span class="p">,</span>
</span><span id="__span-39-7"><a id="__codelineno-39-7" name="__codelineno-39-7" href="#__codelineno-39-7"></a><span class="nv">steamID</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">client</span><span class="p">:</span><span class="nf">SteamID</span><span class="p">()</span>
</span><span id="__span-39-8"><a id="__codelineno-39-8" name="__codelineno-39-8" href="#__codelineno-39-8"></a><span class="p">}</span>
</span><span id="__span-39-9"><a id="__codelineno-39-9" name="__codelineno-39-9" href="#__codelineno-39-9"></a><span class="nv">lia</span><span class="p">.</span><span class="py">char</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="nv">charData</span><span class="p">,</span><span class="w"> </span><span class="kr">function</span><span class="p">(</span><span class="nv">charID</span><span class="p">)</span>
</span><span id="__span-39-10"><a id="__codelineno-39-10" name="__codelineno-39-10" href="#__codelineno-39-10"></a><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Character created with ID:&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">charID</span><span class="p">)</span>
</span><span id="__span-39-11"><a id="__codelineno-39-11" name="__codelineno-39-11" href="#__codelineno-39-11"></a><span class="kr">end</span><span class="p">)</span>
</span></code></pre></div></p>
<p><strong>Medium Complexity:</strong>
<div class="language-lua highlight"><pre><span></span><code><span id="__span-40-1"><a id="__codelineno-40-1" name="__codelineno-40-1" href="#__codelineno-40-1"></a><span class="c1">-- Medium: Create character with validation and inventory</span>
</span><span id="__span-40-2"><a id="__codelineno-40-2" name="__codelineno-40-2" href="#__codelineno-40-2"></a><span class="kd">local</span><span class="w"> </span><span class="nv">charData</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-40-3"><a id="__codelineno-40-3" name="__codelineno-40-3" href="#__codelineno-40-3"></a><span class="nv">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Jane Smith&quot;</span><span class="p">,</span>
</span><span id="__span-40-4"><a id="__codelineno-40-4" name="__codelineno-40-4" href="#__codelineno-40-4"></a><span class="nv">desc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;A skilled engineer&quot;</span><span class="p">,</span>
</span><span id="__span-40-5"><a id="__codelineno-40-5" name="__codelineno-40-5" href="#__codelineno-40-5"></a><span class="nv">faction</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Engineer&quot;</span><span class="p">,</span>
</span><span id="__span-40-6"><a id="__codelineno-40-6" name="__codelineno-40-6" href="#__codelineno-40-6"></a><span class="nv">model</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;models/player/Group01/female_01.mdl&quot;</span><span class="p">,</span>
</span><span id="__span-40-7"><a id="__codelineno-40-7" name="__codelineno-40-7" href="#__codelineno-40-7"></a><span class="nv">steamID</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">client</span><span class="p">:</span><span class="nf">SteamID</span><span class="p">(),</span>
</span><span id="__span-40-8"><a id="__codelineno-40-8" name="__codelineno-40-8" href="#__codelineno-40-8"></a><span class="nv">money</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1000</span><span class="p">,</span>
</span><span id="__span-40-9"><a id="__codelineno-40-9" name="__codelineno-40-9" href="#__codelineno-40-9"></a><span class="nv">attribs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="nv">strength</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="nv">intelligence</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">8</span><span class="p">}</span>
</span><span id="__span-40-10"><a id="__codelineno-40-10" name="__codelineno-40-10" href="#__codelineno-40-10"></a><span class="p">}</span>
</span><span id="__span-40-11"><a id="__codelineno-40-11" name="__codelineno-40-11" href="#__codelineno-40-11"></a><span class="nv">lia</span><span class="p">.</span><span class="py">char</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="nv">charData</span><span class="p">,</span><span class="w"> </span><span class="kr">function</span><span class="p">(</span><span class="nv">charID</span><span class="p">)</span>
</span><span id="__span-40-12"><a id="__codelineno-40-12" name="__codelineno-40-12" href="#__codelineno-40-12"></a><span class="kr">if</span><span class="w"> </span><span class="nv">charID</span><span class="w"> </span><span class="kr">then</span>
</span><span id="__span-40-13"><a id="__codelineno-40-13" name="__codelineno-40-13" href="#__codelineno-40-13"></a><span class="w">    </span><span class="kd">local</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">lia</span><span class="p">.</span><span class="py">char</span><span class="p">.</span><span class="nf">getCharacter</span><span class="p">(</span><span class="nv">charID</span><span class="p">)</span>
</span><span id="__span-40-14"><a id="__codelineno-40-14" name="__codelineno-40-14" href="#__codelineno-40-14"></a><span class="w">    </span><span class="kr">if</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="kr">then</span>
</span><span id="__span-40-15"><a id="__codelineno-40-15" name="__codelineno-40-15" href="#__codelineno-40-15"></a><span class="w">        </span><span class="c1">-- Add starting items</span>
</span><span id="__span-40-16"><a id="__codelineno-40-16" name="__codelineno-40-16" href="#__codelineno-40-16"></a><span class="w">        </span><span class="nv">character</span><span class="p">:</span><span class="nf">getInv</span><span class="p">(</span><span class="mi">1</span><span class="p">):</span><span class="nf">add</span><span class="p">(</span><span class="s2">&quot;crowbar&quot;</span><span class="p">)</span>
</span><span id="__span-40-17"><a id="__codelineno-40-17" name="__codelineno-40-17" href="#__codelineno-40-17"></a><span class="w">        </span><span class="nv">character</span><span class="p">:</span><span class="nf">getInv</span><span class="p">(</span><span class="mi">1</span><span class="p">):</span><span class="nf">add</span><span class="p">(</span><span class="s2">&quot;flashlight&quot;</span><span class="p">)</span>
</span><span id="__span-40-18"><a id="__codelineno-40-18" name="__codelineno-40-18" href="#__codelineno-40-18"></a><span class="w">        </span><span class="nv">client</span><span class="p">:</span><span class="nf">notify</span><span class="p">(</span><span class="s2">&quot;Character created successfully!&quot;</span><span class="p">)</span>
</span><span id="__span-40-19"><a id="__codelineno-40-19" name="__codelineno-40-19" href="#__codelineno-40-19"></a><span class="w">    </span><span class="kr">end</span>
</span><span id="__span-40-20"><a id="__codelineno-40-20" name="__codelineno-40-20" href="#__codelineno-40-20"></a><span class="kr">end</span>
</span><span id="__span-40-21"><a id="__codelineno-40-21" name="__codelineno-40-21" href="#__codelineno-40-21"></a><span class="kr">end</span><span class="p">)</span>
</span></code></pre></div></p>
<p><strong>High Complexity:</strong>
<div class="language-lua highlight"><pre><span></span><code><span id="__span-41-1"><a id="__codelineno-41-1" name="__codelineno-41-1" href="#__codelineno-41-1"></a><span class="c1">-- High: Create character with full validation and error handling</span>
</span><span id="__span-41-2"><a id="__codelineno-41-2" name="__codelineno-41-2" href="#__codelineno-41-2"></a><span class="kd">local</span><span class="w"> </span><span class="kr">function</span><span class="w"> </span><span class="nf">createCharacterWithValidation</span><span class="p">(</span><span class="nv">client</span><span class="p">,</span><span class="w"> </span><span class="nv">charData</span><span class="p">)</span>
</span><span id="__span-41-3"><a id="__codelineno-41-3" name="__codelineno-41-3" href="#__codelineno-41-3"></a><span class="w">    </span><span class="c1">-- Validate required fields</span>
</span><span id="__span-41-4"><a id="__codelineno-41-4" name="__codelineno-41-4" href="#__codelineno-41-4"></a><span class="w">    </span><span class="kr">if</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="nv">charData</span><span class="p">.</span><span class="py">name</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="nv">charData</span><span class="p">.</span><span class="py">faction</span><span class="w"> </span><span class="kr">then</span>
</span><span id="__span-41-5"><a id="__codelineno-41-5" name="__codelineno-41-5" href="#__codelineno-41-5"></a><span class="w">        </span><span class="nv">client</span><span class="p">:</span><span class="nf">notifyError</span><span class="p">(</span><span class="s2">&quot;Missing required character data&quot;</span><span class="p">)</span>
</span><span id="__span-41-6"><a id="__codelineno-41-6" name="__codelineno-41-6" href="#__codelineno-41-6"></a><span class="w">        </span><span class="kr">return</span>
</span><span id="__span-41-7"><a id="__codelineno-41-7" name="__codelineno-41-7" href="#__codelineno-41-7"></a><span class="w">    </span><span class="kr">end</span>
</span><span id="__span-41-8"><a id="__codelineno-41-8" name="__codelineno-41-8" href="#__codelineno-41-8"></a><span class="w">    </span><span class="c1">-- Validate faction access</span>
</span><span id="__span-41-9"><a id="__codelineno-41-9" name="__codelineno-41-9" href="#__codelineno-41-9"></a><span class="w">    </span><span class="kr">if</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="nv">client</span><span class="p">:</span><span class="nf">hasWhitelist</span><span class="p">(</span><span class="nv">charData</span><span class="p">.</span><span class="py">faction</span><span class="p">)</span><span class="w"> </span><span class="kr">then</span>
</span><span id="__span-41-10"><a id="__codelineno-41-10" name="__codelineno-41-10" href="#__codelineno-41-10"></a><span class="w">        </span><span class="nv">client</span><span class="p">:</span><span class="nf">notifyError</span><span class="p">(</span><span class="s2">&quot;You don&#39;t have access to this faction&quot;</span><span class="p">)</span>
</span><span id="__span-41-11"><a id="__codelineno-41-11" name="__codelineno-41-11" href="#__codelineno-41-11"></a><span class="w">        </span><span class="kr">return</span>
</span><span id="__span-41-12"><a id="__codelineno-41-12" name="__codelineno-41-12" href="#__codelineno-41-12"></a><span class="w">    </span><span class="kr">end</span>
</span><span id="__span-41-13"><a id="__codelineno-41-13" name="__codelineno-41-13" href="#__codelineno-41-13"></a><span class="w">    </span><span class="c1">-- Set default values</span>
</span><span id="__span-41-14"><a id="__codelineno-41-14" name="__codelineno-41-14" href="#__codelineno-41-14"></a><span class="w">    </span><span class="nv">charData</span><span class="p">.</span><span class="py">steamID</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">client</span><span class="p">:</span><span class="nf">SteamID</span><span class="p">()</span>
</span><span id="__span-41-15"><a id="__codelineno-41-15" name="__codelineno-41-15" href="#__codelineno-41-15"></a><span class="w">    </span><span class="nv">charData</span><span class="p">.</span><span class="py">money</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">charData</span><span class="p">.</span><span class="py">money</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="nv">lia</span><span class="p">.</span><span class="py">config</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="s2">&quot;DefaultMoney&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">1000</span><span class="p">)</span>
</span><span id="__span-41-16"><a id="__codelineno-41-16" name="__codelineno-41-16" href="#__codelineno-41-16"></a><span class="w">    </span><span class="nv">charData</span><span class="p">.</span><span class="py">createTime</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">os.date</span><span class="p">(</span><span class="s2">&quot;%Y-%m-%d %H:%M:%S&quot;</span><span class="p">,</span><span class="w"> </span><span class="nb">os.time</span><span class="p">())</span>
</span><span id="__span-41-17"><a id="__codelineno-41-17" name="__codelineno-41-17" href="#__codelineno-41-17"></a><span class="w">    </span><span class="nv">lia</span><span class="p">.</span><span class="py">char</span><span class="p">.</span><span class="nf">create</span><span class="p">(</span><span class="nv">charData</span><span class="p">,</span><span class="w"> </span><span class="kr">function</span><span class="p">(</span><span class="nv">charID</span><span class="p">)</span>
</span><span id="__span-41-18"><a id="__codelineno-41-18" name="__codelineno-41-18" href="#__codelineno-41-18"></a><span class="w">    </span><span class="kr">if</span><span class="w"> </span><span class="nv">charID</span><span class="w"> </span><span class="kr">then</span>
</span><span id="__span-41-19"><a id="__codelineno-41-19" name="__codelineno-41-19" href="#__codelineno-41-19"></a><span class="w">        </span><span class="kd">local</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">lia</span><span class="p">.</span><span class="py">char</span><span class="p">.</span><span class="nf">getCharacter</span><span class="p">(</span><span class="nv">charID</span><span class="p">)</span>
</span><span id="__span-41-20"><a id="__codelineno-41-20" name="__codelineno-41-20" href="#__codelineno-41-20"></a><span class="w">        </span><span class="kr">if</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="kr">then</span>
</span><span id="__span-41-21"><a id="__codelineno-41-21" name="__codelineno-41-21" href="#__codelineno-41-21"></a><span class="w">            </span><span class="c1">-- Initialize character-specific data</span>
</span><span id="__span-41-22"><a id="__codelineno-41-22" name="__codelineno-41-22" href="#__codelineno-41-22"></a><span class="w">            </span><span class="nv">character</span><span class="p">:</span><span class="nf">setData</span><span class="p">(</span><span class="s2">&quot;lastLogin&quot;</span><span class="p">,</span><span class="w"> </span><span class="nb">os.time</span><span class="p">())</span>
</span><span id="__span-41-23"><a id="__codelineno-41-23" name="__codelineno-41-23" href="#__codelineno-41-23"></a><span class="w">            </span><span class="nv">character</span><span class="p">:</span><span class="nf">setData</span><span class="p">(</span><span class="s2">&quot;creationIP&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">client</span><span class="p">:</span><span class="nf">IPAddress</span><span class="p">())</span>
</span><span id="__span-41-24"><a id="__codelineno-41-24" name="__codelineno-41-24" href="#__codelineno-41-24"></a><span class="w">            </span><span class="c1">-- Add to player&#39;s character list</span>
</span><span id="__span-41-25"><a id="__codelineno-41-25" name="__codelineno-41-25" href="#__codelineno-41-25"></a><span class="w">            </span><span class="nv">client</span><span class="p">.</span><span class="py">liaCharList</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">client</span><span class="p">.</span><span class="py">liaCharList</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="p">{}</span>
</span><span id="__span-41-26"><a id="__codelineno-41-26" name="__codelineno-41-26" href="#__codelineno-41-26"></a><span class="w">            </span><span class="nb">table.insert</span><span class="p">(</span><span class="nv">client</span><span class="p">.</span><span class="py">liaCharList</span><span class="p">,</span><span class="w"> </span><span class="nv">charID</span><span class="p">)</span>
</span><span id="__span-41-27"><a id="__codelineno-41-27" name="__codelineno-41-27" href="#__codelineno-41-27"></a><span class="w">            </span><span class="c1">-- Notify success</span>
</span><span id="__span-41-28"><a id="__codelineno-41-28" name="__codelineno-41-28" href="#__codelineno-41-28"></a><span class="w">            </span><span class="nv">client</span><span class="p">:</span><span class="nf">notify</span><span class="p">(</span><span class="s2">&quot;Character &#39;&quot;</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="nv">charData</span><span class="p">.</span><span class="py">name</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="s2">&quot;&#39; created successfully!&quot;</span><span class="p">)</span>
</span><span id="__span-41-29"><a id="__codelineno-41-29" name="__codelineno-41-29" href="#__codelineno-41-29"></a><span class="w">            </span><span class="nv">hook</span><span class="p">.</span><span class="nf">Run</span><span class="p">(</span><span class="s2">&quot;OnCharacterCreated&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">character</span><span class="p">,</span><span class="w"> </span><span class="nv">client</span><span class="p">)</span>
</span><span id="__span-41-30"><a id="__codelineno-41-30" name="__codelineno-41-30" href="#__codelineno-41-30"></a><span class="w">        </span><span class="kr">end</span>
</span><span id="__span-41-31"><a id="__codelineno-41-31" name="__codelineno-41-31" href="#__codelineno-41-31"></a><span class="w">        </span><span class="kr">else</span>
</span><span id="__span-41-32"><a id="__codelineno-41-32" name="__codelineno-41-32" href="#__codelineno-41-32"></a><span class="w">            </span><span class="nv">client</span><span class="p">:</span><span class="nf">notifyError</span><span class="p">(</span><span class="s2">&quot;Failed to create character&quot;</span><span class="p">)</span>
</span><span id="__span-41-33"><a id="__codelineno-41-33" name="__codelineno-41-33" href="#__codelineno-41-33"></a><span class="w">        </span><span class="kr">end</span>
</span><span id="__span-41-34"><a id="__codelineno-41-34" name="__codelineno-41-34" href="#__codelineno-41-34"></a><span class="w">    </span><span class="kr">end</span><span class="p">)</span>
</span><span id="__span-41-35"><a id="__codelineno-41-35" name="__codelineno-41-35" href="#__codelineno-41-35"></a><span class="kr">end</span>
</span></code></pre></div></p>
<hr />
<h3 id="restore">restore</h3>
<p><strong>Purpose</strong></p>
<p>Restores/loads all characters for a player from the database</p>
<p><strong>When Called</strong></p>
<p>When a player connects and needs their characters loaded</p>
<p><strong>Parameters</strong></p>
<ul>
<li><code>client</code> (<em>Player</em>): The player to restore characters for</li>
<li><code>callback</code> (<em>function</em>): Function to call when restoration is complete</li>
<li><code>id</code> (<em>number</em>): Specific character ID to restore (optional)</li>
</ul>
<p><strong>Returns</strong></p>
<ul>
<li>None (uses callback for result)</li>
</ul>
<p><strong>Realm</strong></p>
<p>Server only</p>
<p><strong>Example Usage</strong></p>
<p><strong>Low Complexity:</strong>
<div class="language-lua highlight"><pre><span></span><code><span id="__span-42-1"><a id="__codelineno-42-1" name="__codelineno-42-1" href="#__codelineno-42-1"></a><span class="c1">-- Simple: Restore all characters for player</span>
</span><span id="__span-42-2"><a id="__codelineno-42-2" name="__codelineno-42-2" href="#__codelineno-42-2"></a><span class="nv">lia</span><span class="p">.</span><span class="py">char</span><span class="p">.</span><span class="nf">restore</span><span class="p">(</span><span class="nv">client</span><span class="p">,</span><span class="w"> </span><span class="kr">function</span><span class="p">(</span><span class="nv">characters</span><span class="p">)</span>
</span><span id="__span-42-3"><a id="__codelineno-42-3" name="__codelineno-42-3" href="#__codelineno-42-3"></a><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Restored&quot;</span><span class="p">,</span><span class="w"> </span><span class="o">#</span><span class="nv">characters</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;characters for&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">client</span><span class="p">:</span><span class="nf">Name</span><span class="p">())</span>
</span><span id="__span-42-4"><a id="__codelineno-42-4" name="__codelineno-42-4" href="#__codelineno-42-4"></a><span class="kr">end</span><span class="p">)</span>
</span></code></pre></div></p>
<p><strong>Medium Complexity:</strong>
<div class="language-lua highlight"><pre><span></span><code><span id="__span-43-1"><a id="__codelineno-43-1" name="__codelineno-43-1" href="#__codelineno-43-1"></a><span class="c1">-- Medium: Restore with character validation</span>
</span><span id="__span-43-2"><a id="__codelineno-43-2" name="__codelineno-43-2" href="#__codelineno-43-2"></a><span class="nv">lia</span><span class="p">.</span><span class="py">char</span><span class="p">.</span><span class="nf">restore</span><span class="p">(</span><span class="nv">client</span><span class="p">,</span><span class="w"> </span><span class="kr">function</span><span class="p">(</span><span class="nv">characters</span><span class="p">)</span>
</span><span id="__span-43-3"><a id="__codelineno-43-3" name="__codelineno-43-3" href="#__codelineno-43-3"></a><span class="kr">if</span><span class="w"> </span><span class="o">#</span><span class="nv">characters</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="kr">then</span>
</span><span id="__span-43-4"><a id="__codelineno-43-4" name="__codelineno-43-4" href="#__codelineno-43-4"></a><span class="w">    </span><span class="nv">client</span><span class="p">.</span><span class="py">liaCharList</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">characters</span>
</span><span id="__span-43-5"><a id="__codelineno-43-5" name="__codelineno-43-5" href="#__codelineno-43-5"></a><span class="w">    </span><span class="c1">-- Validate each character</span>
</span><span id="__span-43-6"><a id="__codelineno-43-6" name="__codelineno-43-6" href="#__codelineno-43-6"></a><span class="w">    </span><span class="kr">for</span><span class="w"> </span><span class="nv">_</span><span class="p">,</span><span class="w"> </span><span class="nv">charID</span><span class="w"> </span><span class="kr">in</span><span class="w"> </span><span class="nb">ipairs</span><span class="p">(</span><span class="nv">characters</span><span class="p">)</span><span class="w"> </span><span class="kr">do</span>
</span><span id="__span-43-7"><a id="__codelineno-43-7" name="__codelineno-43-7" href="#__codelineno-43-7"></a><span class="w">        </span><span class="kd">local</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">lia</span><span class="p">.</span><span class="py">char</span><span class="p">.</span><span class="nf">getCharacter</span><span class="p">(</span><span class="nv">charID</span><span class="p">)</span>
</span><span id="__span-43-8"><a id="__codelineno-43-8" name="__codelineno-43-8" href="#__codelineno-43-8"></a><span class="w">        </span><span class="kr">if</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="kr">then</span>
</span><span id="__span-43-9"><a id="__codelineno-43-9" name="__codelineno-43-9" href="#__codelineno-43-9"></a><span class="w">            </span><span class="c1">-- Check if character is banned</span>
</span><span id="__span-43-10"><a id="__codelineno-43-10" name="__codelineno-43-10" href="#__codelineno-43-10"></a><span class="w">            </span><span class="kr">if</span><span class="w"> </span><span class="nv">character</span><span class="p">:</span><span class="nf">getBanned</span><span class="p">()</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="kr">then</span>
</span><span id="__span-43-11"><a id="__codelineno-43-11" name="__codelineno-43-11" href="#__codelineno-43-11"></a><span class="w">                </span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Character&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">charID</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;is banned&quot;</span><span class="p">)</span>
</span><span id="__span-43-12"><a id="__codelineno-43-12" name="__codelineno-43-12" href="#__codelineno-43-12"></a><span class="w">            </span><span class="kr">end</span>
</span><span id="__span-43-13"><a id="__codelineno-43-13" name="__codelineno-43-13" href="#__codelineno-43-13"></a><span class="w">        </span><span class="kr">end</span>
</span><span id="__span-43-14"><a id="__codelineno-43-14" name="__codelineno-43-14" href="#__codelineno-43-14"></a><span class="w">    </span><span class="kr">end</span>
</span><span id="__span-43-15"><a id="__codelineno-43-15" name="__codelineno-43-15" href="#__codelineno-43-15"></a><span class="w">    </span><span class="nv">client</span><span class="p">:</span><span class="nf">notify</span><span class="p">(</span><span class="s2">&quot;Characters loaded successfully!&quot;</span><span class="p">)</span>
</span><span id="__span-43-16"><a id="__codelineno-43-16" name="__codelineno-43-16" href="#__codelineno-43-16"></a><span class="w">    </span><span class="kr">else</span>
</span><span id="__span-43-17"><a id="__codelineno-43-17" name="__codelineno-43-17" href="#__codelineno-43-17"></a><span class="w">        </span><span class="nv">client</span><span class="p">:</span><span class="nf">notify</span><span class="p">(</span><span class="s2">&quot;No characters found&quot;</span><span class="p">)</span>
</span><span id="__span-43-18"><a id="__codelineno-43-18" name="__codelineno-43-18" href="#__codelineno-43-18"></a><span class="w">    </span><span class="kr">end</span>
</span><span id="__span-43-19"><a id="__codelineno-43-19" name="__codelineno-43-19" href="#__codelineno-43-19"></a><span class="kr">end</span><span class="p">)</span>
</span></code></pre></div></p>
<p><strong>High Complexity:</strong>
<div class="language-lua highlight"><pre><span></span><code><span id="__span-44-1"><a id="__codelineno-44-1" name="__codelineno-44-1" href="#__codelineno-44-1"></a><span class="c1">-- High: Restore with full error handling and statistics</span>
</span><span id="__span-44-2"><a id="__codelineno-44-2" name="__codelineno-44-2" href="#__codelineno-44-2"></a><span class="nv">lia</span><span class="p">.</span><span class="py">char</span><span class="p">.</span><span class="nf">restore</span><span class="p">(</span><span class="nv">client</span><span class="p">,</span><span class="w"> </span><span class="kr">function</span><span class="p">(</span><span class="nv">characters</span><span class="p">)</span>
</span><span id="__span-44-3"><a id="__codelineno-44-3" name="__codelineno-44-3" href="#__codelineno-44-3"></a><span class="kd">local</span><span class="w"> </span><span class="nv">stats</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-44-4"><a id="__codelineno-44-4" name="__codelineno-44-4" href="#__codelineno-44-4"></a><span class="nv">total</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">#</span><span class="nv">characters</span><span class="p">,</span>
</span><span id="__span-44-5"><a id="__codelineno-44-5" name="__codelineno-44-5" href="#__codelineno-44-5"></a><span class="nv">loaded</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
</span><span id="__span-44-6"><a id="__codelineno-44-6" name="__codelineno-44-6" href="#__codelineno-44-6"></a><span class="nv">banned</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
</span><span id="__span-44-7"><a id="__codelineno-44-7" name="__codelineno-44-7" href="#__codelineno-44-7"></a><span class="nv">invalid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span>
</span><span id="__span-44-8"><a id="__codelineno-44-8" name="__codelineno-44-8" href="#__codelineno-44-8"></a><span class="p">}</span>
</span><span id="__span-44-9"><a id="__codelineno-44-9" name="__codelineno-44-9" href="#__codelineno-44-9"></a><span class="nv">client</span><span class="p">.</span><span class="py">liaCharList</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">characters</span>
</span><span id="__span-44-10"><a id="__codelineno-44-10" name="__codelineno-44-10" href="#__codelineno-44-10"></a><span class="kr">for</span><span class="w"> </span><span class="nv">_</span><span class="p">,</span><span class="w"> </span><span class="nv">charID</span><span class="w"> </span><span class="kr">in</span><span class="w"> </span><span class="nb">ipairs</span><span class="p">(</span><span class="nv">characters</span><span class="p">)</span><span class="w"> </span><span class="kr">do</span>
</span><span id="__span-44-11"><a id="__codelineno-44-11" name="__codelineno-44-11" href="#__codelineno-44-11"></a><span class="w">    </span><span class="kd">local</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">lia</span><span class="p">.</span><span class="py">char</span><span class="p">.</span><span class="nf">getCharacter</span><span class="p">(</span><span class="nv">charID</span><span class="p">)</span>
</span><span id="__span-44-12"><a id="__codelineno-44-12" name="__codelineno-44-12" href="#__codelineno-44-12"></a><span class="w">    </span><span class="kr">if</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="kr">then</span>
</span><span id="__span-44-13"><a id="__codelineno-44-13" name="__codelineno-44-13" href="#__codelineno-44-13"></a><span class="w">        </span><span class="nv">stats</span><span class="p">.</span><span class="py">loaded</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">stats</span><span class="p">.</span><span class="py">loaded</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span>
</span><span id="__span-44-14"><a id="__codelineno-44-14" name="__codelineno-44-14" href="#__codelineno-44-14"></a><span class="w">        </span><span class="c1">-- Check character status</span>
</span><span id="__span-44-15"><a id="__codelineno-44-15" name="__codelineno-44-15" href="#__codelineno-44-15"></a><span class="w">        </span><span class="kr">if</span><span class="w"> </span><span class="nv">character</span><span class="p">:</span><span class="nf">getBanned</span><span class="p">()</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="kr">then</span>
</span><span id="__span-44-16"><a id="__codelineno-44-16" name="__codelineno-44-16" href="#__codelineno-44-16"></a><span class="w">            </span><span class="nv">stats</span><span class="p">.</span><span class="py">banned</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">stats</span><span class="p">.</span><span class="py">banned</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span>
</span><span id="__span-44-17"><a id="__codelineno-44-17" name="__codelineno-44-17" href="#__codelineno-44-17"></a><span class="w">        </span><span class="kr">end</span>
</span><span id="__span-44-18"><a id="__codelineno-44-18" name="__codelineno-44-18" href="#__codelineno-44-18"></a><span class="w">        </span><span class="c1">-- Validate character data</span>
</span><span id="__span-44-19"><a id="__codelineno-44-19" name="__codelineno-44-19" href="#__codelineno-44-19"></a><span class="w">        </span><span class="kr">if</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="nv">character</span><span class="p">:</span><span class="nf">getName</span><span class="p">()</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="nv">character</span><span class="p">:</span><span class="nf">getName</span><span class="p">()</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="w"> </span><span class="kr">then</span>
</span><span id="__span-44-20"><a id="__codelineno-44-20" name="__codelineno-44-20" href="#__codelineno-44-20"></a><span class="w">            </span><span class="nv">stats</span><span class="p">.</span><span class="py">invalid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">stats</span><span class="p">.</span><span class="py">invalid</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span>
</span><span id="__span-44-21"><a id="__codelineno-44-21" name="__codelineno-44-21" href="#__codelineno-44-21"></a><span class="w">            </span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Invalid character data for ID:&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">charID</span><span class="p">)</span>
</span><span id="__span-44-22"><a id="__codelineno-44-22" name="__codelineno-44-22" href="#__codelineno-44-22"></a><span class="w">        </span><span class="kr">end</span>
</span><span id="__span-44-23"><a id="__codelineno-44-23" name="__codelineno-44-23" href="#__codelineno-44-23"></a><span class="w">    </span><span class="kr">end</span>
</span><span id="__span-44-24"><a id="__codelineno-44-24" name="__codelineno-44-24" href="#__codelineno-44-24"></a><span class="kr">end</span>
</span><span id="__span-44-25"><a id="__codelineno-44-25" name="__codelineno-44-25" href="#__codelineno-44-25"></a><span class="c1">-- Log statistics</span>
</span><span id="__span-44-26"><a id="__codelineno-44-26" name="__codelineno-44-26" href="#__codelineno-44-26"></a><span class="nv">lia</span><span class="p">.</span><span class="py">log</span><span class="p">.</span><span class="nf">add</span><span class="p">(</span><span class="s2">&quot;Character restoration: &quot;</span><span class="w"> </span><span class="o">..</span>
</span><span id="__span-44-27"><a id="__codelineno-44-27" name="__codelineno-44-27" href="#__codelineno-44-27"></a><span class="nv">client</span><span class="p">:</span><span class="nf">Name</span><span class="p">()</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="s2">&quot; - Total: &quot;</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="nv">stats</span><span class="p">.</span><span class="py">total</span><span class="w"> </span><span class="o">..</span>
</span><span id="__span-44-28"><a id="__codelineno-44-28" name="__codelineno-44-28" href="#__codelineno-44-28"></a><span class="s2">&quot;, Loaded: &quot;</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="nv">stats</span><span class="p">.</span><span class="py">loaded</span><span class="w"> </span><span class="o">..</span>
</span><span id="__span-44-29"><a id="__codelineno-44-29" name="__codelineno-44-29" href="#__codelineno-44-29"></a><span class="s2">&quot;, Banned: &quot;</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="nv">stats</span><span class="p">.</span><span class="py">banned</span><span class="w"> </span><span class="o">..</span>
</span><span id="__span-44-30"><a id="__codelineno-44-30" name="__codelineno-44-30" href="#__codelineno-44-30"></a><span class="s2">&quot;, Invalid: &quot;</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="nv">stats</span><span class="p">.</span><span class="py">invalid</span>
</span><span id="__span-44-31"><a id="__codelineno-44-31" name="__codelineno-44-31" href="#__codelineno-44-31"></a><span class="p">)</span>
</span><span id="__span-44-32"><a id="__codelineno-44-32" name="__codelineno-44-32" href="#__codelineno-44-32"></a><span class="nv">hook</span><span class="p">.</span><span class="nf">Run</span><span class="p">(</span><span class="s2">&quot;OnCharactersRestored&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">client</span><span class="p">,</span><span class="w"> </span><span class="nv">characters</span><span class="p">,</span><span class="w"> </span><span class="nv">stats</span><span class="p">)</span>
</span><span id="__span-44-33"><a id="__codelineno-44-33" name="__codelineno-44-33" href="#__codelineno-44-33"></a><span class="kr">end</span><span class="p">)</span>
</span></code></pre></div></p>
<hr />
<h3 id="cleanupforplayer">cleanUpForPlayer</h3>
<p><strong>Purpose</strong></p>
<p>Cleans up all loaded characters for a player when they disconnect</p>
<p><strong>When Called</strong></p>
<p>When a player disconnects to free up memory and save data</p>
<p><strong>Parameters</strong></p>
<ul>
<li><code>client</code> (<em>Player</em>): The player to clean up characters for</li>
</ul>
<p><strong>Returns</strong></p>
<ul>
<li>None</li>
</ul>
<p><strong>Realm</strong></p>
<p>Server only</p>
<p><strong>Example Usage</strong></p>
<p><strong>Low Complexity:</strong>
<div class="language-lua highlight"><pre><span></span><code><span id="__span-45-1"><a id="__codelineno-45-1" name="__codelineno-45-1" href="#__codelineno-45-1"></a><span class="c1">-- Simple: Clean up player characters</span>
</span><span id="__span-45-2"><a id="__codelineno-45-2" name="__codelineno-45-2" href="#__codelineno-45-2"></a><span class="nv">lia</span><span class="p">.</span><span class="py">char</span><span class="p">.</span><span class="nf">cleanUpForPlayer</span><span class="p">(</span><span class="nv">client</span><span class="p">)</span>
</span></code></pre></div></p>
<p><strong>Medium Complexity:</strong>
<div class="language-lua highlight"><pre><span></span><code><span id="__span-46-1"><a id="__codelineno-46-1" name="__codelineno-46-1" href="#__codelineno-46-1"></a><span class="c1">-- Medium: Clean up with logging</span>
</span><span id="__span-46-2"><a id="__codelineno-46-2" name="__codelineno-46-2" href="#__codelineno-46-2"></a><span class="nv">lia</span><span class="p">.</span><span class="py">char</span><span class="p">.</span><span class="nf">cleanUpForPlayer</span><span class="p">(</span><span class="nv">client</span><span class="p">)</span>
</span><span id="__span-46-3"><a id="__codelineno-46-3" name="__codelineno-46-3" href="#__codelineno-46-3"></a><span class="kd">local</span><span class="w"> </span><span class="nv">charCount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">table</span><span class="p">.</span><span class="nf">Count</span><span class="p">(</span><span class="nv">client</span><span class="p">.</span><span class="py">liaCharList</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="p">{})</span>
</span><span id="__span-46-4"><a id="__codelineno-46-4" name="__codelineno-46-4" href="#__codelineno-46-4"></a><span class="kr">if</span><span class="w"> </span><span class="nv">charCount</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="kr">then</span>
</span><span id="__span-46-5"><a id="__codelineno-46-5" name="__codelineno-46-5" href="#__codelineno-46-5"></a><span class="w">    </span><span class="nv">lia</span><span class="p">.</span><span class="py">log</span><span class="p">.</span><span class="nf">add</span><span class="p">(</span><span class="s2">&quot;Player disconnect: &quot;</span><span class="w"> </span><span class="o">..</span>
</span><span id="__span-46-6"><a id="__codelineno-46-6" name="__codelineno-46-6" href="#__codelineno-46-6"></a><span class="w">    </span><span class="nv">client</span><span class="p">:</span><span class="nf">Name</span><span class="p">()</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="s2">&quot; disconnected with &quot;</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="nv">charCount</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="s2">&quot; characters loaded&quot;</span>
</span><span id="__span-46-7"><a id="__codelineno-46-7" name="__codelineno-46-7" href="#__codelineno-46-7"></a><span class="w">    </span><span class="p">)</span>
</span><span id="__span-46-8"><a id="__codelineno-46-8" name="__codelineno-46-8" href="#__codelineno-46-8"></a><span class="kr">end</span>
</span></code></pre></div></p>
<p><strong>High Complexity:</strong>
<div class="language-lua highlight"><pre><span></span><code><span id="__span-47-1"><a id="__codelineno-47-1" name="__codelineno-47-1" href="#__codelineno-47-1"></a><span class="c1">-- High: Clean up with statistics and validation</span>
</span><span id="__span-47-2"><a id="__codelineno-47-2" name="__codelineno-47-2" href="#__codelineno-47-2"></a><span class="kd">local</span><span class="w"> </span><span class="kr">function</span><span class="w"> </span><span class="nf">cleanupPlayerCharacters</span><span class="p">(</span><span class="nv">client</span><span class="p">)</span>
</span><span id="__span-47-3"><a id="__codelineno-47-3" name="__codelineno-47-3" href="#__codelineno-47-3"></a><span class="w">    </span><span class="kd">local</span><span class="w"> </span><span class="nv">charList</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">client</span><span class="p">.</span><span class="py">liaCharList</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="p">{}</span>
</span><span id="__span-47-4"><a id="__codelineno-47-4" name="__codelineno-47-4" href="#__codelineno-47-4"></a><span class="w">    </span><span class="kd">local</span><span class="w"> </span><span class="nv">stats</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-47-5"><a id="__codelineno-47-5" name="__codelineno-47-5" href="#__codelineno-47-5"></a><span class="w">    </span><span class="nv">total</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">#</span><span class="nv">charList</span><span class="p">,</span>
</span><span id="__span-47-6"><a id="__codelineno-47-6" name="__codelineno-47-6" href="#__codelineno-47-6"></a><span class="w">    </span><span class="nv">saved</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
</span><span id="__span-47-7"><a id="__codelineno-47-7" name="__codelineno-47-7" href="#__codelineno-47-7"></a><span class="w">    </span><span class="nv">errors</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span>
</span><span id="__span-47-8"><a id="__codelineno-47-8" name="__codelineno-47-8" href="#__codelineno-47-8"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-47-9"><a id="__codelineno-47-9" name="__codelineno-47-9" href="#__codelineno-47-9"></a><span class="w">    </span><span class="kr">for</span><span class="w"> </span><span class="nv">_</span><span class="p">,</span><span class="w"> </span><span class="nv">charID</span><span class="w"> </span><span class="kr">in</span><span class="w"> </span><span class="nb">ipairs</span><span class="p">(</span><span class="nv">charList</span><span class="p">)</span><span class="w"> </span><span class="kr">do</span>
</span><span id="__span-47-10"><a id="__codelineno-47-10" name="__codelineno-47-10" href="#__codelineno-47-10"></a><span class="w">        </span><span class="kd">local</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">lia</span><span class="p">.</span><span class="py">char</span><span class="p">.</span><span class="nf">getCharacter</span><span class="p">(</span><span class="nv">charID</span><span class="p">)</span>
</span><span id="__span-47-11"><a id="__codelineno-47-11" name="__codelineno-47-11" href="#__codelineno-47-11"></a><span class="w">        </span><span class="kr">if</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="kr">then</span>
</span><span id="__span-47-12"><a id="__codelineno-47-12" name="__codelineno-47-12" href="#__codelineno-47-12"></a><span class="w">            </span><span class="c1">-- Save character data</span>
</span><span id="__span-47-13"><a id="__codelineno-47-13" name="__codelineno-47-13" href="#__codelineno-47-13"></a><span class="w">            </span><span class="kd">local</span><span class="w"> </span><span class="nv">success</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">character</span><span class="p">:</span><span class="nf">save</span><span class="p">()</span>
</span><span id="__span-47-14"><a id="__codelineno-47-14" name="__codelineno-47-14" href="#__codelineno-47-14"></a><span class="w">            </span><span class="kr">if</span><span class="w"> </span><span class="nv">success</span><span class="w"> </span><span class="kr">then</span>
</span><span id="__span-47-15"><a id="__codelineno-47-15" name="__codelineno-47-15" href="#__codelineno-47-15"></a><span class="w">                </span><span class="nv">stats</span><span class="p">.</span><span class="py">saved</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">stats</span><span class="p">.</span><span class="py">saved</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span>
</span><span id="__span-47-16"><a id="__codelineno-47-16" name="__codelineno-47-16" href="#__codelineno-47-16"></a><span class="w">                </span><span class="kr">else</span>
</span><span id="__span-47-17"><a id="__codelineno-47-17" name="__codelineno-47-17" href="#__codelineno-47-17"></a><span class="w">                    </span><span class="nv">stats</span><span class="p">.</span><span class="py">errors</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">stats</span><span class="p">.</span><span class="py">errors</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span>
</span><span id="__span-47-18"><a id="__codelineno-47-18" name="__codelineno-47-18" href="#__codelineno-47-18"></a><span class="w">                    </span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Failed to save character&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">charID</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;for&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">client</span><span class="p">:</span><span class="nf">Name</span><span class="p">())</span>
</span><span id="__span-47-19"><a id="__codelineno-47-19" name="__codelineno-47-19" href="#__codelineno-47-19"></a><span class="w">                </span><span class="kr">end</span>
</span><span id="__span-47-20"><a id="__codelineno-47-20" name="__codelineno-47-20" href="#__codelineno-47-20"></a><span class="w">            </span><span class="kr">end</span>
</span><span id="__span-47-21"><a id="__codelineno-47-21" name="__codelineno-47-21" href="#__codelineno-47-21"></a><span class="w">        </span><span class="kr">end</span>
</span><span id="__span-47-22"><a id="__codelineno-47-22" name="__codelineno-47-22" href="#__codelineno-47-22"></a><span class="w">        </span><span class="c1">-- Clean up</span>
</span><span id="__span-47-23"><a id="__codelineno-47-23" name="__codelineno-47-23" href="#__codelineno-47-23"></a><span class="w">        </span><span class="nv">lia</span><span class="p">.</span><span class="py">char</span><span class="p">.</span><span class="nf">cleanUpForPlayer</span><span class="p">(</span><span class="nv">client</span><span class="p">)</span>
</span><span id="__span-47-24"><a id="__codelineno-47-24" name="__codelineno-47-24" href="#__codelineno-47-24"></a><span class="w">        </span><span class="c1">-- Log statistics</span>
</span><span id="__span-47-25"><a id="__codelineno-47-25" name="__codelineno-47-25" href="#__codelineno-47-25"></a><span class="w">        </span><span class="nv">lia</span><span class="p">.</span><span class="py">log</span><span class="p">.</span><span class="nf">add</span><span class="p">(</span><span class="s2">&quot;Player cleanup: &quot;</span><span class="w"> </span><span class="o">..</span>
</span><span id="__span-47-26"><a id="__codelineno-47-26" name="__codelineno-47-26" href="#__codelineno-47-26"></a><span class="w">        </span><span class="nv">client</span><span class="p">:</span><span class="nf">Name</span><span class="p">()</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="s2">&quot; - Characters: &quot;</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="nv">stats</span><span class="p">.</span><span class="py">total</span><span class="w"> </span><span class="o">..</span>
</span><span id="__span-47-27"><a id="__codelineno-47-27" name="__codelineno-47-27" href="#__codelineno-47-27"></a><span class="w">        </span><span class="s2">&quot;, Saved: &quot;</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="nv">stats</span><span class="p">.</span><span class="py">saved</span><span class="w"> </span><span class="o">..</span>
</span><span id="__span-47-28"><a id="__codelineno-47-28" name="__codelineno-47-28" href="#__codelineno-47-28"></a><span class="w">        </span><span class="s2">&quot;, Errors: &quot;</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="nv">stats</span><span class="p">.</span><span class="py">errors</span>
</span><span id="__span-47-29"><a id="__codelineno-47-29" name="__codelineno-47-29" href="#__codelineno-47-29"></a><span class="w">        </span><span class="p">)</span>
</span><span id="__span-47-30"><a id="__codelineno-47-30" name="__codelineno-47-30" href="#__codelineno-47-30"></a><span class="w">    </span><span class="kr">end</span>
</span></code></pre></div></p>
<hr />
<h3 id="delete">delete</h3>
<p><strong>Purpose</strong></p>
<p>Permanently deletes a character from the database and all associated data</p>
<p><strong>When Called</strong></p>
<p>When a character needs to be permanently removed (admin action, etc.)</p>
<p><strong>Parameters</strong></p>
<ul>
<li><code>id</code> (<em>number</em>): The unique identifier of the character to delete</li>
<li><code>client</code> (<em>Player</em>): The player who owns the character (optional)</li>
</ul>
<p><strong>Returns</strong></p>
<ul>
<li>None</li>
</ul>
<p><strong>Realm</strong></p>
<p>Server only</p>
<p><strong>Example Usage</strong></p>
<p><strong>Low Complexity:</strong>
<div class="language-lua highlight"><pre><span></span><code><span id="__span-48-1"><a id="__codelineno-48-1" name="__codelineno-48-1" href="#__codelineno-48-1"></a><span class="c1">-- Simple: Delete a character</span>
</span><span id="__span-48-2"><a id="__codelineno-48-2" name="__codelineno-48-2" href="#__codelineno-48-2"></a><span class="nv">lia</span><span class="p">.</span><span class="py">char</span><span class="p">.</span><span class="nf">delete</span><span class="p">(</span><span class="mi">123</span><span class="p">)</span>
</span></code></pre></div></p>
<p><strong>Medium Complexity:</strong>
<div class="language-lua highlight"><pre><span></span><code><span id="__span-49-1"><a id="__codelineno-49-1" name="__codelineno-49-1" href="#__codelineno-49-1"></a><span class="c1">-- Medium: Delete character with validation</span>
</span><span id="__span-49-2"><a id="__codelineno-49-2" name="__codelineno-49-2" href="#__codelineno-49-2"></a><span class="kd">local</span><span class="w"> </span><span class="nv">charID</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">123</span>
</span><span id="__span-49-3"><a id="__codelineno-49-3" name="__codelineno-49-3" href="#__codelineno-49-3"></a><span class="kd">local</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">lia</span><span class="p">.</span><span class="py">char</span><span class="p">.</span><span class="nf">getCharacter</span><span class="p">(</span><span class="nv">charID</span><span class="p">)</span>
</span><span id="__span-49-4"><a id="__codelineno-49-4" name="__codelineno-49-4" href="#__codelineno-49-4"></a><span class="kr">if</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="kr">then</span>
</span><span id="__span-49-5"><a id="__codelineno-49-5" name="__codelineno-49-5" href="#__codelineno-49-5"></a><span class="w">    </span><span class="kd">local</span><span class="w"> </span><span class="nv">owner</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">character</span><span class="p">:</span><span class="nf">getPlayer</span><span class="p">()</span>
</span><span id="__span-49-6"><a id="__codelineno-49-6" name="__codelineno-49-6" href="#__codelineno-49-6"></a><span class="w">    </span><span class="kr">if</span><span class="w"> </span><span class="nf">IsValid</span><span class="p">(</span><span class="nv">owner</span><span class="p">)</span><span class="w"> </span><span class="kr">then</span>
</span><span id="__span-49-7"><a id="__codelineno-49-7" name="__codelineno-49-7" href="#__codelineno-49-7"></a><span class="w">        </span><span class="nv">owner</span><span class="p">:</span><span class="nf">notify</span><span class="p">(</span><span class="s2">&quot;Your character &#39;&quot;</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="nv">character</span><span class="p">:</span><span class="nf">getName</span><span class="p">()</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="s2">&quot;&#39; has been deleted&quot;</span><span class="p">)</span>
</span><span id="__span-49-8"><a id="__codelineno-49-8" name="__codelineno-49-8" href="#__codelineno-49-8"></a><span class="w">    </span><span class="kr">end</span>
</span><span id="__span-49-9"><a id="__codelineno-49-9" name="__codelineno-49-9" href="#__codelineno-49-9"></a><span class="w">    </span><span class="nv">lia</span><span class="p">.</span><span class="py">char</span><span class="p">.</span><span class="nf">delete</span><span class="p">(</span><span class="nv">charID</span><span class="p">,</span><span class="w"> </span><span class="nv">owner</span><span class="p">)</span>
</span><span id="__span-49-10"><a id="__codelineno-49-10" name="__codelineno-49-10" href="#__codelineno-49-10"></a><span class="kr">end</span>
</span></code></pre></div></p>
<p><strong>High Complexity:</strong>
<div class="language-lua highlight"><pre><span></span><code><span id="__span-50-1"><a id="__codelineno-50-1" name="__codelineno-50-1" href="#__codelineno-50-1"></a><span class="c1">-- High: Delete character with full cleanup and logging</span>
</span><span id="__span-50-2"><a id="__codelineno-50-2" name="__codelineno-50-2" href="#__codelineno-50-2"></a><span class="kd">local</span><span class="w"> </span><span class="kr">function</span><span class="w"> </span><span class="nf">deleteCharacterWithCleanup</span><span class="p">(</span><span class="nv">charID</span><span class="p">,</span><span class="w"> </span><span class="nv">admin</span><span class="p">)</span>
</span><span id="__span-50-3"><a id="__codelineno-50-3" name="__codelineno-50-3" href="#__codelineno-50-3"></a><span class="w">    </span><span class="kd">local</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">lia</span><span class="p">.</span><span class="py">char</span><span class="p">.</span><span class="nf">getCharacter</span><span class="p">(</span><span class="nv">charID</span><span class="p">)</span>
</span><span id="__span-50-4"><a id="__codelineno-50-4" name="__codelineno-50-4" href="#__codelineno-50-4"></a><span class="w">    </span><span class="kr">if</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="kr">then</span>
</span><span id="__span-50-5"><a id="__codelineno-50-5" name="__codelineno-50-5" href="#__codelineno-50-5"></a><span class="w">        </span><span class="kr">if</span><span class="w"> </span><span class="nv">admin</span><span class="w"> </span><span class="kr">then</span>
</span><span id="__span-50-6"><a id="__codelineno-50-6" name="__codelineno-50-6" href="#__codelineno-50-6"></a><span class="w">            </span><span class="nv">admin</span><span class="p">:</span><span class="nf">notifyError</span><span class="p">(</span><span class="s2">&quot;Character not found&quot;</span><span class="p">)</span>
</span><span id="__span-50-7"><a id="__codelineno-50-7" name="__codelineno-50-7" href="#__codelineno-50-7"></a><span class="w">        </span><span class="kr">end</span>
</span><span id="__span-50-8"><a id="__codelineno-50-8" name="__codelineno-50-8" href="#__codelineno-50-8"></a><span class="w">        </span><span class="kr">return</span>
</span><span id="__span-50-9"><a id="__codelineno-50-9" name="__codelineno-50-9" href="#__codelineno-50-9"></a><span class="w">    </span><span class="kr">end</span>
</span><span id="__span-50-10"><a id="__codelineno-50-10" name="__codelineno-50-10" href="#__codelineno-50-10"></a><span class="w">    </span><span class="kd">local</span><span class="w"> </span><span class="nv">owner</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">character</span><span class="p">:</span><span class="nf">getPlayer</span><span class="p">()</span>
</span><span id="__span-50-11"><a id="__codelineno-50-11" name="__codelineno-50-11" href="#__codelineno-50-11"></a><span class="w">    </span><span class="kd">local</span><span class="w"> </span><span class="nv">charName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">character</span><span class="p">:</span><span class="nf">getName</span><span class="p">()</span>
</span><span id="__span-50-12"><a id="__codelineno-50-12" name="__codelineno-50-12" href="#__codelineno-50-12"></a><span class="w">    </span><span class="c1">-- Log deletion</span>
</span><span id="__span-50-13"><a id="__codelineno-50-13" name="__codelineno-50-13" href="#__codelineno-50-13"></a><span class="w">    </span><span class="nv">lia</span><span class="p">.</span><span class="py">log</span><span class="p">.</span><span class="nf">add</span><span class="p">(</span><span class="s2">&quot;Character deletion: &quot;</span><span class="w"> </span><span class="o">..</span>
</span><span id="__span-50-14"><a id="__codelineno-50-14" name="__codelineno-50-14" href="#__codelineno-50-14"></a><span class="w">    </span><span class="s2">&quot;Character &#39;&quot;</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="nv">charName</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="s2">&quot;&#39; (ID: &quot;</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="nv">charID</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="s2">&quot;) deleted by &quot;</span><span class="w"> </span><span class="o">..</span>
</span><span id="__span-50-15"><a id="__codelineno-50-15" name="__codelineno-50-15" href="#__codelineno-50-15"></a><span class="w">    </span><span class="p">(</span><span class="nf">IsValid</span><span class="p">(</span><span class="nv">admin</span><span class="p">)</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="nv">admin</span><span class="p">:</span><span class="nf">Name</span><span class="p">()</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="s2">&quot;System&quot;</span><span class="p">)</span>
</span><span id="__span-50-16"><a id="__codelineno-50-16" name="__codelineno-50-16" href="#__codelineno-50-16"></a><span class="w">    </span><span class="p">)</span>
</span><span id="__span-50-17"><a id="__codelineno-50-17" name="__codelineno-50-17" href="#__codelineno-50-17"></a><span class="w">    </span><span class="c1">-- Notify owner if online</span>
</span><span id="__span-50-18"><a id="__codelineno-50-18" name="__codelineno-50-18" href="#__codelineno-50-18"></a><span class="w">    </span><span class="kr">if</span><span class="w"> </span><span class="nf">IsValid</span><span class="p">(</span><span class="nv">owner</span><span class="p">)</span><span class="w"> </span><span class="kr">then</span>
</span><span id="__span-50-19"><a id="__codelineno-50-19" name="__codelineno-50-19" href="#__codelineno-50-19"></a><span class="w">        </span><span class="nv">owner</span><span class="p">:</span><span class="nf">notify</span><span class="p">(</span><span class="s2">&quot;Your character &#39;&quot;</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="nv">charName</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="s2">&quot;&#39; has been deleted&quot;</span><span class="p">)</span>
</span><span id="__span-50-20"><a id="__codelineno-50-20" name="__codelineno-50-20" href="#__codelineno-50-20"></a><span class="w">    </span><span class="kr">end</span>
</span><span id="__span-50-21"><a id="__codelineno-50-21" name="__codelineno-50-21" href="#__codelineno-50-21"></a><span class="w">    </span><span class="c1">-- Perform deletion</span>
</span><span id="__span-50-22"><a id="__codelineno-50-22" name="__codelineno-50-22" href="#__codelineno-50-22"></a><span class="w">    </span><span class="nv">lia</span><span class="p">.</span><span class="py">char</span><span class="p">.</span><span class="nf">delete</span><span class="p">(</span><span class="nv">charID</span><span class="p">,</span><span class="w"> </span><span class="nv">owner</span><span class="p">)</span>
</span><span id="__span-50-23"><a id="__codelineno-50-23" name="__codelineno-50-23" href="#__codelineno-50-23"></a><span class="w">    </span><span class="c1">-- Notify admin</span>
</span><span id="__span-50-24"><a id="__codelineno-50-24" name="__codelineno-50-24" href="#__codelineno-50-24"></a><span class="w">    </span><span class="kr">if</span><span class="w"> </span><span class="nf">IsValid</span><span class="p">(</span><span class="nv">admin</span><span class="p">)</span><span class="w"> </span><span class="kr">then</span>
</span><span id="__span-50-25"><a id="__codelineno-50-25" name="__codelineno-50-25" href="#__codelineno-50-25"></a><span class="w">        </span><span class="nv">admin</span><span class="p">:</span><span class="nf">notify</span><span class="p">(</span><span class="s2">&quot;Character &#39;&quot;</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="nv">charName</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="s2">&quot;&#39; deleted successfully&quot;</span><span class="p">)</span>
</span><span id="__span-50-26"><a id="__codelineno-50-26" name="__codelineno-50-26" href="#__codelineno-50-26"></a><span class="w">    </span><span class="kr">end</span>
</span><span id="__span-50-27"><a id="__codelineno-50-27" name="__codelineno-50-27" href="#__codelineno-50-27"></a><span class="w">    </span><span class="c1">-- Run deletion hook</span>
</span><span id="__span-50-28"><a id="__codelineno-50-28" name="__codelineno-50-28" href="#__codelineno-50-28"></a><span class="w">    </span><span class="nv">hook</span><span class="p">.</span><span class="nf">Run</span><span class="p">(</span><span class="s2">&quot;OnCharacterDeleted&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">charID</span><span class="p">,</span><span class="w"> </span><span class="nv">charName</span><span class="p">,</span><span class="w"> </span><span class="nv">owner</span><span class="p">,</span><span class="w"> </span><span class="nv">admin</span><span class="p">)</span>
</span><span id="__span-50-29"><a id="__codelineno-50-29" name="__codelineno-50-29" href="#__codelineno-50-29"></a><span class="kr">end</span>
</span></code></pre></div></p>
<hr />
<h3 id="getcharbanned">getCharBanned</h3>
<p><strong>Purpose</strong></p>
<p>Checks if a character is banned and returns the ban timestamp</p>
<p><strong>When Called</strong></p>
<p>When you need to check if a character is banned</p>
<p><strong>Parameters</strong></p>
<ul>
<li><code>charID</code> (<em>number</em>): The unique identifier of the character</li>
</ul>
<p><strong>Returns</strong></p>
<ul>
<li>Number representing ban timestamp (0 if not banned)</li>
</ul>
<p><strong>Realm</strong></p>
<p>Server only</p>
<p><strong>Example Usage</strong></p>
<p><strong>Low Complexity:</strong>
<div class="language-lua highlight"><pre><span></span><code><span id="__span-51-1"><a id="__codelineno-51-1" name="__codelineno-51-1" href="#__codelineno-51-1"></a><span class="c1">-- Simple: Check if character is banned</span>
</span><span id="__span-51-2"><a id="__codelineno-51-2" name="__codelineno-51-2" href="#__codelineno-51-2"></a><span class="kd">local</span><span class="w"> </span><span class="nv">banTime</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">lia</span><span class="p">.</span><span class="py">char</span><span class="p">.</span><span class="nf">getCharBanned</span><span class="p">(</span><span class="mi">123</span><span class="p">)</span>
</span><span id="__span-51-3"><a id="__codelineno-51-3" name="__codelineno-51-3" href="#__codelineno-51-3"></a><span class="kr">if</span><span class="w"> </span><span class="nv">banTime</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="kr">then</span>
</span><span id="__span-51-4"><a id="__codelineno-51-4" name="__codelineno-51-4" href="#__codelineno-51-4"></a><span class="w">    </span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Character is banned since:&quot;</span><span class="p">,</span><span class="w"> </span><span class="nb">os.date</span><span class="p">(</span><span class="s2">&quot;%Y-%m-%d&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">banTime</span><span class="p">))</span>
</span><span id="__span-51-5"><a id="__codelineno-51-5" name="__codelineno-51-5" href="#__codelineno-51-5"></a><span class="kr">end</span>
</span></code></pre></div></p>
<p><strong>Medium Complexity:</strong>
<div class="language-lua highlight"><pre><span></span><code><span id="__span-52-1"><a id="__codelineno-52-1" name="__codelineno-52-1" href="#__codelineno-52-1"></a><span class="c1">-- Medium: Check ban status with validation</span>
</span><span id="__span-52-2"><a id="__codelineno-52-2" name="__codelineno-52-2" href="#__codelineno-52-2"></a><span class="kd">local</span><span class="w"> </span><span class="nv">charID</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">123</span>
</span><span id="__span-52-3"><a id="__codelineno-52-3" name="__codelineno-52-3" href="#__codelineno-52-3"></a><span class="kd">local</span><span class="w"> </span><span class="nv">banTime</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">lia</span><span class="p">.</span><span class="py">char</span><span class="p">.</span><span class="nf">getCharBanned</span><span class="p">(</span><span class="nv">charID</span><span class="p">)</span>
</span><span id="__span-52-4"><a id="__codelineno-52-4" name="__codelineno-52-4" href="#__codelineno-52-4"></a><span class="kr">if</span><span class="w"> </span><span class="nv">banTime</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="kr">then</span>
</span><span id="__span-52-5"><a id="__codelineno-52-5" name="__codelineno-52-5" href="#__codelineno-52-5"></a><span class="w">    </span><span class="kd">local</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">lia</span><span class="p">.</span><span class="py">char</span><span class="p">.</span><span class="nf">getCharacter</span><span class="p">(</span><span class="nv">charID</span><span class="p">)</span>
</span><span id="__span-52-6"><a id="__codelineno-52-6" name="__codelineno-52-6" href="#__codelineno-52-6"></a><span class="w">    </span><span class="kr">if</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="kr">then</span>
</span><span id="__span-52-7"><a id="__codelineno-52-7" name="__codelineno-52-7" href="#__codelineno-52-7"></a><span class="w">        </span><span class="kd">local</span><span class="w"> </span><span class="nv">owner</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">character</span><span class="p">:</span><span class="nf">getPlayer</span><span class="p">()</span>
</span><span id="__span-52-8"><a id="__codelineno-52-8" name="__codelineno-52-8" href="#__codelineno-52-8"></a><span class="w">        </span><span class="kr">if</span><span class="w"> </span><span class="nf">IsValid</span><span class="p">(</span><span class="nv">owner</span><span class="p">)</span><span class="w"> </span><span class="kr">then</span>
</span><span id="__span-52-9"><a id="__codelineno-52-9" name="__codelineno-52-9" href="#__codelineno-52-9"></a><span class="w">            </span><span class="nv">owner</span><span class="p">:</span><span class="nf">notify</span><span class="p">(</span><span class="s2">&quot;Your character is banned&quot;</span><span class="p">)</span>
</span><span id="__span-52-10"><a id="__codelineno-52-10" name="__codelineno-52-10" href="#__codelineno-52-10"></a><span class="w">        </span><span class="kr">end</span>
</span><span id="__span-52-11"><a id="__codelineno-52-11" name="__codelineno-52-11" href="#__codelineno-52-11"></a><span class="w">    </span><span class="kr">end</span>
</span><span id="__span-52-12"><a id="__codelineno-52-12" name="__codelineno-52-12" href="#__codelineno-52-12"></a><span class="kr">end</span>
</span></code></pre></div></p>
<p><strong>High Complexity:</strong>
<div class="language-lua highlight"><pre><span></span><code><span id="__span-53-1"><a id="__codelineno-53-1" name="__codelineno-53-1" href="#__codelineno-53-1"></a><span class="c1">-- High: Batch ban checking with detailed information</span>
</span><span id="__span-53-2"><a id="__codelineno-53-2" name="__codelineno-53-2" href="#__codelineno-53-2"></a><span class="kd">local</span><span class="w"> </span><span class="kr">function</span><span class="w"> </span><span class="nf">checkCharacterBans</span><span class="p">(</span><span class="nv">charIDs</span><span class="p">)</span>
</span><span id="__span-53-3"><a id="__codelineno-53-3" name="__codelineno-53-3" href="#__codelineno-53-3"></a><span class="w">    </span><span class="kd">local</span><span class="w"> </span><span class="nv">banInfo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{}</span>
</span><span id="__span-53-4"><a id="__codelineno-53-4" name="__codelineno-53-4" href="#__codelineno-53-4"></a><span class="w">    </span><span class="kr">for</span><span class="w"> </span><span class="nv">_</span><span class="p">,</span><span class="w"> </span><span class="nv">charID</span><span class="w"> </span><span class="kr">in</span><span class="w"> </span><span class="nb">ipairs</span><span class="p">(</span><span class="nv">charIDs</span><span class="p">)</span><span class="w"> </span><span class="kr">do</span>
</span><span id="__span-53-5"><a id="__codelineno-53-5" name="__codelineno-53-5" href="#__codelineno-53-5"></a><span class="w">        </span><span class="kd">local</span><span class="w"> </span><span class="nv">banTime</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">lia</span><span class="p">.</span><span class="py">char</span><span class="p">.</span><span class="nf">getCharBanned</span><span class="p">(</span><span class="nv">charID</span><span class="p">)</span>
</span><span id="__span-53-6"><a id="__codelineno-53-6" name="__codelineno-53-6" href="#__codelineno-53-6"></a><span class="w">        </span><span class="kr">if</span><span class="w"> </span><span class="nv">banTime</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="kr">then</span>
</span><span id="__span-53-7"><a id="__codelineno-53-7" name="__codelineno-53-7" href="#__codelineno-53-7"></a><span class="w">            </span><span class="kd">local</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">lia</span><span class="p">.</span><span class="py">char</span><span class="p">.</span><span class="nf">getCharacter</span><span class="p">(</span><span class="nv">charID</span><span class="p">)</span>
</span><span id="__span-53-8"><a id="__codelineno-53-8" name="__codelineno-53-8" href="#__codelineno-53-8"></a><span class="w">            </span><span class="nv">banInfo</span><span class="p">[</span><span class="nv">charID</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-53-9"><a id="__codelineno-53-9" name="__codelineno-53-9" href="#__codelineno-53-9"></a><span class="w">            </span><span class="nv">banned</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
</span><span id="__span-53-10"><a id="__codelineno-53-10" name="__codelineno-53-10" href="#__codelineno-53-10"></a><span class="w">            </span><span class="nv">banTime</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">banTime</span><span class="p">,</span>
</span><span id="__span-53-11"><a id="__codelineno-53-11" name="__codelineno-53-11" href="#__codelineno-53-11"></a><span class="w">            </span><span class="nv">banDate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">os.date</span><span class="p">(</span><span class="s2">&quot;%Y-%m-%d %H:%M:%S&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">banTime</span><span class="p">),</span>
</span><span id="__span-53-12"><a id="__codelineno-53-12" name="__codelineno-53-12" href="#__codelineno-53-12"></a><span class="w">            </span><span class="nv">character</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">character</span><span class="p">,</span>
</span><span id="__span-53-13"><a id="__codelineno-53-13" name="__codelineno-53-13" href="#__codelineno-53-13"></a><span class="w">            </span><span class="nv">owner</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="nv">character</span><span class="p">:</span><span class="nf">getPlayer</span><span class="p">()</span>
</span><span id="__span-53-14"><a id="__codelineno-53-14" name="__codelineno-53-14" href="#__codelineno-53-14"></a><span class="w">            </span><span class="p">}</span>
</span><span id="__span-53-15"><a id="__codelineno-53-15" name="__codelineno-53-15" href="#__codelineno-53-15"></a><span class="w">        </span><span class="kr">end</span>
</span><span id="__span-53-16"><a id="__codelineno-53-16" name="__codelineno-53-16" href="#__codelineno-53-16"></a><span class="w">    </span><span class="kr">end</span>
</span><span id="__span-53-17"><a id="__codelineno-53-17" name="__codelineno-53-17" href="#__codelineno-53-17"></a><span class="w">    </span><span class="kr">return</span><span class="w"> </span><span class="nv">banInfo</span>
</span><span id="__span-53-18"><a id="__codelineno-53-18" name="__codelineno-53-18" href="#__codelineno-53-18"></a><span class="kr">end</span>
</span></code></pre></div></p>
<hr />
<h3 id="setchardatabase">setCharDatabase</h3>
<p><strong>Purpose</strong></p>
<p>Sets character data in the database with proper type handling and networking</p>
<p><strong>When Called</strong></p>
<p>When character data needs to be saved to the database</p>
<p><strong>Parameters</strong></p>
<ul>
<li><code>charID</code> (<em>number</em>): The unique identifier of the character</li>
<li><code>field</code> (<em>string</em>): The field name to set</li>
<li><code>value</code> (<em>any</em>): The value to set for the field</li>
</ul>
<p><strong>Returns</strong></p>
<ul>
<li>Boolean indicating success</li>
</ul>
<p><strong>Realm</strong></p>
<p>Server only</p>
<p><strong>Example Usage</strong></p>
<p><strong>Low Complexity:</strong>
<div class="language-lua highlight"><pre><span></span><code><span id="__span-54-1"><a id="__codelineno-54-1" name="__codelineno-54-1" href="#__codelineno-54-1"></a><span class="c1">-- Simple: Set character data</span>
</span><span id="__span-54-2"><a id="__codelineno-54-2" name="__codelineno-54-2" href="#__codelineno-54-2"></a><span class="kd">local</span><span class="w"> </span><span class="nv">success</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">lia</span><span class="p">.</span><span class="py">char</span><span class="p">.</span><span class="nf">setCharDatabase</span><span class="p">(</span><span class="mi">123</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;money&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">1000</span><span class="p">)</span>
</span><span id="__span-54-3"><a id="__codelineno-54-3" name="__codelineno-54-3" href="#__codelineno-54-3"></a><span class="kr">if</span><span class="w"> </span><span class="nv">success</span><span class="w"> </span><span class="kr">then</span>
</span><span id="__span-54-4"><a id="__codelineno-54-4" name="__codelineno-54-4" href="#__codelineno-54-4"></a><span class="w">    </span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Character money updated&quot;</span><span class="p">)</span>
</span><span id="__span-54-5"><a id="__codelineno-54-5" name="__codelineno-54-5" href="#__codelineno-54-5"></a><span class="kr">end</span>
</span></code></pre></div></p>
<p><strong>Medium Complexity:</strong>
<div class="language-lua highlight"><pre><span></span><code><span id="__span-55-1"><a id="__codelineno-55-1" name="__codelineno-55-1" href="#__codelineno-55-1"></a><span class="c1">-- Medium: Set character data with validation</span>
</span><span id="__span-55-2"><a id="__codelineno-55-2" name="__codelineno-55-2" href="#__codelineno-55-2"></a><span class="kd">local</span><span class="w"> </span><span class="nv">charID</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">123</span>
</span><span id="__span-55-3"><a id="__codelineno-55-3" name="__codelineno-55-3" href="#__codelineno-55-3"></a><span class="kd">local</span><span class="w"> </span><span class="nv">newMoney</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5000</span>
</span><span id="__span-55-4"><a id="__codelineno-55-4" name="__codelineno-55-4" href="#__codelineno-55-4"></a><span class="kd">local</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">lia</span><span class="p">.</span><span class="py">char</span><span class="p">.</span><span class="nf">getCharacter</span><span class="p">(</span><span class="nv">charID</span><span class="p">)</span>
</span><span id="__span-55-5"><a id="__codelineno-55-5" name="__codelineno-55-5" href="#__codelineno-55-5"></a><span class="kr">if</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="kr">then</span>
</span><span id="__span-55-6"><a id="__codelineno-55-6" name="__codelineno-55-6" href="#__codelineno-55-6"></a><span class="w">    </span><span class="kd">local</span><span class="w"> </span><span class="nv">oldMoney</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">character</span><span class="p">:</span><span class="nf">getMoney</span><span class="p">()</span>
</span><span id="__span-55-7"><a id="__codelineno-55-7" name="__codelineno-55-7" href="#__codelineno-55-7"></a><span class="w">    </span><span class="kd">local</span><span class="w"> </span><span class="nv">success</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">lia</span><span class="p">.</span><span class="py">char</span><span class="p">.</span><span class="nf">setCharDatabase</span><span class="p">(</span><span class="nv">charID</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;money&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">newMoney</span><span class="p">)</span>
</span><span id="__span-55-8"><a id="__codelineno-55-8" name="__codelineno-55-8" href="#__codelineno-55-8"></a><span class="w">    </span><span class="kr">if</span><span class="w"> </span><span class="nv">success</span><span class="w"> </span><span class="kr">then</span>
</span><span id="__span-55-9"><a id="__codelineno-55-9" name="__codelineno-55-9" href="#__codelineno-55-9"></a><span class="w">        </span><span class="nv">character</span><span class="p">:</span><span class="nf">setMoney</span><span class="p">(</span><span class="nv">newMoney</span><span class="p">)</span>
</span><span id="__span-55-10"><a id="__codelineno-55-10" name="__codelineno-55-10" href="#__codelineno-55-10"></a><span class="w">        </span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Money changed from&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">oldMoney</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;to&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">newMoney</span><span class="p">)</span>
</span><span id="__span-55-11"><a id="__codelineno-55-11" name="__codelineno-55-11" href="#__codelineno-55-11"></a><span class="w">    </span><span class="kr">end</span>
</span><span id="__span-55-12"><a id="__codelineno-55-12" name="__codelineno-55-12" href="#__codelineno-55-12"></a><span class="kr">end</span>
</span></code></pre></div></p>
<p><strong>High Complexity:</strong>
<div class="language-lua highlight"><pre><span></span><code><span id="__span-56-1"><a id="__codelineno-56-1" name="__codelineno-56-1" href="#__codelineno-56-1"></a><span class="c1">-- High: Batch character data updates with error handling</span>
</span><span id="__span-56-2"><a id="__codelineno-56-2" name="__codelineno-56-2" href="#__codelineno-56-2"></a><span class="kd">local</span><span class="w"> </span><span class="kr">function</span><span class="w"> </span><span class="nf">updateCharacterData</span><span class="p">(</span><span class="nv">charID</span><span class="p">,</span><span class="w"> </span><span class="nv">dataUpdates</span><span class="p">)</span>
</span><span id="__span-56-3"><a id="__codelineno-56-3" name="__codelineno-56-3" href="#__codelineno-56-3"></a><span class="w">    </span><span class="kd">local</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">lia</span><span class="p">.</span><span class="py">char</span><span class="p">.</span><span class="nf">getCharacter</span><span class="p">(</span><span class="nv">charID</span><span class="p">)</span>
</span><span id="__span-56-4"><a id="__codelineno-56-4" name="__codelineno-56-4" href="#__codelineno-56-4"></a><span class="w">    </span><span class="kr">if</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="kr">then</span>
</span><span id="__span-56-5"><a id="__codelineno-56-5" name="__codelineno-56-5" href="#__codelineno-56-5"></a><span class="w">        </span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Character not found:&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">charID</span><span class="p">)</span>
</span><span id="__span-56-6"><a id="__codelineno-56-6" name="__codelineno-56-6" href="#__codelineno-56-6"></a><span class="w">        </span><span class="kr">return</span><span class="w"> </span><span class="kc">false</span>
</span><span id="__span-56-7"><a id="__codelineno-56-7" name="__codelineno-56-7" href="#__codelineno-56-7"></a><span class="w">    </span><span class="kr">end</span>
</span><span id="__span-56-8"><a id="__codelineno-56-8" name="__codelineno-56-8" href="#__codelineno-56-8"></a><span class="w">    </span><span class="kd">local</span><span class="w"> </span><span class="nv">results</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{}</span>
</span><span id="__span-56-9"><a id="__codelineno-56-9" name="__codelineno-56-9" href="#__codelineno-56-9"></a><span class="w">    </span><span class="kd">local</span><span class="w"> </span><span class="nv">successCount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span>
</span><span id="__span-56-10"><a id="__codelineno-56-10" name="__codelineno-56-10" href="#__codelineno-56-10"></a><span class="w">    </span><span class="kr">for</span><span class="w"> </span><span class="nv">field</span><span class="p">,</span><span class="w"> </span><span class="nv">value</span><span class="w"> </span><span class="kr">in</span><span class="w"> </span><span class="nb">pairs</span><span class="p">(</span><span class="nv">dataUpdates</span><span class="p">)</span><span class="w"> </span><span class="kr">do</span>
</span><span id="__span-56-11"><a id="__codelineno-56-11" name="__codelineno-56-11" href="#__codelineno-56-11"></a><span class="w">        </span><span class="kd">local</span><span class="w"> </span><span class="nv">success</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">lia</span><span class="p">.</span><span class="py">char</span><span class="p">.</span><span class="nf">setCharDatabase</span><span class="p">(</span><span class="nv">charID</span><span class="p">,</span><span class="w"> </span><span class="nv">field</span><span class="p">,</span><span class="w"> </span><span class="nv">value</span><span class="p">)</span>
</span><span id="__span-56-12"><a id="__codelineno-56-12" name="__codelineno-56-12" href="#__codelineno-56-12"></a><span class="w">        </span><span class="nv">results</span><span class="p">[</span><span class="nv">field</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">success</span>
</span><span id="__span-56-13"><a id="__codelineno-56-13" name="__codelineno-56-13" href="#__codelineno-56-13"></a><span class="w">        </span><span class="kr">if</span><span class="w"> </span><span class="nv">success</span><span class="w"> </span><span class="kr">then</span>
</span><span id="__span-56-14"><a id="__codelineno-56-14" name="__codelineno-56-14" href="#__codelineno-56-14"></a><span class="w">            </span><span class="nv">successCount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">successCount</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span>
</span><span id="__span-56-15"><a id="__codelineno-56-15" name="__codelineno-56-15" href="#__codelineno-56-15"></a><span class="w">            </span><span class="c1">-- Update loaded character if it exists</span>
</span><span id="__span-56-16"><a id="__codelineno-56-16" name="__codelineno-56-16" href="#__codelineno-56-16"></a><span class="w">            </span><span class="kr">if</span><span class="w"> </span><span class="nv">character</span><span class="p">[</span><span class="s2">&quot;set&quot;</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="nv">field</span><span class="p">:</span><span class="nf">sub</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">):</span><span class="nf">upper</span><span class="p">()</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="nv">field</span><span class="p">:</span><span class="nf">sub</span><span class="p">(</span><span class="mi">2</span><span class="p">)]</span><span class="w"> </span><span class="kr">then</span>
</span><span id="__span-56-17"><a id="__codelineno-56-17" name="__codelineno-56-17" href="#__codelineno-56-17"></a><span class="w">                </span><span class="nv">character</span><span class="p">[</span><span class="s2">&quot;set&quot;</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="nv">field</span><span class="p">:</span><span class="nf">sub</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">):</span><span class="nf">upper</span><span class="p">()</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="nv">field</span><span class="p">:</span><span class="nf">sub</span><span class="p">(</span><span class="mi">2</span><span class="p">)](</span><span class="nv">character</span><span class="p">,</span><span class="w"> </span><span class="nv">value</span><span class="p">)</span>
</span><span id="__span-56-18"><a id="__codelineno-56-18" name="__codelineno-56-18" href="#__codelineno-56-18"></a><span class="w">            </span><span class="kr">end</span>
</span><span id="__span-56-19"><a id="__codelineno-56-19" name="__codelineno-56-19" href="#__codelineno-56-19"></a><span class="w">            </span><span class="kr">else</span>
</span><span id="__span-56-20"><a id="__codelineno-56-20" name="__codelineno-56-20" href="#__codelineno-56-20"></a><span class="w">                </span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Failed to update field:&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">field</span><span class="p">)</span>
</span><span id="__span-56-21"><a id="__codelineno-56-21" name="__codelineno-56-21" href="#__codelineno-56-21"></a><span class="w">            </span><span class="kr">end</span>
</span><span id="__span-56-22"><a id="__codelineno-56-22" name="__codelineno-56-22" href="#__codelineno-56-22"></a><span class="w">        </span><span class="kr">end</span>
</span><span id="__span-56-23"><a id="__codelineno-56-23" name="__codelineno-56-23" href="#__codelineno-56-23"></a><span class="w">        </span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Updated&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">successCount</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;out of&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">table</span><span class="p">.</span><span class="nf">Count</span><span class="p">(</span><span class="nv">dataUpdates</span><span class="p">),</span><span class="w"> </span><span class="s2">&quot;fields&quot;</span><span class="p">)</span>
</span><span id="__span-56-24"><a id="__codelineno-56-24" name="__codelineno-56-24" href="#__codelineno-56-24"></a><span class="w">        </span><span class="kr">return</span><span class="w"> </span><span class="nv">successCount</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nv">table</span><span class="p">.</span><span class="nf">Count</span><span class="p">(</span><span class="nv">dataUpdates</span><span class="p">)</span>
</span><span id="__span-56-25"><a id="__codelineno-56-25" name="__codelineno-56-25" href="#__codelineno-56-25"></a><span class="w">    </span><span class="kr">end</span>
</span></code></pre></div></p>
<hr />
<h3 id="unloadcharacter">unloadCharacter</h3>
<p><strong>Purpose</strong></p>
<p>Unloads a character from memory, saving data and cleaning up resources</p>
<p><strong>When Called</strong></p>
<p>When a character needs to be removed from memory to free up resources</p>
<p><strong>Parameters</strong></p>
<ul>
<li><code>charID</code> (<em>number</em>): The unique identifier of the character to unload</li>
</ul>
<p><strong>Returns</strong></p>
<ul>
<li>Boolean indicating success</li>
</ul>
<p><strong>Realm</strong></p>
<p>Server only</p>
<p><strong>Example Usage</strong></p>
<p><strong>Low Complexity:</strong>
<div class="language-lua highlight"><pre><span></span><code><span id="__span-57-1"><a id="__codelineno-57-1" name="__codelineno-57-1" href="#__codelineno-57-1"></a><span class="c1">-- Simple: Unload a character</span>
</span><span id="__span-57-2"><a id="__codelineno-57-2" name="__codelineno-57-2" href="#__codelineno-57-2"></a><span class="kd">local</span><span class="w"> </span><span class="nv">success</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">lia</span><span class="p">.</span><span class="py">char</span><span class="p">.</span><span class="nf">unloadCharacter</span><span class="p">(</span><span class="mi">123</span><span class="p">)</span>
</span><span id="__span-57-3"><a id="__codelineno-57-3" name="__codelineno-57-3" href="#__codelineno-57-3"></a><span class="kr">if</span><span class="w"> </span><span class="nv">success</span><span class="w"> </span><span class="kr">then</span>
</span><span id="__span-57-4"><a id="__codelineno-57-4" name="__codelineno-57-4" href="#__codelineno-57-4"></a><span class="w">    </span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Character unloaded successfully&quot;</span><span class="p">)</span>
</span><span id="__span-57-5"><a id="__codelineno-57-5" name="__codelineno-57-5" href="#__codelineno-57-5"></a><span class="kr">end</span>
</span></code></pre></div></p>
<p><strong>Medium Complexity:</strong>
<div class="language-lua highlight"><pre><span></span><code><span id="__span-58-1"><a id="__codelineno-58-1" name="__codelineno-58-1" href="#__codelineno-58-1"></a><span class="c1">-- Medium: Unload character with validation</span>
</span><span id="__span-58-2"><a id="__codelineno-58-2" name="__codelineno-58-2" href="#__codelineno-58-2"></a><span class="kd">local</span><span class="w"> </span><span class="nv">charID</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">123</span>
</span><span id="__span-58-3"><a id="__codelineno-58-3" name="__codelineno-58-3" href="#__codelineno-58-3"></a><span class="kd">local</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">lia</span><span class="p">.</span><span class="py">char</span><span class="p">.</span><span class="nf">getCharacter</span><span class="p">(</span><span class="nv">charID</span><span class="p">)</span>
</span><span id="__span-58-4"><a id="__codelineno-58-4" name="__codelineno-58-4" href="#__codelineno-58-4"></a><span class="kr">if</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="kr">then</span>
</span><span id="__span-58-5"><a id="__codelineno-58-5" name="__codelineno-58-5" href="#__codelineno-58-5"></a><span class="w">    </span><span class="kd">local</span><span class="w"> </span><span class="nv">owner</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">character</span><span class="p">:</span><span class="nf">getPlayer</span><span class="p">()</span>
</span><span id="__span-58-6"><a id="__codelineno-58-6" name="__codelineno-58-6" href="#__codelineno-58-6"></a><span class="w">    </span><span class="kr">if</span><span class="w"> </span><span class="nf">IsValid</span><span class="p">(</span><span class="nv">owner</span><span class="p">)</span><span class="w"> </span><span class="kr">then</span>
</span><span id="__span-58-7"><a id="__codelineno-58-7" name="__codelineno-58-7" href="#__codelineno-58-7"></a><span class="w">        </span><span class="nv">owner</span><span class="p">:</span><span class="nf">notify</span><span class="p">(</span><span class="s2">&quot;Character is being unloaded&quot;</span><span class="p">)</span>
</span><span id="__span-58-8"><a id="__codelineno-58-8" name="__codelineno-58-8" href="#__codelineno-58-8"></a><span class="w">    </span><span class="kr">end</span>
</span><span id="__span-58-9"><a id="__codelineno-58-9" name="__codelineno-58-9" href="#__codelineno-58-9"></a><span class="w">    </span><span class="kd">local</span><span class="w"> </span><span class="nv">success</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">lia</span><span class="p">.</span><span class="py">char</span><span class="p">.</span><span class="nf">unloadCharacter</span><span class="p">(</span><span class="nv">charID</span><span class="p">)</span>
</span><span id="__span-58-10"><a id="__codelineno-58-10" name="__codelineno-58-10" href="#__codelineno-58-10"></a><span class="w">    </span><span class="kr">if</span><span class="w"> </span><span class="nv">success</span><span class="w"> </span><span class="kr">then</span>
</span><span id="__span-58-11"><a id="__codelineno-58-11" name="__codelineno-58-11" href="#__codelineno-58-11"></a><span class="w">        </span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Character&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">charID</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;unloaded successfully&quot;</span><span class="p">)</span>
</span><span id="__span-58-12"><a id="__codelineno-58-12" name="__codelineno-58-12" href="#__codelineno-58-12"></a><span class="w">    </span><span class="kr">end</span>
</span><span id="__span-58-13"><a id="__codelineno-58-13" name="__codelineno-58-13" href="#__codelineno-58-13"></a><span class="kr">end</span>
</span></code></pre></div></p>
<p><strong>High Complexity:</strong>
<div class="language-lua highlight"><pre><span></span><code><span id="__span-59-1"><a id="__codelineno-59-1" name="__codelineno-59-1" href="#__codelineno-59-1"></a><span class="c1">-- High: Batch character unloading with statistics</span>
</span><span id="__span-59-2"><a id="__codelineno-59-2" name="__codelineno-59-2" href="#__codelineno-59-2"></a><span class="kd">local</span><span class="w"> </span><span class="kr">function</span><span class="w"> </span><span class="nf">unloadCharacters</span><span class="p">(</span><span class="nv">charIDs</span><span class="p">)</span>
</span><span id="__span-59-3"><a id="__codelineno-59-3" name="__codelineno-59-3" href="#__codelineno-59-3"></a><span class="w">    </span><span class="kd">local</span><span class="w"> </span><span class="nv">stats</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-59-4"><a id="__codelineno-59-4" name="__codelineno-59-4" href="#__codelineno-59-4"></a><span class="w">    </span><span class="nv">total</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">#</span><span class="nv">charIDs</span><span class="p">,</span>
</span><span id="__span-59-5"><a id="__codelineno-59-5" name="__codelineno-59-5" href="#__codelineno-59-5"></a><span class="w">    </span><span class="nv">unloaded</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
</span><span id="__span-59-6"><a id="__codelineno-59-6" name="__codelineno-59-6" href="#__codelineno-59-6"></a><span class="w">    </span><span class="nv">errors</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
</span><span id="__span-59-7"><a id="__codelineno-59-7" name="__codelineno-59-7" href="#__codelineno-59-7"></a><span class="w">    </span><span class="nv">skipped</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span>
</span><span id="__span-59-8"><a id="__codelineno-59-8" name="__codelineno-59-8" href="#__codelineno-59-8"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-59-9"><a id="__codelineno-59-9" name="__codelineno-59-9" href="#__codelineno-59-9"></a><span class="w">    </span><span class="kr">for</span><span class="w"> </span><span class="nv">_</span><span class="p">,</span><span class="w"> </span><span class="nv">charID</span><span class="w"> </span><span class="kr">in</span><span class="w"> </span><span class="nb">ipairs</span><span class="p">(</span><span class="nv">charIDs</span><span class="p">)</span><span class="w"> </span><span class="kr">do</span>
</span><span id="__span-59-10"><a id="__codelineno-59-10" name="__codelineno-59-10" href="#__codelineno-59-10"></a><span class="w">        </span><span class="kr">if</span><span class="w"> </span><span class="nv">lia</span><span class="p">.</span><span class="py">char</span><span class="p">.</span><span class="nf">isLoaded</span><span class="p">(</span><span class="nv">charID</span><span class="p">)</span><span class="w"> </span><span class="kr">then</span>
</span><span id="__span-59-11"><a id="__codelineno-59-11" name="__codelineno-59-11" href="#__codelineno-59-11"></a><span class="w">            </span><span class="kd">local</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">lia</span><span class="p">.</span><span class="py">char</span><span class="p">.</span><span class="nf">getCharacter</span><span class="p">(</span><span class="nv">charID</span><span class="p">)</span>
</span><span id="__span-59-12"><a id="__codelineno-59-12" name="__codelineno-59-12" href="#__codelineno-59-12"></a><span class="w">            </span><span class="kr">if</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="kr">then</span>
</span><span id="__span-59-13"><a id="__codelineno-59-13" name="__codelineno-59-13" href="#__codelineno-59-13"></a><span class="w">                </span><span class="c1">-- Check if character is in use</span>
</span><span id="__span-59-14"><a id="__codelineno-59-14" name="__codelineno-59-14" href="#__codelineno-59-14"></a><span class="w">                </span><span class="kd">local</span><span class="w"> </span><span class="nv">owner</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">character</span><span class="p">:</span><span class="nf">getPlayer</span><span class="p">()</span>
</span><span id="__span-59-15"><a id="__codelineno-59-15" name="__codelineno-59-15" href="#__codelineno-59-15"></a><span class="w">                </span><span class="kr">if</span><span class="w"> </span><span class="nf">IsValid</span><span class="p">(</span><span class="nv">owner</span><span class="p">)</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="nv">owner</span><span class="p">:</span><span class="nf">getChar</span><span class="p">()</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="kr">then</span>
</span><span id="__span-59-16"><a id="__codelineno-59-16" name="__codelineno-59-16" href="#__codelineno-59-16"></a><span class="w">                    </span><span class="nv">stats</span><span class="p">.</span><span class="py">skipped</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">stats</span><span class="p">.</span><span class="py">skipped</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span>
</span><span id="__span-59-17"><a id="__codelineno-59-17" name="__codelineno-59-17" href="#__codelineno-59-17"></a><span class="w">                    </span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Skipping active character:&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">charID</span><span class="p">)</span>
</span><span id="__span-59-18"><a id="__codelineno-59-18" name="__codelineno-59-18" href="#__codelineno-59-18"></a><span class="w">                    </span><span class="nv">continue</span>
</span><span id="__span-59-19"><a id="__codelineno-59-19" name="__codelineno-59-19" href="#__codelineno-59-19"></a><span class="w">                </span><span class="kr">end</span>
</span><span id="__span-59-20"><a id="__codelineno-59-20" name="__codelineno-59-20" href="#__codelineno-59-20"></a><span class="w">                </span><span class="kd">local</span><span class="w"> </span><span class="nv">success</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">lia</span><span class="p">.</span><span class="py">char</span><span class="p">.</span><span class="nf">unloadCharacter</span><span class="p">(</span><span class="nv">charID</span><span class="p">)</span>
</span><span id="__span-59-21"><a id="__codelineno-59-21" name="__codelineno-59-21" href="#__codelineno-59-21"></a><span class="w">                </span><span class="kr">if</span><span class="w"> </span><span class="nv">success</span><span class="w"> </span><span class="kr">then</span>
</span><span id="__span-59-22"><a id="__codelineno-59-22" name="__codelineno-59-22" href="#__codelineno-59-22"></a><span class="w">                    </span><span class="nv">stats</span><span class="p">.</span><span class="py">unloaded</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">stats</span><span class="p">.</span><span class="py">unloaded</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span>
</span><span id="__span-59-23"><a id="__codelineno-59-23" name="__codelineno-59-23" href="#__codelineno-59-23"></a><span class="w">                    </span><span class="kr">else</span>
</span><span id="__span-59-24"><a id="__codelineno-59-24" name="__codelineno-59-24" href="#__codelineno-59-24"></a><span class="w">                        </span><span class="nv">stats</span><span class="p">.</span><span class="py">errors</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">stats</span><span class="p">.</span><span class="py">errors</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span>
</span><span id="__span-59-25"><a id="__codelineno-59-25" name="__codelineno-59-25" href="#__codelineno-59-25"></a><span class="w">                    </span><span class="kr">end</span>
</span><span id="__span-59-26"><a id="__codelineno-59-26" name="__codelineno-59-26" href="#__codelineno-59-26"></a><span class="w">                </span><span class="kr">end</span>
</span><span id="__span-59-27"><a id="__codelineno-59-27" name="__codelineno-59-27" href="#__codelineno-59-27"></a><span class="w">            </span><span class="kr">end</span>
</span><span id="__span-59-28"><a id="__codelineno-59-28" name="__codelineno-59-28" href="#__codelineno-59-28"></a><span class="w">        </span><span class="kr">end</span>
</span><span id="__span-59-29"><a id="__codelineno-59-29" name="__codelineno-59-29" href="#__codelineno-59-29"></a><span class="w">        </span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Unloaded&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">stats</span><span class="p">.</span><span class="py">unloaded</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;characters, skipped&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">stats</span><span class="p">.</span><span class="py">skipped</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;active characters&quot;</span><span class="p">)</span>
</span><span id="__span-59-30"><a id="__codelineno-59-30" name="__codelineno-59-30" href="#__codelineno-59-30"></a><span class="w">        </span><span class="kr">return</span><span class="w"> </span><span class="nv">stats</span>
</span><span id="__span-59-31"><a id="__codelineno-59-31" name="__codelineno-59-31" href="#__codelineno-59-31"></a><span class="w">    </span><span class="kr">end</span>
</span></code></pre></div></p>
<hr />
<h3 id="unloadunusedcharacters">unloadUnusedCharacters</h3>
<p><strong>Purpose</strong></p>
<p>Unloads unused characters for a player, keeping only the active one</p>
<p><strong>When Called</strong></p>
<p>When a player switches characters or to free up memory</p>
<p><strong>Parameters</strong></p>
<ul>
<li><code>client</code> (<em>Player</em>): The player to unload unused characters for</li>
<li><code>activeCharID</code> (<em>number</em>): The ID of the character to keep loaded</li>
</ul>
<p><strong>Returns</strong></p>
<ul>
<li>Number of characters unloaded</li>
</ul>
<p><strong>Realm</strong></p>
<p>Server only</p>
<p><strong>Example Usage</strong></p>
<p><strong>Low Complexity:</strong>
<div class="language-lua highlight"><pre><span></span><code><span id="__span-60-1"><a id="__codelineno-60-1" name="__codelineno-60-1" href="#__codelineno-60-1"></a><span class="c1">-- Simple: Unload unused characters</span>
</span><span id="__span-60-2"><a id="__codelineno-60-2" name="__codelineno-60-2" href="#__codelineno-60-2"></a><span class="kd">local</span><span class="w"> </span><span class="nv">unloadedCount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">lia</span><span class="p">.</span><span class="py">char</span><span class="p">.</span><span class="nf">unloadUnusedCharacters</span><span class="p">(</span><span class="nv">client</span><span class="p">,</span><span class="w"> </span><span class="mi">123</span><span class="p">)</span>
</span><span id="__span-60-3"><a id="__codelineno-60-3" name="__codelineno-60-3" href="#__codelineno-60-3"></a><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Unloaded&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">unloadedCount</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;characters&quot;</span><span class="p">)</span>
</span></code></pre></div></p>
<p><strong>Medium Complexity:</strong>
<div class="language-lua highlight"><pre><span></span><code><span id="__span-61-1"><a id="__codelineno-61-1" name="__codelineno-61-1" href="#__codelineno-61-1"></a><span class="c1">-- Medium: Unload with validation</span>
</span><span id="__span-61-2"><a id="__codelineno-61-2" name="__codelineno-61-2" href="#__codelineno-61-2"></a><span class="kd">local</span><span class="w"> </span><span class="nv">activeCharID</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">client</span><span class="p">:</span><span class="nf">getChar</span><span class="p">()</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="nv">client</span><span class="p">:</span><span class="nf">getChar</span><span class="p">():</span><span class="nf">getID</span><span class="p">()</span>
</span><span id="__span-61-3"><a id="__codelineno-61-3" name="__codelineno-61-3" href="#__codelineno-61-3"></a><span class="kr">if</span><span class="w"> </span><span class="nv">activeCharID</span><span class="w"> </span><span class="kr">then</span>
</span><span id="__span-61-4"><a id="__codelineno-61-4" name="__codelineno-61-4" href="#__codelineno-61-4"></a><span class="w">    </span><span class="kd">local</span><span class="w"> </span><span class="nv">unloadedCount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">lia</span><span class="p">.</span><span class="py">char</span><span class="p">.</span><span class="nf">unloadUnusedCharacters</span><span class="p">(</span><span class="nv">client</span><span class="p">,</span><span class="w"> </span><span class="nv">activeCharID</span><span class="p">)</span>
</span><span id="__span-61-5"><a id="__codelineno-61-5" name="__codelineno-61-5" href="#__codelineno-61-5"></a><span class="w">    </span><span class="kr">if</span><span class="w"> </span><span class="nv">unloadedCount</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="kr">then</span>
</span><span id="__span-61-6"><a id="__codelineno-61-6" name="__codelineno-61-6" href="#__codelineno-61-6"></a><span class="w">        </span><span class="nv">client</span><span class="p">:</span><span class="nf">notify</span><span class="p">(</span><span class="s2">&quot;Unloaded &quot;</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="nv">unloadedCount</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="s2">&quot; unused characters&quot;</span><span class="p">)</span>
</span><span id="__span-61-7"><a id="__codelineno-61-7" name="__codelineno-61-7" href="#__codelineno-61-7"></a><span class="w">    </span><span class="kr">end</span>
</span><span id="__span-61-8"><a id="__codelineno-61-8" name="__codelineno-61-8" href="#__codelineno-61-8"></a><span class="kr">end</span>
</span></code></pre></div></p>
<p><strong>High Complexity:</strong>
<div class="language-lua highlight"><pre><span></span><code><span id="__span-62-1"><a id="__codelineno-62-1" name="__codelineno-62-1" href="#__codelineno-62-1"></a><span class="c1">-- High: Unload with detailed logging and statistics</span>
</span><span id="__span-62-2"><a id="__codelineno-62-2" name="__codelineno-62-2" href="#__codelineno-62-2"></a><span class="kd">local</span><span class="w"> </span><span class="kr">function</span><span class="w"> </span><span class="nf">unloadUnusedCharactersWithStats</span><span class="p">(</span><span class="nv">client</span><span class="p">)</span>
</span><span id="__span-62-3"><a id="__codelineno-62-3" name="__codelineno-62-3" href="#__codelineno-62-3"></a><span class="w">    </span><span class="kd">local</span><span class="w"> </span><span class="nv">activeChar</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">client</span><span class="p">:</span><span class="nf">getChar</span><span class="p">()</span>
</span><span id="__span-62-4"><a id="__codelineno-62-4" name="__codelineno-62-4" href="#__codelineno-62-4"></a><span class="w">    </span><span class="kd">local</span><span class="w"> </span><span class="nv">activeCharID</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">activeChar</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="nv">activeChar</span><span class="p">:</span><span class="nf">getID</span><span class="p">()</span>
</span><span id="__span-62-5"><a id="__codelineno-62-5" name="__codelineno-62-5" href="#__codelineno-62-5"></a><span class="w">    </span><span class="kr">if</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="nv">activeCharID</span><span class="w"> </span><span class="kr">then</span>
</span><span id="__span-62-6"><a id="__codelineno-62-6" name="__codelineno-62-6" href="#__codelineno-62-6"></a><span class="w">        </span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;No active character for&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">client</span><span class="p">:</span><span class="nf">Name</span><span class="p">())</span>
</span><span id="__span-62-7"><a id="__codelineno-62-7" name="__codelineno-62-7" href="#__codelineno-62-7"></a><span class="w">        </span><span class="kr">return</span><span class="w"> </span><span class="mi">0</span>
</span><span id="__span-62-8"><a id="__codelineno-62-8" name="__codelineno-62-8" href="#__codelineno-62-8"></a><span class="w">    </span><span class="kr">end</span>
</span><span id="__span-62-9"><a id="__codelineno-62-9" name="__codelineno-62-9" href="#__codelineno-62-9"></a><span class="w">    </span><span class="kd">local</span><span class="w"> </span><span class="nv">charList</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">client</span><span class="p">.</span><span class="py">liaCharList</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="p">{}</span>
</span><span id="__span-62-10"><a id="__codelineno-62-10" name="__codelineno-62-10" href="#__codelineno-62-10"></a><span class="w">    </span><span class="kd">local</span><span class="w"> </span><span class="nv">stats</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-62-11"><a id="__codelineno-62-11" name="__codelineno-62-11" href="#__codelineno-62-11"></a><span class="w">    </span><span class="nv">total</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">#</span><span class="nv">charList</span><span class="p">,</span>
</span><span id="__span-62-12"><a id="__codelineno-62-12" name="__codelineno-62-12" href="#__codelineno-62-12"></a><span class="w">    </span><span class="nv">active</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">activeCharID</span><span class="p">,</span>
</span><span id="__span-62-13"><a id="__codelineno-62-13" name="__codelineno-62-13" href="#__codelineno-62-13"></a><span class="w">    </span><span class="nv">unloaded</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
</span><span id="__span-62-14"><a id="__codelineno-62-14" name="__codelineno-62-14" href="#__codelineno-62-14"></a><span class="w">    </span><span class="nv">errors</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span>
</span><span id="__span-62-15"><a id="__codelineno-62-15" name="__codelineno-62-15" href="#__codelineno-62-15"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-62-16"><a id="__codelineno-62-16" name="__codelineno-62-16" href="#__codelineno-62-16"></a><span class="w">    </span><span class="c1">-- Unload unused characters</span>
</span><span id="__span-62-17"><a id="__codelineno-62-17" name="__codelineno-62-17" href="#__codelineno-62-17"></a><span class="w">    </span><span class="nv">stats</span><span class="p">.</span><span class="py">unloaded</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">lia</span><span class="p">.</span><span class="py">char</span><span class="p">.</span><span class="nf">unloadUnusedCharacters</span><span class="p">(</span><span class="nv">client</span><span class="p">,</span><span class="w"> </span><span class="nv">activeCharID</span><span class="p">)</span>
</span><span id="__span-62-18"><a id="__codelineno-62-18" name="__codelineno-62-18" href="#__codelineno-62-18"></a><span class="w">    </span><span class="c1">-- Log statistics</span>
</span><span id="__span-62-19"><a id="__codelineno-62-19" name="__codelineno-62-19" href="#__codelineno-62-19"></a><span class="w">    </span><span class="nv">lia</span><span class="p">.</span><span class="py">log</span><span class="p">.</span><span class="nf">add</span><span class="p">(</span><span class="s2">&quot;Character unloading: &quot;</span><span class="w"> </span><span class="o">..</span>
</span><span id="__span-62-20"><a id="__codelineno-62-20" name="__codelineno-62-20" href="#__codelineno-62-20"></a><span class="w">    </span><span class="nv">client</span><span class="p">:</span><span class="nf">Name</span><span class="p">()</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="s2">&quot; - Total: &quot;</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="nv">stats</span><span class="p">.</span><span class="py">total</span><span class="w"> </span><span class="o">..</span>
</span><span id="__span-62-21"><a id="__codelineno-62-21" name="__codelineno-62-21" href="#__codelineno-62-21"></a><span class="w">    </span><span class="s2">&quot;, Active: &quot;</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="nv">stats</span><span class="p">.</span><span class="py">active</span><span class="w"> </span><span class="o">..</span>
</span><span id="__span-62-22"><a id="__codelineno-62-22" name="__codelineno-62-22" href="#__codelineno-62-22"></a><span class="w">    </span><span class="s2">&quot;, Unloaded: &quot;</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="nv">stats</span><span class="p">.</span><span class="py">unloaded</span>
</span><span id="__span-62-23"><a id="__codelineno-62-23" name="__codelineno-62-23" href="#__codelineno-62-23"></a><span class="w">    </span><span class="p">)</span>
</span><span id="__span-62-24"><a id="__codelineno-62-24" name="__codelineno-62-24" href="#__codelineno-62-24"></a><span class="w">    </span><span class="kr">return</span><span class="w"> </span><span class="nv">stats</span><span class="p">.</span><span class="py">unloaded</span>
</span><span id="__span-62-25"><a id="__codelineno-62-25" name="__codelineno-62-25" href="#__codelineno-62-25"></a><span class="kr">end</span>
</span></code></pre></div></p>
<hr />
<h3 id="loadsinglecharacter">loadSingleCharacter</h3>
<p><strong>Purpose</strong></p>
<p>Loads a single character from the database with inventory initialization</p>
<p><strong>When Called</strong></p>
<p>When a specific character needs to be loaded on demand</p>
<p><strong>Parameters</strong></p>
<ul>
<li><code>charID</code> (<em>number</em>): The unique identifier of the character to load</li>
<li><code>client</code> (<em>Player</em>): The player requesting the character (optional)</li>
<li><code>callback</code> (<em>function</em>): Function to call when loading is complete</li>
</ul>
<p><strong>Returns</strong></p>
<ul>
<li>None (uses callback for result)</li>
</ul>
<p><strong>Realm</strong></p>
<p>Server only</p>
<p><strong>Example Usage</strong></p>
<p><strong>Low Complexity:</strong>
<div class="language-lua highlight"><pre><span></span><code><span id="__span-63-1"><a id="__codelineno-63-1" name="__codelineno-63-1" href="#__codelineno-63-1"></a><span class="c1">-- Simple: Load a single character</span>
</span><span id="__span-63-2"><a id="__codelineno-63-2" name="__codelineno-63-2" href="#__codelineno-63-2"></a><span class="nv">lia</span><span class="p">.</span><span class="py">char</span><span class="p">.</span><span class="nf">loadSingleCharacter</span><span class="p">(</span><span class="mi">123</span><span class="p">,</span><span class="w"> </span><span class="nv">client</span><span class="p">,</span><span class="w"> </span><span class="kr">function</span><span class="p">(</span><span class="nv">character</span><span class="p">)</span>
</span><span id="__span-63-3"><a id="__codelineno-63-3" name="__codelineno-63-3" href="#__codelineno-63-3"></a><span class="kr">if</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="kr">then</span>
</span><span id="__span-63-4"><a id="__codelineno-63-4" name="__codelineno-63-4" href="#__codelineno-63-4"></a><span class="w">    </span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Character loaded:&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">character</span><span class="p">:</span><span class="nf">getName</span><span class="p">())</span>
</span><span id="__span-63-5"><a id="__codelineno-63-5" name="__codelineno-63-5" href="#__codelineno-63-5"></a><span class="kr">end</span>
</span><span id="__span-63-6"><a id="__codelineno-63-6" name="__codelineno-63-6" href="#__codelineno-63-6"></a><span class="kr">end</span><span class="p">)</span>
</span></code></pre></div></p>
<p><strong>Medium Complexity:</strong>
<div class="language-lua highlight"><pre><span></span><code><span id="__span-64-1"><a id="__codelineno-64-1" name="__codelineno-64-1" href="#__codelineno-64-1"></a><span class="c1">-- Medium: Load character with validation</span>
</span><span id="__span-64-2"><a id="__codelineno-64-2" name="__codelineno-64-2" href="#__codelineno-64-2"></a><span class="kd">local</span><span class="w"> </span><span class="nv">charID</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">123</span>
</span><span id="__span-64-3"><a id="__codelineno-64-3" name="__codelineno-64-3" href="#__codelineno-64-3"></a><span class="nv">lia</span><span class="p">.</span><span class="py">char</span><span class="p">.</span><span class="nf">loadSingleCharacter</span><span class="p">(</span><span class="nv">charID</span><span class="p">,</span><span class="w"> </span><span class="nv">client</span><span class="p">,</span><span class="w"> </span><span class="kr">function</span><span class="p">(</span><span class="nv">character</span><span class="p">)</span>
</span><span id="__span-64-4"><a id="__codelineno-64-4" name="__codelineno-64-4" href="#__codelineno-64-4"></a><span class="kr">if</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="kr">then</span>
</span><span id="__span-64-5"><a id="__codelineno-64-5" name="__codelineno-64-5" href="#__codelineno-64-5"></a><span class="w">    </span><span class="c1">-- Validate character access</span>
</span><span id="__span-64-6"><a id="__codelineno-64-6" name="__codelineno-64-6" href="#__codelineno-64-6"></a><span class="w">    </span><span class="kr">if</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="nv">client</span><span class="p">.</span><span class="py">liaCharList</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="nv">table</span><span class="p">.</span><span class="nf">HasValue</span><span class="p">(</span><span class="nv">client</span><span class="p">.</span><span class="py">liaCharList</span><span class="p">,</span><span class="w"> </span><span class="nv">charID</span><span class="p">)</span><span class="w"> </span><span class="kr">then</span>
</span><span id="__span-64-7"><a id="__codelineno-64-7" name="__codelineno-64-7" href="#__codelineno-64-7"></a><span class="w">        </span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Player doesn&#39;t have access to character&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">charID</span><span class="p">)</span>
</span><span id="__span-64-8"><a id="__codelineno-64-8" name="__codelineno-64-8" href="#__codelineno-64-8"></a><span class="w">        </span><span class="kr">return</span>
</span><span id="__span-64-9"><a id="__codelineno-64-9" name="__codelineno-64-9" href="#__codelineno-64-9"></a><span class="w">    </span><span class="kr">end</span>
</span><span id="__span-64-10"><a id="__codelineno-64-10" name="__codelineno-64-10" href="#__codelineno-64-10"></a><span class="w">    </span><span class="c1">-- Check if character is banned</span>
</span><span id="__span-64-11"><a id="__codelineno-64-11" name="__codelineno-64-11" href="#__codelineno-64-11"></a><span class="w">    </span><span class="kr">if</span><span class="w"> </span><span class="nv">character</span><span class="p">:</span><span class="nf">getBanned</span><span class="p">()</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="kr">then</span>
</span><span id="__span-64-12"><a id="__codelineno-64-12" name="__codelineno-64-12" href="#__codelineno-64-12"></a><span class="w">        </span><span class="nv">client</span><span class="p">:</span><span class="nf">notify</span><span class="p">(</span><span class="s2">&quot;This character is banned&quot;</span><span class="p">)</span>
</span><span id="__span-64-13"><a id="__codelineno-64-13" name="__codelineno-64-13" href="#__codelineno-64-13"></a><span class="w">        </span><span class="kr">return</span>
</span><span id="__span-64-14"><a id="__codelineno-64-14" name="__codelineno-64-14" href="#__codelineno-64-14"></a><span class="w">    </span><span class="kr">end</span>
</span><span id="__span-64-15"><a id="__codelineno-64-15" name="__codelineno-64-15" href="#__codelineno-64-15"></a><span class="w">    </span><span class="nv">client</span><span class="p">:</span><span class="nf">notify</span><span class="p">(</span><span class="s2">&quot;Character loaded successfully&quot;</span><span class="p">)</span>
</span><span id="__span-64-16"><a id="__codelineno-64-16" name="__codelineno-64-16" href="#__codelineno-64-16"></a><span class="w">    </span><span class="kr">else</span>
</span><span id="__span-64-17"><a id="__codelineno-64-17" name="__codelineno-64-17" href="#__codelineno-64-17"></a><span class="w">        </span><span class="nv">client</span><span class="p">:</span><span class="nf">notify</span><span class="p">(</span><span class="s2">&quot;Failed to load character&quot;</span><span class="p">)</span>
</span><span id="__span-64-18"><a id="__codelineno-64-18" name="__codelineno-64-18" href="#__codelineno-64-18"></a><span class="w">    </span><span class="kr">end</span>
</span><span id="__span-64-19"><a id="__codelineno-64-19" name="__codelineno-64-19" href="#__codelineno-64-19"></a><span class="kr">end</span><span class="p">)</span>
</span></code></pre></div></p>
<p><strong>High Complexity:</strong>
<div class="language-lua highlight"><pre><span></span><code><span id="__span-65-1"><a id="__codelineno-65-1" name="__codelineno-65-1" href="#__codelineno-65-1"></a><span class="c1">-- High: Load character with full error handling and statistics</span>
</span><span id="__span-65-2"><a id="__codelineno-65-2" name="__codelineno-65-2" href="#__codelineno-65-2"></a><span class="kd">local</span><span class="w"> </span><span class="kr">function</span><span class="w"> </span><span class="nf">loadCharacterWithValidation</span><span class="p">(</span><span class="nv">charID</span><span class="p">,</span><span class="w"> </span><span class="nv">client</span><span class="p">)</span>
</span><span id="__span-65-3"><a id="__codelineno-65-3" name="__codelineno-65-3" href="#__codelineno-65-3"></a><span class="w">    </span><span class="kr">if</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="nv">charID</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="nf">isnumber</span><span class="p">(</span><span class="nv">charID</span><span class="p">)</span><span class="w"> </span><span class="kr">then</span>
</span><span id="__span-65-4"><a id="__codelineno-65-4" name="__codelineno-65-4" href="#__codelineno-65-4"></a><span class="w">        </span><span class="kr">if</span><span class="w"> </span><span class="nv">client</span><span class="w"> </span><span class="kr">then</span>
</span><span id="__span-65-5"><a id="__codelineno-65-5" name="__codelineno-65-5" href="#__codelineno-65-5"></a><span class="w">            </span><span class="nv">client</span><span class="p">:</span><span class="nf">notifyError</span><span class="p">(</span><span class="s2">&quot;Invalid character ID&quot;</span><span class="p">)</span>
</span><span id="__span-65-6"><a id="__codelineno-65-6" name="__codelineno-65-6" href="#__codelineno-65-6"></a><span class="w">        </span><span class="kr">end</span>
</span><span id="__span-65-7"><a id="__codelineno-65-7" name="__codelineno-65-7" href="#__codelineno-65-7"></a><span class="w">        </span><span class="kr">return</span>
</span><span id="__span-65-8"><a id="__codelineno-65-8" name="__codelineno-65-8" href="#__codelineno-65-8"></a><span class="w">    </span><span class="kr">end</span>
</span><span id="__span-65-9"><a id="__codelineno-65-9" name="__codelineno-65-9" href="#__codelineno-65-9"></a><span class="w">    </span><span class="c1">-- Check if character is already loaded</span>
</span><span id="__span-65-10"><a id="__codelineno-65-10" name="__codelineno-65-10" href="#__codelineno-65-10"></a><span class="w">    </span><span class="kr">if</span><span class="w"> </span><span class="nv">lia</span><span class="p">.</span><span class="py">char</span><span class="p">.</span><span class="nf">isLoaded</span><span class="p">(</span><span class="nv">charID</span><span class="p">)</span><span class="w"> </span><span class="kr">then</span>
</span><span id="__span-65-11"><a id="__codelineno-65-11" name="__codelineno-65-11" href="#__codelineno-65-11"></a><span class="w">        </span><span class="kd">local</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">lia</span><span class="p">.</span><span class="py">char</span><span class="p">.</span><span class="nf">getCharacter</span><span class="p">(</span><span class="nv">charID</span><span class="p">)</span>
</span><span id="__span-65-12"><a id="__codelineno-65-12" name="__codelineno-65-12" href="#__codelineno-65-12"></a><span class="w">        </span><span class="kr">if</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="kr">then</span>
</span><span id="__span-65-13"><a id="__codelineno-65-13" name="__codelineno-65-13" href="#__codelineno-65-13"></a><span class="w">            </span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Character already loaded:&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">charID</span><span class="p">)</span>
</span><span id="__span-65-14"><a id="__codelineno-65-14" name="__codelineno-65-14" href="#__codelineno-65-14"></a><span class="w">            </span><span class="kr">return</span><span class="w"> </span><span class="nv">character</span>
</span><span id="__span-65-15"><a id="__codelineno-65-15" name="__codelineno-65-15" href="#__codelineno-65-15"></a><span class="w">        </span><span class="kr">end</span>
</span><span id="__span-65-16"><a id="__codelineno-65-16" name="__codelineno-65-16" href="#__codelineno-65-16"></a><span class="w">    </span><span class="kr">end</span>
</span><span id="__span-65-17"><a id="__codelineno-65-17" name="__codelineno-65-17" href="#__codelineno-65-17"></a><span class="w">    </span><span class="c1">-- Validate player access</span>
</span><span id="__span-65-18"><a id="__codelineno-65-18" name="__codelineno-65-18" href="#__codelineno-65-18"></a><span class="w">    </span><span class="kr">if</span><span class="w"> </span><span class="nv">client</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="p">(</span><span class="ow">not</span><span class="w"> </span><span class="nv">client</span><span class="p">.</span><span class="py">liaCharList</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="nv">table</span><span class="p">.</span><span class="nf">HasValue</span><span class="p">(</span><span class="nv">client</span><span class="p">.</span><span class="py">liaCharList</span><span class="p">,</span><span class="w"> </span><span class="nv">charID</span><span class="p">))</span><span class="w"> </span><span class="kr">then</span>
</span><span id="__span-65-19"><a id="__codelineno-65-19" name="__codelineno-65-19" href="#__codelineno-65-19"></a><span class="w">        </span><span class="nv">client</span><span class="p">:</span><span class="nf">notifyError</span><span class="p">(</span><span class="s2">&quot;You don&#39;t have access to this character&quot;</span><span class="p">)</span>
</span><span id="__span-65-20"><a id="__codelineno-65-20" name="__codelineno-65-20" href="#__codelineno-65-20"></a><span class="w">        </span><span class="kr">return</span>
</span><span id="__span-65-21"><a id="__codelineno-65-21" name="__codelineno-65-21" href="#__codelineno-65-21"></a><span class="w">    </span><span class="kr">end</span>
</span><span id="__span-65-22"><a id="__codelineno-65-22" name="__codelineno-65-22" href="#__codelineno-65-22"></a><span class="w">    </span><span class="nv">lia</span><span class="p">.</span><span class="py">char</span><span class="p">.</span><span class="nf">loadSingleCharacter</span><span class="p">(</span><span class="nv">charID</span><span class="p">,</span><span class="w"> </span><span class="nv">client</span><span class="p">,</span><span class="w"> </span><span class="kr">function</span><span class="p">(</span><span class="nv">character</span><span class="p">)</span>
</span><span id="__span-65-23"><a id="__codelineno-65-23" name="__codelineno-65-23" href="#__codelineno-65-23"></a><span class="w">    </span><span class="kr">if</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="kr">then</span>
</span><span id="__span-65-24"><a id="__codelineno-65-24" name="__codelineno-65-24" href="#__codelineno-65-24"></a><span class="w">        </span><span class="c1">-- Validate character data</span>
</span><span id="__span-65-25"><a id="__codelineno-65-25" name="__codelineno-65-25" href="#__codelineno-65-25"></a><span class="w">        </span><span class="kr">if</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="nv">character</span><span class="p">:</span><span class="nf">getName</span><span class="p">()</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="nv">character</span><span class="p">:</span><span class="nf">getName</span><span class="p">()</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="w"> </span><span class="kr">then</span>
</span><span id="__span-65-26"><a id="__codelineno-65-26" name="__codelineno-65-26" href="#__codelineno-65-26"></a><span class="w">            </span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Invalid character data for ID:&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">charID</span><span class="p">)</span>
</span><span id="__span-65-27"><a id="__codelineno-65-27" name="__codelineno-65-27" href="#__codelineno-65-27"></a><span class="w">            </span><span class="kr">return</span>
</span><span id="__span-65-28"><a id="__codelineno-65-28" name="__codelineno-65-28" href="#__codelineno-65-28"></a><span class="w">        </span><span class="kr">end</span>
</span><span id="__span-65-29"><a id="__codelineno-65-29" name="__codelineno-65-29" href="#__codelineno-65-29"></a><span class="w">        </span><span class="c1">-- Check ban status</span>
</span><span id="__span-65-30"><a id="__codelineno-65-30" name="__codelineno-65-30" href="#__codelineno-65-30"></a><span class="w">        </span><span class="kr">if</span><span class="w"> </span><span class="nv">character</span><span class="p">:</span><span class="nf">getBanned</span><span class="p">()</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="kr">then</span>
</span><span id="__span-65-31"><a id="__codelineno-65-31" name="__codelineno-65-31" href="#__codelineno-65-31"></a><span class="w">            </span><span class="kr">if</span><span class="w"> </span><span class="nv">client</span><span class="w"> </span><span class="kr">then</span>
</span><span id="__span-65-32"><a id="__codelineno-65-32" name="__codelineno-65-32" href="#__codelineno-65-32"></a><span class="w">                </span><span class="nv">client</span><span class="p">:</span><span class="nf">notify</span><span class="p">(</span><span class="s2">&quot;This character is banned&quot;</span><span class="p">)</span>
</span><span id="__span-65-33"><a id="__codelineno-65-33" name="__codelineno-65-33" href="#__codelineno-65-33"></a><span class="w">            </span><span class="kr">end</span>
</span><span id="__span-65-34"><a id="__codelineno-65-34" name="__codelineno-65-34" href="#__codelineno-65-34"></a><span class="w">            </span><span class="kr">return</span>
</span><span id="__span-65-35"><a id="__codelineno-65-35" name="__codelineno-65-35" href="#__codelineno-65-35"></a><span class="w">        </span><span class="kr">end</span>
</span><span id="__span-65-36"><a id="__codelineno-65-36" name="__codelineno-65-36" href="#__codelineno-65-36"></a><span class="w">        </span><span class="c1">-- Log successful load</span>
</span><span id="__span-65-37"><a id="__codelineno-65-37" name="__codelineno-65-37" href="#__codelineno-65-37"></a><span class="w">        </span><span class="nv">lia</span><span class="p">.</span><span class="py">log</span><span class="p">.</span><span class="nf">add</span><span class="p">(</span><span class="s2">&quot;Character loaded: &quot;</span><span class="w"> </span><span class="o">..</span>
</span><span id="__span-65-38"><a id="__codelineno-65-38" name="__codelineno-65-38" href="#__codelineno-65-38"></a><span class="w">        </span><span class="s2">&quot;Character &#39;&quot;</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="nv">character</span><span class="p">:</span><span class="nf">getName</span><span class="p">()</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="s2">&quot;&#39; (ID: &quot;</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="nv">charID</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="s2">&quot;) loaded for &quot;</span><span class="w"> </span><span class="o">..</span>
</span><span id="__span-65-39"><a id="__codelineno-65-39" name="__codelineno-65-39" href="#__codelineno-65-39"></a><span class="w">        </span><span class="p">(</span><span class="nv">client</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="nv">client</span><span class="p">:</span><span class="nf">Name</span><span class="p">()</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="s2">&quot;System&quot;</span><span class="p">)</span>
</span><span id="__span-65-40"><a id="__codelineno-65-40" name="__codelineno-65-40" href="#__codelineno-65-40"></a><span class="w">        </span><span class="p">)</span>
</span><span id="__span-65-41"><a id="__codelineno-65-41" name="__codelineno-65-41" href="#__codelineno-65-41"></a><span class="w">        </span><span class="c1">-- Run load hook</span>
</span><span id="__span-65-42"><a id="__codelineno-65-42" name="__codelineno-65-42" href="#__codelineno-65-42"></a><span class="w">        </span><span class="nv">hook</span><span class="p">.</span><span class="nf">Run</span><span class="p">(</span><span class="s2">&quot;OnCharacterLoaded&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">character</span><span class="p">,</span><span class="w"> </span><span class="nv">client</span><span class="p">)</span>
</span><span id="__span-65-43"><a id="__codelineno-65-43" name="__codelineno-65-43" href="#__codelineno-65-43"></a><span class="w">        </span><span class="kr">if</span><span class="w"> </span><span class="nv">client</span><span class="w"> </span><span class="kr">then</span>
</span><span id="__span-65-44"><a id="__codelineno-65-44" name="__codelineno-65-44" href="#__codelineno-65-44"></a><span class="w">            </span><span class="nv">client</span><span class="p">:</span><span class="nf">notify</span><span class="p">(</span><span class="s2">&quot;Character &#39;&quot;</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="nv">character</span><span class="p">:</span><span class="nf">getName</span><span class="p">()</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="s2">&quot;&#39; loaded successfully&quot;</span><span class="p">)</span>
</span><span id="__span-65-45"><a id="__codelineno-65-45" name="__codelineno-65-45" href="#__codelineno-65-45"></a><span class="w">        </span><span class="kr">end</span>
</span><span id="__span-65-46"><a id="__codelineno-65-46" name="__codelineno-65-46" href="#__codelineno-65-46"></a><span class="w">        </span><span class="kr">else</span>
</span><span id="__span-65-47"><a id="__codelineno-65-47" name="__codelineno-65-47" href="#__codelineno-65-47"></a><span class="w">            </span><span class="kr">if</span><span class="w"> </span><span class="nv">client</span><span class="w"> </span><span class="kr">then</span>
</span><span id="__span-65-48"><a id="__codelineno-65-48" name="__codelineno-65-48" href="#__codelineno-65-48"></a><span class="w">                </span><span class="nv">client</span><span class="p">:</span><span class="nf">notifyError</span><span class="p">(</span><span class="s2">&quot;Failed to load character&quot;</span><span class="p">)</span>
</span><span id="__span-65-49"><a id="__codelineno-65-49" name="__codelineno-65-49" href="#__codelineno-65-49"></a><span class="w">            </span><span class="kr">end</span>
</span><span id="__span-65-50"><a id="__codelineno-65-50" name="__codelineno-65-50" href="#__codelineno-65-50"></a><span class="w">            </span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Failed to load character:&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">charID</span><span class="p">)</span>
</span><span id="__span-65-51"><a id="__codelineno-65-51" name="__codelineno-65-51" href="#__codelineno-65-51"></a><span class="w">        </span><span class="kr">end</span>
</span><span id="__span-65-52"><a id="__codelineno-65-52" name="__codelineno-65-52" href="#__codelineno-65-52"></a><span class="w">    </span><span class="kr">end</span><span class="p">)</span>
</span><span id="__span-65-53"><a id="__codelineno-65-53" name="__codelineno-65-53" href="#__codelineno-65-53"></a><span class="kr">end</span>
</span></code></pre></div></p>
<hr />












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../lia.bars/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Bars Library">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Bars Library
              </div>
            </div>
          </a>
        
        
          
          <a href="../lia.chatbox/" class="md-footer__link md-footer__link--next" aria-label="Next: Chatbox Library">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Chatbox Library
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-progress" data-md-component="progress" role="progressbar"></div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.instant", "navigation.instant.prefetch", "navigation.instant.progress", "navigation.instant.preview", "navigation.tracking", "navigation.tabs", "navigation.tabs.sticky", "navigation.sections", "navigation.expand", "navigation.path", "navigation.prune", "navigation.indexes", "toc.follow", "toc.integrate", "navigation.top", "header.autohide", "announce.dismiss", "navigation.footer", "search.suggest", "search.highlight", "search.share", "content.code.copy", "content.code.select", "content.code.annotate", "content.tabs.link", "content.tooltips", "content.footnote.tooltips"], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
    
  </body>
</html>